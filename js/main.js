/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map

/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * License
 * -------
 * Creative Commons Attribution 2.5 License:
 * http://creativecommons.org/licenses/by/2.5/
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 */


/*
  CanvasImage Class
  Class that wraps the html image element and canvas.
  It also simplifies some of the canvas context manipulation
  with a set of helper functions.
*/
var CanvasImage = function (image) {
    this.canvas  = document.createElement('canvas');
    this.context = this.canvas.getContext('2d');

    document.body.appendChild(this.canvas);

    this.width  = this.canvas.width  = image.width;
    this.height = this.canvas.height = image.height;

    this.context.drawImage(image, 0, 0, this.width, this.height);
};

CanvasImage.prototype.clear = function () {
    this.context.clearRect(0, 0, this.width, this.height);
};

CanvasImage.prototype.update = function (imageData) {
    this.context.putImageData(imageData, 0, 0);
};

CanvasImage.prototype.getPixelCount = function () {
    return this.width * this.height;
};

CanvasImage.prototype.getImageData = function () {
    return this.context.getImageData(0, 0, this.width, this.height);
};

CanvasImage.prototype.removeCanvas = function () {
    this.canvas.parentNode.removeChild(this.canvas);
};


var ColorThief = function () {};

/*
 * getColor(sourceImage[, quality])
 * returns {r: num, g: num, b: num}
 *
 * Use the median cut algorithm provided by quantize.js to cluster similar
 * colors and return the base color from the largest cluster.
 *
 * Quality is an optional argument. It needs to be an integer. 0 is the highest quality settings.
 * 10 is the default. There is a trade-off between quality and speed. The bigger the number, the
 * faster a color will be returned but the greater the likelihood that it will not be the visually
 * most dominant color.
 *
 * */
ColorThief.prototype.getColor = function(sourceImage, quality) {
    var palette       = this.getPalette(sourceImage, 5, quality);
    var dominantColor = palette[0];
    return dominantColor;
};


/*
 * getPalette(sourceImage[, colorCount, quality])
 * returns array[ {r: num, g: num, b: num}, {r: num, g: num, b: num}, ...]
 *
 * Use the median cut algorithm provided by quantize.js to cluster similar colors.
 *
 * colorCount determines the size of the palette; the number of colors returned. If not set, it
 * defaults to 10.
 *
 * BUGGY: Function does not always return the requested amount of colors. It can be +/- 2.
 *
 * quality is an optional argument. It needs to be an integer. 0 is the highest quality settings.
 * 10 is the default. There is a trade-off between quality and speed. The bigger the number, the
 * faster the palette generation but the greater the likelihood that colors will be missed.
 *
 *
 */
ColorThief.prototype.getPalette = function(sourceImage, colorCount, quality) {

    if (typeof colorCount === 'undefined') {
        colorCount = 10;
    }
    if (typeof quality === 'undefined') {
        quality = 10;
    }

    // Create custom CanvasImage object
    var image      = new CanvasImage(sourceImage);
    var imageData  = image.getImageData();
    var pixels     = imageData.data;
    var pixelCount = image.getPixelCount();

    // Store the RGB values in an array format suitable for quantize function
    var pixelArray = [];
    for (var i = 0, offset, r, g, b, a; i < pixelCount; i = i + quality) {
        offset = i * 4;
        r = pixels[offset + 0];
        g = pixels[offset + 1];
        b = pixels[offset + 2];
        a = pixels[offset + 3];
        // If pixel is mostly opaque and not white
        if (a >= 125) {
            if (!(r > 250 && g > 250 && b > 250)) {
                pixelArray.push([r, g, b]);
            }
        }
    }
	
	//edited: return #fff if blank or white image
	//https://github.com/lokesh/color-thief/issues/40
	if (pixelArray.length === 0)
		pixelArray = [255, 255, 255];

    // Send array to quantize function which clusters values
    // using median cut algorithm
    var cmap    = MMCQ.quantize(pixelArray, colorCount);
    var palette = cmap.palette();

    // Clean up
    image.removeCanvas();

    return palette;
};




/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */

// fill out a couple protovis dependencies
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */
if (!pv) {
    var pv = {
        map: function(array, f) {
          var o = {};
          return f ? array.map(function(d, i) { o.index = i; return f.call(o, d); }) : array.slice();
        },
        naturalOrder: function(a, b) {
            return (a < b) ? -1 : ((a > b) ? 1 : 0);
        },
        sum: function(array, f) {
          var o = {};
          return array.reduce(f ? function(p, d, i) { o.index = i; return p + f.call(o, d); } : function(p, d) { return p + d; }, 0);
        },
        max: function(array, f) {
          return Math.max.apply(null, f ? pv.map(array, f) : array);
        }
    };
}



/**
 * Basic Javascript port of the MMCQ (modified median cut quantization)
 * algorithm from the Leptonica library (http://www.leptonica.com/).
 * Returns a color map you can use to map original pixels to the reduced
 * palette. Still a work in progress.
 *
 * @author Nick Rabinowitz
 * @example

// array of pixels as [R,G,B] arrays
var myPixels = [[190,197,190], [202,204,200], [207,214,210], [211,214,211], [205,207,207]
                // etc
                ];
var maxColors = 4;

var cmap = MMCQ.quantize(myPixels, maxColors);
var newPalette = cmap.palette();
var newPixels = myPixels.map(function(p) {
    return cmap.map(p);
});

 */
var MMCQ = (function() {
    // private constants
    var sigbits = 5,
        rshift = 8 - sigbits,
        maxIterations = 1000,
        fractByPopulations = 0.75;

    // get reduced-space color index for a pixel
    function getColorIndex(r, g, b) {
        return (r << (2 * sigbits)) + (g << sigbits) + b;
    }

    // Simple priority queue
    function PQueue(comparator) {
        var contents = [],
            sorted = false;

        function sort() {
            contents.sort(comparator);
            sorted = true;
        }

        return {
            push: function(o) {
                contents.push(o);
                sorted = false;
            },
            peek: function(index) {
                if (!sorted) sort();
                if (index===undefined) index = contents.length - 1;
                return contents[index];
            },
            pop: function() {
                if (!sorted) sort();
                return contents.pop();
            },
            size: function() {
                return contents.length;
            },
            map: function(f) {
                return contents.map(f);
            },
            debug: function() {
                if (!sorted) sort();
                return contents;
            }
        };
    }

    // 3d color space box
    function VBox(r1, r2, g1, g2, b1, b2, histo) {
        var vbox = this;
        vbox.r1 = r1;
        vbox.r2 = r2;
        vbox.g1 = g1;
        vbox.g2 = g2;
        vbox.b1 = b1;
        vbox.b2 = b2;
        vbox.histo = histo;
    }
    VBox.prototype = {
        volume: function(force) {
            var vbox = this;
            if (!vbox._volume || force) {
                vbox._volume = ((vbox.r2 - vbox.r1 + 1) * (vbox.g2 - vbox.g1 + 1) * (vbox.b2 - vbox.b1 + 1));
            }
            return vbox._volume;
        },
        count: function(force) {
            var vbox = this,
                histo = vbox.histo;
            if (!vbox._count_set || force) {
                var npix = 0,
                    i, j, k;
                for (i = vbox.r1; i <= vbox.r2; i++) {
                    for (j = vbox.g1; j <= vbox.g2; j++) {
                        for (k = vbox.b1; k <= vbox.b2; k++) {
                             index = getColorIndex(i,j,k);
                             npix += (histo[index] || 0);
                        }
                    }
                }
                vbox._count = npix;
                vbox._count_set = true;
            }
            return vbox._count;
        },
        copy: function() {
            var vbox = this;
            return new VBox(vbox.r1, vbox.r2, vbox.g1, vbox.g2, vbox.b1, vbox.b2, vbox.histo);
        },
        avg: function(force) {
            var vbox = this,
                histo = vbox.histo;
            if (!vbox._avg || force) {
                var ntot = 0,
                    mult = 1 << (8 - sigbits),
                    rsum = 0,
                    gsum = 0,
                    bsum = 0,
                    hval,
                    i, j, k, histoindex;
                for (i = vbox.r1; i <= vbox.r2; i++) {
                    for (j = vbox.g1; j <= vbox.g2; j++) {
                        for (k = vbox.b1; k <= vbox.b2; k++) {
                             histoindex = getColorIndex(i,j,k);
                             hval = histo[histoindex] || 0;
                             ntot += hval;
                             rsum += (hval * (i + 0.5) * mult);
                             gsum += (hval * (j + 0.5) * mult);
                             bsum += (hval * (k + 0.5) * mult);
                        }
                    }
                }
                if (ntot) {
                    vbox._avg = [~~(rsum/ntot), ~~(gsum/ntot), ~~(bsum/ntot)];
                } else {
//                    console.log('empty box');
                    vbox._avg = [
                        ~~(mult * (vbox.r1 + vbox.r2 + 1) / 2),
                        ~~(mult * (vbox.g1 + vbox.g2 + 1) / 2),
                        ~~(mult * (vbox.b1 + vbox.b2 + 1) / 2)
                    ];
                }
            }
            return vbox._avg;
        },
        contains: function(pixel) {
            var vbox = this,
                rval = pixel[0] >> rshift;
                gval = pixel[1] >> rshift;
                bval = pixel[2] >> rshift;
            return (rval >= vbox.r1 && rval <= vbox.r2 &&
                    gval >= vbox.g1 && gval <= vbox.g2 &&
                    bval >= vbox.b1 && bval <= vbox.b2);
        }
    };

    // Color map
    function CMap() {
        this.vboxes = new PQueue(function(a,b) {
            return pv.naturalOrder(
                a.vbox.count()*a.vbox.volume(),
                b.vbox.count()*b.vbox.volume()
            );
        });
    }
    CMap.prototype = {
        push: function(vbox) {
            this.vboxes.push({
                vbox: vbox,
                color: vbox.avg()
            });
        },
        palette: function() {
            return this.vboxes.map(function(vb) { return vb.color; });
        },
        size: function() {
            return this.vboxes.size();
        },
        map: function(color) {
            var vboxes = this.vboxes;
            for (var i=0; i<vboxes.size(); i++) {
                if (vboxes.peek(i).vbox.contains(color)) {
                    return vboxes.peek(i).color;
                }
            }
            return this.nearest(color);
        },
        nearest: function(color) {
            var vboxes = this.vboxes,
                d1, d2, pColor;
            for (var i=0; i<vboxes.size(); i++) {
                d2 = Math.sqrt(
                    Math.pow(color[0] - vboxes.peek(i).color[0], 2) +
                    Math.pow(color[1] - vboxes.peek(i).color[1], 2) +
                    Math.pow(color[2] - vboxes.peek(i).color[2], 2)
                );
                if (d2 < d1 || d1 === undefined) {
                    d1 = d2;
                    pColor = vboxes.peek(i).color;
                }
            }
            return pColor;
        },
        forcebw: function() {
            // XXX: won't  work yet
            var vboxes = this.vboxes;
            vboxes.sort(function(a,b) { return pv.naturalOrder(pv.sum(a.color), pv.sum(b.color));});

            // force darkest color to black if everything < 5
            var lowest = vboxes[0].color;
            if (lowest[0] < 5 && lowest[1] < 5 && lowest[2] < 5)
                vboxes[0].color = [0,0,0];

            // force lightest color to white if everything > 251
            var idx = vboxes.length-1,
                highest = vboxes[idx].color;
            if (highest[0] > 251 && highest[1] > 251 && highest[2] > 251)
                vboxes[idx].color = [255,255,255];
        }
    };

    // histo (1-d array, giving the number of pixels in
    // each quantized region of color space), or null on error
    function getHisto(pixels) {
        var histosize = 1 << (3 * sigbits),
            histo = new Array(histosize),
            index, rval, gval, bval;
        pixels.forEach(function(pixel) {
            rval = pixel[0] >> rshift;
            gval = pixel[1] >> rshift;
            bval = pixel[2] >> rshift;
            index = getColorIndex(rval, gval, bval);
            histo[index] = (histo[index] || 0) + 1;
        });
        return histo;
    }

    function vboxFromPixels(pixels, histo) {
        var rmin=1000000, rmax=0,
            gmin=1000000, gmax=0,
            bmin=1000000, bmax=0,
            rval, gval, bval;
        // find min/max
        pixels.forEach(function(pixel) {
            rval = pixel[0] >> rshift;
            gval = pixel[1] >> rshift;
            bval = pixel[2] >> rshift;
            if (rval < rmin) rmin = rval;
            else if (rval > rmax) rmax = rval;
            if (gval < gmin) gmin = gval;
            else if (gval > gmax) gmax = gval;
            if (bval < bmin) bmin = bval;
            else if (bval > bmax)  bmax = bval;
        });
        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, histo);
    }

    function medianCutApply(histo, vbox) {
        if (!vbox.count()) return;

        var rw = vbox.r2 - vbox.r1 + 1,
            gw = vbox.g2 - vbox.g1 + 1,
            bw = vbox.b2 - vbox.b1 + 1,
            maxw = pv.max([rw, gw, bw]);
        // only one pixel, no split
        if (vbox.count() == 1) {
            return [vbox.copy()];
        }
        /* Find the partial sum arrays along the selected axis. */
        var total = 0,
            partialsum = [],
            lookaheadsum = [],
            i, j, k, sum, index;
        if (maxw == rw) {
            for (i = vbox.r1; i <= vbox.r2; i++) {
                sum = 0;
                for (j = vbox.g1; j <= vbox.g2; j++) {
                    for (k = vbox.b1; k <= vbox.b2; k++) {
                        index = getColorIndex(i,j,k);
                        sum += (histo[index] || 0);
                    }
                }
                total += sum;
                partialsum[i] = total;
            }
        }
        else if (maxw == gw) {
            for (i = vbox.g1; i <= vbox.g2; i++) {
                sum = 0;
                for (j = vbox.r1; j <= vbox.r2; j++) {
                    for (k = vbox.b1; k <= vbox.b2; k++) {
                        index = getColorIndex(j,i,k);
                        sum += (histo[index] || 0);
                    }
                }
                total += sum;
                partialsum[i] = total;
            }
        }
        else {  /* maxw == bw */
            for (i = vbox.b1; i <= vbox.b2; i++) {
                sum = 0;
                for (j = vbox.r1; j <= vbox.r2; j++) {
                    for (k = vbox.g1; k <= vbox.g2; k++) {
                        index = getColorIndex(j,k,i);
                        sum += (histo[index] || 0);
                    }
                }
                total += sum;
                partialsum[i] = total;
            }
        }
        partialsum.forEach(function(d,i) {
            lookaheadsum[i] = total-d;
        });
        function doCut(color) {
            var dim1 = color + '1',
                dim2 = color + '2',
                left, right, vbox1, vbox2, d2, count2=0;
            for (i = vbox[dim1]; i <= vbox[dim2]; i++) {
                if (partialsum[i] > total / 2) {
                    vbox1 = vbox.copy();
                    vbox2 = vbox.copy();
                    left = i - vbox[dim1];
                    right = vbox[dim2] - i;
                    if (left <= right)
                        d2 = Math.min(vbox[dim2] - 1, ~~(i + right / 2));
                    else d2 = Math.max(vbox[dim1], ~~(i - 1 - left / 2));
                    // avoid 0-count boxes
                    while (!partialsum[d2]) d2++;
                    count2 = lookaheadsum[d2];
                    while (!count2 && partialsum[d2-1]) count2 = lookaheadsum[--d2];
                    // set dimensions
                    vbox1[dim2] = d2;
                    vbox2[dim1] = vbox1[dim2] + 1;
//                    console.log('vbox counts:', vbox.count(), vbox1.count(), vbox2.count());
                    return [vbox1, vbox2];
                }
            }

        }
        // determine the cut planes
        return maxw == rw ? doCut('r') :
            maxw == gw ? doCut('g') :
            doCut('b');
    }

    function quantize(pixels, maxcolors) {
        // short-circuit
        if (!pixels.length || maxcolors < 2 || maxcolors > 256) {
//            console.log('wrong number of maxcolors');
            return false;
        }

        // XXX: check color content and convert to grayscale if insufficient

        var histo = getHisto(pixels),
            histosize = 1 << (3 * sigbits);

        // check that we aren't below maxcolors already
        var nColors = 0;
        histo.forEach(function() { nColors++; });
        if (nColors <= maxcolors) {
            // XXX: generate the new colors from the histo and return
        }

        // get the beginning vbox from the colors
        var vbox = vboxFromPixels(pixels, histo),
            pq = new PQueue(function(a,b) { return pv.naturalOrder(a.count(), b.count()); });
        pq.push(vbox);

        // inner function to do the iteration
        function iter(lh, target) {
            var ncolors = 1,
                niters = 0,
                vbox;
            while (niters < maxIterations) {
                vbox = lh.pop();
                if (!vbox.count())  { /* just put it back */
                    lh.push(vbox);
                    niters++;
                    continue;
                }
                // do the cut
                var vboxes = medianCutApply(histo, vbox),
                    vbox1 = vboxes[0],
                    vbox2 = vboxes[1];

                if (!vbox1) {
//                    console.log("vbox1 not defined; shouldn't happen!");
                    return;
                }
                lh.push(vbox1);
                if (vbox2) {  /* vbox2 can be null */
                    lh.push(vbox2);
                    ncolors++;
                }
                if (ncolors >= target) return;
                if (niters++ > maxIterations) {
//                    console.log("infinite loop; perhaps too few pixels!");
                    return;
                }
            }
        }

        // first set of colors, sorted by population
        iter(pq, fractByPopulations * maxcolors);

        // Re-sort by the product of pixel occupancy times the size in color space.
        var pq2 = new PQueue(function(a,b) {
            return pv.naturalOrder(a.count()*a.volume(), b.count()*b.volume());
        });
        while (pq.size()) {
            pq2.push(pq.pop());
        }

        // next set - generate the median cuts using the (npix * vol) sorting.
        iter(pq2, maxcolors - pq2.size());

        // calculate the actual colors
        var cmap = new CMap();
        while (pq2.size()) {
            cmap.push(pq2.pop());
        }

        return cmap;
    }

    return {
        quantize: quantize
    };
})();
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty("name")&&m.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+m.extraData[d].name+'">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type="hidden" name="'+d+'">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement("form").submit;x.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",c),r?w.setAttribute("target",r):f.removeAttr("target"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,"image"==y.type&&(m.extraData[b+".x"]=w.clk_x,m.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr("id"),u=t?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form="'+s+'"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&"file"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:"",type:d.type})}else null!==m&&"undefined"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});
/*! Respond.js v1.4.2: min/max-width media query polyfill
 * Copyright 2014 Scott Jehl
 * Licensed under MIT
 * http://j.mp/respondjs */

!function(a){"use strict";a.matchMedia=a.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(a.document)}(this),function(a){"use strict";function b(){v(!0)}var c={};a.respond=c,c.update=function(){};var d=[],e=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),f=function(a,b){var c=e();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},g=function(a){return a.replace(c.regex.minmaxwh,"").match(c.regex.other)};if(c.ajax=f,c.queue=d,c.unsupportedmq=g,c.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},c.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var h,i,j,k=a.document,l=k.documentElement,m=[],n=[],o=[],p={},q=30,r=k.getElementsByTagName("head")[0]||l,s=k.getElementsByTagName("base")[0],t=r.getElementsByTagName("link"),u=function(){var a,b=k.createElement("div"),c=k.body,d=l.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=k.createElement("body"),c.style.background="none"),l.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&l.insertBefore(c,l.firstChild),a=b.offsetWidth,f?l.removeChild(c):c.removeChild(b),l.style.fontSize=d,e&&(c.style.fontSize=e),a=j=parseFloat(a)},v=function(b){var c="clientWidth",d=l[c],e="CSS1Compat"===k.compatMode&&d||k.body[c]||d,f={},g=t[t.length-1],p=(new Date).getTime();if(b&&h&&q>p-h)return a.clearTimeout(i),i=a.setTimeout(v,q),void 0;h=p;for(var s in m)if(m.hasOwnProperty(s)){var w=m[s],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?j||u():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?j||u():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(n[w.rules]))}for(var C in o)o.hasOwnProperty(C)&&o[C]&&o[C].parentNode===r&&r.removeChild(o[C]);o.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=k.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,r.insertBefore(E,g.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(k.createTextNode(F)),o.push(E)}},w=function(a,b,d){var e=a.replace(c.regex.comments,"").replace(c.regex.keyframes,"").match(c.regex.media),f=e&&e.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=function(a){return a.replace(c.regex.urls,"$1"+b+"$2$3")},i=!f&&d;b.length&&(b+="/"),i&&(f=1);for(var j=0;f>j;j++){var k,l,o,p;i?(k=d,n.push(h(a))):(k=e[j].match(c.regex.findStyles)&&RegExp.$1,n.push(RegExp.$2&&h(RegExp.$2))),o=k.split(","),p=o.length;for(var q=0;p>q;q++)l=o[q],g(l)||m.push({media:l.split("(")[0].match(c.regex.only)&&RegExp.$2||"all",rules:n.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(c.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(c.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}v()},x=function(){if(d.length){var b=d.shift();f(b.href,function(c){w(c,b.href,b.media),p[b.href]=!0,a.setTimeout(function(){x()},0)})}},y=function(){for(var b=0;b<t.length;b++){var c=t[b],e=c.href,f=c.media,g=c.rel&&"stylesheet"===c.rel.toLowerCase();e&&g&&!p[e]&&(c.styleSheet&&c.styleSheet.rawCssText?(w(c.styleSheet.rawCssText,e,f),p[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!s||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),d.push({href:e,media:f})))}x()};y(),c.update=y,c.getEmValue=u,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this);
// = third-party/ipinit.js
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=e17787d3f4053af8aa1b)
 * Config saved to config.json and https://gist.github.com/e17787d3f4053af8aa1b
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new o(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.2.0",o.prototype.close=function(e){function i(){n.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var n=t(s);e&&e.preventDefault(),n.length||(n=o.hasClass("alert")?o:o.parent()),n.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.button"),n="object"==typeof e&&e;s||o.data("bs.button",s=new i(this,n)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,s=o.is("input")?"val":"html",n=o.data();e+="Text",null==n.resetText&&o.data("resetText",o[s]()),o[s](null==n[e]?this.options[e]:n[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.carousel"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),r="string"==typeof e?e:n.slide;s||o.data("bs.carousel",s=new i(this,n)),"number"==typeof e?s.to(e):r?s[r]():n.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,o=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):o==e?this.pause().cycle():this.slide(e>o?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||o[e](),n=this.interval,r="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[a]()}if(s.hasClass("active"))return this.sliding=!1;var h=s[0],p=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(p),!p.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(r),s.addClass(r),o.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*o.css("transition-duration").slice(0,-1))):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),n&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var o,s=t(this),n=t(s.attr("data-target")||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var r=t.extend({},n.data(),s.data()),a=s.attr("data-slide-to");a&&(r.interval=!1),e.call(n,r),a&&n.data("bs.carousel").to(a),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(n).each(function(){var o=i(t(this)),s={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||o.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new r(this)),"string"==typeof e&&o[e].call(i)})}var s=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.2.0",r.prototype.toggle=function(o){var s=t(this);if(!s.is(".disabled, :disabled")){var n=i(s),r=n.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(n.trigger(o=t.Event("show.bs.dropdown",a)),o.isDefaultPrevented())return;s.trigger("focus"),n.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var s=i(o),r=s.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&s.find(n).trigger("focus"),o.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var h=l.index(l.filter(":focus"));38==e.keyCode&&h>0&&h--,40==e.keyCode&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),r=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,r)),"string"==typeof e?n[e](o):r.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var n=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(150):n()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),r=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tooltip"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.tooltip",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),n=s.length;n--;){var r=s[n];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),n=this.getUID(this.type);this.setContent(),s.attr("id",n),this.$element.attr("aria-describedby",n),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(r);l&&(r=r.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(l){var d=r,f=this.$element.parent(),u=this.getPosition(f);r="bottom"==r&&h.top+h.height+c-u.scroll>u.height?"top":"top"==r&&h.top-u.scroll-c<0?"bottom":"right"==r&&h.right+p>u.width?"left":"left"==r&&h.left-p<u.left?"right":r,s.removeClass(d).addClass(r)}var g=this.getCalculatedOffset(r,h,p,c);this.applyPlacement(g,r);var v=function(){o.$element.trigger("shown.bs."+o.type),o.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(150):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),s=o[0].offsetWidth,n=o[0].offsetHeight,r=parseInt(o.css("margin-top"),10),a=parseInt(o.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=n&&(e.top=e.top+n-h);var p=this.getViewportAdjustedDelta(i,e,l,h);p.left?e.left+=p.left:e.top+=p.top;var c=p.left?2*p.left-s+l:2*p.top-n+h,d=p.left?"left":"top",f=p.left?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&o.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,o=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:o?t(window).width():e.outerWidth(),height:o?t(window).height():e.outerHeight()},o?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var s={top:0,left:0};if(!this.$viewport)return s;var n=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-n-r.scroll,l=e.top+n-r.scroll+o;a<r.top?s.top=r.top-a:l>r.top+r.height&&(s.top=r.top+r.height-l)}else{var h=e.left-n,p=e.left+n+i;h<r.left?s.left=r.left-h:p>r.width&&(s.left=r.left+r.width-p)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.popover"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.popover",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tab");s||o.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],n=t.Event("show.bs.tab",{relatedTarget:s});if(e.trigger(n),!n.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(e,i,o){function s(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),o&&o()}var n=i.find("> .active"),r=o&&t.support.transition&&n.hasClass("fade");r?n.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),n.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.affix"),n="object"==typeof e&&e;s||o.data("bs.affix",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),o=this.$target.scrollTop(),s=this.$element.offset(),n=this.options.offset,r=n.top,a=n.bottom;"object"!=typeof n&&(a=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var l=null!=this.unpin&&o+this.unpin<=s.top?!1:null!=a&&s.top+this.$element.height()>=e-a?"bottom":null!=r&&r>=o?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var h="affix"+(l?"-"+l:""),p=t.Event(h+".bs.affix");this.$element.trigger(p),p.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(t.Event(h.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-a}))}}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},o.offsetBottom&&(o.offset.bottom=o.offsetBottom),o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.collapse"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);!s&&n.toggle&&"show"==e&&(e=!e),s||o.data("bs.collapse",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var o=this.$parent&&this.$parent.find("> .panel > .in");if(o&&o.length){var s=o.data("bs.collapse");if(s&&s.transitioning)return;e.call(o,"hide"),s||o.data("bs.collapse",null)}var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var a=t.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(350)[n](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(350):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var o=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o,s=t(this),n=s.attr("data-target")||i.preventDefault()||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""),r=t(n),a=r.data("bs.collapse"),l=a?"toggle":s.data(),h=s.attr("data-parent"),p=h&&t(h);a&&a.transitioning||(p&&p.find('[data-toggle="collapse"][data-parent="'+h+'"]').not(s).addClass("collapsed"),s[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(r,l)})}(jQuery),+function(t){"use strict";function e(i,o){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),s=o.data("bs.scrollspy"),n="object"==typeof i&&i;s||o.data("bs.scrollspy",s=new e(this,n)),"string"==typeof i&&s[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),s=o.data("target")||o.attr("href"),n=/^#./.test(s)&&t(s);return n&&n.length&&n.is(":visible")&&[[n[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,n=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return r!=(t=n[n.length-1])&&this.activate(t);if(r&&e<=s[0])return r!=(t=n[0])&&this.activate(t);for(t=s.length;t--;)r!=n[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);


/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s});


/*!
 * Masonry PACKAGED v3.2.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){}function d(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function e(c){function e(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||f("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=c("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var g=document.body||document.documentElement;g.appendChild(e);var h=j(e);l=200===b(h.width),g.removeChild(e)}}}function h(a){if(e(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var c=j(a);if("none"===c.display)return d();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var h=f.isBorderBox=!(!k||!c[k]||"border-box"!==c[k]),m=0,n=g.length;n>m;m++){var o=g[m],p=c[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=h&&l,y=b(c.width);y!==!1&&(f.width=y+(x?0:r+v));var z=b(c.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return h}var f="undefined"==typeof console?c:function(a){console.error(a)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("desandro-get-style-property")):a.getSize=e(a.getStyleProperty)}(window),function(a){function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=a.getComputedStyle,g=f?function(a){return f(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return void(i&&i.error("Bad "+this.constructor.namespace+" element: "+a));this.element=a,this.options=b({},this.constructor.defaults),this.option(c);var d=++r;this.element.outlayerGUID=d,s[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var r=0,s={};return q.namespace="outlayer",q.Item=p,q.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){this.resizeContainer()},q.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){this.isResizeBound&&c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},q.prototype.needsResizeLayout=function(){var a=n(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},q.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete s[e],delete this.element.outlayerGUID,j&&j.removeData(this.element,this.constructor.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&s[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,d.defaults=b({},q.defaults),b(d.defaults,c),d.prototype.settings={},d.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):"object"==typeof exports?module.exports=g(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){function b(a,b){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size")):a.Masonry=b(a.Outlayer,a.getSize)}(window);


/*!
   --------------------------------
   Infinite Scroll
   --------------------------------
   + https://github.com/paulirish/infinite-scroll
   + version 2.1.0
   + Copyright 2011/12 Paul Irish & Luke Shumard
   + Licensed under the MIT license

   + Documentation: http://infinite-scroll.com/
*/
;(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e,t){"use strict";e.infinitescroll=function(n,r,i){this.element=e(i);if(!this._create(n,r)){this.failed=true}};e.infinitescroll.defaults={loading:{finished:t,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:t},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,isBeyondMaxPage:false,currPage:1},debug:false,behavior:t,binder:e(window),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:t,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:t,path:t,prefill:false,maxPage:t};e.infinitescroll.prototype={_binding:function(n){var r=this,i=r.options;i.v="2.0b2.120520";if(!!i.behavior&&this["_binding_"+i.behavior]!==t){this["_binding_"+i.behavior].call(this);return}if(n!=="bind"&&n!=="unbind"){this._debug("Binding value  "+n+" not valid");return false}if(n==="unbind"){this.options.binder.unbind("smartscroll.infscr."+r.options.infid)}else{this.options.binder[n]("smartscroll.infscr."+r.options.infid,function(){r.scroll()})}this._debug("Binding",n)},_create:function(r,i){var s=e.extend(true,{},e.infinitescroll.defaults,r);this.options=s;var o=e(window);var u=this;if(!u._validate(r)){return false}var a=e(s.nextSelector).attr("href");if(!a){this._debug("Navigation selector not found");return false}s.path=s.path||this._determinepath(a);s.contentSelector=s.contentSelector||this.element;s.loading.selector=s.loading.selector||s.contentSelector;s.loading.msg=s.loading.msg||e('<div id="infscr-loading"><img alt="Loading..." src="'+s.loading.img+'" /><div>'+s.loading.msgText+"</div></div>");(new Image).src=s.loading.img;if(s.pixelsFromNavToBottom===t){s.pixelsFromNavToBottom=e(document).height()-e(s.navSelector).offset().top;this._debug("pixelsFromNavToBottom: "+s.pixelsFromNavToBottom)}var f=this;s.loading.start=s.loading.start||function(){e(s.navSelector).hide();s.loading.msg.appendTo(s.loading.selector).show(s.loading.speed,e.proxy(function(){this.beginAjax(s)},f))};s.loading.finished=s.loading.finished||function(){if(!s.state.isBeyondMaxPage)s.loading.msg.fadeOut(s.loading.speed)};s.callback=function(n,r,u){if(!!s.behavior&&n["_callback_"+s.behavior]!==t){n["_callback_"+s.behavior].call(e(s.contentSelector)[0],r,u)}if(i){i.call(e(s.contentSelector)[0],r,s,u)}if(s.prefill){o.bind("resize.infinite-scroll",n._prefill)}};if(r.debug){if(Function.prototype.bind&&(typeof console==="object"||typeof console==="function")&&typeof console.log==="object"){["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}}this._setup();if(s.prefill){this._prefill()}return true},_prefill:function(){function i(){return e(n.options.contentSelector).height()<=r.height()}var n=this;var r=e(window);this._prefill=function(){if(i()){n.scroll()}r.bind("resize.infinite-scroll",function(){if(i()){r.unbind("resize.infinite-scroll");n.scroll()}})};this._prefill()},_debug:function(){if(true!==this.options.debug){return}if(typeof console!=="undefined"&&typeof console.log==="function"){if(Array.prototype.slice.call(arguments).length===1&&typeof Array.prototype.slice.call(arguments)[0]==="string"){console.log(Array.prototype.slice.call(arguments).toString())}else{console.log(Array.prototype.slice.call(arguments))}}else if(!Function.prototype.bind&&typeof console!=="undefined"&&typeof console.log==="object"){Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}},_determinepath:function(n){var r=this.options;if(!!r.behavior&&this["_determinepath_"+r.behavior]!==t){return this["_determinepath_"+r.behavior].call(this,n)}if(!!r.pathParse){this._debug("pathParse manual");return r.pathParse(n,this.options.state.currPage+1)}else if(n.match(/^(.*?)\b2\b(.*?$)/)){n=n.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else if(n.match(/^(.*?)2(.*?$)/)){if(n.match(/^(.*?page=)2(\/.*|$)/)){n=n.match(/^(.*?page=)2(\/.*|$)/).slice(1);return n}n=n.match(/^(.*?)2(.*?$)/).slice(1)}else{if(n.match(/^(.*?page=)1(\/.*|$)/)){n=n.match(/^(.*?page=)1(\/.*|$)/).slice(1);return n}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");r.state.isInvalidPage=true}}this._debug("determinePath",n);return n},_error:function(n){var r=this.options;if(!!r.behavior&&this["_error_"+r.behavior]!==t){this["_error_"+r.behavior].call(this,n);return}if(n!=="destroy"&&n!=="end"){n="unknown"}this._debug("Error",n);if(n==="end"||r.state.isBeyondMaxPage){this._showdonemsg()}r.state.isDone=true;r.state.currPage=1;r.state.isPaused=false;r.state.isBeyondMaxPage=false;this._binding("unbind")},_loadcallback:function(r,i,s){var o=this.options,u=this.options.callback,a=o.state.isDone?"done":!o.appendCallback?"no-append":"append",f;if(!!o.behavior&&this["_loadcallback_"+o.behavior]!==t){this["_loadcallback_"+o.behavior].call(this,r,i);return}switch(a){case"done":this._showdonemsg();return false;case"no-append":if(o.dataType==="html"){i="<div>"+i+"</div>";i=e(i).find(o.itemSelector)}if(i.length===0){return this._error("end")}break;case"append":var l=r.children();if(l.length===0){return this._error("end")}f=document.createDocumentFragment();while(r[0].firstChild){f.appendChild(r[0].firstChild)}this._debug("contentSelector",e(o.contentSelector)[0]);e(o.contentSelector)[0].appendChild(f);i=l.get();break}o.loading.finished.call(e(o.contentSelector)[0],o);if(o.animate){var c=e(window).scrollTop()+e(o.loading.msg).height()+o.extraScrollPx+"px";e("html,body").animate({scrollTop:c},800,function(){o.state.isDuringAjax=false})}if(!o.animate){o.state.isDuringAjax=false}u(this,i,s);if(o.prefill){this._prefill()}},_nearbottom:function(){var r=this.options,i=0+e(document).height()-r.binder.scrollTop()-e(window).height();if(!!r.behavior&&this["_nearbottom_"+r.behavior]!==t){return this["_nearbottom_"+r.behavior].call(this)}this._debug("math:",i,r.pixelsFromNavToBottom);return i-r.bufferPx<r.pixelsFromNavToBottom},_pausing:function(n){var r=this.options;if(!!r.behavior&&this["_pausing_"+r.behavior]!==t){this["_pausing_"+r.behavior].call(this,n);return}if(n!=="pause"&&n!=="resume"&&n!==null){this._debug("Invalid argument. Toggling pause value instead")}n=n&&(n==="pause"||n==="resume")?n:"toggle";switch(n){case"pause":r.state.isPaused=true;break;case"resume":r.state.isPaused=false;break;case"toggle":r.state.isPaused=!r.state.isPaused;break}this._debug("Paused",r.state.isPaused);return false},_setup:function(){var n=this.options;if(!!n.behavior&&this["_setup_"+n.behavior]!==t){this["_setup_"+n.behavior].call(this);return}this._binding("bind");return false},_showdonemsg:function(){var r=this.options;if(!!r.behavior&&this["_showdonemsg_"+r.behavior]!==t){this["_showdonemsg_"+r.behavior].call(this);return}r.loading.msg.find("img").hide().parent().find("div").html(r.loading.finishedMsg).animate({opacity:1},2e3,function(){e(this).parent().fadeOut(r.loading.speed)});r.errorCallback.call(e(r.contentSelector)[0],"done")},_validate:function(n){for(var r in n){if(r.indexOf&&r.indexOf("Selector")>-1&&e(n[r]).length===0){this._debug("Your "+r+" found no elements.");return false}}return true},bind:function(){this._binding("bind")},destroy:function(){this.options.state.isDestroyed=true;this.options.loading.finished();return this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(r){var i=this,s=r.path,o,u,a,f;r.state.currPage++;if(r.maxPage!==t&&r.state.currPage>r.maxPage){r.state.isBeyondMaxPage=true;this.destroy();return}o=e(r.contentSelector).is("table, tbody")?e("<tbody/>"):e("<div/>");u=typeof s==="function"?s(r.state.currPage):s.join(r.state.currPage);i._debug("heading into ajax",u);a=r.dataType==="html"||r.dataType==="json"?r.dataType:"html+callback";if(r.appendCallback&&r.dataType==="html"){a+="+callback"}switch(a){case"html+callback":i._debug("Using HTML via .load() method");o.load(u+" "+r.itemSelector,t,function(t){i._loadcallback(o,t,u)});break;case"html":i._debug("Using "+a.toUpperCase()+" via $.ajax() method");e.ajax({url:u,dataType:r.dataType,complete:function(t,n){f=typeof t.isResolved!=="undefined"?t.isResolved():n==="success"||n==="notmodified";if(f){i._loadcallback(o,t.responseText,u)}else{i._error("end")}}});break;case"json":i._debug("Using "+a.toUpperCase()+" via $.ajax() method");e.ajax({dataType:"json",type:"GET",url:u,success:function(e,n,s){f=typeof s.isResolved!=="undefined"?s.isResolved():n==="success"||n==="notmodified";if(r.appendCallback){if(r.template!==t){var a=r.template(e);o.append(a);if(f){i._loadcallback(o,a)}else{i._error("end")}}else{i._debug("template must be defined.");i._error("end")}}else{if(f){i._loadcallback(o,e,u)}else{i._error("end")}}},error:function(){i._debug("JSON ajax request failed.");i._error("end")}});break}},retrieve:function(r){r=r||null;var i=this,s=i.options;if(!!s.behavior&&this["retrieve_"+s.behavior]!==t){this["retrieve_"+s.behavior].call(this,r);return}if(s.state.isDestroyed){this._debug("Instance is destroyed");return false}s.state.isDuringAjax=true;s.loading.start.call(e(s.contentSelector)[0],s)},scroll:function(){var n=this.options,r=n.state;if(!!n.behavior&&this["scroll_"+n.behavior]!==t){this["scroll_"+n.behavior].call(this);return}if(r.isDuringAjax||r.isInvalidPage||r.isDone||r.isDestroyed||r.isPaused){return}if(!this._nearbottom()){return}this.retrieve()},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(n){if(e.isPlainObject(n)){this.options=e.extend(true,this.options,n)}}};e.fn.infinitescroll=function(n,r){var i=typeof n;switch(i){case"string":var s=Array.prototype.slice.call(arguments,1);this.each(function(){var t=e.data(this,"infinitescroll");if(!t){return false}if(!e.isFunction(t[n])||n.charAt(0)==="_"){return false}t[n].apply(t,s)});break;case"object":this.each(function(){var t=e.data(this,"infinitescroll");if(t){t.update(n)}else{t=new e.infinitescroll(n,r,this);if(!t.failed){e.data(this,"infinitescroll",t)}}});break}return this};var n=e.event,r;n.special.smartscroll={setup:function(){e(this).bind("scroll",n.special.smartscroll.handler)},teardown:function(){e(this).unbind("scroll",n.special.smartscroll.handler)},handler:function(t,n){var i=this,s=arguments;t.type="smartscroll";if(r){clearTimeout(r)}r=setTimeout(function(){e(i).trigger("smartscroll",s)},n==="execAsap"?0:100)}};e.fn.smartscroll=function(e){return e?this.bind("smartscroll",e):this.trigger("smartscroll",["execAsap"])}});


/*!
* bootstrap-lightbox.js v0.6.1 
* Copyright 2013 Jason Butz
* http://www.jasonbutz.info/bootstrap-lightbox/
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote)};t.prototype=e.extend({},e.fn.modal.Constructor.prototype),t.prototype.constructor=t,t.prototype.enforceFocus=function(){var t=this;e(document).on("focusin.lightbox",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},t.prototype.show=function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.preloadSize(function(){t.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})})},t.prototype.hide=function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},t.prototype.escape=function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.lightbox",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.lightbox")},t.prototype.preloadSize=function(t){var n=e.Callbacks();t&&n.add(t);var r=this,i,s,o,u,a,f,l,c,h,p;i=e(window).height(),s=e(window).width(),o=parseInt(r.$element.find(".lightbox-content").css("padding-top"),10),u=parseInt(r.$element.find(".lightbox-content").css("padding-bottom"),10),a=parseInt(r.$element.find(".lightbox-content").css("padding-left"),10),f=parseInt(r.$element.find(".lightbox-content").css("padding-right"),10),l=r.$element.find(".lightbox-content").find("img:first"),c=new Image,c.onload=function(){c.width+a+f>=s&&(h=c.width,p=c.height,c.width=s-a-f,c.height=p/h*c.width),c.height+o+u>=i&&(h=c.width,p=c.height,c.height=i-o-u,c.width=h/p*c.height),r.$element.css({position:"fixed",width:c.width+a+f,height:c.height+o+u,top:i/2-(c.height+o+u)/2,left:"50%","margin-left":-1*(c.width+a+f)/2}),r.$element.find(".lightbox-content").css({width:c.width,height:c.height}),n.fire()},c.src=l.attr("src")};var n=e.fn.lightbox;e.fn.lightbox=function(n){return this.each(function(){var r=e(this),i=r.data("lightbox"),s=e.extend({},e.fn.lightbox.defaults,r.data(),typeof n=="object"&&n);i||r.data("lightbox",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.lightbox.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.lightbox.Constructor=t,e.fn.lightbox.noConflict=function(){return e.fn.lightbox=n,this},e(document).on("click.lightbox.data-api",'[data-toggle*="lightbox"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("lightbox")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.lightbox(s).one("hide",function(){n.focus()})})}(window.jQuery);


/* Placeholders.js v3.0.2 */
/* http://jamesallardice.github.io/Placeholders.js */
(function(t){"use strict";function e(t,e,r){return t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):void 0}function r(t,e){var r,n;for(r=0,n=t.length;n>r;r++)if(t[r]===e)return!0;return!1}function n(t,e){var r;t.createTextRange?(r=t.createTextRange(),r.move("character",e),r.select()):t.selectionStart&&(t.focus(),t.setSelectionRange(e,e))}function a(t,e){try{return t.type=e,!0}catch(r){return!1}}t.Placeholders={Utils:{addEventListener:e,inArray:r,moveCaret:n,changeType:a}}})(this),function(t){"use strict";function e(){}function r(){try{return document.activeElement}catch(t){}}function n(t,e){var r,n,a=!!e&&t.value!==e,u=t.value===t.getAttribute(V);return(a||u)&&"true"===t.getAttribute(D)?(t.removeAttribute(D),t.value=t.value.replace(t.getAttribute(V),""),t.className=t.className.replace(R,""),n=t.getAttribute(F),parseInt(n,10)>=0&&(t.setAttribute("maxLength",n),t.removeAttribute(F)),r=t.getAttribute(P),r&&(t.type=r),!0):!1}function a(t){var e,r,n=t.getAttribute(V);return""===t.value&&n?(t.setAttribute(D,"true"),t.value=n,t.className+=" "+I,r=t.getAttribute(F),r||(t.setAttribute(F,t.maxLength),t.removeAttribute("maxLength")),e=t.getAttribute(P),e?t.type="text":"password"===t.type&&M.changeType(t,"text")&&t.setAttribute(P,"password"),!0):!1}function u(t,e){var r,n,a,u,i,l,o;if(t&&t.getAttribute(V))e(t);else for(a=t?t.getElementsByTagName("input"):b,u=t?t.getElementsByTagName("textarea"):f,r=a?a.length:0,n=u?u.length:0,o=0,l=r+n;l>o;o++)i=r>o?a[o]:u[o-r],e(i)}function i(t){u(t,n)}function l(t){u(t,a)}function o(t){return function(){m&&t.value===t.getAttribute(V)&&"true"===t.getAttribute(D)?M.moveCaret(t,0):n(t)}}function c(t){return function(){a(t)}}function s(t){return function(e){return A=t.value,"true"===t.getAttribute(D)&&A===t.getAttribute(V)&&M.inArray(C,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}}function d(t){return function(){n(t,A),""===t.value&&(t.blur(),M.moveCaret(t,0))}}function g(t){return function(){t===r()&&t.value===t.getAttribute(V)&&"true"===t.getAttribute(D)&&M.moveCaret(t,0)}}function v(t){return function(){i(t)}}function p(t){t.form&&(T=t.form,"string"==typeof T&&(T=document.getElementById(T)),T.getAttribute(U)||(M.addEventListener(T,"submit",v(T)),T.setAttribute(U,"true"))),M.addEventListener(t,"focus",o(t)),M.addEventListener(t,"blur",c(t)),m&&(M.addEventListener(t,"keydown",s(t)),M.addEventListener(t,"keyup",d(t)),M.addEventListener(t,"click",g(t))),t.setAttribute(j,"true"),t.setAttribute(V,x),(m||t!==r())&&a(t)}var b,f,m,h,A,y,E,x,L,T,N,S,w,B=["text","search","url","tel","email","password","number","textarea"],C=[27,33,34,35,36,37,38,39,40,8,46],k="#ccc",I="placeholdersjs",R=RegExp("(?:^|\\s)"+I+"(?!\\S)"),V="data-placeholder-value",D="data-placeholder-active",P="data-placeholder-type",U="data-placeholder-submit",j="data-placeholder-bound",q="data-placeholder-focus",z="data-placeholder-live",F="data-placeholder-maxlength",G=document.createElement("input"),H=document.getElementsByTagName("head")[0],J=document.documentElement,K=t.Placeholders,M=K.Utils;if(K.nativeSupport=void 0!==G.placeholder,!K.nativeSupport){for(b=document.getElementsByTagName("input"),f=document.getElementsByTagName("textarea"),m="false"===J.getAttribute(q),h="false"!==J.getAttribute(z),y=document.createElement("style"),y.type="text/css",E=document.createTextNode("."+I+" { color:"+k+"; }"),y.styleSheet?y.styleSheet.cssText=E.nodeValue:y.appendChild(E),H.insertBefore(y,H.firstChild),w=0,S=b.length+f.length;S>w;w++)N=b.length>w?b[w]:f[w-b.length],x=N.attributes.placeholder,x&&(x=x.nodeValue,x&&M.inArray(B,N.type)&&p(N));L=setInterval(function(){for(w=0,S=b.length+f.length;S>w;w++)N=b.length>w?b[w]:f[w-b.length],x=N.attributes.placeholder,x?(x=x.nodeValue,x&&M.inArray(B,N.type)&&(N.getAttribute(j)||p(N),(x!==N.getAttribute(V)||"password"===N.type&&!N.getAttribute(P))&&("password"===N.type&&!N.getAttribute(P)&&M.changeType(N,"text")&&N.setAttribute(P,"password"),N.value===N.getAttribute(V)&&(N.value=x),N.setAttribute(V,x)))):N.getAttribute(D)&&(n(N),N.removeAttribute(V));h||clearInterval(L)},100)}M.addEventListener(t,"beforeunload",function(){K.disable()}),K.disable=K.nativeSupport?e:i,K.enable=K.nativeSupport?e:l}(this);


/* Helper functions for WP Editor */
/* https://gist.github.com/RadGH/523bed274f307830752c */
function tmce_getContent(editor_id, textarea_id) {
  if ( typeof editor_id == 'undefined' ) editor_id = wpActiveEditor;
  if ( typeof textarea_id == 'undefined' ) textarea_id = editor_id;
  
  if ( jQuery('#wp-'+editor_id+'-wrap').hasClass('tmce-active') && tinyMCE.get(editor_id) ) {
    return tinyMCE.get(editor_id).getContent();
  }else{
    return jQuery('#'+textarea_id).val();
  }
}

function tmce_setContent(content, editor_id, textarea_id) {
  if ( typeof editor_id == 'undefined' ) editor_id = wpActiveEditor;
  if ( typeof textarea_id == 'undefined' ) textarea_id = editor_id;
  
  if ( jQuery('#wp-'+editor_id+'-wrap').hasClass('tmce-active') && tinyMCE.get(editor_id) ) {
    return tinyMCE.get(editor_id).setContent(content);
  }else{
    return jQuery('#'+textarea_id).val(content);
  }
}

//edited: for ipin pro
function tmce_focus(editor_id, textarea_id) {
  if ( typeof editor_id == 'undefined' ) editor_id = wpActiveEditor;
  if ( typeof textarea_id == 'undefined' ) textarea_id = editor_id;
  
  if ( jQuery('#wp-'+editor_id+'-wrap').hasClass('tmce-active') && tinyMCE.get(editor_id) ) {;
	tinyMCE.get(editor_id).selection.select(tinyMCE.get(editor_id).getBody(), true);
	tinyMCE.get(editor_id).focus();
	return false;
  }else{
    return jQuery('#'+textarea_id).focus().select();
  }
}
jQuery(document).ready(function($) {
	var ios = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
	var ie9below = false;
	if (document.all && !window.atob) { //http://tanalin.com/en/articles/ie-version-js/
		ie9below = true;
	}

	//masonry
	var $masonry = $('#masonry');
	var user_profile_follow = $('#user-profile-follow');
	var user_profile_boards = $('#user-profile-boards');
	var user_notifications = $('#user-notifications');

	if (obj_ipin.infinitescroll != 'disable' && ($masonry.length || user_profile_follow.length || user_profile_boards.length ||  user_notifications.length)) {
		$('#navigation').css({'visibility':'hidden', 'height':'1px'});
	}
		
	if ($masonry.length) {
		if ($('.check-480px').css('float') == 'left') {
			$masonry.imagesLoaded(function() {
				$masonry.masonry({
					itemSelector : '.thumb',
					isFitWidth: true,
					transitionDuration: 0
				}).css('visibility', 'visible');
				
				if ($('#masonry .thumb').length == 1) {
					$('#masonry .thumb').css('width', '95%');
				}
				
				$('#ajax-loader-masonry').hide();
			});
		} else {
			$masonry.masonry({
				itemSelector : '.thumb',
				isFitWidth: true,
				transitionDuration: 0
			}).css('visibility', 'visible');
			$('#ajax-loader-masonry').hide();
		}
	}
	
	$(window).resize(function() {
		if ($masonry.length || user_profile_follow.length) {
			$masonry.width($(window).width()-28).masonry('reloadItems').masonry('layout');
		}
	});
	
	$(window).on('load resize', function() {
		//Adjust top menu
		if ($('.check-767px').css('float') == 'left') {
			$('body').css('padding-top', 0);
		} else {
			if (obj_ipin.u == '0') {
				if ($('#topmenu').length && $('#top-message-wrapper').length) {
					$('body').css('padding-top', $('#topmenu').height() + $('#top-message-wrapper').height() + 24 + 'px');
				}
			} else {
				if ($('#topmenu').length) {
					$('body').css('padding-top', $('#topmenu').height() + 12 + 'px');
				}
			}
		}
		
		//top menu dropdown in mobile
		if ($('.check-767px').css('float') == 'left') {
			$(document).off('click', '#topmenu .dropdown-toggle').on('click', '#topmenu .dropdown-toggle', function() {
				$(this).next().toggle();
			});
		} else {
			$('#nav-main .dropdown-menu').removeAttr('style');
			$('#nav-main ul li').removeClass('open');
			$('#nav-main .dropdown-toggle').blur();
		}
		
		//tooltip
		if (!ios && $('.check-767px').css('float') == 'none') {
			$(document).tooltip({
				selector: '[rel=tooltip]'
			});
		}
		
		//Resize follow-wrapper
		if ($('.check-480px').css('float') == 'left' && $('#user-profile-follow').length) {
			$('.follow-wrapper .follow-user-posts-thumb').each(function(index, element) {
				$('.follow-user-posts').width($('.follow-user-name').width()-$('.follow-user-avatar').width()-6);
				$('.follow-user-posts-thumb').width($('.follow-user-posts').width()/2-4).height($('.follow-user-avatar').width()/2-2);
			});
		}
		
		if ($('.post-top-meta').length) {
			postTopMetaScroll();
		}
		
	});

	//close modal when click outside poup-overlay
	$(document).on('click', function(e) {
		if(!$(e.target).closest('.modal-dialog').length && !$(e.target).closest('#wp-link-wrap').length && !$(e.target).closest('#wp-link-backdrop').length) {
			if ($('#scrolltotop').next().attr('id') == 'popup-lightbox') {
				$('#popup-overlay').hide();
			} else {
				$('#popup-overlay').detach().insertAfter('#scrolltotop').hide();
			}
			$('.ipin-modal').modal('hide');
			if ($('#post-lightbox').css('display') == 'block') {
				$('body').addClass('modal-open');
			}
		}
	});
	
	//close modal when click close
	$(document).on('click', '.modal .popup-close', function() {
		if ($('#scrolltotop').next().attr('id') == 'popup-lightbox') {
			$('#popup-overlay').hide();
		} else {
			$('#popup-overlay').detach().insertAfter('#scrolltotop').hide();
		}
		$('.ipin-modal').modal('hide');
		if ($('#post-lightbox').css('display') == 'block') {
			$('body').addClass('modal-open');
		}
	});
	
	//login box popup
	//append form to loginbox such that wsl also works
	if (obj_ipin.u == '0') {
		$('#loginbox').popover({
			content: function() {
				return $('#loginbox').data('wsl') + 
				'<div class="error-msg-loginbox"></div>\
				<form name="loginform_header" id="loginform_header" method="post">\
					<div class="form-group">\
						<label>' + obj_ipin.__Username + '<br />\
						<input class="form-control" type="text" name="log" id="log" value="" tabindex="0" /></label>\
					</div>\
					<div class="form-group">\
						<label>' + obj_ipin.__Password + '\
						(<a href="' + obj_ipin.home_url + '/login-lpw/" tabindex="-1">' + obj_ipin.__Forgot + '</a>)\
						<input class="form-control"type="password" name="pwd" id="pwd" value="" tabindex="0" /></label>\
					</div>\
					<input type="submit" class="btn btn-success" name="wp-submit" id="wp-submit" value="' + obj_ipin.__Login + '" tabindex="0" />\
					<div class="ajax-loader-loginbox ajax-loader hide"></div>\
					<span id="loginbox-register">' + obj_ipin.__or + ' <a href="' + obj_ipin.home_url + '/signup/" tabindex="0">' + obj_ipin.__SignUp + '</a></span>\
					<br />\
				</form>'
			},
			html: 'true',
			placement: 'bottom',
			title: obj_ipin.__Welcome + '<button class="close" id="loginbox-close" type="button">&times;</button>'
		});
		
		$('#loginbox').on('shown.bs.popover', function () {
			$('.wp-social-login-widget a').each(function() {
				$(this).attr('onclick', 'window.location = "' + $(this).attr('href') + '"').removeAttr('href').css('cursor', 'pointer');
			});
		})
		
		$('#loginbox').on('click', function() {
			return false;
		});
		
		$(document).on('click', '#loginbox-close', function() {
			$('#loginbox').popover('hide');
		});
		
		//login box hide when click outside
		$(document).on('click', function(e) {
			if(!$(e.target).closest('.popover').length) {
				$('#loginbox').popover('hide');
			}
		});
		
		//login box process
		$(document).on('submit', '#loginform_header, #popup-login-form', function() {
			$('#loginform_header .ajax-loader-loginbox').css('display', 'inline-block');
			
			$('.error-msg-loginbox').hide();
			if ($('#log').val() == '' || $('#pwd').val() == '') {
				$('.error-msg-loginbox').html('<div class="alert alert-warning"><strong>' + obj_ipin.__pleaseenterbothusernameandpassword  + '</strong></div>').fadeIn();
				$('#loginform_header .ajax-loader-loginbox').hide();
				return false;
			}
			
			var data = {
				action: 'ipin-ajax-login',
				nonce: obj_ipin.nonce,
				log: $('#loginform_header #log').val(),
				pwd: $('#loginform_header #pwd').val()
			};
		
			$.ajax({
				type: 'post',
				url: obj_ipin.ajaxurl,
				data: data,
				success: function(data) {
					if (data == 'error') {
						$('.error-msg-loginbox').html('<div class="alert alert-warning"><strong>' + obj_ipin.__incorrectusernamepassword  + '</strong></div>').fadeIn();
						$('#loginform_header .ajax-loader-loginbox').hide();
						return false;			
					} else {
						window.location.reload();
					}
				}
			});
		
			return false;
		});
	}
	
	//hide links in wsl
	if ($('.wp-social-login-widget').length) {
		$('.wp-social-login-widget a').each(function() {
			$(this).attr('onclick', 'window.location = "' + $(this).attr('href') + '"').removeAttr('href').css('cursor', 'pointer');
		});
	}

	//notification popup	
	$('#user-notifications-count').on('click', function() {
		if (!$(this).next('div.popover').length) {
			$('#user-notifications-count .tooltip').hide();
			$('#user-notifications-count')
			.popover({
				content: '<div class="ajax-loader"></div>',
				html: 'true',
				placement: 'bottom',
				trigger: 'manual',
				title: '<strong>' + obj_ipin.__NotificationsLatest30 + ' (<a href="' + obj_ipin.home_url + '/notifications/"><span>' + obj_ipin.__SeeAll + '</span></a>)</strong> <button class="close" id="user-notifications-count-close" type="button">&times;</button>'
			})
			.popover('show');
			
			$('<div>').load(obj_ipin.home_url + '/notifications/ #user-notifications-table', function() {
				$('#user-notifications-count').next('.popover').children('.popover-content').html($(this).html());
			});
		} else {
			$('#user-notifications-count').popover('hide');
			$('#user-notifications-count a span').text('0').parent().removeClass('user-notifications-count-nth');
		}
		return false;
	});
	
	$(document).on('click', '#user-notifications-count-close', function() {
		$('#user-notifications-count').popover('hide');
		$('#user-notifications-count a span').text('0').parent().removeClass('user-notifications-count-nth');
	});
	
	//notification hide when click outside
	$(document).on('click', function(e) {
		if(!$(e.target).closest('.popover').length && $('#user-notifications-count + div.popover').length) {
			$('#user-notifications-count').popover('hide');
			$('#user-notifications-count a span').text('0').parent().removeClass('user-notifications-count-nth');
		}
	});
	
	//scroll to top	
	$(window).scroll(function() {
		var $scrolltotop = $('#scrolltotop');
		
		if ($(this).scrollTop() > 100) {
			$scrolltotop.slideDown('fast');
		} else {
			$scrolltotop.slideUp('fast');
		}
		
		if ($('.post-top-meta').length) {
			postTopMetaScroll();
		}
	});

	$('#scrolltotop').click(function() {
		$('body,html').animate({
			scrollTop: 0
		}, 'fast');
		return false;
	});
	
	//post action bar scroll
	if ($('.post-top-meta').length) {
		var post_top_meta = $('.post-top-meta');
		var post_top_meta_top = post_top_meta.offset().top;
		var post_top_meta_bottom = post_top_meta_top + post_top_meta.outerHeight()-1;
	}
	
	function postTopMetaScroll() {
		if ($('.check-767px').css('float') == 'none') {
			var topmenu_bottom, topmenu_top;
			if ($('#top-message-wrapper').length) {
				topmenu_bottom = $('#top-message-wrapper').offset().top+$('#top-message-wrapper').height();
				topmenu_top = $('#top-message-wrapper').outerHeight() + $('#topmenu').height();
			} else {
				topmenu_bottom = $('#topmenu').offset().top+$('#topmenu').height();
				topmenu_top = $('#topmenu').height();
			}
	
			var post_top_meta_left = $('#post-featured-photo').offset().left;
			if (post_top_meta_top <= topmenu_bottom && $(this).scrollTop() <= ($('#post-featured-photo').offset().top + $('#post-featured-photo').outerHeight()-post_top_meta_bottom+10)) {
				$('.post-top-meta').css({'opacity': '0.95', 'position': 'fixed', 'top': topmenu_top, 'left': post_top_meta_left, 'width': $('#post-featured-photo').outerWidth()});
				$('.post-top-meta-placeholder').css('height', post_top_meta.outerHeight()-1).show();
			} else if ($(this).scrollTop() > ($('#post-featured-photo').offset().top + $('#post-featured-photo').outerHeight()-post_top_meta_bottom+10)) {
				$('.post-top-meta').css({'position': 'absolute', 'top': ($('#post-featured-photo').offset().top + $('#post-featured-photo').outerHeight() - post_top_meta_bottom), 'left': 16});
			} else {
				$('.post-top-meta').css({'opacity': '1', 'position': 'relative', 'top': 0, 'left': 0, 'width': 'auto'});
				$('.post-top-meta-placeholder').hide();
			}
		} else {
			$('.post-top-meta').css({'opacity': '1', 'position': 'relative', 'top': 0, 'left': 0, 'width': 'auto'});
			$('.post-top-meta-placeholder').hide();
		}
	}

	//likes for frontpage, lightbox, posts
	$(document).on('click', '.ipin-like', function() {
		if (obj_ipin.u != '0') {
			var like = $(this);
			var	post_id = like.data('post_id');

			like.attr('disabled', 'disabled').css('pointer-events', 'none');

			if (!like.hasClass('disabled')) {
				var data = {
					action: 'ipin-like',
					nonce: obj_ipin.nonce,
					post_id: post_id,
					post_author: like.data('post_author'),
					ipin_like: 'like'
				};

				$.ajax({
					type: 'post',
					url: obj_ipin.ajaxurl,
					data: data,
					success: function(count) {
						$('[id=ipin-like-'+post_id+']').addClass('disabled').removeAttr('disabled').css('pointer-events', 'auto');
						$('[id=likes-count-'+post_id+']').addClass('disabled');
						
						if (count == 1) {
							if ($('#post-repins').length) {
								$('#post-repins').before('<div class="post-likes"><div class="post-likes-wrapper"><h4>' + obj_ipin.__Likes + '</h4><div class="post-likes-avatar"><a href="' + obj_ipin.home_url + '/' + obj_ipin.user_rewrite + '/' + obj_ipin.ul + '/" rel="tooltip" title="' + obj_ipin.ui + '">' + obj_ipin.avatar48 + '</a></div></div></div>');
							} else {
								$('#post-embed-box').before('<div class="post-likes"><div class="post-likes-wrapper"><h4>' + obj_ipin.__Likes + '</h4><div class="post-likes-avatar"><a href="' + obj_ipin.home_url + '/' + obj_ipin.user_rewrite + '/' + obj_ipin.ul + '/" rel="tooltip" title="' + obj_ipin.ui + '">' + obj_ipin.avatar48 + '</a></div></div></div>');
							}
							$('[id=likes-count-'+post_id+']').removeClass('hide').html('<i class="fa fa-heart"></i> 1');
							$('#button-likes-count').html('&nbsp; 1');
							if($('#masonry').length) {
								$('#masonry').masonry('reloadItems').masonry('layout');
							}
						} else {
							$('.post-likes-avatar').append('<a id=likes-' + obj_ipin.u +  ' href="' + obj_ipin.home_url + '/' + obj_ipin.user_rewrite + '/' + obj_ipin.ul + '/" rel="tooltip" title="' + obj_ipin.ui + '">' + obj_ipin.avatar48 + '</a>');
							$('[id=likes-count-'+post_id+']').html('<i class="fa fa-heart"></i> ' + count);
							$('#button-likes-count').html('&nbsp; ' + count);
						}
					}
				});
			} else {
				var data = {
					action: 'ipin-like',
					nonce: obj_ipin.nonce,
					post_id: post_id,
					ipin_like: 'unlike'
				};

				$.ajax({
					type: 'post',
					url: obj_ipin.ajaxurl,
					data: data,
					success: function(count) {
						$('[id=ipin-like-'+post_id+']').removeClass('disabled').removeAttr('disabled').css('pointer-events', 'auto');
						$('#post-' + post_id + ' .ipin-like').removeClass('disabled');

						if (count == 0) {
							$('.post-likes').remove();
							$('[id=likes-count-'+post_id+']').addClass('hide').text('');
							$('#button-likes-count').text('');
							if($('#masonry').length) {
								$('#masonry').masonry('reloadItems').masonry('layout');
							}
						} else {
							$('#likes-' + obj_ipin.u).remove();
							$('[id=likes-count-'+post_id+']').html('<i class="fa fa-heart"></i> ' + count);
							$('#button-likes-count').html('&nbsp; ' + count);
						}
					}
				});
			}
			return false;
		} else {
			loginPopup();
			return false;
		}
	});

	//repin show form for frontpage, lightbox, posts
	$(document).on('click', '.ipin-repin', function() {
		if (obj_ipin.u != '0') {
			var repin = $(this);
			var post_id = repin.data('post_id');
			var post_description = $('#masonry #post-' + post_id + ' .post-title').data('title');
			var post_content = $('#masonry #post-' + post_id + ' .post-title').data('content');
			var post_tags = $('#post-' + post_id + ' .post-title').data('tags');
			var post_price = $('#post-' + post_id + ' .post-title').data('price');
			
			if ($('#post-lightbox').css('display') == 'block') {
				if (!ie9below) {
					window.history.back();
				}
			}
			
			//use ajax fetch boards if user created a new board
			if ($('#newboard').length) {
				//populate board field
				var data = {
					action: 'ipin-repin-board-populate',
					nonce: obj_ipin.nonce
				};
				
				$.ajax({
					type: 'post',
					url: obj_ipin.ajaxurl,
					data: data,
					success: function(data) {
						$('#board').remove();
						$('#repinform-add-new-board').after(data);

						//when in single-pin.php
						if (!post_description) {
							post_description = $('#post-' + post_id + ' .post-title').data('title');
							post_content = $('#post-' + post_id + ' .post-title').data('content');
						}
						
						$('#post-lightbox').modal('hide');
						$('#post-repin-box .post-repin-box-photo').html('<img src="' + $('#post-' + post_id + ' .featured-thumb').attr('src') + '" />');
						tmce_setContent(post_description, 'pin-title');
						tmce_setContent(post_content, 'pin-content');
						$('#post-repin-box #tags').val(post_tags);
						$('#post-repin-box #price').val(post_price);
						$('#repinform-add-new-board').text(obj_ipin.__addnewboard);
						$('#repinform #board-add-new').val('').hide();
						$('#repinform #board-add-new-category').val('-1').hide();
						$('#repinform #board').show();
						$('#repinform #repin-post-id').val(post_id);
						$('#repinnedmsg, .repinnedmsg-share').hide();
						$('#repinform').show();

						$('#popup-overlay').show();
						$('#post-repin-box').modal();

						setTimeout(function() {
							tmce_focus('pin-title');

							if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
								$('#pinit').removeAttr('disabled');
							} else {
								$('#pinit').attr('disabled', 'disabled');
							}
							
							if ($('#pin-title_ifr').length) {
								$(document.getElementById('pin-title_ifr').contentWindow.document).keyup(function() {
									if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
										$('#pinit').removeAttr('disabled');
									} else {
										$('#pinit').attr('disabled', 'disabled');
									}
								});
							}
						}, 500);
					}
				});
				
				$('#newboard').remove();
			} else {
				//when in single-pin.php
				if (!post_description) {
					post_description = $('#post-' + post_id + ' .post-title').data('title');
					post_content = $('#post-' + post_id + ' .post-title').data('content');
				} else {
					$('#video-embed').remove(); //hide youtube player if not in single-pin.php
				}

				$('#post-lightbox').modal('hide');
				
				//ajax fetch boards for first time
				if ($('#post-repin-box').length == 0){
					//populate board field
					var data = {
						action: 'ipin-repin-board-populate',
						nonce: obj_ipin.nonce
					};
					
					$.ajax({
						type: 'post',
						url: obj_ipin.ajaxurl,
						data: data,
						success: function(data) {
							$('body').append('\
								<div class="modal ipin-modal" id="post-repin-box" data-backdrop="false" data-keyboard="false" aria-hidden="true" role="dialog">\
									<div class="modal-dialog">\
										<div class="modal-content">\
											<button class="close popup-close" data-dismiss="modal" aria-hidden="true" type="button">&times;</button>\
											<div class="clearfix"></div>\
											<div class="post-repin-box-photo"></div>\
											<form id="repinform">\
												' + obj_ipin.description_fields + '\
												<p></p>\
												' + obj_ipin.tags_html + '\
												' + obj_ipin.price_html + '\
												<a id="repinform-add-new-board" class="btn btn-default pull-right" href="#" tabindex="-1">' + obj_ipin.__addnewboard + '</a>\
												' + data + '\
												<input id="board-add-new" class="form-control board-add-new" type="text" placeholder="' + obj_ipin.__enternewboardtitle + '" />\
												' + obj_ipin.categories + '\
												<input id="repin-post-id" type="hidden" name="repin-post-id" value="" />\
												<div class="clearfix"></div>\
												<input class="btn btn-success btn-block btn-ipin-custom" type="submit" name="pinit" id="pinit" value="' + obj_ipin.__Repin + '" /> \
												<span id="repin-status"></span>\
											</form>\
										</div>\
									</div>\
								</div>\
							');

							if (typeof tinymce !== 'undefined') {
								if ($('textarea#pin-content').length) {
									tinymce.init(tinyMCEPreInit.mceInit['pin-content']);
								} else {
									tinymce.init(tinyMCEPreInit.mceInit['pin-title']);
								}
							}
							
							$('#post-repin-box .post-repin-box-photo').html('<img src="' + $('#post-' + post_id + ' .featured-thumb').attr('src') + '" />');
							tmce_setContent(post_description, 'pin-title');
							tmce_setContent(post_content, 'pin-content');
							$('#post-repin-box #tags').val(post_tags);
							$('#post-repin-box #price').val(post_price);
							$('#repinform-add-new-board').text(obj_ipin.__addnewboard);
							$('#repinform #board-add-new').val('').hide();
							$('#repinform #board-add-new-category').val('-1').hide();
							$('#repinform #board').show();
							$('#repinform #repin-post-id').val(post_id);
							$('#repinnedmsg, .repinnedmsg-share').hide();
							$('#repinform').show();

							$('#popup-overlay').show();
							$('#post-repin-box').modal();
							
							setTimeout(function() {
								tmce_focus('pin-title');

								if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
									$('#pinit').removeAttr('disabled');
								} else {
									$('#pinit').attr('disabled', 'disabled');
								}
								
								if ($('#pin-title_ifr').length) {
									$(document.getElementById('pin-title_ifr').contentWindow.document).keyup(function() {
										if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
											$('#pinit').removeAttr('disabled');
										} else {
											$('#pinit').attr('disabled', 'disabled');
										}
									});
								}
							}, 500);
							
							//autocomplete tags
							$.getScript(obj_ipin.site_url + '/wp-includes/js/jquery/suggest.min.js', function() {
								$('input#tags').suggest(obj_ipin.ajaxurl + '?action=ajax-tag-search&tax=post_tag', {minchars: 3, multiple: true});
							});
						}
					});
				} else {
					$('#post-repin-box .post-repin-box-photo').html('<img src="' + $('#post-' + post_id + ' .featured-thumb').attr('src') + '" />');
					tmce_setContent(post_description, 'pin-title');
					tmce_setContent(post_content, 'pin-content');
					$('#post-repin-box #tags').val(post_tags);
					$('#post-repin-box #price').val(post_price);
					$('#repinform-add-new-board').text(obj_ipin.__addnewboard);
					$('#repinform #board-add-new').val('').hide();
					$('#repinform #board-add-new-category').val('-1').hide();
					$('#repinform #board').show();
					$('#repinform #repin-post-id').val(post_id);
					$('#repinnedmsg, .repinnedmsg-share').hide();
					$('#repinform').show();

					$('#popup-overlay').show();
					$('#post-repin-box').modal();

					setTimeout(function() {
						tmce_focus('pin-title');

						if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
							$('#pinit').removeAttr('disabled');
						} else {
							$('#pinit').attr('disabled', 'disabled');
						}
						
						if ($('#pin-title_ifr').length) {
							$(document.getElementById('pin-title_ifr').contentWindow.document).keyup(function() {
								if (tmce_getContent('pin-title') != ''&& ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
									$('#pinit').removeAttr('disabled');
								} else {
									$('#pinit').attr('disabled', 'disabled');
								}
							});
						}
					}, 500);
				}
			}
			return false;
		} else {
			loginPopup();
			return false;
		}
	});
	
	//disable submit button if empty textarea and no board
	$(document).on('focus', '#post-repin-box textarea#pin-title', function() {
		if ($.trim($('#repinform textarea#pin-title').val()) && ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
			$('#pinit').removeAttr('disabled');
		} else {
			$('#pinit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#repinform textarea#pin-title').val()) && ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	});
	
	$(document).on('focus', '#post-repin-box #board-add-new', function() {
		var content = '';
		if ($('#pin-title_ifr').length) {
			content = tmce_getContent('pin-title');
		} else {
			content = $.trim($('#repinform textarea#pin-title').val());
		}
		
		$(this).keyup(function() {
			if ($('#pin-title_ifr').length) {
				content = tmce_getContent('pin-title');
			} else {
				content = $.trim($('#repinform textarea#pin-title').val());
			}
			
			if (content && ($('#repinform #board').val() != '-1' || $.trim($('#repinform #board-add-new').val()))) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	});
	
	//prevent form submit on enter key
	$(document).on('keypress', '#board-add-new', function(e) {
		return e.keyCode != 13;
	});
	
	//repin form add new board toggle
	$(document).on('click', '#repinform-add-new-board', function() {
		if ($(this).text() == obj_ipin.__cancel) {
			if($('#noboard').length) {
				$('#pinit').attr('disabled', 'disabled');
			}
			$(this).text(obj_ipin.__addnewboard);
			$('#repinform #board-add-new').val('').hide();
			$('#repinform #board-add-new-category').val('-1').hide();
			$('#repinform #board').show().focus();
		} else {
			$(this).text(obj_ipin.__cancel);
			$('#repinform #board-add-new').show().focus();
			$('#repinform #board-add-new-category').show();
			$('#repinform #board').hide();
		}
		return false;
	});
	
	//repin for frontpage, lightbox, posts
	$(document).on('submit', '#repinform', function() {
		var repin_status = $('#repin-status');
		repin_status.html('');
		repin_status.html(' <div class="ajax-loader"></div>');
		
		//empty title
		if (!$.trim($('#repinform textarea#pin-title').val())) {
			repin_status.html('<div class="alert alert-warning text-center"><strong>' + obj_ipin.__Pleaseentertitle  + '</strong></div>').fadeIn();
			return false;
		}
		
		//empty board
		if ($('#repinform #board').val() == '-1' && $.trim($('#repinform #board-add-new').val()) == '') {
			repin_status.html('<div class="alert alert-warning text-center"><strong>' + obj_ipin.__Pleasecreateanewboard  + '</strong></div>').fadeIn();
			return false;
		}

		$(this).find('input[type="submit"]').attr('disabled', 'disabled');
		
		var post_id = $('#repinform #repin-post-id').val();
		var price = '';
		if ($('#repinform #price').length)
			price = $('#repinform #price').val().replace(/[^0-9.]/g, '');
		var data = {
			action: 'ipin-repin',
			nonce: obj_ipin.nonce,
			repin_title: tmce_getContent('pin-title'),
			repin_content: tmce_getContent('pin-content'),
			repin_tags: $('#repinform #tags').val(),
			repin_price: price,
			repin_post_id: post_id,
			repin_board: $('#repinform #board').val(),
			repin_board_add_new: $('#repinform #board-add-new').val(),
			repin_board_add_new_category: $('#repinform #board-add-new-category').val()
		};
		
		//if user create a new board, inject a span to indicate to ajax fetch board next round
		if ($('#repinform #board-add-new').val() != '') {
			repin_status.after('<span id="newboard"></span>');
		}
		
		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			error: function() {
				repin_status.html('<div class="alert alert-warning text-center"><strong><small>' + obj_ipin.__errorpleasetryagain  + '</small></strong></div>');
			},
			success: function(data) {
				repin_status.html('');
				$('#repinform').hide();
				if ($('#repinform #board-add-new').val() == '') {
					board_name = $('#repinform #board option:selected').text();
				} else {
					board_name = $('#repinform #board-add-new').val();
				}
				$('#post-repin-box .post-repin-box-photo').after('<h3 id="repinnedmsg" class="text-center">' + obj_ipin.__repinnedto + ' ' + board_name + '<p></p><a class="btn btn-success" href="' + data + '" aria-hidden="true"><strong>' + obj_ipin.__seethispin + '</strong></a> <a class="btn btn-success popup-close" data-dismiss="modal" aria-hidden="true"><strong>' + obj_ipin.__close + '</strong></a></h3><h5 class="repinnedmsg-share text-center"><strong>' + obj_ipin.__shareitwithyourfriends + '</strong></h5><p class="repinnedmsg-share text-center"><a class="btn btn-primary btn-sm" href="" onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(data) + '\', \'facebook-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-facebook fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'https://twitter.com/share?url=' + data + '&amp;text=' + encodeURIComponent($('#repinform textarea#pin-title').val()) + '\', \'twitter-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-twitter fa-fw"></i></a> <a class="btn btn-danger btn-sm" href="" onclick="window.open(\'https://plus.google.com/share?url=' + data + '\', \'gplus-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-google-plus fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'http://www.reddit.com/submit?url=' + encodeURIComponent(data) + '&amp;title=' + encodeURIComponent($('#repinform textarea#pin-title').val()) + '\', \'reddit-share-dialog\', \'width=880,height=500,scrollbars=1\'); return false;"><i class="fa fa-reddit fa-fw"></i></a></p>');
					
				var newrepin = '<li><a class="post-repins-avatar">' + obj_ipin.avatar48 + '</a> <a href="' + obj_ipin.home_url + '/' + obj_ipin.user_rewrite + '/' + obj_ipin.ul + '/">' + obj_ipin.ui + '</a> ' + obj_ipin.__onto + ' <strong>' + $('#repinform #board option:selected').text() + '</strong></li>';

				if (!$('#post-repins').length) {
					$('.post-wrapper').append('<div id="post-repins"><div class="post-repins-wrapper"><h4>' + obj_ipin.__Repins + '</h4><ul></ul></div></div>');
				}
				$('#post-repins ul').append(newrepin);

				var repins_countmsg = $('#repins-count-'+post_id);
				var repins_count = repins_countmsg.text();
				repins_count = repins_count.substring(repins_count.lastIndexOf(' '));
				
				if (repins_count == '') {
					$('#repins-count-'+post_id).removeClass('hide').html('<i class="fa fa-retweet"></i> 1');
					if($('#masonry').length) {
						$('#masonry').masonry('reloadItems').masonry('layout');
					}
				} else {
					$('#repins-count-'+post_id).html('<i class="fa fa-retweet"></i> ' + (parseInt(repins_count,10)+1));
				}
				
				//for single post count increment
				var button_repins_count = $('#button-repins-count');
				if (button_repins_count.text() == '') {
					button_repins_count.html('&nbsp; 1');
				} else {
					button_repins_count.html('&nbsp; ' + parseInt(button_repins_count.text(),10)+1);
				}
				
			}
		});
		return false;
	});
	
	//comments for lightbox and posts
	$(document).on('submit', '#commentform', function() {
		if (obj_ipin.u != '0') {
			var commentform = $(this);
			
			if ($.trim($(this).find('#comment').val()) == '') {
				$('#comment-status').remove();
				$('.comment-status-ajax-loader').remove();
				$('.textarea-wrapper').prepend('<div id="comment-status"></div>');
				$('#comment-status').html('<div class="alert alert-warning"><strong><small>' + obj_ipin.__Pleasetypeacomment + '</small></strong></div>');
				$('#commentform textarea').focus();
				return false;
			}
			
			commentform.find('input[type="submit"]').attr('disabled', 'disabled');
	
			var post_id = $('#commentform #comment_post_ID').val();
			var formdata = $(this).serialize();
			var formurl = $(this).attr('action');
			var comment_parent = $('#commentform #comment_parent').val();
			
			$('#comment-status').remove();
			$('.form-submit').prepend('<div class="comment-status-ajax-loader ajax-loader ajax-loader-inline pull-right" style="margin: 15px 0 0 5px;"></div>');
			
			$.ajax({
				type: 'post',
				url: formurl,
				data: formdata,
				error: function(XMLHttpRequest) {
					var errormsg = XMLHttpRequest.responseText.substr(XMLHttpRequest.responseText.indexOf('<p>')+3);
					errormsg = errormsg.substr(0, errormsg.indexOf('</p>'));
					
					if (errormsg == '') {
						errormsg = obj_ipin.__errorpleasetryagain;
					}
					
					$('.textarea-wrapper').prepend('<div id="comment-status"></div>');
					$('.comment-status-ajax-loader').remove();
					$('#comment-status').html('<div class="alert alert-warning"><strong><small>' + errormsg + '</small></strong></div>');
					$('#commentform textarea').focus();
					commentform.find('input[type="submit"]').removeAttr('disabled');
				},
				success: function() {
					var commenttext =  $('#commentform #comment').val();
					var newcomment = '<li><div class="comment-avatar">' + obj_ipin.avatar48 + '</div><div class="comment-content"><strong><span class="comment"><a href="' + obj_ipin.home_url + '/' + obj_ipin.user_rewrite + '/' + obj_ipin.ul + '/">' + obj_ipin.ui + '</a></span></strong> <span class="text-muted">&#8226; ' + obj_ipin.current_date + '</span><p>' + commenttext.replace(/(?:\r\n|\r|\n)/g, '<br />') + '</p></div></li>';
	
					$('.comment-status-ajax-loader').remove();
					$('#commentform #comment').val('');
					$('#commentform #comment_parent').val('');
					
					if (comment_parent == '0' || comment_parent == '' ) {
						if ($('#comments').find('.commentlist').size() == 0) {
							$('#comments').prepend('<ol class="commentlist"></ol>');
						}
						$('.commentlist').append(newcomment);
					} else {
						if ($('#comment-' + comment_parent).find('>ul.children').size() == 0) {
							$('#comment-' + comment_parent).append('<ul class="children"></ul>');
						}
						$('#comment-' + comment_parent + ' >ul.children').append(newcomment);
					}
					
					var comments_countmsg = $('#comments-count-'+post_id);
					var comments_count = comments_countmsg.text();
					comments_count = comments_count.substring(comments_count.lastIndexOf(' '));
	
					if (comments_count == '') {
						$('#comments-count-'+post_id).removeClass('hide').html('<i class="fa fa-comment"></i> 1');
					} else {
						$('#comments-count-'+post_id).html('<i class="fa fa-comment"></i> ' + (parseInt(comments_count,10)+1));
					}
					
					var newcomment_masonry = '<div id="masonry-meta-comment-wrapper-' + post_id + '" class="masonry-meta"><div class="masonry-meta-avatar">' + obj_ipin.avatar30 + '</div><div class="masonry-meta-comment"><span class="masonry-meta-author">' + obj_ipin.ui + '</span><span class="masonry-meta-comment-content"> ' + commenttext + '</span></div></div>';
					$('[id=masonry-meta-commentform-' + post_id + ']').prev().append(newcomment_masonry);
					
					if ($('#post-masonry #masonry').length) {
						$('#post-masonry #masonry').masonry('reloadItems').masonry('layout');
					}
					
					if ($('#masonry').length) {
						$('#masonry').masonry('reloadItems').masonry('layout');
					}
					
					commentform.find('input[type="submit"]').removeAttr('disabled');
				}
			});
		} else {
			loginPopup();
		}
		return false;
	});
	
	//Zoom full size photo
	$(document).on('click', '.ipin-zoom', function() {
		$('#post-zoom-overlay').show();
		$('.lightbox-content img').attr('src', $('.lightbox-content img').data('src'));
		$('#post-fullsize').lightbox({backdrop:false, keyboard:false});
		return false;
	});
	
	$(document).on('click', '#post-fullsize-close', function() {
		$('#post-zoom-overlay').fadeOut();
		$('#post-fullsize').lightbox('hide');
		return false;
	});
	
	$(document).on('click', '#post-zoom-overlay', function() {
		$('#post-zoom-overlay').fadeOut();
		$('#post-fullsize').lightbox('hide');
	});

	//Embed for lightbox & posts
	$(document).on('click', '.post-embed', function() {
		$('#popup-overlay').detach().insertAfter('#post-report-box').show();
		$('#post-embed-box').modal();
		$('#post-embed-box textarea').focus().select();
		if (ios) {
			$('body').scrollTop(0);
		}
		return false;
	});

	$(document).on('keydown', '#embed-width', function() {
		old_height = $('#embed-height').val();
		old_width_str = "width=\'" + $(this).val() + "'";
		old_height_str = "height=\'" + $('#embed-height').val() + "'";
		ratio = $('.post-featured-photo img').width() / $('.post-featured-photo img').height();
	}).on('keyup', '#embed-width', function() {
		var embed_code = $('#post-embed-box textarea').val();
		var new_height = Math.ceil($(this).val()/ratio);
		var new_height_str = "height='" + new_height + "'";
		var new_width_str = "width='" + $(this).val() + "'";
		
		$('#embed-height').val(new_height);
		embed_code = embed_code.replace(old_height_str, new_height_str);
		embed_code = embed_code.replace(old_width_str, new_width_str);
		$('#post-embed-box textarea').val(embed_code);
	});
	
	$(document).on('keydown', '#embed-height', function() {
		old_width = $('#embed-width').val();
		old_width_str = "width=\'" + $('#embed-width').val() + "'";
		old_height_str = "height=\'" + $(this).val() + "'";
		ratio = $('.post-featured-photo img').width() / $('.post-featured-photo img').height();
	}).on('keyup', '#embed-height', function() {
		var embed_code = $('#post-embed-box textarea').val();
		var new_width = Math.ceil($(this).val()*ratio);
		var new_width_str = "width='" + new_width + "'";
		var new_height_str = "height='" + $(this).val() + "'";
		
		$('#embed-width').val(new_width);
		embed_code = embed_code.replace(old_height_str, new_height_str);
		embed_code = embed_code.replace(old_width_str, new_width_str);
		$('#post-embed-box textarea').val(embed_code);
	});
	
	//Email friend for lightbox & posts
	$(document).on('click', '.post-email', function() {		
		if (obj_ipin.u != '0') {
			if($('#masonry').length) {
				$(this).parent().next().trigger('click');
				setTimeout(function() {
					$('#popup-overlay').detach().insertAfter('#post-email-box').show();
					$('#post-email-box').modal();
					$('#post-email-box .alert, #post-email-box #post-email-close').hide();
					$('#post-email-box textarea, #post-email-box .radio, #post-email-box input[type="email"], #post-email-box #post-email-submit').show();

					if (ios) {
						$('body').scrollTop(0);
					}
					return false;
				}, 1500);
				return false;
			}
			
			$('#popup-overlay').detach().insertAfter('#post-email-box').show();
			$('#post-email-box').modal();
			$('#post-email-box .alert, #post-email-box #post-email-close').hide();
			$('#post-email-box textarea, #post-email-box .radio, #post-email-box input[type="email"], #post-email-box #post-email-submit').show();
			//$('#post-email-box textarea, #post-email-box input[type="email"]').val('');
			/*if ($('#post-email-box #recipient-email').val() == '') {
				$('#post-email-box #recipient-email').focus();
			} else {
				$('#post-email-box textarea').focus();
			}*/
			if (ios) {
				$('body').scrollTop(0);
			}
			return false;
		} else {
			loginPopup();
			return false;
		}
	});
	
	$(document).on('click', '#post-email-submit', function() {
		var email_regex = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
		var email_pass = email_regex.test($('#post-email-box #recipient-email').val());
		if (!email_pass) {
			$('#post-email-box .alert-warning').show();
			return false;
		}

		$('#post-email-box .ajax-loader-email-pin').show();
		var data = {
			action: 'ipin-post-email',
			nonce: obj_ipin.nonce,
			email_post_id: $('#post-email-box #email-post-id').val(),
			recipient_name: $('#post-email-box #recipient-name').val(),
			recipient_email: $('#post-email-box #recipient-email').val(),
			recipient_message: $('#post-email-box textarea').val(),
			post_email_selection: $('#post-email-box #post-email-selection:checked').val(),
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function() {
				$('#post-email-box .ajax-loader-email-pin, #post-email-box .alert-warning').hide();
				$('#post-email-box textarea, #post-email-box .radio, #post-email-box input[type="email"], #post-email-box #post-email-submit').hide();
				$('#post-email-box .alert-success, #post-email-box #post-email-close').show();
			}
		});
		return false;
	});
	
	$(document).on('click', '#post-email-box #post-email-close', function() {
		$('#popup-overlay').hide();
		$('#post-email-box').modal('hide');
	});
	
	//Email friend - disable submit button if empty recipient name and email
	$(document).on('focus', '#post-email-box textarea', function() { //edited: textarea
		if ($.trim($('#post-email-box textarea').val()) && $.trim($('#post-email-box #recipient-email').val())) { //edited: textarea
			$('#post-email-box #post-email-submit').removeAttr('disabled');
		} else {
			$('#post-email-box #post-email-submit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#post-email-box  textarea').val()) && $.trim($('#post-email-box #recipient-email').val())) { //edited: textarea
				$('#post-email-box #post-email-submit').removeAttr('disabled');
			} else {
				$('#post-email-box #post-email-submit').attr('disabled', 'disabled');
			}
		});
	});
	
	$(document).on('focus', '#post-email-box #recipient-email', function() {
		if ($.trim($('#post-email-box textarea').val()) && $.trim($('#post-email-box #recipient-email').val())) { //edited: textarea
			$('#post-email-box #post-email-submit').removeAttr('disabled');
		} else {
			$('#post-email-box #post-email-submit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#post-email-box textarea').val()) && $.trim($('#post-email-box #recipient-email').val())) { //edited: textarea\
				$('#post-email-box #post-email-submit').removeAttr('disabled');
			} else {
				$('#post-email-box #post-email-submit').attr('disabled', 'disabled');
			}
		});
	});
	
	//Report pin for lightbox & posts
	$(document).on('click', '.post-report', function() {
		$('#popup-overlay').detach().insertAfter('#post-report-box').show();
		$('#post-report-box').modal();
		$('#post-report-box .alert, #post-report-box #post-report-close').hide();
		$('#post-report-box textarea, #post-report-box #post-report-submit').show();
		$('#post-report-box textarea').val('').focus();
		if (ios) {
			$('body').scrollTop(0);
		}
		return false;
	});
	
	$(document).on('click', '#post-report-submit', function() {
		$('#post-report-box .ajax-loader-report-pin').show();
		$('#post-report-box #post-report-submit').attr('disabled', 'disabled');
		
		var data = {
			action: 'ipin-post-report',
			nonce: obj_ipin.nonce,
			report_post_id: $('#post-report-box #report-post-id').val(),
			report_message: $('#post-report-box textarea').val()
		};
	
		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function() {
				$('#post-report-box .ajax-loader-report-pin, #post-report-box textarea, #post-report-box #post-report-submit').hide();
				$('#post-report-box .alert, #post-report-box #post-report-close').show();
			}
		});
		return false;
	});
	
	$(document).on('click', '#post-report-box #post-report-close', function() {
		$('#popup-overlay').hide();
		$('#post-report-box').modal('hide');
	});
	
	//Report pin - disable submit button if empty message
	$(document).on('focus', '#post-report-box textarea', function() {
		if ($.trim($('#post-report-box textarea').val())) {
			$('#post-report-box #post-report-submit').removeAttr('disabled');
		} else {
			$('#post-report-box #post-report-submit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#post-report-box textarea').val())) {
				$('#post-report-box #post-report-submit').removeAttr('disabled');
			} else {
				$('#post-report-box #post-report-submit').attr('disabled', 'disabled');
			}
		});
	});
	
	//follow for lightbox, posts, author
	$(document).on('click', '.ipin-follow', function() {
		if (obj_ipin.u != '0') {
			var follow = $(this);
			var	board_parent_id = follow.data('board_parent_id');
			var	board_id = follow.data('board_id');
			var	author_id = follow.data('author_id');
			var	disable_others = follow.data('disable_others');
			follow.attr('disabled', 'disabled');
								
			if (!follow.hasClass('disabled')) {
				var data = {
					action: 'ipin-follow',
					nonce: obj_ipin.nonce,
					ipin_follow: 'follow',
					board_parent_id: board_parent_id,
					board_id: board_id,
					author_id: author_id,
					disable_others: disable_others
				};

				$.ajax({
					type: 'post',
					url: obj_ipin.ajaxurl,
					data: data,
					success: function() {
						if (follow.data('board_parent_id') != 0) {
							follow.addClass('disabled').text(obj_ipin.__UnfollowBoard).removeAttr('disabled');
						} else {
							follow.addClass('disabled').text(obj_ipin.__Unfollow).removeAttr('disabled');
						}
						
						//increase followers count in author.php
						if ($('#ajax-follower-count') && follow.parent().parent().parent().parent().attr('id') == 'userbar') {
							$('#ajax-follower-count').html(parseInt($('#ajax-follower-count').html(), 10)+1);
						}
						
						//disable other follow button
						if (board_parent_id == '0' && (disable_others != 'no' || $('#userbar .nav li:first').hasClass('active'))) {
							$('.ipin-follow').each(function() {
								if ($(this).data('board_parent_id') != 0) {
									$(this).addClass('disabled').text(obj_ipin.__UnfollowBoard);
								}
							});
						}
					}
				});
			} else {						
				var data = {
					action: 'ipin-follow',
					nonce: obj_ipin.nonce,
					ipin_follow: 'unfollow',
					board_parent_id: board_parent_id,
					board_id: board_id,
					author_id: author_id
				};

				$.ajax({
					type: 'post',
					url: obj_ipin.ajaxurl,
					data: data,
					success: function(data) {
						if (follow.data('board_parent_id') != 0) {		
							follow.removeClass('disabled').text(obj_ipin.__FollowBoard).removeAttr('disabled');
						} else {
							follow.removeClass('disabled').text(obj_ipin.__Follow).removeAttr('disabled');
						}
						
						//decrease followers count in author.php
						if ($('#ajax-follower-count') && follow.parent().parent().parent().parent().attr('id') == 'userbar') {
							$('#ajax-follower-count').html(parseInt($('#ajax-follower-count').html(), 10)-1);
						}
						
						//enable other follow button
						if (data == 'unfollow_all' && (disable_others != 'no' || $('#userbar .nav li:first').hasClass('active'))) {
							$('.ipin-follow').each(function() {
								if ($(this).data('board_parent_id') != 0) {
									$(this).removeClass('disabled').text(obj_ipin.__FollowBoard);
								}
							});
						}
					}
				});
			}
			return false;
		} else {
			loginPopup();
			return false;
		}
	});
	
	//infinite scroll
	if ($masonry.length && obj_ipin.infinitescroll != 'disable') {
		nextSelector = obj_ipin.nextselector;
		if (document.URL.indexOf('/source/') != -1) {
			nextSelector = '#navigation #navigation-next a';
		}
		
		$masonry.infinitescroll({
			navSelector : '#navigation',
			nextSelector : nextSelector,
			itemSelector : '.thumb',
			prefill: true,
			bufferPx : 500,
			loading: {
				msgText: '',
				finishedMsg: obj_ipin.__allitemsloaded,
				img: obj_ipin.stylesheet_directory_uri + '/img/ajax-loader.gif',
				finished: function() {}
			}
		}, function(newElements) {
			if ($('.check-480px').css('float') == 'left') {
				var $newElems = $(newElements).hide();
	
				$newElems.imagesLoaded(function() {
					$('#infscr-loading').fadeOut('normal');
					$newElems.show();
					$masonry.masonry('appended', $newElems, true);
				});
			} else {
				var $newElems = $(newElements);
				$('#infscr-loading').fadeOut('normal');
				$masonry.masonry('appended', $newElems, true);
			}
		});
	}
	
	//infinite scroll for user profile - boards
	if (user_profile_boards.length && obj_ipin.infinitescroll != 'disable') {
		user_profile_boards.infinitescroll({
			navSelector : '#navigation',
			nextSelector : '#navigation #navigation-next a',
			itemSelector : '.board-mini',
			prefill: true,
			bufferPx : 500,
			loading: {
				msgText: '',
				finishedMsg: obj_ipin.__allitemsloaded,
				img: obj_ipin.stylesheet_directory_uri + '/img/ajax-loader.gif'
			}
		});
	}
	
	//infinite scroll for user profile - followers & following
	if (user_profile_follow.length && obj_ipin.infinitescroll != 'disable') {
		user_profile_follow.infinitescroll({
			navSelector : '#navigation',
			nextSelector : '#navigation #navigation-next a',
			itemSelector : '.follow-wrapper',
			prefill: true,
			bufferPx : 500,
			loading: {
				msgText: '',
				finishedMsg: obj_ipin.__allitemsloaded,
				img: obj_ipin.stylesheet_directory_uri + '/img/ajax-loader.gif',
				finished: function() {}
			}
		}, function(newElements) {
			var $newElems = $(newElements).hide();

			$newElems.imagesLoaded(function() {
				$('#infscr-loading').fadeOut('normal');
				$newElems.show();
				user_profile_follow.masonry('appended', $newElems, true);
			});
		});
	}
	
	//infinite scroll for notifications
	if (user_notifications.length && obj_ipin.infinitescroll != 'disable') {
		user_notifications.infinitescroll({
			navSelector : '#navigation',
			nextSelector : '#navigation #navigation-next a',
			itemSelector : '.notifications-wrapper',
			prefill: true,
			bufferPx : 500,
			loading: {
				msgText: '',
				finishedMsg: obj_ipin.__allitemsloaded,
				img: obj_ipin.stylesheet_directory_uri + '/img/ajax-loader.gif',
				finished: function() {}
			}
		}, function(newElements) {
			var $newElems = $(newElements).hide();
			$newElems.appendTo($('.table'));
			$('#infscr-loading').fadeOut('normal');
			$newElems.show();
		});
	}
	
	//actionbar
	$(document).on('mouseenter', '.thumb-holder', function() {
		if ($('.check-480px').css('float') == 'none' && !ios) {
			$(this).children('.masonry-actionbar').fadeIn(100);
		}
	});
	
	$(document).on('mouseleave', '.thumb-holder', function() {
		if ($('.check-480px').css('float') == 'none' && !ios) {
			$(this).children('.masonry-actionbar').fadeOut(100);
		}
	});
	
	//comments for frontpage
	$(document).on('submit', '.masonry-meta form', function() {
		var commentform = $(this);
		var formdata = $(this).serialize();
		var formurl = $(this).attr('action');
		var post_id = $(this).attr('id').substr(12);
		
		if ($.trim($(this).find('textarea').val()) == '') {
			commentform.find('#comment-status').remove();
			commentform.find('.form-submit .comment-status-ajax-loader').remove();
			commentform.prepend('<div id="comment-status"></div>');
			commentform.find('#comment-status').html('<div class="alert alert-warning"><strong>' + obj_ipin.__Pleasetypeacomment + '</strong></div>');
			commentform.find('textarea').focus();
			return false;
		}
		
		commentform.find('input[type="submit"]').attr('disabled', 'disabled');
		commentform.find('#comment-status').remove();
		commentform.find('.comment-status-ajax-loader').remove();
		commentform.find('.form-submit').append(' <div class="comment-status-ajax-loader ajax-loader ajax-loader-inline"></div>');

		$.ajax({
			type: 'post',
			url: formurl,
			data: formdata,
			error: function(XMLHttpRequest) {
				var errormsg = XMLHttpRequest.responseText.substr(XMLHttpRequest.responseText.indexOf('<p>')+3);
				errormsg = errormsg.substr(0, errormsg.indexOf('</p>'));
				
				if (errormsg == '') {
					errormsg = obj_ipin.__errorpleasetryagain;
				}
				
				commentform.prepend('<div id="comment-status"></div>');
				commentform.find('#comment-status').html('<div class="alert alert-warning"><strong>' + errormsg + '</strong></div>');
				commentform.find('textarea').focus();
				commentform.find('.form-submit .comment-status-ajax-loader').remove();
				if ($('#post-masonry #masonry').length) {
					$('#post-masonry #masonry').masonry('reloadItems').masonry('layout');
				}
				
				if ($('#masonry').length) {
					$('#masonry').masonry('reloadItems').masonry('layout');
				}
		
				commentform.find('input[type="submit"]').removeAttr('disabled');
			},
			success: function() {
				commentform.find('.form-submit .comment-status-ajax-loader').remove();
				var commenttext =  commentform.find('textarea').val();
				var newcomment = '<div id="masonry-meta-comment-wrapper-' + post_id + '" class="masonry-meta"><div class="masonry-meta-avatar">' + obj_ipin.avatar30 + '</div><div class="masonry-meta-comment"><span class="masonry-meta-author">' + obj_ipin.ui + '</span><span class="masonry-meta-comment-content"> ' + commenttext + '</span></div></div>';
				
				$('[id=masonry-meta-commentform-' + post_id + ']').prev().append(newcomment);
				commentform.find('#comment').val('');
				commentform.closest('#masonry-meta-commentform-' + post_id).hide();
				commentform.closest('#post-' + post_id).find('.ipin-comment').removeClass('disabled');
				
				var comments_countmsg = commentform.closest('#post-' + post_id).find('#comments-count-'+post_id);
				var comments_count = comments_countmsg.html();
				comments_count = comments_count.substring(comments_count.lastIndexOf(' '));

				if (comments_count == '') {						
					$('[id=comments-count-'+post_id+']').removeClass('hide').html('<i class="fa fa-comment"></i> 1');
				} else {
					$('[id=comments-count-'+post_id+']').html('<i class="fa fa-comment"></i> ' + (parseInt(comments_count,10)+1));
				}
				
				if ($('#post-masonry #masonry').length) {
					$('#post-masonry #masonry').masonry('reloadItems').masonry('layout');
				}
				
				if ($('#masonry').length) {
					$('#masonry').masonry('reloadItems').masonry('layout');
				}
				
				commentform.find('textarea').val('');
				commentform.find('input[type="submit"]').removeAttr('disabled');
			}
		});
		return false;
	});
	
	//comments toggle frontpage comments form
	$(document).on('click', '.ipin-comment', function() {
		if (obj_ipin.u != '0') {
			var commentsform = $(this);
			if (!commentsform.hasClass('disabled')) {
				commentsform.addClass('disabled');
			} else {
				commentsform.removeClass('disabled');
			}
			
			$(this).closest('#post-' + $(this).data('post_id')).find('#masonry-meta-commentform-' + $(this).data('post_id')).slideToggle('fast', function() {
				if ($('#post-masonry #masonry').length) {
					$('#post-masonry #masonry').masonry('reloadItems').masonry('layout');
				} else if ($('#masonry').length) {
					$('#masonry').masonry('reloadItems').masonry('layout');
				}
			}).find('textarea').focus();
			return false;
		} else {
			loginPopup();
			return false;
		}
	});
	
	//lightbox
	$(document).on('click', '#masonry .featured-thumb, .post-wrapper .post-nav-next a, .post-wrapper .post-nav-prev a', function() {
		if ($masonry.length && !$('body').hasClass('single-post') && !$('body').hasClass('page-template-page_full_width_100percet-php') && obj_ipin.lightbox != 'disable' && $('.check-767px').css('float') == 'none' && !ios) {
			var lightbox = $('#post-lightbox');
			var href = $(this).closest('a').attr('href');
			
			if (!$('#single-pin').length || $('#single-pin').height() <= 0) {				
				if (!ie9below) {
					window.history.pushState('', '', href);
				}
			} else {				
				if (!ie9below) {
					window.history.replaceState('', '', href);
				}
			}

			lightbox.html('<div id="ajax-loader-masonry"></div>')
				.modal().load(href + ' #single-pin-wrapper', function() {
					var post_masonry = $('#post-masonry #masonry');
					if (post_masonry.length) {
						post_masonry.masonry({
							itemSelector : '.thumb',
							isFitWidth: true,
							transitionDuration: 0
						}).css('visibility', 'visible');
						$('#post-masonry #ajax-loader-masonry, #post-masonry #navigation').hide();
					}
					
					$('.post-wrapper .post-nav-next a, .post-wrapper .post-nav-prev a').addClass('post-nav-link-lightbox');
					lightbox_postid = $('#single-pin').data('postid');
					lightbox_prevlink = $('.container-fluid > #masonry > #post-' + lightbox_postid).prevAll('.post').first().find('.featured-thumb-link').attr('href');
					lightbox_nextlink = $('.container-fluid > #masonry > #post-' + lightbox_postid).nextAll('.post').first().find('.featured-thumb-link').attr('href');
					if (!lightbox_prevlink) {
						$('.post-wrapper .post-nav-prev a').hide();
					} else {
						$('.post-wrapper .post-nav-prev a').attr('href', lightbox_prevlink);						
					}
					if (!lightbox_nextlink) {
						$('.post-wrapper .post-nav-next a').hide();
					} else {
						$('.post-wrapper .post-nav-next a').attr('href', lightbox_nextlink);
					}
					
					$('#post-close').show();

					lightbox.scrollTop(0).focus();
					$('#post-featured-photo').imagesLoaded(function() {
						lightbox.scrollTop(0);
						var post_top_meta = $('.post-top-meta');
						var post_top_meta_top = post_top_meta.position().top;
						var post_top_meta_height = post_top_meta.outerHeight();
	
						var post_featured_photo_top = $('#post-featured-photo').offset().top;
						var post_featured_photo_bottom = post_featured_photo_top + $('#post-featured-photo').outerHeight();
						
						lightbox.scroll(function() {
							var post_top_meta_left = $('#post-featured-photo').offset().left;
							if (lightbox.scrollTop() > post_top_meta_top && lightbox.scrollTop() <= (post_featured_photo_bottom - post_top_meta_height - $(document).scrollTop())) {
								$('.post-top-meta').css({'opacity': '0.95', 'position': 'fixed', 'top': 0, 'left': post_top_meta_left, 'width': $('#post-featured-photo').outerWidth()});
								$('.post-top-meta-placeholder').css('height', post_top_meta_height-1).show();
							} else if (lightbox.scrollTop() > (post_featured_photo_bottom - post_top_meta_height - $(document).scrollTop())) {
								$('.post-top-meta').css({'position': 'absolute', 'top': (post_featured_photo_bottom - post_top_meta_height -$(document).scrollTop() - 2), 'left': 16});
							} else {
								$('.post-top-meta').css({'opacity': '1', 'position': 'relative', 'top': 0, 'left': 0, 'width': 'auto'});
								$('.post-top-meta-placeholder').hide();
							}
						});
					});
					
					if ($('.adsbygoogle').length) {
						$.getScript('//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js');
						(adsbygoogle = window.adsbygoogle || []).push({});
					}
					
					if ($('.fb-comments').length) {
						FB.XFBML.parse();
					}
				});
				
			if (typeof ga == 'function') {
				ga('send', 'pageview', {'page': href.replace(obj_ipin.home_url, '')});
			}

			if (typeof _gaq !== 'undefined') {
				_gaq.push(['_trackPageview', href.replace(obj_ipin.home_url, '')]);
			}

			return false;
		}
	});

	//hide lightbox when click outside
	$('#post-lightbox').click(function(e) {
		var lightbox = $('#post-lightbox');

		if ((lightbox.has(e.target).length === 0 || $('.row').has(e.target).length === 0) && e.pageX < ($(window).width() - 22)) { //second condition for firefox-scrollbar-onclick-close-lightbox fix
			lightbox.scrollTop(0);
			$('#video-embed').remove();
			$('.navbar-brand').focus().blur();
			lightbox.modal('hide');
			
			if (!ie9below) {
				window.history.back();
			}			
		}
	});
	
    //hide lightbox when esc key is pressed. must use keydown not keyup.
	$(document).keydown(function(e) {
		if ($('#post-lightbox').css('display') == 'block' && e.keyCode == 27) {
			$('#post-lightbox').scrollTop(0);
			if (!ie9below) {
				window.history.back();
			}
		}
	});
	
    //hide lightbox when back button is pressed
	$(window).on('popstate', function(e){
		var lightbox = $('#post-lightbox');

		if (lightbox.length) {
			lightbox.scrollTop(0);
			$('#video-embed').remove();
			$('.navbar-brand').focus().blur();
			lightbox.modal('hide');
		}
    });
	
    //hide lightbox when sidebar close button is clicked
	$(document).on('click', '#post-close', function(e) {
		if (ie9below) {
			var lightbox = $('#post-lightbox');
	
			if (lightbox.length) {
				lightbox.scrollTop(0);
				$('#video-embed').remove();
				$('.navbar-brand').focus().blur();
				lightbox.modal('hide');
			}
		} else {
			window.history.back();	
		}
	});
	
	//Manipulate history for links in lightbox
	$(document).on('click', '#post-lightbox a', function(e) {
		href = $(this).attr('href');

		if ($(this).hasClass('ipin-edit') || $(this).hasClass('edit-board') || (!$(this).hasClass('post-nav-link-lightbox') && !$(this).hasClass('btn') && href != '' && $(this).attr('target') != '_blank')) {
			if (!ie9below) {
				window.location.replace(href);
				return false;
			} else if (/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)) {
				setTimeout(function() { //have to use setTimeout for chrome?
					window.location.replace(href);
					return false;
				}, 0);
			} else {
				window.location.replace(href);
				return false;
			}
		}
	});
	
	//Add board
	$('#add_board_form').submit(function() {
		var addboardform = $(this);
		var errormsg = $('.error-msg');
		var ajaxloader = $('.ajax-loader');

		addboardform.find('input[type="submit"]').attr('disabled', 'disabled');
		errormsg.hide();
		ajaxloader.show();
		
		if ($('#board-title').val() == '') {
			errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__Pleaseentertitle  + '</strong></div>').fadeIn();
			$('#board-title').focus();
			$('.ajax-loader').hide();
			addboardform.find('input[type="submit"]').removeAttr('disabled');
		} else {
			var data = {
				action: 'ipin-add-board',
				nonce: obj_ipin.nonce,
				board_title: $('#board-title').val(),
				category_id: $('#category-id').val(),
				term_id: $('#term-id').val(),
				mode: $('#mode').val()
			};
			
			$.ajax({
				type: 'post',
				url: obj_ipin.ajaxurl,
				data: data,
				error: function() {
					ajaxloader.hide();
					errormsg.html(obj_ipin.__errorpleasetryagain).fadeIn();
					addboardform.find('input[type="submit"]').removeAttr('disabled');
				},
				success: function(data) {
					ajaxloader.hide();
					if ($('#add_board_form #mode').val() == 'add' || $('#add_board_form #mode').val() == 'edit' ) {
						if (data == 'error') {
							errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__boardalreadyexists  + '</strong></div>').fadeIn();
							$('#board-title').focus();
							addboardform.find('input[type="submit"]').removeAttr('disabled');
						} else {
							window.location = data;
						}
					}
				}
			});
		}
		return false;
	});

	//delete board confirmation
	$(document).on('click', '.ipin-delete-board', function() {
		$('#delete-board-modal').modal();
		return false;
	});
	
	//delete board
	$(document).on('click', '#ipin-delete-board-confirmed', function() {
		var ajaxloader = $('.ajax-loader-delete-board');
		var delete_btn = $(this);
		var	board_id = delete_btn.data('board_id');

		delete_btn.attr('disabled', 'disabled').prev().attr('disabled', 'disabled');
		ajaxloader.css('display', 'inline-block');
									
		var data = {
			target: '.ajax-loader-add-pin',
			action: 'ipin-delete-board',
			nonce: obj_ipin.nonce,
			board_id: board_id
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function(data) {
				window.location = data;
			}
		});
	});

	//add pin from computer
	$('#pin_upload_file').change(function() { 
		$('.error-msg').hide();
		$('#pin_upload_form').submit();
	});
	
	if ($('#pin_upload_form').length) {
		var options = {
			beforeSubmit: showRequest,
			uploadProgress: function(event, position, total, percentComplete) {
				if (window.FormData !== undefined) {
					$('#pin-upload-progress').show();
					$('#pin-upload-progress .progress-bar-text').text(percentComplete + '%');
					$('#pin-upload-progress .progress-bar').css('width', percentComplete + '%');
				}
			},
			success: showResponse,
			url: obj_ipin.ajaxurl
		}; 
		$('#pin_upload_form').ajaxForm(options);
	}
	
	function showRequest(formData, jqForm, options) {
		$('#pin-upload-from-web-wrapper, #browser-addon, #bookmarklet, #pinitbutton').slideUp();
		if (window.FormData === undefined) {
			$('#pin-upload-from-computer-wrapper .ajax-loader-add-pin').show();
		}

		var ext = $('#pin_upload_file').val().split('.').pop().toLowerCase();
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
			$('#pin-upload-from-computer-wrapper .ajax-loader-add-pin, #pin-upload-progress').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
			return false;
		}
	}
	
	function showResponse(responseText, statusText, xhr, $form) {
		if (responseText == 'error') {
			$('.ajax-loader-add-pin, #pin-upload-progress').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
		} else if (responseText == 'errorsize') {
			$('.ajax-loader-add-pin, #pin-upload-progress').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__imagetoosmall  + '</strong></div>').fadeIn();
		} else {
			var data = $.parseJSON(responseText);
			$('#thumbnail').attr('src', data.thumbnail);
			$('#attachment-id').val(data.id);
			$('.ajax-loader-add-pin, .error-msg, #pin-upload-progress').hide();
			$('#pin-upload-from-computer-wrapper').slideUp(function() {
				$('#pin-upload-postdata-wrapper').slideDown();
				setTimeout(function() {
					tmce_focus('pin-title');
					
					if (tmce_getContent('pin-title') != ''&& ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
						$('#pinit').removeAttr('disabled');
					} else {
						$('#pinit').attr('disabled', 'disabled');
					}
					
					if ($('#pin-title_ifr').length) {
						$(document.getElementById('pin-title_ifr').contentWindow.document).keyup(function() {
							if (tmce_getContent('pin-title') != ''&& ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
								$('#pinit').removeAttr('disabled');
							} else {
								$('#pinit').attr('disabled', 'disabled');
							}
						});
					}
				}, 500);
			});
		}
	}
	
	//add pin from web
	if ($('#pin_upload_web_form').length) {
		var options_web = {
			beforeSubmit: showRequest_web,
			success: showResponse_web,
			url: obj_ipin.ajaxurl
		};
		$('#pin_upload_web_form').ajaxForm(options_web);
	}
	
	function showRequest_web(formData, jqForm, options) {
		$('#fetch').attr('disabled', 'disabled');
		$('#pin-upload-from-computer-wrapper, #browser-addon, #bookmarklet, #pinitbutton').slideUp();
		$('#photo_data_source').val($('#pin_upload_web').val());
		$('#pin-upload-from-web-wrapper .ajax-loader-add-pin').show();
		$('.error-msg').hide();
		
		var input_url = $('#pin_upload_web').val();

		if (input_url == '') {
			$('.ajax-loader-add-pin').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__pleaseenterurl  + '</strong></div>').fadeIn();
			$('#fetch').removeAttr('disabled');
			return false();
		}
		
		//append http:// if missing
		if (input_url.indexOf('http://') == -1 && input_url.indexOf('https://') == -1) {
			input_url = 'http://' + input_url;
		}
		
		//strip https for youtube & vimeo
		if (input_url.indexOf('youtube.com/watch') != -1 || input_url.match(/vimeo.com\/(\d+)($|\/)/)) {
			input_url = input_url.replace('https://', 'http://');
		}
		
		var ext = input_url.split('.').pop().toLowerCase();
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
			if (input_url.indexOf('youtu.be/') != -1) {
				input_url = input_url.replace(/youtu.be\//, 'www.youtube.com/watch?v=');
			}
			
			$.get(obj_ipin.stylesheet_directory_uri + '/ipin_fetch.php?url=' + encodeURIComponent(input_url.replace('http','')) + '&nonce=' + obj_ipin.nonce, function(data){
				if (data.substr(0, 5) == 'error') {
					$('.ajax-loader-add-pin').hide();
					$('#fetch').removeAttr('disabled');
					$('.error-msg').html('<div class="alert alert-warning"><strong>' + data.substr(5)  + '</strong></div>').fadeIn();
				} else {
					$('.ajax-loader-add-pin').hide();
					$('#fetch').removeAttr('disabled');
					$('body').css('overflow', 'hidden')
					.append("\
					<div id='ipinframe'>\
						<div id='ipinframebg'><p>" + obj_ipin.__loading + "</p></div>\
						<div id='ipinheader'><p id='ipinclose'>X</p><p id='ipinlogo'>" + obj_ipin.blogname + "</p></div>\
						<div id='ipinimages'></div>\
						<style type='text/css'>\
							#ipinframe {color: #333;}\
							#ipinframebg {background: #f2f2f2; display: none; position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 2147483646;}\
							#ipinframebg p {background: #999; border-radius: 8px; color: white; font: normal normal bold 16px\/22px Helvetica, Arial, sans-serif; margin: -2em auto 0 -9.5em; padding: 12px; position: absolute; top: 50%; left: 50%; text-align: center; width: 15em;}\
							#ipinframe #ipinheader {background: white; border-bottom: 1px solid #e7e7e7; color: white; height: 50px; margin: 0; overflow: hidden; padding: 0; position: fixed; top: 0; left: 0; text-align: center; width: 100%; z-index: 2147483647;}\
							#ipinframe #ipinheader #ipinlogo {color: black; font: normal normal bold 20px\/20px Helvetica, Arial, sans-serif; margin: 0; padding: 12px 15px 13px 20px;}\
							#ipinframe #ipinheader #ipinclose {background: #f33; color: white; cursor: pointer; float: right; font: normal normal bold 16px\/16px Helvetica, Arial, sans-serif; line-height: 50px; margin: 0; padding: 0 20px;}\
							#ipinimages {position: fixed; top: 60px; left: 0; width: 100%; height: 94%; overflow-x: auto; overflow-y: scroll; text-align: center; z-index: 2147483647;}\
							#ipinimages .ipinimgwrapper {background: #fcfcfc; border: 1px solid #ddd; cursor: pointer; display: inline-block; height: 200px; margin: 15px; overflow: hidden; position: relative; width: 200px;}\
							#ipinimages .ipinbutton {background: rgba(0, 0, 0, 0.5); border-radius: 8px; color: white; font: normal normal bold 36px/36px Helvetica, Arial, sans-serif; padding: 8px 16px; display: none; margin-left: -24px; margin-top: -36px; position: absolute; top: 50%; left:50%;}\
							#ipinimages .ipindimension {background: white; font: normal normal normal 12px/12px Helvetica, Arial, sans-serif; padding: 3px 0; position: absolute; right: 0; bottom: 0; left: 0;}\
							#ipinimages img {width: 100%; height: auto;}\
						</style>\
					</div>");
					
					$('#ipinframebg').fadeIn(200);

					function display_thumbnails(imgarr, videoflag) {
						if (!imgarr.length) {
							$('#ipinframebg').html('<p>' + obj_ipin.__sorryunbaletofindanypinnableitems + '</p>');
						} else {
							if ($(data).filter('ipintitle').text()) {
								page_title = encodeURIComponent($(data).filter('ipintitle').text().trim());
							} else {
								page_title = '';
							}
							
							var imgstr = '';
							for (var i = 0; i < imgarr.length; i++) {
								if (videoflag == '0') {
									imgstr += '<div class="ipinimgwrapper" data-href="' + obj_ipin.home_url + '/itm-settings/?m=bm&imgsrc=' + encodeURIComponent(imgarr[i][0].replace('http','')) + '&source=' + encodeURIComponent(input_url.replace('http','')) + '&title=' + page_title + '&video=' + videoflag + '"><div class="ipinbutton">+</div><img src="' + imgarr[i][0] + '" /></div>';
								} else {
									imgstr += '<div class="ipinimgwrapper" data-href="' + obj_ipin.home_url + '/itm-settings/?m=bm&imgsrc=' + encodeURIComponent(imgarr[i][0].replace('http','')) + '&source=' + encodeURIComponent(input_url.replace('http','')) + '&title=' + page_title + '&video=' + videoflag + '"><div class="ipinbutton">+</div><div class="ipindimension">' + obj_ipin.__Video + '</div><img src="' + imgarr[i][0] + '" /></div>';
								}
							}

							$('#ipinimages').css('height',$(window).height()-$('#ipinheader').height()-20).html(imgstr + "<div style='height:40px;clear:both;'><br /></div>")
							
							if ((navigator.appVersion.indexOf('Chrome/') != -1 || navigator.appVersion.indexOf('Safari/')) && videoflag != '1') {
								$('#ipinimages .ipinimgwrapper').css('float','left');
							}
							
							if (videoflag == '0') { 
								$('#ipinimages').hide().imagesLoaded(function() {
									var images_hidden_count = 0;
									
									$('#ipinimages img').each(function() {
										var imgwidth = this.naturalWidth;
										if (!imgwidth) {
											imgwidth = jQuery(this).width();
										}
										
										var imgheight = this.naturalHeight;
										if (!imgheight) {
											imgheight = jQuery(this).height();
										}
										
										if (imgwidth < 125) {
											$(this).parent().hide();
											images_hidden_count++;
										} else {
											$(this).before('<div class="ipindimension">' + parseInt(imgwidth,10) + ' x ' + parseInt(imgheight,10) + '</div>');	
										}
									});
									
									if (images_hidden_count == imgarr.length) {
										$('#ipinframebg').html('<p>' + obj_ipin.__sorryunbaletofindanypinnableitems + '</p>');
									} else {
										$('#ipinframebg p').fadeOut(200);
										$('#ipinimages').show();
									}
								});
							} else {
								$('#ipinframebg p').fadeOut(200);	
							}
						}	
					}
					
					var imgarr = [];
					var videoflag = '0';
					
					if (input_url.indexOf('youtube.com/watch') != -1) {
						video_id = input_url.match('[\\?&]v=([^&#]*)');
						imgsrc = 'http://img.youtube.com/vi/' + video_id[1] + '/0.jpg';
						imgarr.unshift([imgsrc,480,360]);
						videoflag = '1';
						display_thumbnails(imgarr, videoflag);
					} else if (input_url.match(/vimeo.com\/(\d+)($|\/)/)) {
						video_id = input_url.split('/')[3];
						
						$.getJSON('http://www.vimeo.com/api/v2/video/' + video_id + '.json?callback=?', {format: "json"}, function(data) {
							imgsrc = data[0].thumbnail_large;
							imgarr.unshift([imgsrc,640,360]);
							videoflag = '1';
							display_thumbnails(imgarr, videoflag);
						});
					} else {
						$('img', data).each(function() {
							var imgsrc = $(this).prop('src');
							imgarr.push([imgsrc,0,0]);
						});
						
						display_thumbnails(imgarr, videoflag);
					}
					
					$('#ipinheader').on('click', '#ipinclose', function() {
						$('body').css('overflow', 'visible');
						$('#ipinframe').fadeOut(200, function() {
							$(this).remove();
							$('#pin_upload_web').focus().select();
						});
					});
					
					$('#ipinimages').on('click', '.ipinimgwrapper', function() {
						window.open($(this).data('href'), "ipinwindow", "width=400,height=760,left=0,top=0,resizable=1,scrollbars=1");
						$('body').css('overflow', 'visible');
						$('#ipinframe').remove();
						$('#pin_upload_web').focus().select();
					});
					
					$('#ipinimages').on('mouseover', '.ipinimgwrapper', function() {
						$(this).find('.ipinbutton').show();
					}).on('mouseout', '.ipinimgwrapper', function() {
						$(this).find('.ipinbutton').hide();
					});
					
					$(document).keyup(function(e) {
						if (e.keyCode == 27) {
						$('body').css('overflow', 'visible');
						$('#ipinframe').fadeOut(200, function() {
							$(this).remove();
							$('#pin_upload_web').focus().select();
						});
						}
					});
				}
			});
	
			return false;
		}
	}
	
	function showResponse_web(responseText, statusText, xhr, $form) {
		if (responseText == 'error') {
			$('.ajax-loader-add-pin').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
			$('#fetch').removeAttr('disabled');
		} else if (responseText == 'errorsize') {
			$('.ajax-loader-add-pin').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + obj_ipin.__imagetoosmall  + '</strong></div>').fadeIn();
			$('#fetch').removeAttr('disabled');
		} else if (responseText.indexOf('Error Fetching Image') != -1) {
			$('#pin-upload-from-web-wrapper .ajax-loader-add-pin').hide();
			$('.error-msg').html('<div class="alert alert-warning"><strong>' + responseText  + '</strong></div>').fadeIn();
			$('#pin_upload_web').focus();
			$('#fetch').removeAttr('disabled');
		} else {
			var data = $.parseJSON(responseText);
			$('#thumbnail').attr('src', data.thumbnail);
			$('#attachment-id').val(data.id);
			$('.ajax-loader-add-pin, .error-msg').hide();
			$('#pin-upload-from-web-wrapper').slideUp(function() { 
				$('#pin-upload-postdata-wrapper').slideDown();
			});
		}
	}
	
	//add new board toggle
	$(document).on('click', '#pin-postdata-form #pin-postdata-add-new-board', function() {
		if ($(this).text() == obj_ipin.__cancel) {
			if($('#noboard').length) {
				$('#pinit').attr('disabled', 'disabled');
			}
			$(this).text(obj_ipin.__addnewboard);
			$('.usercp-pins #board-add-new').val('').hide();
			$('.usercp-pins #board-add-new-category').val('-1').hide();
			$('.usercp-pins #board').show().focus();
		} else {
			$(this).text(obj_ipin.__cancel);
			$('.usercp-pins #board-add-new').show().focus();
			$('.usercp-pins #board-add-new-category').show();
			$('.usercp-pins #board').hide();
		}
		return false;
	});
	
	//disable submit button if empty textarea (from web and computer)
	$('#pin-postdata-form textarea#pin-title').focus(function() {
		if ($.trim($('#pin-postdata-form textarea#pin-title').val()) && ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
			$('#pinit').removeAttr('disabled');
		} else {
			$('#pinit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#pin-postdata-form textarea#pin-title').val()) && ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	});

	//disable submit button if empty textarea (bookmarklet mode)
	if ($('#pin-postdata-form textarea#pin-title').is(':focus')) {
		if ($.trim($('#pin-postdata-form textarea#pin-title').val()) && ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
			$('#pinit').removeAttr('disabled');
		} else {
			$('#pinit').attr('disabled', 'disabled');
		}

		$(this).keyup(function() {
			if ($.trim($('#pin-postdata-form textarea#pin-title').val()) && ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	}
		
	$('#pin-postdata-form #board-add-new').focus(function() {
		var content = '';
		if ($('#pin-title_ifr').length) {
			content = tmce_getContent('pin-title');
		} else {
			content = $.trim($('#pin-postdata-form textarea#pin-title').val());
		}
		
		$(this).keyup(function() {
			if ($('#pin-title_ifr').length) {
				content = tmce_getContent('pin-title');
			} else {
				content = $.trim($('#pin-postdata-form textarea#pin-title').val());
			}
			
			if (content && ($('#pin-postdata-form #board').val() != '-1' || $.trim($('#pin-postdata-form #board-add-new').val()))) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	});
	
	//autocomplete tags
	if ('function' == typeof $.suggest) {
		$('input#tags').suggest(obj_ipin.ajaxurl + '?action=ajax-tag-search&tax=post_tag', {minchars: 3, multiple: true});
	}
	
	//insert new pin
	$('#pin-postdata-form').submit(function() {
		var postdataform = $(this);
		var errormsg = $('.error-msg');
		var ajaxloader = $('.ajax-loader-add-pin');	
		
		//empty title
		if (!$.trim($('#pin-postdata-form textarea#pin-title').val())) {
			ajaxloader.hide();
			errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__Pleaseentertitle  + '</strong></div>').fadeIn();
			return false;
		}
		
		//empty board
		if ($('#pin-postdata-form #board').val() == '-1' && $.trim($('#pin-postdata-form #board-add-new').val()) == '') {
			ajaxloader.hide();
			errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__Pleasecreateanewboard  + '</strong></div>').fadeIn();
			return false;
		}
		
		var postdata_photo_source;
		
		if ($('#photo_data_source').val()) {
			postdata_photo_source = $('#photo_data_source').val();
		}
		
		var price = '';
		if ($('#pin-postdata-form #price').length)
			price = $('#pin-postdata-form #price').val().replace(/[^0-9.]/g, '');
			
		var colorThief = new ColorThief();
		var postdata_bgcolor = colorThief.getColor($('#thumbnail')[0]).join(',');

		var data = {
			action: 'ipin-postdata',
			nonce: obj_ipin.nonce,
			postdata_title: tmce_getContent('pin-title'),
			postdata_content: tmce_getContent('pin-content'),
			postdata_attachment_id: $('#attachment-id').val(),
			postdata_board: $('#pin-postdata-form #board').val(),
			postdata_board_add_new: $('#pin-postdata-form #board-add-new').val(),
			postdata_board_add_new_category: $('#pin-postdata-form #board-add-new-category').val(),
			postdata_tags: $('#pin-postdata-form #tags').val(),
			postdata_price: price,
			postdata_preorder: $('#pin-postdata-form #preorder').is(':checked'), //edited: preorder
			postdata_photo_source: postdata_photo_source,
			postdata_bgcolor: postdata_bgcolor
		};

		postdataform.find('input[type="submit"]').attr('disabled', 'disabled');
		ajaxloader.show();
		errormsg.hide();
		
		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			error: function() {
				ajaxloader.hide();
				errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__errorpleasetryagain  + '</strong></div>').fadeIn();
				postdataform.find('input[type="submit"]').removeAttr('disabled');
			},
			success: function(data) {
				ajaxloader.hide();
				errormsg.hide();
				$('#pin-postdata-form').hide();
				
				var board_name;
				if ($('#pin-postdata-form #board-add-new').val() == '') {
					board_name = $('#pin-postdata-form #board option:selected').text();
				} else {
					board_name = $('#pin-postdata-form #board-add-new').val();
				}
								
				var pin_status ='<br />';
				if (data.indexOf('/?p=') != -1) {
					pin_status = '<small style="display:block;clear:both"><span class="label label-warning">' + obj_ipin.__yourpinispendingreview + '</span></small>';
				}
				
				if (window.location.search.indexOf('m=bm') != -1) //via bookmarklet
					$('.postdata-box-photo').after('<h3 id="repinnedmsg" class="text-center">' + obj_ipin.__pinnedto + ' ' + board_name + pin_status + '<p></p><a class="btn btn-success" href="javascript:window.open(\'' + data + '\');window.close();"><strong>' + obj_ipin.__seethispin + '</strong></a> <a href="javascript:window.close()" class="btn btn-success" aria-hidden="true"><strong>' + obj_ipin.__close + '</strong></a></h3><h5 class="repinnedmsg-share text-center"><strong>' + obj_ipin.__shareitwithyourfriends + '</strong></h5><p class="repinnedmsg-share text-center"><a class="btn btn-primary btn-sm" href="" onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(data) + '\', \'facebook-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-facebook fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'https://twitter.com/share?url=' + data + '&amp;text=' + encodeURIComponent($('#pin-postdata-form textarea#pin-title').val()) + '\', \'twitter-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-twitter fa-fw"></i></a> <a class="btn btn-danger btn-sm" href="" onclick="window.open(\'https://plus.google.com/share?url=' + data + '\', \'gplus-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-google-plus fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'http://www.reddit.com/submit?url=' + encodeURIComponent(data) + '&amp;title=' + encodeURIComponent($('#repinform textarea#pin-title').val()) + '\', \'reddit-share-dialog\', \'width=880,height=500,scrollbars=1\'); return false;"><i class="fa fa-reddit fa-fw"></i></a> <a class="btn btn-primary btn-sm" href="" onclick="window.open(\'http://vkontakte.ru/share.php?url=' + encodeURIComponent(data) + '\', \'vk-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-vk fa-fw"></i></a> <a class="btn btn-primary btn-sm" href="" onclick="window.open(\'http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl=' + encodeURIComponent(data) + '\', \'ok-share-dialog\', \'width=626,height=500\'); return false;"><img src="' + obj_ipin.stylesheet_directory_uri + '/img/odnoklassniki.png' +'" /></a></p>'); //edited: add vk/ok
				else {
					$('.postdata-box-photo').after('<h3 id="repinnedmsg" class="text-center">' + obj_ipin.__pinnedto + ' ' + board_name + pin_status + '<p></p><a class="btn btn-success" href="' + data + '"><strong>' + obj_ipin.__seethispin + '</strong></a> <a href="" class="btn btn-success" aria-hidden="true"><strong>' + obj_ipin.__addanotherpin + '</strong></a></h3><h5 class="repinnedmsg-share text-center"><strong>' + obj_ipin.__shareitwithyourfriends + '</strong></h5><p class="repinnedmsg-share text-center"><a class="btn btn-primary btn-sm" href="" onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(data) + '\', \'facebook-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-facebook fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'https://twitter.com/share?url=' + data + '&amp;text=' + encodeURIComponent($('#pin-postdata-form textarea#pin-title').val()) + '\', \'twitter-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-twitter fa-fw"></i></a> <a class="btn btn-danger btn-sm" href="" onclick="window.open(\'https://plus.google.com/share?url=' + data + '\', \'gplus-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-google-plus fa-fw"></i></a> <a class="btn btn-info btn-sm" href="" onclick="window.open(\'http://www.reddit.com/submit?url=' + encodeURIComponent(data) + '&amp;title=' + encodeURIComponent($('#pin-postdata-form textarea#pin-title').val()) + '\', \'reddit-share-dialog\', \'width=880,height=500,scrollbars=1\'); return false;"><i class="fa fa-reddit fa-fw"></i></a> <a class="btn btn-primary btn-sm" href="" onclick="window.open(\'http://vkontakte.ru/share.php?url=' + encodeURIComponent(data) + '\', \'vk-share-dialog\', \'width=626,height=500\'); return false;"><i class="fa fa-vk fa-fw"></i></a> <a class="btn btn-primary btn-sm" href="" onclick="window.open(\'http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl=' + encodeURIComponent(data) + '\', \'ok-share-dialog\', \'width=626,height=500\'); return false;"><img src="' + obj_ipin.stylesheet_directory_uri + '/img/odnoklassniki.png' +'" /></a></p>'); //edited: add vk/ok
				}
			}
		});
		return false;
	});
	
	//edit pin
	//add new board toggle
	$(document).on('click', '#pin-edit-form #pin-postdata-add-new-board', function() {
		if ($(this).text() == obj_ipin.__cancel) {
			$(this).text(obj_ipin.__addnewboard);
			$('.usercp-pins #board-add-new').val('').hide();
			$('.usercp-pins #board-add-new-category').val('-1').hide();
			$('.usercp-pins #board').show().focus();
		} else {
			$(this).text(obj_ipin.__cancel);
			$('.usercp-pins #board-add-new').show().focus();
			$('.usercp-pins #board-add-new-category').show();
			$('.usercp-pins #board').hide();
		}
		return false;
	});
	
	//disable submit button if empty textarea
	if ($('#pin-edit-form textarea#pin-title').is(":focus")) {
		$(this).keyup(function() {
			if ($.trim($('#pin-edit-form textarea#pin-title').val())) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	}
	
	$('#pin-edit-form textarea#pin-title').focus(function() {
		$(this).keyup(function() {
			if ($.trim($('#pin-edit-form textarea#pin-title').val())) {
				$('#pinit').removeAttr('disabled');
			} else {
				$('#pinit').attr('disabled', 'disabled');
			}
		});
	});

	$('#pin-edit-form').submit(function() {
		var editform = $(this);
		var errormsg = $('.error-msg');
		var ajaxloader = $('.ajax-loader-add-pin');
		
		var price = '';
		if ($('#pin-edit-form #price').length)
			price = $('#pin-edit-form #price').val().replace(/[^0-9.]/g, '');
		
		var data = {
			action: 'ipin-pin-edit',
			nonce: obj_ipin.nonce,
			postdata_pid: $('#pin-edit-form #pid').val(),
			postdata_title: tmce_getContent('pin-title'),
			postdata_content: tmce_getContent('pin-content'),
			postdata_board: $('#pin-edit-form #board').val(),
			postdata_board_add_new: $('#pin-edit-form #board-add-new').val(),
			postdata_board_add_new_category: $('#pin-edit-form #board-add-new-category').val(),
			postdata_tags: $('#pin-edit-form #tags').val(),
			postdata_price: price,
			postdata_preorder: $('#pin-edit-form #preorder').is(':checked'), //edited: preorder
			postdata_source: $('#pin-edit-form #source').val()
		};

		editform.find('input[type="submit"]').attr('disabled', 'disabled');
		ajaxloader.show();
		errormsg.hide();
		
		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			error: function() {
				ajaxloader.hide();
				errormsg.html('<div class="alert alert-warning"><strong>' + obj_ipin.__errorpleasetryagain  + '</strong></div>').fadeIn();
				editform.find('input[type="submit"]').removeAttr('disabled');
			},
			success: function(data) {

				window.location = data;
			}
		});
		return false;
	});	
	
	//delete pin confirmation
	$(document).on('click', '.ipin-delete-pin', function() {
		$('#delete-pin-modal').modal();
		return false;
	});
	
	//delete pin
	$(document).on('click', '#ipin-delete-pin-confirmed', function() {
		var ajaxloader = $('.ajax-loader-delete-pin');
		var delete_btn = $(this);
		var	pin_id = delete_btn.data('pin_id');
		var	pin_author = delete_btn.data('pin_author');

		delete_btn.attr('disabled', 'disabled').prev().attr('disabled', 'disabled');
		ajaxloader.css('display', 'inline-block');

		var data = {
			action: 'ipin-delete-pin',
			nonce: obj_ipin.nonce,
			pin_id: pin_id,
			pin_author: pin_author
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function(data) {
				window.location = data;
			}
		});
	});
	
	//replace image in edit form
	$('#ipin_replace_image').change(function() {
		$('.error-msg-replace-image').hide();
		$('#ipin-replace-image-form').submit();
	});
	
	if ($('#ipin-replace-image-form').length) {
		var options = {
			beforeSubmit: showRequest_replace_image,
			success: showResponse_replace_image,
			url: obj_ipin.ajaxurl
		};
		$('#ipin-replace-image-form').ajaxForm(options);
	}

	function showRequest_replace_image(formData, jqForm, options) {
		$('#ipin-replace-image-form .ajax-loader-replace-image').show();

		var ext = $('#ipin_replace_image').val().split('.').pop().toLowerCase();
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
			$('#ipin-replace-image-form .ajax-loader-replace-image').hide();
			$('.error-msg-replace-image').html('<div class="alert"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
			return false;
		}
	}

	function showResponse_replace_image(responseText, statusText, xhr, $form) {
		if (responseText == 'error') {
			$('#ipin-replace-image-form .ajax-loader-replace-image').hide();
			$('.error-msg-replace-image').html('<div class="alert"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
		} else {
			$('#thumbnail').attr('src', responseText);
			$('#ipin-replace-image-form .ajax-loader-replace-image').hide();
		}
	}
	
	//delete account confirmation
	$(document).on('click', '#ipin-delete-account', function() {
		$('#delete-account-modal').modal();
		return false;
	});
	
	//delete account
	$(document).on('click', '#ipin-delete-account-confirmed', function() {
		var ajaxloader = $('.ajax-loader-delete-account');
		var delete_btn = $(this);
		var	user_id = delete_btn.data('user_id');

		delete_btn.attr('disabled', 'disabled').prev().attr('disabled', 'disabled');
		ajaxloader.css('display', 'inline-block');

		var data = {
			action: 'ipin-delete-account',
			nonce: obj_ipin.nonce,
			user_id: user_id
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function(data) {
				window.location = data;
			}
		});
	});	
	
	//login form check
	$(document).on('submit', '#loginform', function() {
		$('.error-msg-incorrect').hide();
		if ($('#log').val() == '' || $('#pwd').val() == '') {
			$('.error-msg-blank').html('<div class="alert alert-warning"><strong>' + obj_ipin.__pleaseenterbothusernameandpassword  + '</strong></div>').fadeIn();
			return false;
		}
	});
	
	//ajax upload avatar
	$('#ipin_user_avatar').change(function() {
		$('.error-msg-avatar').hide();
		$('#avatarform').submit();
	});
	
	if ($('#avatarform').length) {
		var options = {
			beforeSubmit: showRequest_avatar,
			success: showResponse_avatar,
			url: obj_ipin.ajaxurl
		};
		$('#avatarform').ajaxForm(options);
	}

	function showRequest_avatar(formData, jqForm, options) {
		$('#avatarform .ajax-loader-avatar').show();

		var ext = $('#ipin_user_avatar').val().split('.').pop().toLowerCase();
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
			$('#avatarform .ajax-loader-avatar').hide();
			$('.error-msg-avatar').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
			return false;
		}
	}

	function showResponse_avatar(responseText, statusText, xhr, $form) {
		if (responseText == 'error') {
			$('#avatarform .ajax-loader-avatar').hide();
			$('.error-msg-avatar').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
		} else {
			var data = $.parseJSON(responseText);
			$('#avatar-wrapper').fadeOut(function() {
				$('#avatar-wrapper .img-polaroid').attr('src', data.thumbnail);
				$('#avatar-delete').removeAttr('disabled');
				$('#avatarform .ajax-loader-avatar').hide();
				$('#coverform').css('top', $('#avatarform').offset().top+$('#avatarform').height()+54);
				$('#avatar-anchor').css('margin-bottom', $('#avatarform').height()+$('#coverform').height()+153);
				$('#avatar-wrapper').slideDown();
			});
		}
	}

	//delete avatar
	$('#avatar-delete').on('mouseup', function() { 
		var ajaxloader = $('.ajax-loader-avatar');
		var delete_btn = $(this);
		var id = delete_btn.data('id');
		delete_btn.attr('disabled', 'disabled');
		ajaxloader.show();
	
		var data = {
			action: 'ipin-delete-avatar',
			nonce: obj_ipin.nonce,
			id: id
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function() {
				ajaxloader.hide();
				$('#avatar-wrapper').fadeOut(function() {
					$('#coverform').css('top', $('#avatarform').offset().top+$('#avatarform').height()-69);
					$('#avatar-anchor').css('margin-bottom', $('#avatarform').height()+$('#coverform').height()+80);
				});
			}
		});
		return false;
	});
	
	//ajax upload cover
	$('#ipin_user_cover').change(function() {
		$('.error-msg-cover').hide();
		$('#coverform').submit();
	});
	
	if ($('#coverform').length) {
		var options = {
			beforeSubmit: showRequest_cover,
			success: showResponse_cover,
			url: obj_ipin.ajaxurl
		};
		$('#coverform').ajaxForm(options);
	}

	function showRequest_cover(formData, jqForm, options) {
		$('#coverform .ajax-loader-cover').show();

		var ext = $('#ipin_user_cover').val().split('.').pop().toLowerCase();
		if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
			$('#coverform .ajax-loader-cover').hide();
			$('.error-msg-cover').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
			return false;
		}
	}

	function showResponse_cover(responseText, statusText, xhr, $form) {
		if (responseText == 'error') {
			$('#coverform .ajax-loader-cover').hide();
			$('.error-msg-cover').html('<div class="alert alert-warning"><strong>' + obj_ipin.__invalidimagefile  + '</strong></div>').fadeIn();
		} else {
			var data = $.parseJSON(responseText);
			$('#cover-wrapper').fadeOut(function() {
				$('#cover-wrapper .img-polaroid').attr('src', data.thumbnail);
				$('#cover-delete').removeAttr('disabled');
				$('#coverform .ajax-loader-cover').hide();
				$('#avatar-anchor').css('margin-bottom', $('#avatarform').height()+$('#coverform').height()+153);
				$('#cover-wrapper').slideDown();
			});
		}
	}

	//delete cover
	$('#cover-delete').on('mouseup', function() { 
		var ajaxloader = $('.ajax-loader-cover');
		var delete_btn = $(this);
		var id = delete_btn.data('id');
		delete_btn.attr('disabled', 'disabled');
		ajaxloader.show();
	
		var data = {
			action: 'ipin-delete-cover',
			nonce: obj_ipin.nonce,
			id: id
		};

		$.ajax({
			type: 'post',
			url: obj_ipin.ajaxurl,
			data: data,
			success: function() {
				ajaxloader.hide();
				$('#cover-wrapper').fadeOut(function() {
					$('#avatar-anchor').css('margin-bottom', $('#avatarform').height()+$('#coverform').height()+30);
				});
			}
		});
		return false;
	});
	
	//kiv: animated gif mouseover
	//slow to load if animated gif filesize is large
	/* $(document).on('mouseover', '.featured-thumb-gif-class', function() {
		var preload = new Image();
		preload.src = $(this).data('animated-gif-src-full');
		$(this).attr('src', preload.src)
			.prev('.featured-thumb-gif').hide();
	});
	
	$(document).on('mouseout', '.featured-thumb-gif-class', function() {
		$(this).attr('src', $(this).data('animated-gif-src-medium'))
			.prev('.featured-thumb-gif').show();
	});
	*/
	
	function topAlertMsg(message) {
	    if ($('#top-alert-msg').length) {
			$('#top-alert-msg').hide();
		}

		$("<div />", { 
				id: 'top-alert-msg',
				html: message + '<div id="top-alert-msg-close">&times;</div>'
			})
			.hide()
			.prependTo("body")
			.slideDown('fast')
			.delay(5000)
			.slideUp(function() { 
				$(this).remove(); 
		});

		$(document).on('click', '#top-alert-msg-close', function() {
			$('#top-alert-msg').remove();
		});
	}
	
	function loginPopup() {
		if ($('.check-480px').css('float') == 'left') {
			topAlertMsg('<a href="' + obj_ipin.login_url + '">' + obj_ipin.__Pleaseloginorregisterhere + '</a>');
		} else {
			if ($('#loginbox-wrapper .popover').length) {
				$('#loginbox').popover('hide');
			}
			
			$('#video-embed').remove();
			$('.brand').focus().blur();

			if ($('#post-lightbox').css('display') == 'block') {
				if (!ie9below) {
					window.history.back();
				}
			}
			
			$('#post-lightbox').modal('hide');
			$('#popup-overlay').show();
			$('#popup-login-box').modal();
		}	
	}
	
	//facebook like with comment
	$(document).on('mouseenter', '.fb-like', function() {
		$(this).css('overflow', 'visible');
	});
	
	$(document).on('mouseleave', '.fb-like', function() {
		$(this).css('overflow', 'hidden');
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjIuMS40IHwgKGMpIDIwMDUsIDIwMTUgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPVwiMi4xLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9XCJsZW5ndGhcImluIGEmJmEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixMPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixNPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTj1NLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxPPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK04rXCIpKXwpXCIrTCtcIipcXFxcXVwiLFA9XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK08rXCIpKil8LiopXFxcXCl8KVwiLFE9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxSPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cChcIl5cIitOK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTS5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitPKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitQKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYT0vWyt+XS8sYmE9Lyd8XFxcXC9nLGNhPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitMK1wiP3woXCIrTCtcIil8LilcIixcImlnXCIpLGRhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGVhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSxrPWIubm9kZVR5cGUsXCJzdHJpbmdcIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYSxcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytyYShvW2xdKTt3PWFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89Zy5kb2N1bWVudEVsZW1lbnQsZT1nLmRlZmF1bHRWaWV3LGUmJmUhPT1lLnRvcCYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixlYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZWEpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChnLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWphKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWcuZ2V0RWxlbWVudHNCeU5hbWV8fCFnLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiBwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGcucXVlcnlTZWxlY3RvckFsbCkpJiYoamEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0wrXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0wrXCIqKD86dmFsdWV8XCIrSytcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxqYShmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTCtcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLFApfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGEoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZELmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYSxkYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYSxkYSksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK0wrXCIpXCIrYStcIihcIitMK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UucmVwbGFjZShRLFwiIFwiKStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLFwiJDFcIikpO3JldHVybiBkW3VdP2lhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBnYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShjYSxkYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2EoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcWEoKXt9cWEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiByYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2EoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gdGEoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdWEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylnYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB3YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD13YShkKSksZSYmIWVbdV0mJihlPXdhKGUsZikpLGlhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHVhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dmEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXZhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj12YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24geGEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYSh0YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2EoaT4xJiZ0YShtKSxpPjEmJnJhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ4YShhLnNsaWNlKGksZSkpLGY+ZSYmeGEoYT1hLnNsaWNlKGUpKSxmPmUmJnJhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHRhKG0pfWZ1bmN0aW9uIHlhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmEocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXhhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx5YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9Z2Euc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYWEudGVzdChqWzBdLnR5cGUpJiZwYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxrYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGthKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxrYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxnYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rSy51aWQrK31LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtcbnJldHVybiBNLmFjY2VzcyhhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtNLnJlbW92ZShhLGIpfSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIEwuYWNjZXNzKGEsYixjKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtMLnJlbW92ZShhLGIpfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9TS5nZXQoZiksMT09PWYubm9kZVR5cGUmJiFMLmdldChmLFwiaGFzRGF0YUF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUChmLGQsZVtkXSkpKTtMLnNldChmLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKFwiLVwiKSYmdm9pZCAwIT09YyYmTS5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe00ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBMLmdldChhLGMpfHxMLmFjY2VzcyhhLGMse2VtcHR5Om4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9TC5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsUj1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1uLmNzcyhhLFwiZGlzcGxheVwiKXx8IW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxUPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGsubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgVT1cInVuZGVmaW5lZFwiO2suZm9jdXNpbkJ1YmJsZXM9XCJvbmZvY3VzaW5cImluIGE7dmFyIFY9L15rZXkvLFc9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sWD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWT0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0sZiksKG09aVtvXSl8fChtPWlbb109W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxwLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG8sZywhMSkpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxuLmV2ZW50Lmdsb2JhbFtvXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5oYXNEYXRhKGEpJiZMLmdldChhKTtpZihyJiYoaT1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmKGRlbGV0ZSByLmhhbmRsZSxMLnJlbW92ZShhLFwiZXZlbnRzXCIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscj1qLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPj0wJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaz1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9ZT8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrci5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZXx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZCkpe2ZvcihpPW8uZGVsZWdhdGVUeXBlfHxxLFgudGVzdChpK3EpfHwoZz1nLnBhcmVudE5vZGUpO2c7Zz1nLnBhcmVudE5vZGUpcC5wdXNoKGcpLGg9ZztoPT09KGQub3duZXJEb2N1bWVudHx8bCkmJnAucHVzaChoLmRlZmF1bHRWaWV3fHxoLnBhcmVudFdpbmRvd3x8YSl9Zj0wO3doaWxlKChnPXBbZisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWY+MT9pOm8uYmluZFR5cGV8fHEsbT0oTC5nZXQoZyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJkwuZ2V0KGcsXCJoYW5kbGVcIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGcubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZT0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGEucmVzdWx0PWUpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8XCJjbGlja1wiIT09YS50eXBlKSlmb3IoO2khPT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT49MDpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGwsZD1jLmRvY3VtZW50RWxlbWVudCxlPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZCYmZC5zY3JvbGxMZWZ0fHxlJiZlLnNjcm9sbExlZnR8fDApLShkJiZkLmNsaWVudExlZnR8fGUmJmUuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGQmJmQuc2Nyb2xsVG9wfHxlJiZlLnNjcm9sbFRvcHx8MCktKGQmJmQuY2xpZW50VG9wfHxlJiZlLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Vy50ZXN0KGUpP3RoaXMubW91c2VIb29rczpWLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWwpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1fKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PV8oKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFuLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLmZvY3VzaW5CdWJibGVzfHxuLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihnIGluIGEpdGhpcy5vbihnLGIsYyxhW2ddLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoXCJzdHJpbmdcIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4oYj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYmE9LzwoW1xcdzpdKykvLGNhPS88fCYjP1xcdys7LyxkYT0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGVhPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksZmE9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxnYT0vXnRydWVcXC8oLiopLyxoYT0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2csaWE9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtpYS5vcHRncm91cD1pYS5vcHRpb24saWEudGJvZHk9aWEudGZvb3Q9aWEuY29sZ3JvdXA9aWEuY2FwdGlvbj1pYS50aGVhZCxpYS50aD1pYS50ZDtmdW5jdGlvbiBqYShhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiBrYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiBsYShhKXt2YXIgYj1nYS5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gbWEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspTC5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8TC5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTC5oYXNEYXRhKGEpJiYoZj1MLmFjY2VzcyhhKSxnPUwuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1NLmhhc0RhdGEoYSkmJihoPU0uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTS5zZXQoYixpKSl9fWZ1bmN0aW9uIG9hKGEsYil7dmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTphLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJpbnB1dFwiPT09YyYmVC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDooXCJpbnB1dFwiPT09Y3x8XCJ0ZXh0YXJlYVwiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2EoaCksZj1vYShhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9hKGEpLGc9Z3x8b2EoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYShmW2RdLGdbZF0pO2Vsc2UgbmEoYSxoKTtyZXR1cm4gZz1vYShoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm1hKGcsIWkmJm9hKGEsXCJzY3JpcHRcIikpLGh9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixrPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGw9W10sbT0wLG89YS5sZW5ndGg7bz5tO20rKylpZihlPWFbbV0sZXx8MD09PWUpaWYoXCJvYmplY3RcIj09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYS50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxnPShiYS5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWlhW2ddfHxpYS5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYSxcIjwkMT48LyQyPlwiKStoWzJdLGo9aFswXTt3aGlsZShqLS0pZj1mLmxhc3RDaGlsZDtuLm1lcmdlKGwsZi5jaGlsZE5vZGVzKSxmPWsuZmlyc3RDaGlsZCxmLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBsLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShlKSk7ay50ZXh0Q29udGVudD1cIlwiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9hKGsuYXBwZW5kQ2hpbGQoZSksXCJzY3JpcHRcIiksaSYmbWEoZiksYykpe2o9MDt3aGlsZShlPWZbaisrXSlmYS50ZXN0KGUudHlwZXx8XCJcIikmJmMucHVzaChlKX1yZXR1cm4ga30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZSxmPW4uZXZlbnQuc3BlY2lhbCxnPTA7dm9pZCAwIT09KGM9YVtnXSk7ZysrKXtpZihuLmFjY2VwdERhdGEoYykmJihlPWNbTC5leHBhbmRvXSxlJiYoYj1MLmNhY2hlW2VdKSkpe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWZbZF0/bi5ldmVudC5yZW1vdmUoYyxkKTpuLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7TC5jYWNoZVtlXSYmZGVsZXRlIEwuY2FjaGVbZV19ZGVsZXRlIE0uY2FjaGVbY1tNLmV4cGFuZG9dXX19fSksbi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiYodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWE/bi5maWx0ZXIoYSx0aGlzKTp0aGlzLGU9MDtudWxsIT0oYz1kW2VdKTtlKyspYnx8MSE9PWMubm9kZVR5cGV8fG4uY2xlYW5EYXRhKG9hKGMpKSxjLnBhcmVudE5vZGUmJihiJiZuLmNvbnRhaW5zKGMub3duZXJEb2N1bWVudCxjKSYmbWEob2EoYyxcInNjcmlwdFwiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9hKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFkYS50ZXN0KGEpJiYhaWFbKGJhLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoYWEsXCI8JDE+PC8kMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2EoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG4uY2xlYW5EYXRhKG9hKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxtPXRoaXMsbz1sLTEscD1hWzBdLHE9bi5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmVhLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYShjLFwic2NyaXB0XCIpLGthKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYShoLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0saCxqKTtpZihnKWZvcihpPWZbZi5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChmLGxhKSxqPTA7Zz5qO2orKyloPWZbal0sZmEudGVzdChoLnR5cGV8fFwiXCIpJiYhTC5hY2Nlc3MoaCxcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGEsXCJcIikpKX1yZXR1cm4gdGhpc319KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFhLHJhPXt9O2Z1bmN0aW9uIHNhKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIHRhKGEpe3ZhciBiPWwsYz1yYVthXTtyZXR1cm4gY3x8KGM9c2EoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChxYT0ocWF8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYVswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNhKGEsYikscWEuZGV0YWNoKCkpLHJhW2FdPWMpLGN9dmFyIHVhPS9ebWFyZ2luLyx2YT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLHdhPWZ1bmN0aW9uKGIpe3JldHVybiBiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcub3BlbmVyP2Iub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCk6YS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl9O2Z1bmN0aW9uIHhhKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8d2EoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdKSxjJiYoXCJcIiE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLHZhLnRlc3QoZykmJnVhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMCE9PWc/ZytcIlwiOmd9ZnVuY3Rpb24geWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGYuc3R5bGUpe2Yuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWYuc3R5bGUuYmFja2dyb3VuZENsaXAsZS5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGYuaW5uZXJIVE1MPVwiXCIsZC5hcHBlbmRDaGlsZChlKTt2YXIgZz1hLmdldENvbXB1dGVkU3R5bGUoZixudWxsKTtiPVwiMSVcIiE9PWcudG9wLGM9XCI0cHhcIj09PWcud2lkdGgsZC5yZW1vdmVDaGlsZChlKX1hLmdldENvbXB1dGVkU3R5bGUmJm4uZXh0ZW5kKGsse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmcoKSxjfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7dmFyIGIsYz1mLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1mLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9XCIwXCIsZi5zdHlsZS53aWR0aD1cIjFweFwiLGQuYXBwZW5kQ2hpbGQoZSksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5tYXJnaW5SaWdodCksZC5yZW1vdmVDaGlsZChlKSxmLnJlbW92ZUNoaWxkKGMpLGJ9fSl9fSgpLG4uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHphPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSguKikkXCIsXCJpXCIpLEJhPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitRK1wiKVwiLFwiaVwiKSxDYT17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sRGE9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxFYT1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gRmEoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD1iLGU9RWEubGVuZ3RoO3doaWxlKGUtLSlpZihiPUVhW2VdK2MsYiBpbiBhKXJldHVybiBiO3JldHVybiBkfWZ1bmN0aW9uIEdhKGEsYixjKXt2YXIgZD1BYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gSGEoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bi5jc3MoYSxjK1JbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTooZys9bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIElhKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPXdhKGEpLGc9XCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT14YShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLHZhLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK0hhKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1mdW5jdGlvbiBKYShhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1MLmdldChkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmUyhkKSYmKGZbZ109TC5hY2Nlc3MoZCxcIm9sZGRpc3BsYXlcIix0YShkLm5vZGVOYW1lKSkpKTooZT1TKGQpLFwibm9uZVwiPT09YyYmZXx8TC5zZXQoZCxcIm9sZGRpc3BsYXlcIixlP2M6bi5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz14YShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1CYS5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG4uY3NzKGEsYikpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiIT09Znx8bi5jc3NOdW1iZXJbaF18fChjKz1cInB4XCIpLGsuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmEoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIERhJiYoZT1EYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/emEudGVzdChuLmNzcyhhLFwiZGlzcGxheVwiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENhLGZ1bmN0aW9uKCl7cmV0dXJuIElhKGEsYixkKX0pOklhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2EoYSk7cmV0dXJuIEdhKGEsYyxkP0hhKGEsYixkLFwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXlhKGsucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP24uc3dhcChhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LHhhLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHVhLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdhKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2EoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEthKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49S2EsS2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUthLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOkthLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEthLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYS5wcm90b3R5cGUsS2EucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2EucHJvcEhvb2tzLnNjcm9sbFRvcD1LYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUthLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGEsTWEsTmE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9hPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1ErXCIpKFthLXolXSopJFwiLFwiaVwiKSxQYT0vcXVldWVIb29rcyQvLFFhPVtWYV0sUmE9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYS5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShuLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZPYS5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYSgpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGE9dm9pZCAwfSksTGE9bi5ub3coKX1mdW5jdGlvbiBUYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWEoYSxiLGMpe2Zvcih2YXIgZCxlPShSYVtiXXx8W10pLmNvbmNhdChSYVtcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZhKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9MLmdldChhLFwib2xkZGlzcGxheVwiKXx8dGEoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5hLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3RhKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWEocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2EoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFhLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxhfHxTYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGF8fFNhKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWFbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFVhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGEse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJhW2NdPVJhW2NdfHxbXSxSYVtjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FhLnVuc2hpZnQoYSk6UWEucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYSh0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYS50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYShiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGEoXCJzaG93XCIpLHNsaWRlVXA6VGEoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRhKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYT1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExhPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01hfHwoTWE9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYSksTWE9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsay5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWEsWmEsJGE9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1phOllhKSksXG52b2lkIDA9PT1jP2QmJlwiZ2V0XCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJlwic2V0XCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTp2b2lkIG4ucmVtb3ZlQXR0cihhLGIpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChFKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmbi5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksWmE9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9JGFbYl18fG4uZmluZC5hdHRyOyRhW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj0kYVtiXSwkYVtiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsJGFbYl09ZiksZX19KTt2YXIgX2E9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtuLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tuLnByb3BGaXhbYV18fGFdfSl9fSksbi5leHRlbmQoe3Byb3BGaXg6e1wiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW4uaXNYTUxEb2MoYSksZiYmKGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8X2EudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxrLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxuLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYj0vW1xcdFxcclxcblxcZl0vZztuLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIik6XCIgXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPDAmJihkKz1lK1wiIFwiKTtnPW4udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpOlwiXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPj0wKWQ9ZC5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO2c9YT9uLnRyaW0oZCk6XCJcIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfTpmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1jKXt2YXIgYixkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8XCJib29sZWFuXCI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6TC5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmI9L1xcci9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJiLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIGNiPW4ubm93KCksZGI9L1xcPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYStcIlwiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYixjO2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSxcInRleHQveG1sXCIpfWNhdGNoKGQpe2I9dm9pZCAwfXJldHVybighYnx8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCkmJm4uZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYSksYn07dmFyIGViPS8jLiokLyxmYj0vKFs/Jl0pXz1bXiZdKi8sZ2I9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSxoYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxpYj0vXig/OkdFVHxIRUFEKSQvLGpiPS9eXFwvXFwvLyxrYj0vXihbXFx3ListXSs6KSg/OlxcL1xcLyg/OlteXFwvPyNdKkB8KShbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxsYj17fSxtYj17fSxuYj1cIiovXCIuY29uY2F0KFwiKlwiKSxvYj1hLmxvY2F0aW9uLmhyZWYscGI9a2IuZXhlYyhvYi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gcmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09bWI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiBzYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6b2IsdHlwZTpcIkdFVFwiLGlzTG9jYWw6aGIudGVzdChwYlsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6bmIsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm4ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9zYihzYihhLG4uYWpheFNldHRpbmdzKSxiKTpzYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpxYihsYiksYWpheFRyYW5zcG9ydDpxYihtYiksYWpheDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1uLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9uKGwpOm4uZXZlbnQsbz1uLkRlZmVycmVkKCkscD1uLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9XCJjYW5jZWxlZFwiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1nYi5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihvLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxvYikrXCJcIikucmVwbGFjZShlYixcIlwiKS5yZXBsYWNlKGpiLHBiWzFdK1wiLy9cIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9bi50cmltKGsuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXCJcIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9a2IuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1wYlsxXSYmaFsyXT09PXBiWzJdJiYoaFszXXx8KFwiaHR0cDpcIj09PWhbMV0/XCI4MFwiOlwiNDQzXCIpKT09PShwYlszXXx8KFwiaHR0cDpcIj09PXBiWzFdP1wiODBcIjpcIjQ0M1wiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9bi5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHJiKGxiLGssYix2KSwyPT09dClyZXR1cm4gdjtpPW4uZXZlbnQmJmsuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0haWIudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRiLnRlc3QoZCk/XCImXCI6XCI/XCIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1mYi50ZXN0KGQpP2QucmVwbGFjZShmYixcIiQxXz1cIitjYisrKTpkKyhkYi50ZXN0KGQpP1wiJlwiOlwiP1wiKStcIl89XCIrY2IrKykpLGsuaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixuLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09ay5kYXRhVHlwZXNbMF0/XCIsIFwiK25iK1wiOyBxPTAuMDFcIjpcIlwiKTprLmFjY2VwdHNbXCIqXCJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT1cImFib3J0XCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXJiKG1iLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKFwiYWpheFNlbmRcIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KFwidGltZW91dFwiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHxcIlwiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT10YihrLHYsZikpLHU9dWIoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHxcIkhFQURcIj09PWsudHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09YT94PVwibm90bW9kaWZpZWRcIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD1cImVycm9yXCIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KStcIlwiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3Ysa10pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLG4uZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtuW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBuLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxuLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxuLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFuLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB2Yj0vJTIwL2csd2I9L1xcW1xcXSQvLHhiPS9cXHI/XFxuL2cseWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHpiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBBYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUFiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKHZiLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh4YixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHhiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBCYj0wLENiPXt9LERiPXswOjIwMCwxMjIzOjIwNH0sRWI9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gQ2IpQ2JbYV0oKX0pLGsuY29ycz0hIUViJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gRWIsay5hamF4PUViPSEhRWIsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBrLmNvcnN8fEViJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQmI7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgQ2JbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCxcImFib3J0XCI9PT1hP2YuYWJvcnQoKTpcImVycm9yXCI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKERiW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YihcImVycm9yXCIpLGI9Q2JbZ109YihcImFib3J0XCIpO3RyeXtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpfWNhdGNoKGgpe2lmKGIpdGhyb3cgaH19LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksbi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLG4uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oXCI8c2NyaXB0PlwiKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgRmI9W10sR2I9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztuLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1GYi5wb3AoKXx8bi5leHBhbmRvK1wiX1wiK2NiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEdiLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZHYi50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEdiLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRiLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxGYi5wdXNoKGUpKSxnJiZuLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bDt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bi5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZuKGUpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBIYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmSGIpcmV0dXJuIEhiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZSxkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG4uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBJYj1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBKYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyh0eXBlb2YgZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1VJiYoZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPUpiKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1uLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxJYjt3aGlsZShhJiYhbi5ub2RlTmFtZShhLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxJYn0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYixjKXt2YXIgZD1cInBhZ2VZT2Zmc2V0XCI9PT1jO24uZm5bYl09ZnVuY3Rpb24oZSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGUsZil7dmFyIGc9SmIoYik7cmV0dXJuIHZvaWQgMD09PWY/Zz9nW2NdOmJbZV06dm9pZChnP2cuc2Nyb2xsVG8oZD9hLnBhZ2VYT2Zmc2V0OmYsZD9mOmEucGFnZVlPZmZzZXQpOmJbZV09Zil9LGIsZSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG4uZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXlhKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPXhhKGEsYiksdmEudGVzdChjKT9uKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe24uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBuLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5W1wic2Nyb2xsXCIrYV0sZVtcInNjcm9sbFwiK2FdLGIuYm9keVtcIm9mZnNldFwiK2FdLGVbXCJvZmZzZXRcIithXSxlW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1kP24uY3NzKGIsYyxnKTpuLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgS2I9YS5qUXVlcnksTGI9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TGIpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUtiKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXBcblxuLyohXG4gKiBDb2xvciBUaGllZiB2Mi4wXG4gKiBieSBMb2tlc2ggRGhha2FyIC0gaHR0cDovL3d3dy5sb2tlc2hkaGFrYXIuY29tXG4gKlxuICogTGljZW5zZVxuICogLS0tLS0tLVxuICogQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiAyLjUgTGljZW5zZTpcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzIuNS9cbiAqXG4gKiBUaGFua3NcbiAqIC0tLS0tLVxuICogTmljayBSYWJpbm93aXR6IC0gRm9yIGNyZWF0aW5nIHF1YW50aXplLmpzLlxuICogSm9obiBTY2h1bHogLSBGb3IgY2xlYW4gdXAgYW5kIG9wdGltaXphdGlvbi4gQEpGU0lJSVxuICogTmF0aGFuIFNwYWR5IC0gRm9yIGFkZGluZyBkcmFnIGFuZCBkcm9wIHN1cHBvcnQgdG8gdGhlIGRlbW8gcGFnZS5cbiAqXG4gKi9cblxuXG4vKlxuICBDYW52YXNJbWFnZSBDbGFzc1xuICBDbGFzcyB0aGF0IHdyYXBzIHRoZSBodG1sIGltYWdlIGVsZW1lbnQgYW5kIGNhbnZhcy5cbiAgSXQgYWxzbyBzaW1wbGlmaWVzIHNvbWUgb2YgdGhlIGNhbnZhcyBjb250ZXh0IG1hbmlwdWxhdGlvblxuICB3aXRoIGEgc2V0IG9mIGhlbHBlciBmdW5jdGlvbnMuXG4qL1xudmFyIENhbnZhc0ltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgdGhpcy5jYW52YXMgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXG4gICAgdGhpcy53aWR0aCAgPSB0aGlzLmNhbnZhcy53aWR0aCAgPSBpbWFnZS53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcblxuICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn07XG5cbkNhbnZhc0ltYWdlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn07XG5cbkNhbnZhc0ltYWdlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgdGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xufTtcblxuQ2FudmFzSW1hZ2UucHJvdG90eXBlLmdldFBpeGVsQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbn07XG5cbkNhbnZhc0ltYWdlLnByb3RvdHlwZS5nZXRJbWFnZURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufTtcblxuQ2FudmFzSW1hZ2UucHJvdG90eXBlLnJlbW92ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY2FudmFzKTtcbn07XG5cblxudmFyIENvbG9yVGhpZWYgPSBmdW5jdGlvbiAoKSB7fTtcblxuLypcbiAqIGdldENvbG9yKHNvdXJjZUltYWdlWywgcXVhbGl0eV0pXG4gKiByZXR1cm5zIHtyOiBudW0sIGc6IG51bSwgYjogbnVtfVxuICpcbiAqIFVzZSB0aGUgbWVkaWFuIGN1dCBhbGdvcml0aG0gcHJvdmlkZWQgYnkgcXVhbnRpemUuanMgdG8gY2x1c3RlciBzaW1pbGFyXG4gKiBjb2xvcnMgYW5kIHJldHVybiB0aGUgYmFzZSBjb2xvciBmcm9tIHRoZSBsYXJnZXN0IGNsdXN0ZXIuXG4gKlxuICogUXVhbGl0eSBpcyBhbiBvcHRpb25hbCBhcmd1bWVudC4gSXQgbmVlZHMgdG8gYmUgYW4gaW50ZWdlci4gMCBpcyB0aGUgaGlnaGVzdCBxdWFsaXR5IHNldHRpbmdzLlxuICogMTAgaXMgdGhlIGRlZmF1bHQuIFRoZXJlIGlzIGEgdHJhZGUtb2ZmIGJldHdlZW4gcXVhbGl0eSBhbmQgc3BlZWQuIFRoZSBiaWdnZXIgdGhlIG51bWJlciwgdGhlXG4gKiBmYXN0ZXIgYSBjb2xvciB3aWxsIGJlIHJldHVybmVkIGJ1dCB0aGUgZ3JlYXRlciB0aGUgbGlrZWxpaG9vZCB0aGF0IGl0IHdpbGwgbm90IGJlIHRoZSB2aXN1YWxseVxuICogbW9zdCBkb21pbmFudCBjb2xvci5cbiAqXG4gKiAqL1xuQ29sb3JUaGllZi5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbihzb3VyY2VJbWFnZSwgcXVhbGl0eSkge1xuICAgIHZhciBwYWxldHRlICAgICAgID0gdGhpcy5nZXRQYWxldHRlKHNvdXJjZUltYWdlLCA1LCBxdWFsaXR5KTtcbiAgICB2YXIgZG9taW5hbnRDb2xvciA9IHBhbGV0dGVbMF07XG4gICAgcmV0dXJuIGRvbWluYW50Q29sb3I7XG59O1xuXG5cbi8qXG4gKiBnZXRQYWxldHRlKHNvdXJjZUltYWdlWywgY29sb3JDb3VudCwgcXVhbGl0eV0pXG4gKiByZXR1cm5zIGFycmF5WyB7cjogbnVtLCBnOiBudW0sIGI6IG51bX0sIHtyOiBudW0sIGc6IG51bSwgYjogbnVtfSwgLi4uXVxuICpcbiAqIFVzZSB0aGUgbWVkaWFuIGN1dCBhbGdvcml0aG0gcHJvdmlkZWQgYnkgcXVhbnRpemUuanMgdG8gY2x1c3RlciBzaW1pbGFyIGNvbG9ycy5cbiAqXG4gKiBjb2xvckNvdW50IGRldGVybWluZXMgdGhlIHNpemUgb2YgdGhlIHBhbGV0dGU7IHRoZSBudW1iZXIgb2YgY29sb3JzIHJldHVybmVkLiBJZiBub3Qgc2V0LCBpdFxuICogZGVmYXVsdHMgdG8gMTAuXG4gKlxuICogQlVHR1k6IEZ1bmN0aW9uIGRvZXMgbm90IGFsd2F5cyByZXR1cm4gdGhlIHJlcXVlc3RlZCBhbW91bnQgb2YgY29sb3JzLiBJdCBjYW4gYmUgKy8tIDIuXG4gKlxuICogcXVhbGl0eSBpcyBhbiBvcHRpb25hbCBhcmd1bWVudC4gSXQgbmVlZHMgdG8gYmUgYW4gaW50ZWdlci4gMCBpcyB0aGUgaGlnaGVzdCBxdWFsaXR5IHNldHRpbmdzLlxuICogMTAgaXMgdGhlIGRlZmF1bHQuIFRoZXJlIGlzIGEgdHJhZGUtb2ZmIGJldHdlZW4gcXVhbGl0eSBhbmQgc3BlZWQuIFRoZSBiaWdnZXIgdGhlIG51bWJlciwgdGhlXG4gKiBmYXN0ZXIgdGhlIHBhbGV0dGUgZ2VuZXJhdGlvbiBidXQgdGhlIGdyZWF0ZXIgdGhlIGxpa2VsaWhvb2QgdGhhdCBjb2xvcnMgd2lsbCBiZSBtaXNzZWQuXG4gKlxuICpcbiAqL1xuQ29sb3JUaGllZi5wcm90b3R5cGUuZ2V0UGFsZXR0ZSA9IGZ1bmN0aW9uKHNvdXJjZUltYWdlLCBjb2xvckNvdW50LCBxdWFsaXR5KSB7XG5cbiAgICBpZiAodHlwZW9mIGNvbG9yQ291bnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbG9yQ291bnQgPSAxMDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBxdWFsaXR5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBxdWFsaXR5ID0gMTA7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGN1c3RvbSBDYW52YXNJbWFnZSBvYmplY3RcbiAgICB2YXIgaW1hZ2UgICAgICA9IG5ldyBDYW52YXNJbWFnZShzb3VyY2VJbWFnZSk7XG4gICAgdmFyIGltYWdlRGF0YSAgPSBpbWFnZS5nZXRJbWFnZURhdGEoKTtcbiAgICB2YXIgcGl4ZWxzICAgICA9IGltYWdlRGF0YS5kYXRhO1xuICAgIHZhciBwaXhlbENvdW50ID0gaW1hZ2UuZ2V0UGl4ZWxDb3VudCgpO1xuXG4gICAgLy8gU3RvcmUgdGhlIFJHQiB2YWx1ZXMgaW4gYW4gYXJyYXkgZm9ybWF0IHN1aXRhYmxlIGZvciBxdWFudGl6ZSBmdW5jdGlvblxuICAgIHZhciBwaXhlbEFycmF5ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIG9mZnNldCwgciwgZywgYiwgYTsgaSA8IHBpeGVsQ291bnQ7IGkgPSBpICsgcXVhbGl0eSkge1xuICAgICAgICBvZmZzZXQgPSBpICogNDtcbiAgICAgICAgciA9IHBpeGVsc1tvZmZzZXQgKyAwXTtcbiAgICAgICAgZyA9IHBpeGVsc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgYiA9IHBpeGVsc1tvZmZzZXQgKyAyXTtcbiAgICAgICAgYSA9IHBpeGVsc1tvZmZzZXQgKyAzXTtcbiAgICAgICAgLy8gSWYgcGl4ZWwgaXMgbW9zdGx5IG9wYXF1ZSBhbmQgbm90IHdoaXRlXG4gICAgICAgIGlmIChhID49IDEyNSkge1xuICAgICAgICAgICAgaWYgKCEociA+IDI1MCAmJiBnID4gMjUwICYmIGIgPiAyNTApKSB7XG4gICAgICAgICAgICAgICAgcGl4ZWxBcnJheS5wdXNoKFtyLCBnLCBiXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cdFxuXHQvL2VkaXRlZDogcmV0dXJuICNmZmYgaWYgYmxhbmsgb3Igd2hpdGUgaW1hZ2Vcblx0Ly9odHRwczovL2dpdGh1Yi5jb20vbG9rZXNoL2NvbG9yLXRoaWVmL2lzc3Vlcy80MFxuXHRpZiAocGl4ZWxBcnJheS5sZW5ndGggPT09IDApXG5cdFx0cGl4ZWxBcnJheSA9IFsyNTUsIDI1NSwgMjU1XTtcblxuICAgIC8vIFNlbmQgYXJyYXkgdG8gcXVhbnRpemUgZnVuY3Rpb24gd2hpY2ggY2x1c3RlcnMgdmFsdWVzXG4gICAgLy8gdXNpbmcgbWVkaWFuIGN1dCBhbGdvcml0aG1cbiAgICB2YXIgY21hcCAgICA9IE1NQ1EucXVhbnRpemUocGl4ZWxBcnJheSwgY29sb3JDb3VudCk7XG4gICAgdmFyIHBhbGV0dGUgPSBjbWFwLnBhbGV0dGUoKTtcblxuICAgIC8vIENsZWFuIHVwXG4gICAgaW1hZ2UucmVtb3ZlQ2FudmFzKCk7XG5cbiAgICByZXR1cm4gcGFsZXR0ZTtcbn07XG5cblxuXG5cbi8qIVxuICogcXVhbnRpemUuanMgQ29weXJpZ2h0IDIwMDggTmljayBSYWJpbm93aXR6LlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICovXG5cbi8vIGZpbGwgb3V0IGEgY291cGxlIHByb3RvdmlzIGRlcGVuZGVuY2llc1xuLyohXG4gKiBCbG9jayBiZWxvdyBjb3BpZWQgZnJvbSBQcm90b3ZpczogaHR0cDovL21ib3N0b2NrLmdpdGh1Yi5jb20vcHJvdG92aXMvXG4gKiBDb3B5cmlnaHQgMjAxMCBTdGFuZm9yZCBWaXN1YWxpemF0aW9uIEdyb3VwXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2U6IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvYnNkLWxpY2Vuc2UucGhwXG4gKi9cbmlmICghcHYpIHtcbiAgICB2YXIgcHYgPSB7XG4gICAgICAgIG1hcDogZnVuY3Rpb24oYXJyYXksIGYpIHtcbiAgICAgICAgICB2YXIgbyA9IHt9O1xuICAgICAgICAgIHJldHVybiBmID8gYXJyYXkubWFwKGZ1bmN0aW9uKGQsIGkpIHsgby5pbmRleCA9IGk7IHJldHVybiBmLmNhbGwobywgZCk7IH0pIDogYXJyYXkuc2xpY2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbmF0dXJhbE9yZGVyOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gKGEgPCBiKSA/IC0xIDogKChhID4gYikgPyAxIDogMCk7XG4gICAgICAgIH0sXG4gICAgICAgIHN1bTogZnVuY3Rpb24oYXJyYXksIGYpIHtcbiAgICAgICAgICB2YXIgbyA9IHt9O1xuICAgICAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZiA/IGZ1bmN0aW9uKHAsIGQsIGkpIHsgby5pbmRleCA9IGk7IHJldHVybiBwICsgZi5jYWxsKG8sIGQpOyB9IDogZnVuY3Rpb24ocCwgZCkgeyByZXR1cm4gcCArIGQ7IH0sIDApO1xuICAgICAgICB9LFxuICAgICAgICBtYXg6IGZ1bmN0aW9uKGFycmF5LCBmKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGYgPyBwdi5tYXAoYXJyYXksIGYpIDogYXJyYXkpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuXG5cbi8qKlxuICogQmFzaWMgSmF2YXNjcmlwdCBwb3J0IG9mIHRoZSBNTUNRIChtb2RpZmllZCBtZWRpYW4gY3V0IHF1YW50aXphdGlvbilcbiAqIGFsZ29yaXRobSBmcm9tIHRoZSBMZXB0b25pY2EgbGlicmFyeSAoaHR0cDovL3d3dy5sZXB0b25pY2EuY29tLykuXG4gKiBSZXR1cm5zIGEgY29sb3IgbWFwIHlvdSBjYW4gdXNlIHRvIG1hcCBvcmlnaW5hbCBwaXhlbHMgdG8gdGhlIHJlZHVjZWRcbiAqIHBhbGV0dGUuIFN0aWxsIGEgd29yayBpbiBwcm9ncmVzcy5cbiAqXG4gKiBAYXV0aG9yIE5pY2sgUmFiaW5vd2l0elxuICogQGV4YW1wbGVcblxuLy8gYXJyYXkgb2YgcGl4ZWxzIGFzIFtSLEcsQl0gYXJyYXlzXG52YXIgbXlQaXhlbHMgPSBbWzE5MCwxOTcsMTkwXSwgWzIwMiwyMDQsMjAwXSwgWzIwNywyMTQsMjEwXSwgWzIxMSwyMTQsMjExXSwgWzIwNSwyMDcsMjA3XVxuICAgICAgICAgICAgICAgIC8vIGV0Y1xuICAgICAgICAgICAgICAgIF07XG52YXIgbWF4Q29sb3JzID0gNDtcblxudmFyIGNtYXAgPSBNTUNRLnF1YW50aXplKG15UGl4ZWxzLCBtYXhDb2xvcnMpO1xudmFyIG5ld1BhbGV0dGUgPSBjbWFwLnBhbGV0dGUoKTtcbnZhciBuZXdQaXhlbHMgPSBteVBpeGVscy5tYXAoZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBjbWFwLm1hcChwKTtcbn0pO1xuXG4gKi9cbnZhciBNTUNRID0gKGZ1bmN0aW9uKCkge1xuICAgIC8vIHByaXZhdGUgY29uc3RhbnRzXG4gICAgdmFyIHNpZ2JpdHMgPSA1LFxuICAgICAgICByc2hpZnQgPSA4IC0gc2lnYml0cyxcbiAgICAgICAgbWF4SXRlcmF0aW9ucyA9IDEwMDAsXG4gICAgICAgIGZyYWN0QnlQb3B1bGF0aW9ucyA9IDAuNzU7XG5cbiAgICAvLyBnZXQgcmVkdWNlZC1zcGFjZSBjb2xvciBpbmRleCBmb3IgYSBwaXhlbFxuICAgIGZ1bmN0aW9uIGdldENvbG9ySW5kZXgociwgZywgYikge1xuICAgICAgICByZXR1cm4gKHIgPDwgKDIgKiBzaWdiaXRzKSkgKyAoZyA8PCBzaWdiaXRzKSArIGI7XG4gICAgfVxuXG4gICAgLy8gU2ltcGxlIHByaW9yaXR5IHF1ZXVlXG4gICAgZnVuY3Rpb24gUFF1ZXVlKGNvbXBhcmF0b3IpIHtcbiAgICAgICAgdmFyIGNvbnRlbnRzID0gW10sXG4gICAgICAgICAgICBzb3J0ZWQgPSBmYWxzZTtcblxuICAgICAgICBmdW5jdGlvbiBzb3J0KCkge1xuICAgICAgICAgICAgY29udGVudHMuc29ydChjb21wYXJhdG9yKTtcbiAgICAgICAgICAgIHNvcnRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHVzaDogZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRzLnB1c2gobyk7XG4gICAgICAgICAgICAgICAgc29ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGVlazogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvcnRlZCkgc29ydCgpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleD09PXVuZGVmaW5lZCkgaW5kZXggPSBjb250ZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50c1tpbmRleF07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9wOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvcnRlZCkgc29ydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cy5wb3AoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudHMubGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcDogZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cy5tYXAoZik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghc29ydGVkKSBzb3J0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIDNkIGNvbG9yIHNwYWNlIGJveFxuICAgIGZ1bmN0aW9uIFZCb3gocjEsIHIyLCBnMSwgZzIsIGIxLCBiMiwgaGlzdG8pIHtcbiAgICAgICAgdmFyIHZib3ggPSB0aGlzO1xuICAgICAgICB2Ym94LnIxID0gcjE7XG4gICAgICAgIHZib3gucjIgPSByMjtcbiAgICAgICAgdmJveC5nMSA9IGcxO1xuICAgICAgICB2Ym94LmcyID0gZzI7XG4gICAgICAgIHZib3guYjEgPSBiMTtcbiAgICAgICAgdmJveC5iMiA9IGIyO1xuICAgICAgICB2Ym94Lmhpc3RvID0gaGlzdG87XG4gICAgfVxuICAgIFZCb3gucHJvdG90eXBlID0ge1xuICAgICAgICB2b2x1bWU6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXZib3guX3ZvbHVtZSB8fCBmb3JjZSkge1xuICAgICAgICAgICAgICAgIHZib3guX3ZvbHVtZSA9ICgodmJveC5yMiAtIHZib3gucjEgKyAxKSAqICh2Ym94LmcyIC0gdmJveC5nMSArIDEpICogKHZib3guYjIgLSB2Ym94LmIxICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZib3guX3ZvbHVtZTtcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgaGlzdG8gPSB2Ym94Lmhpc3RvO1xuICAgICAgICAgICAgaWYgKCF2Ym94Ll9jb3VudF9zZXQgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnBpeCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGksIGosIGs7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gdmJveC5yMTsgaSA8PSB2Ym94LnIyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gdmJveC5nMTsgaiA8PSB2Ym94LmcyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IHZib3guYjE7IGsgPD0gdmJveC5iMjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0Q29sb3JJbmRleChpLGosayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5waXggKz0gKGhpc3RvW2luZGV4XSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2Ym94Ll9jb3VudCA9IG5waXg7XG4gICAgICAgICAgICAgICAgdmJveC5fY291bnRfc2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2Ym94Ll9jb3VudDtcbiAgICAgICAgfSxcbiAgICAgICAgY29weTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZCb3godmJveC5yMSwgdmJveC5yMiwgdmJveC5nMSwgdmJveC5nMiwgdmJveC5iMSwgdmJveC5iMiwgdmJveC5oaXN0byk7XG4gICAgICAgIH0sXG4gICAgICAgIGF2ZzogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgICAgIHZhciB2Ym94ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBoaXN0byA9IHZib3guaGlzdG87XG4gICAgICAgICAgICBpZiAoIXZib3guX2F2ZyB8fCBmb3JjZSkge1xuICAgICAgICAgICAgICAgIHZhciBudG90ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbXVsdCA9IDEgPDwgKDggLSBzaWdiaXRzKSxcbiAgICAgICAgICAgICAgICAgICAgcnN1bSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGdzdW0gPSAwLFxuICAgICAgICAgICAgICAgICAgICBic3VtID0gMCxcbiAgICAgICAgICAgICAgICAgICAgaHZhbCxcbiAgICAgICAgICAgICAgICAgICAgaSwgaiwgaywgaGlzdG9pbmRleDtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSB2Ym94LnIxOyBpIDw9IHZib3gucjI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSB2Ym94LmcxOyBqIDw9IHZib3guZzI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gdmJveC5iMTsgayA8PSB2Ym94LmIyOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9pbmRleCA9IGdldENvbG9ySW5kZXgoaSxqLGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodmFsID0gaGlzdG9baGlzdG9pbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnRvdCArPSBodmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByc3VtICs9IChodmFsICogKGkgKyAwLjUpICogbXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdzdW0gKz0gKGh2YWwgKiAoaiArIDAuNSkgKiBtdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnN1bSArPSAoaHZhbCAqIChrICsgMC41KSAqIG11bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChudG90KSB7XG4gICAgICAgICAgICAgICAgICAgIHZib3guX2F2ZyA9IFt+fihyc3VtL250b3QpLCB+fihnc3VtL250b3QpLCB+fihic3VtL250b3QpXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbXB0eSBib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgdmJveC5fYXZnID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgfn4obXVsdCAqICh2Ym94LnIxICsgdmJveC5yMiArIDEpIC8gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICB+fihtdWx0ICogKHZib3guZzEgKyB2Ym94LmcyICsgMSkgLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH5+KG11bHQgKiAodmJveC5iMSArIHZib3guYjIgKyAxKSAvIDIpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZib3guX2F2ZztcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFpbnM6IGZ1bmN0aW9uKHBpeGVsKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgcnZhbCA9IHBpeGVsWzBdID4+IHJzaGlmdDtcbiAgICAgICAgICAgICAgICBndmFsID0gcGl4ZWxbMV0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgICAgIGJ2YWwgPSBwaXhlbFsyXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICByZXR1cm4gKHJ2YWwgPj0gdmJveC5yMSAmJiBydmFsIDw9IHZib3gucjIgJiZcbiAgICAgICAgICAgICAgICAgICAgZ3ZhbCA+PSB2Ym94LmcxICYmIGd2YWwgPD0gdmJveC5nMiAmJlxuICAgICAgICAgICAgICAgICAgICBidmFsID49IHZib3guYjEgJiYgYnZhbCA8PSB2Ym94LmIyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDb2xvciBtYXBcbiAgICBmdW5jdGlvbiBDTWFwKCkge1xuICAgICAgICB0aGlzLnZib3hlcyA9IG5ldyBQUXVldWUoZnVuY3Rpb24oYSxiKSB7XG4gICAgICAgICAgICByZXR1cm4gcHYubmF0dXJhbE9yZGVyKFxuICAgICAgICAgICAgICAgIGEudmJveC5jb3VudCgpKmEudmJveC52b2x1bWUoKSxcbiAgICAgICAgICAgICAgICBiLnZib3guY291bnQoKSpiLnZib3gudm9sdW1lKClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBDTWFwLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcHVzaDogZnVuY3Rpb24odmJveCkge1xuICAgICAgICAgICAgdGhpcy52Ym94ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdmJveDogdmJveCxcbiAgICAgICAgICAgICAgICBjb2xvcjogdmJveC5hdmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhbGV0dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmJveGVzLm1hcChmdW5jdGlvbih2YikgeyByZXR1cm4gdmIuY29sb3I7IH0pO1xuICAgICAgICB9LFxuICAgICAgICBzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZib3hlcy5zaXplKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1hcDogZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgICAgIHZhciB2Ym94ZXMgPSB0aGlzLnZib3hlcztcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTx2Ym94ZXMuc2l6ZSgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodmJveGVzLnBlZWsoaSkudmJveC5jb250YWlucyhjb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZib3hlcy5wZWVrKGkpLmNvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5lYXJlc3QoY29sb3IpO1xuICAgICAgICB9LFxuICAgICAgICBuZWFyZXN0OiBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICAgICAgdmFyIHZib3hlcyA9IHRoaXMudmJveGVzLFxuICAgICAgICAgICAgICAgIGQxLCBkMiwgcENvbG9yO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHZib3hlcy5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGQyID0gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhjb2xvclswXSAtIHZib3hlcy5wZWVrKGkpLmNvbG9yWzBdLCAyKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGNvbG9yWzFdIC0gdmJveGVzLnBlZWsoaSkuY29sb3JbMV0sIDIpICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coY29sb3JbMl0gLSB2Ym94ZXMucGVlayhpKS5jb2xvclsyXSwgMilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChkMiA8IGQxIHx8IGQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDEgPSBkMjtcbiAgICAgICAgICAgICAgICAgICAgcENvbG9yID0gdmJveGVzLnBlZWsoaSkuY29sb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBDb2xvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZm9yY2VidzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBYWFg6IHdvbid0ICB3b3JrIHlldFxuICAgICAgICAgICAgdmFyIHZib3hlcyA9IHRoaXMudmJveGVzO1xuICAgICAgICAgICAgdmJveGVzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBwdi5uYXR1cmFsT3JkZXIocHYuc3VtKGEuY29sb3IpLCBwdi5zdW0oYi5jb2xvcikpO30pO1xuXG4gICAgICAgICAgICAvLyBmb3JjZSBkYXJrZXN0IGNvbG9yIHRvIGJsYWNrIGlmIGV2ZXJ5dGhpbmcgPCA1XG4gICAgICAgICAgICB2YXIgbG93ZXN0ID0gdmJveGVzWzBdLmNvbG9yO1xuICAgICAgICAgICAgaWYgKGxvd2VzdFswXSA8IDUgJiYgbG93ZXN0WzFdIDwgNSAmJiBsb3dlc3RbMl0gPCA1KVxuICAgICAgICAgICAgICAgIHZib3hlc1swXS5jb2xvciA9IFswLDAsMF07XG5cbiAgICAgICAgICAgIC8vIGZvcmNlIGxpZ2h0ZXN0IGNvbG9yIHRvIHdoaXRlIGlmIGV2ZXJ5dGhpbmcgPiAyNTFcbiAgICAgICAgICAgIHZhciBpZHggPSB2Ym94ZXMubGVuZ3RoLTEsXG4gICAgICAgICAgICAgICAgaGlnaGVzdCA9IHZib3hlc1tpZHhdLmNvbG9yO1xuICAgICAgICAgICAgaWYgKGhpZ2hlc3RbMF0gPiAyNTEgJiYgaGlnaGVzdFsxXSA+IDI1MSAmJiBoaWdoZXN0WzJdID4gMjUxKVxuICAgICAgICAgICAgICAgIHZib3hlc1tpZHhdLmNvbG9yID0gWzI1NSwyNTUsMjU1XTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBoaXN0byAoMS1kIGFycmF5LCBnaXZpbmcgdGhlIG51bWJlciBvZiBwaXhlbHMgaW5cbiAgICAvLyBlYWNoIHF1YW50aXplZCByZWdpb24gb2YgY29sb3Igc3BhY2UpLCBvciBudWxsIG9uIGVycm9yXG4gICAgZnVuY3Rpb24gZ2V0SGlzdG8ocGl4ZWxzKSB7XG4gICAgICAgIHZhciBoaXN0b3NpemUgPSAxIDw8ICgzICogc2lnYml0cyksXG4gICAgICAgICAgICBoaXN0byA9IG5ldyBBcnJheShoaXN0b3NpemUpLFxuICAgICAgICAgICAgaW5kZXgsIHJ2YWwsIGd2YWwsIGJ2YWw7XG4gICAgICAgIHBpeGVscy5mb3JFYWNoKGZ1bmN0aW9uKHBpeGVsKSB7XG4gICAgICAgICAgICBydmFsID0gcGl4ZWxbMF0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgZ3ZhbCA9IHBpeGVsWzFdID4+IHJzaGlmdDtcbiAgICAgICAgICAgIGJ2YWwgPSBwaXhlbFsyXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICBpbmRleCA9IGdldENvbG9ySW5kZXgocnZhbCwgZ3ZhbCwgYnZhbCk7XG4gICAgICAgICAgICBoaXN0b1tpbmRleF0gPSAoaGlzdG9baW5kZXhdIHx8IDApICsgMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBoaXN0bztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2Ym94RnJvbVBpeGVscyhwaXhlbHMsIGhpc3RvKSB7XG4gICAgICAgIHZhciBybWluPTEwMDAwMDAsIHJtYXg9MCxcbiAgICAgICAgICAgIGdtaW49MTAwMDAwMCwgZ21heD0wLFxuICAgICAgICAgICAgYm1pbj0xMDAwMDAwLCBibWF4PTAsXG4gICAgICAgICAgICBydmFsLCBndmFsLCBidmFsO1xuICAgICAgICAvLyBmaW5kIG1pbi9tYXhcbiAgICAgICAgcGl4ZWxzLmZvckVhY2goZnVuY3Rpb24ocGl4ZWwpIHtcbiAgICAgICAgICAgIHJ2YWwgPSBwaXhlbFswXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICBndmFsID0gcGl4ZWxbMV0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgYnZhbCA9IHBpeGVsWzJdID4+IHJzaGlmdDtcbiAgICAgICAgICAgIGlmIChydmFsIDwgcm1pbikgcm1pbiA9IHJ2YWw7XG4gICAgICAgICAgICBlbHNlIGlmIChydmFsID4gcm1heCkgcm1heCA9IHJ2YWw7XG4gICAgICAgICAgICBpZiAoZ3ZhbCA8IGdtaW4pIGdtaW4gPSBndmFsO1xuICAgICAgICAgICAgZWxzZSBpZiAoZ3ZhbCA+IGdtYXgpIGdtYXggPSBndmFsO1xuICAgICAgICAgICAgaWYgKGJ2YWwgPCBibWluKSBibWluID0gYnZhbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGJ2YWwgPiBibWF4KSAgYm1heCA9IGJ2YWw7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFZCb3gocm1pbiwgcm1heCwgZ21pbiwgZ21heCwgYm1pbiwgYm1heCwgaGlzdG8pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1lZGlhbkN1dEFwcGx5KGhpc3RvLCB2Ym94KSB7XG4gICAgICAgIGlmICghdmJveC5jb3VudCgpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHJ3ID0gdmJveC5yMiAtIHZib3gucjEgKyAxLFxuICAgICAgICAgICAgZ3cgPSB2Ym94LmcyIC0gdmJveC5nMSArIDEsXG4gICAgICAgICAgICBidyA9IHZib3guYjIgLSB2Ym94LmIxICsgMSxcbiAgICAgICAgICAgIG1heHcgPSBwdi5tYXgoW3J3LCBndywgYnddKTtcbiAgICAgICAgLy8gb25seSBvbmUgcGl4ZWwsIG5vIHNwbGl0XG4gICAgICAgIGlmICh2Ym94LmNvdW50KCkgPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIFt2Ym94LmNvcHkoKV07XG4gICAgICAgIH1cbiAgICAgICAgLyogRmluZCB0aGUgcGFydGlhbCBzdW0gYXJyYXlzIGFsb25nIHRoZSBzZWxlY3RlZCBheGlzLiAqL1xuICAgICAgICB2YXIgdG90YWwgPSAwLFxuICAgICAgICAgICAgcGFydGlhbHN1bSA9IFtdLFxuICAgICAgICAgICAgbG9va2FoZWFkc3VtID0gW10sXG4gICAgICAgICAgICBpLCBqLCBrLCBzdW0sIGluZGV4O1xuICAgICAgICBpZiAobWF4dyA9PSBydykge1xuICAgICAgICAgICAgZm9yIChpID0gdmJveC5yMTsgaSA8PSB2Ym94LnIyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdW0gPSAwO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IHZib3guZzE7IGogPD0gdmJveC5nMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IHZib3guYjE7IGsgPD0gdmJveC5iMjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGdldENvbG9ySW5kZXgoaSxqLGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IChoaXN0b1tpbmRleF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gc3VtO1xuICAgICAgICAgICAgICAgIHBhcnRpYWxzdW1baV0gPSB0b3RhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtYXh3ID09IGd3KSB7XG4gICAgICAgICAgICBmb3IgKGkgPSB2Ym94LmcxOyBpIDw9IHZib3guZzI7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChqID0gdmJveC5yMTsgaiA8PSB2Ym94LnIyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gdmJveC5iMTsgayA8PSB2Ym94LmIyOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0Q29sb3JJbmRleChqLGksayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gKGhpc3RvW2luZGV4XSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3RhbCArPSBzdW07XG4gICAgICAgICAgICAgICAgcGFydGlhbHN1bVtpXSA9IHRvdGFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAgLyogbWF4dyA9PSBidyAqL1xuICAgICAgICAgICAgZm9yIChpID0gdmJveC5iMTsgaSA8PSB2Ym94LmIyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdW0gPSAwO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IHZib3gucjE7IGogPD0gdmJveC5yMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IHZib3guZzE7IGsgPD0gdmJveC5nMjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGdldENvbG9ySW5kZXgoaixrLGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IChoaXN0b1tpbmRleF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gc3VtO1xuICAgICAgICAgICAgICAgIHBhcnRpYWxzdW1baV0gPSB0b3RhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXJ0aWFsc3VtLmZvckVhY2goZnVuY3Rpb24oZCxpKSB7XG4gICAgICAgICAgICBsb29rYWhlYWRzdW1baV0gPSB0b3RhbC1kO1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gZG9DdXQoY29sb3IpIHtcbiAgICAgICAgICAgIHZhciBkaW0xID0gY29sb3IgKyAnMScsXG4gICAgICAgICAgICAgICAgZGltMiA9IGNvbG9yICsgJzInLFxuICAgICAgICAgICAgICAgIGxlZnQsIHJpZ2h0LCB2Ym94MSwgdmJveDIsIGQyLCBjb3VudDI9MDtcbiAgICAgICAgICAgIGZvciAoaSA9IHZib3hbZGltMV07IGkgPD0gdmJveFtkaW0yXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxzdW1baV0gPiB0b3RhbCAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmJveDEgPSB2Ym94LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmJveDIgPSB2Ym94LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGkgLSB2Ym94W2RpbTFdO1xuICAgICAgICAgICAgICAgICAgICByaWdodCA9IHZib3hbZGltMl0gLSBpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdCA8PSByaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIGQyID0gTWF0aC5taW4odmJveFtkaW0yXSAtIDEsIH5+KGkgKyByaWdodCAvIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBkMiA9IE1hdGgubWF4KHZib3hbZGltMV0sIH5+KGkgLSAxIC0gbGVmdCAvIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgMC1jb3VudCBib3hlc1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIXBhcnRpYWxzdW1bZDJdKSBkMisrO1xuICAgICAgICAgICAgICAgICAgICBjb3VudDIgPSBsb29rYWhlYWRzdW1bZDJdO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIWNvdW50MiAmJiBwYXJ0aWFsc3VtW2QyLTFdKSBjb3VudDIgPSBsb29rYWhlYWRzdW1bLS1kMl07XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBkaW1lbnNpb25zXG4gICAgICAgICAgICAgICAgICAgIHZib3gxW2RpbTJdID0gZDI7XG4gICAgICAgICAgICAgICAgICAgIHZib3gyW2RpbTFdID0gdmJveDFbZGltMl0gKyAxO1xuLy8gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2Ym94IGNvdW50czonLCB2Ym94LmNvdW50KCksIHZib3gxLmNvdW50KCksIHZib3gyLmNvdW50KCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3Zib3gxLCB2Ym94Ml07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBjdXQgcGxhbmVzXG4gICAgICAgIHJldHVybiBtYXh3ID09IHJ3ID8gZG9DdXQoJ3InKSA6XG4gICAgICAgICAgICBtYXh3ID09IGd3ID8gZG9DdXQoJ2cnKSA6XG4gICAgICAgICAgICBkb0N1dCgnYicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1YW50aXplKHBpeGVscywgbWF4Y29sb3JzKSB7XG4gICAgICAgIC8vIHNob3J0LWNpcmN1aXRcbiAgICAgICAgaWYgKCFwaXhlbHMubGVuZ3RoIHx8IG1heGNvbG9ycyA8IDIgfHwgbWF4Y29sb3JzID4gMjU2KSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3cm9uZyBudW1iZXIgb2YgbWF4Y29sb3JzJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBYWFg6IGNoZWNrIGNvbG9yIGNvbnRlbnQgYW5kIGNvbnZlcnQgdG8gZ3JheXNjYWxlIGlmIGluc3VmZmljaWVudFxuXG4gICAgICAgIHZhciBoaXN0byA9IGdldEhpc3RvKHBpeGVscyksXG4gICAgICAgICAgICBoaXN0b3NpemUgPSAxIDw8ICgzICogc2lnYml0cyk7XG5cbiAgICAgICAgLy8gY2hlY2sgdGhhdCB3ZSBhcmVuJ3QgYmVsb3cgbWF4Y29sb3JzIGFscmVhZHlcbiAgICAgICAgdmFyIG5Db2xvcnMgPSAwO1xuICAgICAgICBoaXN0by5mb3JFYWNoKGZ1bmN0aW9uKCkgeyBuQ29sb3JzKys7IH0pO1xuICAgICAgICBpZiAobkNvbG9ycyA8PSBtYXhjb2xvcnMpIHtcbiAgICAgICAgICAgIC8vIFhYWDogZ2VuZXJhdGUgdGhlIG5ldyBjb2xvcnMgZnJvbSB0aGUgaGlzdG8gYW5kIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBiZWdpbm5pbmcgdmJveCBmcm9tIHRoZSBjb2xvcnNcbiAgICAgICAgdmFyIHZib3ggPSB2Ym94RnJvbVBpeGVscyhwaXhlbHMsIGhpc3RvKSxcbiAgICAgICAgICAgIHBxID0gbmV3IFBRdWV1ZShmdW5jdGlvbihhLGIpIHsgcmV0dXJuIHB2Lm5hdHVyYWxPcmRlcihhLmNvdW50KCksIGIuY291bnQoKSk7IH0pO1xuICAgICAgICBwcS5wdXNoKHZib3gpO1xuXG4gICAgICAgIC8vIGlubmVyIGZ1bmN0aW9uIHRvIGRvIHRoZSBpdGVyYXRpb25cbiAgICAgICAgZnVuY3Rpb24gaXRlcihsaCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgbmNvbG9ycyA9IDEsXG4gICAgICAgICAgICAgICAgbml0ZXJzID0gMCxcbiAgICAgICAgICAgICAgICB2Ym94O1xuICAgICAgICAgICAgd2hpbGUgKG5pdGVycyA8IG1heEl0ZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2Ym94ID0gbGgucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCF2Ym94LmNvdW50KCkpICB7IC8qIGp1c3QgcHV0IGl0IGJhY2sgKi9cbiAgICAgICAgICAgICAgICAgICAgbGgucHVzaCh2Ym94KTtcbiAgICAgICAgICAgICAgICAgICAgbml0ZXJzKys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkbyB0aGUgY3V0XG4gICAgICAgICAgICAgICAgdmFyIHZib3hlcyA9IG1lZGlhbkN1dEFwcGx5KGhpc3RvLCB2Ym94KSxcbiAgICAgICAgICAgICAgICAgICAgdmJveDEgPSB2Ym94ZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHZib3gyID0gdmJveGVzWzFdO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF2Ym94MSkge1xuLy8gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmJveDEgbm90IGRlZmluZWQ7IHNob3VsZG4ndCBoYXBwZW4hXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxoLnB1c2godmJveDEpO1xuICAgICAgICAgICAgICAgIGlmICh2Ym94MikgeyAgLyogdmJveDIgY2FuIGJlIG51bGwgKi9cbiAgICAgICAgICAgICAgICAgICAgbGgucHVzaCh2Ym94Mik7XG4gICAgICAgICAgICAgICAgICAgIG5jb2xvcnMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5jb2xvcnMgPj0gdGFyZ2V0KSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKG5pdGVycysrID4gbWF4SXRlcmF0aW9ucykge1xuLy8gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5maW5pdGUgbG9vcDsgcGVyaGFwcyB0b28gZmV3IHBpeGVscyFcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaXJzdCBzZXQgb2YgY29sb3JzLCBzb3J0ZWQgYnkgcG9wdWxhdGlvblxuICAgICAgICBpdGVyKHBxLCBmcmFjdEJ5UG9wdWxhdGlvbnMgKiBtYXhjb2xvcnMpO1xuXG4gICAgICAgIC8vIFJlLXNvcnQgYnkgdGhlIHByb2R1Y3Qgb2YgcGl4ZWwgb2NjdXBhbmN5IHRpbWVzIHRoZSBzaXplIGluIGNvbG9yIHNwYWNlLlxuICAgICAgICB2YXIgcHEyID0gbmV3IFBRdWV1ZShmdW5jdGlvbihhLGIpIHtcbiAgICAgICAgICAgIHJldHVybiBwdi5uYXR1cmFsT3JkZXIoYS5jb3VudCgpKmEudm9sdW1lKCksIGIuY291bnQoKSpiLnZvbHVtZSgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChwcS5zaXplKCkpIHtcbiAgICAgICAgICAgIHBxMi5wdXNoKHBxLnBvcCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5leHQgc2V0IC0gZ2VuZXJhdGUgdGhlIG1lZGlhbiBjdXRzIHVzaW5nIHRoZSAobnBpeCAqIHZvbCkgc29ydGluZy5cbiAgICAgICAgaXRlcihwcTIsIG1heGNvbG9ycyAtIHBxMi5zaXplKCkpO1xuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYWN0dWFsIGNvbG9yc1xuICAgICAgICB2YXIgY21hcCA9IG5ldyBDTWFwKCk7XG4gICAgICAgIHdoaWxlIChwcTIuc2l6ZSgpKSB7XG4gICAgICAgICAgICBjbWFwLnB1c2gocHEyLnBvcCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbWFwO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHF1YW50aXplOiBxdWFudGl6ZVxuICAgIH07XG59KSgpO1xuLyohXG4gKiBqUXVlcnkgRm9ybSBQbHVnaW5cbiAqIHZlcnNpb246IDMuNTEuMC0yMDE0LjA2LjIwXG4gKiBSZXF1aXJlcyBqUXVlcnkgdjEuNSBvciBsYXRlclxuICogQ29weXJpZ2h0IChjKSAyMDE0IE0uIEFsc3VwXG4gKiBFeGFtcGxlcyBhbmQgZG9jdW1lbnRhdGlvbiBhdDogaHR0cDovL21hbHN1cC5jb20vanF1ZXJ5L2Zvcm0vXG4gKiBQcm9qZWN0IHJlcG9zaXRvcnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9tYWxzdXAvZm9ybVxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWFsc3VwL2Zvcm0jY29weXJpZ2h0LWFuZC1saWNlbnNlXG4gKi9cbiFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxlKTplKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBqUXVlcnk/alF1ZXJ5OndpbmRvdy5aZXB0byl9KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIHI9dC5kYXRhO3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0LnByZXZlbnREZWZhdWx0KCksZSh0LnRhcmdldCkuYWpheFN1Ym1pdChyKSl9ZnVuY3Rpb24gcih0KXt2YXIgcj10LnRhcmdldCxhPWUocik7aWYoIWEuaXMoXCJbdHlwZT1zdWJtaXRdLFt0eXBlPWltYWdlXVwiKSl7dmFyIG49YS5jbG9zZXN0KFwiW3R5cGU9c3VibWl0XVwiKTtpZigwPT09bi5sZW5ndGgpcmV0dXJuO3I9blswXX12YXIgaT10aGlzO2lmKGkuY2xrPXIsXCJpbWFnZVwiPT1yLnR5cGUpaWYodm9pZCAwIT09dC5vZmZzZXRYKWkuY2xrX3g9dC5vZmZzZXRYLGkuY2xrX3k9dC5vZmZzZXRZO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5mbi5vZmZzZXQpe3ZhciBvPWEub2Zmc2V0KCk7aS5jbGtfeD10LnBhZ2VYLW8ubGVmdCxpLmNsa195PXQucGFnZVktby50b3B9ZWxzZSBpLmNsa194PXQucGFnZVgtci5vZmZzZXRMZWZ0LGkuY2xrX3k9dC5wYWdlWS1yLm9mZnNldFRvcDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5jbGs9aS5jbGtfeD1pLmNsa195PW51bGx9LDEwMCl9ZnVuY3Rpb24gYSgpe2lmKGUuZm4uYWpheFN1Ym1pdC5kZWJ1Zyl7dmFyIHQ9XCJbanF1ZXJ5LmZvcm1dIFwiK0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLFwiXCIpO3dpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2c/d2luZG93LmNvbnNvbGUubG9nKHQpOndpbmRvdy5vcGVyYSYmd2luZG93Lm9wZXJhLnBvc3RFcnJvciYmd2luZG93Lm9wZXJhLnBvc3RFcnJvcih0KX19dmFyIG49e307bi5maWxlYXBpPXZvaWQgMCE9PWUoXCI8aW5wdXQgdHlwZT0nZmlsZScvPlwiKS5nZXQoMCkuZmlsZXMsbi5mb3JtZGF0YT12b2lkIDAhPT13aW5kb3cuRm9ybURhdGE7dmFyIGk9ISFlLmZuLnByb3A7ZS5mbi5hdHRyMj1mdW5jdGlvbigpe2lmKCFpKXJldHVybiB0aGlzLmF0dHIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMucHJvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUmJmUuanF1ZXJ5fHxcInN0cmluZ1wiPT10eXBlb2YgZT9lOnRoaXMuYXR0ci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZm4uYWpheFN1Ym1pdD1mdW5jdGlvbih0KXtmdW5jdGlvbiByKHIpe3ZhciBhLG4saT1lLnBhcmFtKHIsdC50cmFkaXRpb25hbCkuc3BsaXQoXCImXCIpLG89aS5sZW5ndGgscz1bXTtmb3IoYT0wO28+YTthKyspaVthXT1pW2FdLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSxuPWlbYV0uc3BsaXQoXCI9XCIpLHMucHVzaChbZGVjb2RlVVJJQ29tcG9uZW50KG5bMF0pLGRlY29kZVVSSUNvbXBvbmVudChuWzFdKV0pO3JldHVybiBzfWZ1bmN0aW9uIG8oYSl7Zm9yKHZhciBuPW5ldyBGb3JtRGF0YSxpPTA7aTxhLmxlbmd0aDtpKyspbi5hcHBlbmQoYVtpXS5uYW1lLGFbaV0udmFsdWUpO2lmKHQuZXh0cmFEYXRhKXt2YXIgbz1yKHQuZXh0cmFEYXRhKTtmb3IoaT0wO2k8by5sZW5ndGg7aSsrKW9baV0mJm4uYXBwZW5kKG9baV1bMF0sb1tpXVsxXSl9dC5kYXRhPW51bGw7dmFyIHM9ZS5leHRlbmQoITAse30sZS5hamF4U2V0dGluZ3MsdCx7Y29udGVudFR5cGU6ITEscHJvY2Vzc0RhdGE6ITEsY2FjaGU6ITEsdHlwZTp1fHxcIlBPU1RcIn0pO3QudXBsb2FkUHJvZ3Jlc3MmJihzLnhocj1mdW5jdGlvbigpe3ZhciByPWUuYWpheFNldHRpbmdzLnhocigpO3JldHVybiByLnVwbG9hZCYmci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oZSl7dmFyIHI9MCxhPWUubG9hZGVkfHxlLnBvc2l0aW9uLG49ZS50b3RhbDtlLmxlbmd0aENvbXB1dGFibGUmJihyPU1hdGguY2VpbChhL24qMTAwKSksdC51cGxvYWRQcm9ncmVzcyhlLGEsbixyKX0sITEpLHJ9KSxzLmRhdGE9bnVsbDt2YXIgYz1zLmJlZm9yZVNlbmQ7cmV0dXJuIHMuYmVmb3JlU2VuZD1mdW5jdGlvbihlLHIpe3IuZGF0YT10LmZvcm1EYXRhP3QuZm9ybURhdGE6bixjJiZjLmNhbGwodGhpcyxlLHIpfSxlLmFqYXgocyl9ZnVuY3Rpb24gcyhyKXtmdW5jdGlvbiBuKGUpe3ZhciB0PW51bGw7dHJ5e2UuY29udGVudFdpbmRvdyYmKHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50KX1jYXRjaChyKXthKFwiY2Fubm90IGdldCBpZnJhbWUuY29udGVudFdpbmRvdyBkb2N1bWVudDogXCIrcil9aWYodClyZXR1cm4gdDt0cnl7dD1lLmNvbnRlbnREb2N1bWVudD9lLmNvbnRlbnREb2N1bWVudDplLmRvY3VtZW50fWNhdGNoKHIpe2EoXCJjYW5ub3QgZ2V0IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ6IFwiK3IpLHQ9ZS5kb2N1bWVudH1yZXR1cm4gdH1mdW5jdGlvbiBvKCl7ZnVuY3Rpb24gdCgpe3RyeXt2YXIgZT1uKGcpLnJlYWR5U3RhdGU7YShcInN0YXRlID0gXCIrZSksZSYmXCJ1bmluaXRpYWxpemVkXCI9PWUudG9Mb3dlckNhc2UoKSYmc2V0VGltZW91dCh0LDUwKX1jYXRjaChyKXthKFwiU2VydmVyIGFib3J0OiBcIixyLFwiIChcIixyLm5hbWUsXCIpXCIpLHMoayksaiYmY2xlYXJUaW1lb3V0KGopLGo9dm9pZCAwfX12YXIgcj1mLmF0dHIyKFwidGFyZ2V0XCIpLGk9Zi5hdHRyMihcImFjdGlvblwiKSxvPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLGM9Zi5hdHRyKFwiZW5jdHlwZVwiKXx8Zi5hdHRyKFwiZW5jb2RpbmdcIil8fG87dy5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIixwKSwoIXV8fC9wb3N0L2kudGVzdCh1KSkmJncuc2V0QXR0cmlidXRlKFwibWV0aG9kXCIsXCJQT1NUXCIpLGkhPW0udXJsJiZ3LnNldEF0dHJpYnV0ZShcImFjdGlvblwiLG0udXJsKSxtLnNraXBFbmNvZGluZ092ZXJyaWRlfHx1JiYhL3Bvc3QvaS50ZXN0KHUpfHxmLmF0dHIoe2VuY29kaW5nOlwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLGVuY3R5cGU6XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJ9KSxtLnRpbWVvdXQmJihqPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtUPSEwLHMoRCl9LG0udGltZW91dCkpO3ZhciBsPVtdO3RyeXtpZihtLmV4dHJhRGF0YSlmb3IodmFyIGQgaW4gbS5leHRyYURhdGEpbS5leHRyYURhdGEuaGFzT3duUHJvcGVydHkoZCkmJmwucHVzaChlLmlzUGxhaW5PYmplY3QobS5leHRyYURhdGFbZF0pJiZtLmV4dHJhRGF0YVtkXS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJm0uZXh0cmFEYXRhW2RdLmhhc093blByb3BlcnR5KFwidmFsdWVcIik/ZSgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJyttLmV4dHJhRGF0YVtkXS5uYW1lKydcIj4nKS52YWwobS5leHRyYURhdGFbZF0udmFsdWUpLmFwcGVuZFRvKHcpWzBdOmUoJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIicrZCsnXCI+JykudmFsKG0uZXh0cmFEYXRhW2RdKS5hcHBlbmRUbyh3KVswXSk7bS5pZnJhbWVUYXJnZXR8fHYuYXBwZW5kVG8oXCJib2R5XCIpLGcuYXR0YWNoRXZlbnQ/Zy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLHMpOmcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixzLCExKSxzZXRUaW1lb3V0KHQsMTUpO3RyeXt3LnN1Ym1pdCgpfWNhdGNoKGgpe3ZhciB4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLnN1Ym1pdDt4LmFwcGx5KHcpfX1maW5hbGx5e3cuc2V0QXR0cmlidXRlKFwiYWN0aW9uXCIsaSksdy5zZXRBdHRyaWJ1dGUoXCJlbmN0eXBlXCIsYykscj93LnNldEF0dHJpYnV0ZShcInRhcmdldFwiLHIpOmYucmVtb3ZlQXR0cihcInRhcmdldFwiKSxlKGwpLnJlbW92ZSgpfX1mdW5jdGlvbiBzKHQpe2lmKCF4LmFib3J0ZWQmJiFGKXtpZihNPW4oZyksTXx8KGEoXCJjYW5ub3QgYWNjZXNzIHJlc3BvbnNlIGRvY3VtZW50XCIpLHQ9ayksdD09PUQmJngpcmV0dXJuIHguYWJvcnQoXCJ0aW1lb3V0XCIpLHZvaWQgUy5yZWplY3QoeCxcInRpbWVvdXRcIik7aWYodD09ayYmeClyZXR1cm4geC5hYm9ydChcInNlcnZlciBhYm9ydFwiKSx2b2lkIFMucmVqZWN0KHgsXCJlcnJvclwiLFwic2VydmVyIGFib3J0XCIpO2lmKE0mJk0ubG9jYXRpb24uaHJlZiE9bS5pZnJhbWVTcmN8fFQpe2cuZGV0YWNoRXZlbnQ/Zy5kZXRhY2hFdmVudChcIm9ubG9hZFwiLHMpOmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixzLCExKTt2YXIgcixpPVwic3VjY2Vzc1wiO3RyeXtpZihUKXRocm93XCJ0aW1lb3V0XCI7dmFyIG89XCJ4bWxcIj09bS5kYXRhVHlwZXx8TS5YTUxEb2N1bWVudHx8ZS5pc1hNTERvYyhNKTtpZihhKFwiaXNYbWw9XCIrbyksIW8mJndpbmRvdy5vcGVyYSYmKG51bGw9PT1NLmJvZHl8fCFNLmJvZHkuaW5uZXJIVE1MKSYmLS1PKXJldHVybiBhKFwicmVxdWVpbmcgb25Mb2FkIGNhbGxiYWNrLCBET00gbm90IGF2YWlsYWJsZVwiKSx2b2lkIHNldFRpbWVvdXQocywyNTApO3ZhciB1PU0uYm9keT9NLmJvZHk6TS5kb2N1bWVudEVsZW1lbnQ7eC5yZXNwb25zZVRleHQ9dT91LmlubmVySFRNTDpudWxsLHgucmVzcG9uc2VYTUw9TS5YTUxEb2N1bWVudD9NLlhNTERvY3VtZW50Ok0sbyYmKG0uZGF0YVR5cGU9XCJ4bWxcIikseC5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihlKXt2YXIgdD17XCJjb250ZW50LXR5cGVcIjptLmRhdGFUeXBlfTtyZXR1cm4gdFtlLnRvTG93ZXJDYXNlKCldfSx1JiYoeC5zdGF0dXM9TnVtYmVyKHUuZ2V0QXR0cmlidXRlKFwic3RhdHVzXCIpKXx8eC5zdGF0dXMseC5zdGF0dXNUZXh0PXUuZ2V0QXR0cmlidXRlKFwic3RhdHVzVGV4dFwiKXx8eC5zdGF0dXNUZXh0KTt2YXIgYz0obS5kYXRhVHlwZXx8XCJcIikudG9Mb3dlckNhc2UoKSxsPS8oanNvbnxzY3JpcHR8dGV4dCkvLnRlc3QoYyk7aWYobHx8bS50ZXh0YXJlYSl7dmFyIGY9TS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRleHRhcmVhXCIpWzBdO2lmKGYpeC5yZXNwb25zZVRleHQ9Zi52YWx1ZSx4LnN0YXR1cz1OdW1iZXIoZi5nZXRBdHRyaWJ1dGUoXCJzdGF0dXNcIikpfHx4LnN0YXR1cyx4LnN0YXR1c1RleHQ9Zi5nZXRBdHRyaWJ1dGUoXCJzdGF0dXNUZXh0XCIpfHx4LnN0YXR1c1RleHQ7ZWxzZSBpZihsKXt2YXIgcD1NLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicHJlXCIpWzBdLGg9TS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07cD94LnJlc3BvbnNlVGV4dD1wLnRleHRDb250ZW50P3AudGV4dENvbnRlbnQ6cC5pbm5lclRleHQ6aCYmKHgucmVzcG9uc2VUZXh0PWgudGV4dENvbnRlbnQ/aC50ZXh0Q29udGVudDpoLmlubmVyVGV4dCl9fWVsc2VcInhtbFwiPT1jJiYheC5yZXNwb25zZVhNTCYmeC5yZXNwb25zZVRleHQmJih4LnJlc3BvbnNlWE1MPVgoeC5yZXNwb25zZVRleHQpKTt0cnl7RT1fKHgsYyxtKX1jYXRjaCh5KXtpPVwicGFyc2VyZXJyb3JcIix4LmVycm9yPXI9eXx8aX19Y2F0Y2goeSl7YShcImVycm9yIGNhdWdodDogXCIseSksaT1cImVycm9yXCIseC5lcnJvcj1yPXl8fGl9eC5hYm9ydGVkJiYoYShcInVwbG9hZCBhYm9ydGVkXCIpLGk9bnVsbCkseC5zdGF0dXMmJihpPXguc3RhdHVzPj0yMDAmJnguc3RhdHVzPDMwMHx8MzA0PT09eC5zdGF0dXM/XCJzdWNjZXNzXCI6XCJlcnJvclwiKSxcInN1Y2Nlc3NcIj09PWk/KG0uc3VjY2VzcyYmbS5zdWNjZXNzLmNhbGwobS5jb250ZXh0LEUsXCJzdWNjZXNzXCIseCksUy5yZXNvbHZlKHgucmVzcG9uc2VUZXh0LFwic3VjY2Vzc1wiLHgpLGQmJmUuZXZlbnQudHJpZ2dlcihcImFqYXhTdWNjZXNzXCIsW3gsbV0pKTppJiYodm9pZCAwPT09ciYmKHI9eC5zdGF0dXNUZXh0KSxtLmVycm9yJiZtLmVycm9yLmNhbGwobS5jb250ZXh0LHgsaSxyKSxTLnJlamVjdCh4LFwiZXJyb3JcIixyKSxkJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4RXJyb3JcIixbeCxtLHJdKSksZCYmZS5ldmVudC50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3gsbV0pLGQmJiEtLWUuYWN0aXZlJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSxtLmNvbXBsZXRlJiZtLmNvbXBsZXRlLmNhbGwobS5jb250ZXh0LHgsaSksRj0hMCxtLnRpbWVvdXQmJmNsZWFyVGltZW91dChqKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bS5pZnJhbWVUYXJnZXQ/di5hdHRyKFwic3JjXCIsbS5pZnJhbWVTcmMpOnYucmVtb3ZlKCkseC5yZXNwb25zZVhNTD1udWxsfSwxMDApfX19dmFyIGMsbCxtLGQscCx2LGcseCx5LGIsVCxqLHc9ZlswXSxTPWUuRGVmZXJyZWQoKTtpZihTLmFib3J0PWZ1bmN0aW9uKGUpe3guYWJvcnQoZSl9LHIpZm9yKGw9MDtsPGgubGVuZ3RoO2wrKyljPWUoaFtsXSksaT9jLnByb3AoXCJkaXNhYmxlZFwiLCExKTpjLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtpZihtPWUuZXh0ZW5kKCEwLHt9LGUuYWpheFNldHRpbmdzLHQpLG0uY29udGV4dD1tLmNvbnRleHR8fG0scD1cImpxRm9ybUlPXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCksbS5pZnJhbWVUYXJnZXQ/KHY9ZShtLmlmcmFtZVRhcmdldCksYj12LmF0dHIyKFwibmFtZVwiKSxiP3A9Yjp2LmF0dHIyKFwibmFtZVwiLHApKToodj1lKCc8aWZyYW1lIG5hbWU9XCInK3ArJ1wiIHNyYz1cIicrbS5pZnJhbWVTcmMrJ1wiIC8+Jyksdi5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMTAwMHB4XCIsbGVmdDpcIi0xMDAwcHhcIn0pKSxnPXZbMF0seD17YWJvcnRlZDowLHJlc3BvbnNlVGV4dDpudWxsLHJlc3BvbnNlWE1MOm51bGwsc3RhdHVzOjAsc3RhdHVzVGV4dDpcIm4vYVwiLGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe30sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oKXt9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oKXt9LGFib3J0OmZ1bmN0aW9uKHQpe3ZhciByPVwidGltZW91dFwiPT09dD9cInRpbWVvdXRcIjpcImFib3J0ZWRcIjthKFwiYWJvcnRpbmcgdXBsb2FkLi4uIFwiK3IpLHRoaXMuYWJvcnRlZD0xO3RyeXtnLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZXhlY0NvbW1hbmQmJmcuY29udGVudFdpbmRvdy5kb2N1bWVudC5leGVjQ29tbWFuZChcIlN0b3BcIil9Y2F0Y2gobil7fXYuYXR0cihcInNyY1wiLG0uaWZyYW1lU3JjKSx4LmVycm9yPXIsbS5lcnJvciYmbS5lcnJvci5jYWxsKG0uY29udGV4dCx4LHIsdCksZCYmZS5ldmVudC50cmlnZ2VyKFwiYWpheEVycm9yXCIsW3gsbSxyXSksbS5jb21wbGV0ZSYmbS5jb21wbGV0ZS5jYWxsKG0uY29udGV4dCx4LHIpfX0sZD1tLmdsb2JhbCxkJiYwPT09ZS5hY3RpdmUrKyYmZS5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGQmJmUuZXZlbnQudHJpZ2dlcihcImFqYXhTZW5kXCIsW3gsbV0pLG0uYmVmb3JlU2VuZCYmbS5iZWZvcmVTZW5kLmNhbGwobS5jb250ZXh0LHgsbSk9PT0hMSlyZXR1cm4gbS5nbG9iYWwmJmUuYWN0aXZlLS0sUy5yZWplY3QoKSxTO2lmKHguYWJvcnRlZClyZXR1cm4gUy5yZWplY3QoKSxTO3k9dy5jbGsseSYmKGI9eS5uYW1lLGImJiF5LmRpc2FibGVkJiYobS5leHRyYURhdGE9bS5leHRyYURhdGF8fHt9LG0uZXh0cmFEYXRhW2JdPXkudmFsdWUsXCJpbWFnZVwiPT15LnR5cGUmJihtLmV4dHJhRGF0YVtiK1wiLnhcIl09dy5jbGtfeCxtLmV4dHJhRGF0YVtiK1wiLnlcIl09dy5jbGtfeSkpKTt2YXIgRD0xLGs9MixBPWUoXCJtZXRhW25hbWU9Y3NyZi10b2tlbl1cIikuYXR0cihcImNvbnRlbnRcIiksTD1lKFwibWV0YVtuYW1lPWNzcmYtcGFyYW1dXCIpLmF0dHIoXCJjb250ZW50XCIpO0wmJkEmJihtLmV4dHJhRGF0YT1tLmV4dHJhRGF0YXx8e30sbS5leHRyYURhdGFbTF09QSksbS5mb3JjZVN5bmM/bygpOnNldFRpbWVvdXQobywxMCk7dmFyIEUsTSxGLE89NTAsWD1lLnBhcnNlWE1MfHxmdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cuQWN0aXZlWE9iamVjdD8odD1uZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIiksdC5hc3luYz1cImZhbHNlXCIsdC5sb2FkWE1MKGUpKTp0PShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSxcInRleHQveG1sXCIpLHQmJnQuZG9jdW1lbnRFbGVtZW50JiZcInBhcnNlcmVycm9yXCIhPXQuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lP3Q6bnVsbH0sQz1lLnBhcnNlSlNPTnx8ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5ldmFsKFwiKFwiK2UrXCIpXCIpfSxfPWZ1bmN0aW9uKHQscixhKXt2YXIgbj10LmdldFJlc3BvbnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpfHxcIlwiLGk9XCJ4bWxcIj09PXJ8fCFyJiZuLmluZGV4T2YoXCJ4bWxcIik+PTAsbz1pP3QucmVzcG9uc2VYTUw6dC5yZXNwb25zZVRleHQ7cmV0dXJuIGkmJlwicGFyc2VyZXJyb3JcIj09PW8uZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lJiZlLmVycm9yJiZlLmVycm9yKFwicGFyc2VyZXJyb3JcIiksYSYmYS5kYXRhRmlsdGVyJiYobz1hLmRhdGFGaWx0ZXIobyxyKSksXCJzdHJpbmdcIj09dHlwZW9mIG8mJihcImpzb25cIj09PXJ8fCFyJiZuLmluZGV4T2YoXCJqc29uXCIpPj0wP289QyhvKTooXCJzY3JpcHRcIj09PXJ8fCFyJiZuLmluZGV4T2YoXCJqYXZhc2NyaXB0XCIpPj0wKSYmZS5nbG9iYWxFdmFsKG8pKSxvfTtyZXR1cm4gU31pZighdGhpcy5sZW5ndGgpcmV0dXJuIGEoXCJhamF4U3VibWl0OiBza2lwcGluZyBzdWJtaXQgcHJvY2VzcyAtIG5vIGVsZW1lbnQgc2VsZWN0ZWRcIiksdGhpczt2YXIgdSxjLGwsZj10aGlzO1wiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dD17c3VjY2Vzczp0fTp2b2lkIDA9PT10JiYodD17fSksdT10LnR5cGV8fHRoaXMuYXR0cjIoXCJtZXRob2RcIiksYz10LnVybHx8dGhpcy5hdHRyMihcImFjdGlvblwiKSxsPVwic3RyaW5nXCI9PXR5cGVvZiBjP2UudHJpbShjKTpcIlwiLGw9bHx8d2luZG93LmxvY2F0aW9uLmhyZWZ8fFwiXCIsbCYmKGw9KGwubWF0Y2goL14oW14jXSspLyl8fFtdKVsxXSksdD1lLmV4dGVuZCghMCx7dXJsOmwsc3VjY2VzczplLmFqYXhTZXR0aW5ncy5zdWNjZXNzLHR5cGU6dXx8ZS5hamF4U2V0dGluZ3MudHlwZSxpZnJhbWVTcmM6L15odHRwcy9pLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWZ8fFwiXCIpP1wiamF2YXNjcmlwdDpmYWxzZVwiOlwiYWJvdXQ6YmxhbmtcIn0sdCk7dmFyIG09e307aWYodGhpcy50cmlnZ2VyKFwiZm9ybS1wcmUtc2VyaWFsaXplXCIsW3RoaXMsdCxtXSksbS52ZXRvKXJldHVybiBhKFwiYWpheFN1Ym1pdDogc3VibWl0IHZldG9lZCB2aWEgZm9ybS1wcmUtc2VyaWFsaXplIHRyaWdnZXJcIiksdGhpcztpZih0LmJlZm9yZVNlcmlhbGl6ZSYmdC5iZWZvcmVTZXJpYWxpemUodGhpcyx0KT09PSExKXJldHVybiBhKFwiYWpheFN1Ym1pdDogc3VibWl0IGFib3J0ZWQgdmlhIGJlZm9yZVNlcmlhbGl6ZSBjYWxsYmFja1wiKSx0aGlzO3ZhciBkPXQudHJhZGl0aW9uYWw7dm9pZCAwPT09ZCYmKGQ9ZS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpO3ZhciBwLGg9W10sdj10aGlzLmZvcm1Ub0FycmF5KHQuc2VtYW50aWMsaCk7aWYodC5kYXRhJiYodC5leHRyYURhdGE9dC5kYXRhLHA9ZS5wYXJhbSh0LmRhdGEsZCkpLHQuYmVmb3JlU3VibWl0JiZ0LmJlZm9yZVN1Ym1pdCh2LHRoaXMsdCk9PT0hMSlyZXR1cm4gYShcImFqYXhTdWJtaXQ6IHN1Ym1pdCBhYm9ydGVkIHZpYSBiZWZvcmVTdWJtaXQgY2FsbGJhY2tcIiksdGhpcztpZih0aGlzLnRyaWdnZXIoXCJmb3JtLXN1Ym1pdC12YWxpZGF0ZVwiLFt2LHRoaXMsdCxtXSksbS52ZXRvKXJldHVybiBhKFwiYWpheFN1Ym1pdDogc3VibWl0IHZldG9lZCB2aWEgZm9ybS1zdWJtaXQtdmFsaWRhdGUgdHJpZ2dlclwiKSx0aGlzO3ZhciBnPWUucGFyYW0odixkKTtwJiYoZz1nP2crXCImXCIrcDpwKSxcIkdFVFwiPT10LnR5cGUudG9VcHBlckNhc2UoKT8odC51cmwrPSh0LnVybC5pbmRleE9mKFwiP1wiKT49MD9cIiZcIjpcIj9cIikrZyx0LmRhdGE9bnVsbCk6dC5kYXRhPWc7dmFyIHg9W107aWYodC5yZXNldEZvcm0mJngucHVzaChmdW5jdGlvbigpe2YucmVzZXRGb3JtKCl9KSx0LmNsZWFyRm9ybSYmeC5wdXNoKGZ1bmN0aW9uKCl7Zi5jbGVhckZvcm0odC5pbmNsdWRlSGlkZGVuKX0pLCF0LmRhdGFUeXBlJiZ0LnRhcmdldCl7dmFyIHk9dC5zdWNjZXNzfHxmdW5jdGlvbigpe307eC5wdXNoKGZ1bmN0aW9uKHIpe3ZhciBhPXQucmVwbGFjZVRhcmdldD9cInJlcGxhY2VXaXRoXCI6XCJodG1sXCI7ZSh0LnRhcmdldClbYV0ocikuZWFjaCh5LGFyZ3VtZW50cyl9KX1lbHNlIHQuc3VjY2VzcyYmeC5wdXNoKHQuc3VjY2Vzcyk7aWYodC5zdWNjZXNzPWZ1bmN0aW9uKGUscixhKXtmb3IodmFyIG49dC5jb250ZXh0fHx0aGlzLGk9MCxvPXgubGVuZ3RoO28+aTtpKyspeFtpXS5hcHBseShuLFtlLHIsYXx8ZixmXSl9LHQuZXJyb3Ipe3ZhciBiPXQuZXJyb3I7dC5lcnJvcj1mdW5jdGlvbihlLHIsYSl7dmFyIG49dC5jb250ZXh0fHx0aGlzO2IuYXBwbHkobixbZSxyLGEsZl0pfX1pZih0LmNvbXBsZXRlKXt2YXIgVD10LmNvbXBsZXRlO3QuY29tcGxldGU9ZnVuY3Rpb24oZSxyKXt2YXIgYT10LmNvbnRleHR8fHRoaXM7VC5hcHBseShhLFtlLHIsZl0pfX12YXIgaj1lKFwiaW5wdXRbdHlwZT1maWxlXTplbmFibGVkXCIsdGhpcykuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PWUodGhpcykudmFsKCl9KSx3PWoubGVuZ3RoPjAsUz1cIm11bHRpcGFydC9mb3JtLWRhdGFcIixEPWYuYXR0cihcImVuY3R5cGVcIik9PVN8fGYuYXR0cihcImVuY29kaW5nXCIpPT1TLGs9bi5maWxlYXBpJiZuLmZvcm1kYXRhO2EoXCJmaWxlQVBJIDpcIitrKTt2YXIgQSxMPSh3fHxEKSYmIWs7dC5pZnJhbWUhPT0hMSYmKHQuaWZyYW1lfHxMKT90LmNsb3NlS2VlcEFsaXZlP2UuZ2V0KHQuY2xvc2VLZWVwQWxpdmUsZnVuY3Rpb24oKXtBPXModil9KTpBPXModik6QT0od3x8RCkmJms/byh2KTplLmFqYXgodCksZi5yZW1vdmVEYXRhKFwianF4aHJcIikuZGF0YShcImpxeGhyXCIsQSk7Zm9yKHZhciBFPTA7RTxoLmxlbmd0aDtFKyspaFtFXT1udWxsO3JldHVybiB0aGlzLnRyaWdnZXIoXCJmb3JtLXN1Ym1pdC1ub3RpZnlcIixbdGhpcyx0XSksdGhpc30sZS5mbi5hamF4Rm9ybT1mdW5jdGlvbihuKXtpZihuPW58fHt9LG4uZGVsZWdhdGlvbj1uLmRlbGVnYXRpb24mJmUuaXNGdW5jdGlvbihlLmZuLm9uKSwhbi5kZWxlZ2F0aW9uJiYwPT09dGhpcy5sZW5ndGgpe3ZhciBpPXtzOnRoaXMuc2VsZWN0b3IsYzp0aGlzLmNvbnRleHR9O3JldHVybiFlLmlzUmVhZHkmJmkucz8oYShcIkRPTSBub3QgcmVhZHksIHF1ZXVpbmcgYWpheEZvcm1cIiksZShmdW5jdGlvbigpe2UoaS5zLGkuYykuYWpheEZvcm0obil9KSx0aGlzKTooYShcInRlcm1pbmF0aW5nOyB6ZXJvIGVsZW1lbnRzIGZvdW5kIGJ5IHNlbGVjdG9yXCIrKGUuaXNSZWFkeT9cIlwiOlwiIChET00gbm90IHJlYWR5KVwiKSksdGhpcyl9cmV0dXJuIG4uZGVsZWdhdGlvbj8oZShkb2N1bWVudCkub2ZmKFwic3VibWl0LmZvcm0tcGx1Z2luXCIsdGhpcy5zZWxlY3Rvcix0KS5vZmYoXCJjbGljay5mb3JtLXBsdWdpblwiLHRoaXMuc2VsZWN0b3Iscikub24oXCJzdWJtaXQuZm9ybS1wbHVnaW5cIix0aGlzLnNlbGVjdG9yLG4sdCkub24oXCJjbGljay5mb3JtLXBsdWdpblwiLHRoaXMuc2VsZWN0b3IsbixyKSx0aGlzKTp0aGlzLmFqYXhGb3JtVW5iaW5kKCkuYmluZChcInN1Ym1pdC5mb3JtLXBsdWdpblwiLG4sdCkuYmluZChcImNsaWNrLmZvcm0tcGx1Z2luXCIsbixyKX0sZS5mbi5hamF4Rm9ybVVuYmluZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZChcInN1Ym1pdC5mb3JtLXBsdWdpbiBjbGljay5mb3JtLXBsdWdpblwiKX0sZS5mbi5mb3JtVG9BcnJheT1mdW5jdGlvbih0LHIpe3ZhciBhPVtdO2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm4gYTt2YXIgaSxvPXRoaXNbMF0scz10aGlzLmF0dHIoXCJpZFwiKSx1PXQ/by5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIik6by5lbGVtZW50cztpZih1JiYhL01TSUUgWzY3OF0vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJih1PWUodSkuZ2V0KCkpLHMmJihpPWUoJzppbnB1dFtmb3JtPVwiJytzKydcIl0nKS5nZXQoKSxpLmxlbmd0aCYmKHU9KHV8fFtdKS5jb25jYXQoaSkpKSwhdXx8IXUubGVuZ3RoKXJldHVybiBhO3ZhciBjLGwsZixtLGQscCxoO2ZvcihjPTAscD11Lmxlbmd0aDtwPmM7YysrKWlmKGQ9dVtjXSxmPWQubmFtZSxmJiYhZC5kaXNhYmxlZClpZih0JiZvLmNsayYmXCJpbWFnZVwiPT1kLnR5cGUpby5jbGs9PWQmJihhLnB1c2goe25hbWU6Zix2YWx1ZTplKGQpLnZhbCgpLHR5cGU6ZC50eXBlfSksYS5wdXNoKHtuYW1lOmYrXCIueFwiLHZhbHVlOm8uY2xrX3h9LHtuYW1lOmYrXCIueVwiLHZhbHVlOm8uY2xrX3l9KSk7ZWxzZSBpZihtPWUuZmllbGRWYWx1ZShkLCEwKSxtJiZtLmNvbnN0cnVjdG9yPT1BcnJheSlmb3IociYmci5wdXNoKGQpLGw9MCxoPW0ubGVuZ3RoO2g+bDtsKyspYS5wdXNoKHtuYW1lOmYsdmFsdWU6bVtsXX0pO2Vsc2UgaWYobi5maWxlYXBpJiZcImZpbGVcIj09ZC50eXBlKXtyJiZyLnB1c2goZCk7dmFyIHY9ZC5maWxlcztpZih2Lmxlbmd0aClmb3IobD0wO2w8di5sZW5ndGg7bCsrKWEucHVzaCh7bmFtZTpmLHZhbHVlOnZbbF0sdHlwZTpkLnR5cGV9KTtlbHNlIGEucHVzaCh7bmFtZTpmLHZhbHVlOlwiXCIsdHlwZTpkLnR5cGV9KX1lbHNlIG51bGwhPT1tJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbSYmKHImJnIucHVzaChkKSxhLnB1c2goe25hbWU6Zix2YWx1ZTptLHR5cGU6ZC50eXBlLHJlcXVpcmVkOmQucmVxdWlyZWR9KSk7aWYoIXQmJm8uY2xrKXt2YXIgZz1lKG8uY2xrKSx4PWdbMF07Zj14Lm5hbWUsZiYmIXguZGlzYWJsZWQmJlwiaW1hZ2VcIj09eC50eXBlJiYoYS5wdXNoKHtuYW1lOmYsdmFsdWU6Zy52YWwoKX0pLGEucHVzaCh7bmFtZTpmK1wiLnhcIix2YWx1ZTpvLmNsa194fSx7bmFtZTpmK1wiLnlcIix2YWx1ZTpvLmNsa195fSkpfXJldHVybiBhfSxlLmZuLmZvcm1TZXJpYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucGFyYW0odGhpcy5mb3JtVG9BcnJheSh0KSl9LGUuZm4uZmllbGRTZXJpYWxpemU9ZnVuY3Rpb24odCl7dmFyIHI9W107cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhPXRoaXMubmFtZTtpZihhKXt2YXIgbj1lLmZpZWxkVmFsdWUodGhpcyx0KTtpZihuJiZuLmNvbnN0cnVjdG9yPT1BcnJheSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO28+aTtpKyspci5wdXNoKHtuYW1lOmEsdmFsdWU6bltpXX0pO2Vsc2UgbnVsbCE9PW4mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBuJiZyLnB1c2goe25hbWU6dGhpcy5uYW1lLHZhbHVlOm59KX19KSxlLnBhcmFtKHIpfSxlLmZuLmZpZWxkVmFsdWU9ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLGE9MCxuPXRoaXMubGVuZ3RoO24+YTthKyspe3ZhciBpPXRoaXNbYV0sbz1lLmZpZWxkVmFsdWUoaSx0KTtudWxsPT09b3x8XCJ1bmRlZmluZWRcIj09dHlwZW9mIG98fG8uY29uc3RydWN0b3I9PUFycmF5JiYhby5sZW5ndGh8fChvLmNvbnN0cnVjdG9yPT1BcnJheT9lLm1lcmdlKHIsbyk6ci5wdXNoKG8pKX1yZXR1cm4gcn0sZS5maWVsZFZhbHVlPWZ1bmN0aW9uKHQscil7dmFyIGE9dC5uYW1lLG49dC50eXBlLGk9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYodm9pZCAwPT09ciYmKHI9ITApLHImJighYXx8dC5kaXNhYmxlZHx8XCJyZXNldFwiPT1ufHxcImJ1dHRvblwiPT1ufHwoXCJjaGVja2JveFwiPT1ufHxcInJhZGlvXCI9PW4pJiYhdC5jaGVja2VkfHwoXCJzdWJtaXRcIj09bnx8XCJpbWFnZVwiPT1uKSYmdC5mb3JtJiZ0LmZvcm0uY2xrIT10fHxcInNlbGVjdFwiPT1pJiYtMT09dC5zZWxlY3RlZEluZGV4KSlyZXR1cm4gbnVsbDtpZihcInNlbGVjdFwiPT1pKXt2YXIgbz10LnNlbGVjdGVkSW5kZXg7aWYoMD5vKXJldHVybiBudWxsO2Zvcih2YXIgcz1bXSx1PXQub3B0aW9ucyxjPVwic2VsZWN0LW9uZVwiPT1uLGw9Yz9vKzE6dS5sZW5ndGgsZj1jP286MDtsPmY7ZisrKXt2YXIgbT11W2ZdO2lmKG0uc2VsZWN0ZWQpe3ZhciBkPW0udmFsdWU7aWYoZHx8KGQ9bS5hdHRyaWJ1dGVzJiZtLmF0dHJpYnV0ZXMudmFsdWUmJiFtLmF0dHJpYnV0ZXMudmFsdWUuc3BlY2lmaWVkP20udGV4dDptLnZhbHVlKSxjKXJldHVybiBkO3MucHVzaChkKX19cmV0dXJuIHN9cmV0dXJuIGUodCkudmFsKCl9LGUuZm4uY2xlYXJGb3JtPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtlKFwiaW5wdXQsc2VsZWN0LHRleHRhcmVhXCIsdGhpcykuY2xlYXJGaWVsZHModCl9KX0sZS5mbi5jbGVhckZpZWxkcz1lLmZuLmNsZWFySW5wdXRzPWZ1bmN0aW9uKHQpe3ZhciByPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxlbWFpbHxtb250aHxudW1iZXJ8cGFzc3dvcmR8cmFuZ2V8c2VhcmNofHRlbHx0ZXh0fHRpbWV8dXJsfHdlZWspJC9pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGUsbj10aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtyLnRlc3QoYSl8fFwidGV4dGFyZWFcIj09bj90aGlzLnZhbHVlPVwiXCI6XCJjaGVja2JveFwiPT1hfHxcInJhZGlvXCI9PWE/dGhpcy5jaGVja2VkPSExOlwic2VsZWN0XCI9PW4/dGhpcy5zZWxlY3RlZEluZGV4PS0xOlwiZmlsZVwiPT1hPy9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP2UodGhpcykucmVwbGFjZVdpdGgoZSh0aGlzKS5jbG9uZSghMCkpOmUodGhpcykudmFsKFwiXCIpOnQmJih0PT09ITAmJi9oaWRkZW4vLnRlc3QoYSl8fFwic3RyaW5nXCI9PXR5cGVvZiB0JiZlKHRoaXMpLmlzKHQpKSYmKHRoaXMudmFsdWU9XCJcIil9KX0sZS5mbi5yZXNldEZvcm09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7KFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMucmVzZXR8fFwib2JqZWN0XCI9PXR5cGVvZiB0aGlzLnJlc2V0JiYhdGhpcy5yZXNldC5ub2RlVHlwZSkmJnRoaXMucmVzZXQoKX0pfSxlLmZuLmVuYWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITApLHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9IWV9KX0sZS5mbi5zZWxlY3RlZD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITApLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciByPXRoaXMudHlwZTtpZihcImNoZWNrYm94XCI9PXJ8fFwicmFkaW9cIj09cil0aGlzLmNoZWNrZWQ9dDtlbHNlIGlmKFwib3B0aW9uXCI9PXRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgYT1lKHRoaXMpLnBhcmVudChcInNlbGVjdFwiKTt0JiZhWzBdJiZcInNlbGVjdC1vbmVcIj09YVswXS50eXBlJiZhLmZpbmQoXCJvcHRpb25cIikuc2VsZWN0ZWQoITEpLHRoaXMuc2VsZWN0ZWQ9dH19KX0sZS5mbi5hamF4U3VibWl0LmRlYnVnPSExfSk7XG4vKiEgUmVzcG9uZC5qcyB2MS40LjI6IG1pbi9tYXgtd2lkdGggbWVkaWEgcXVlcnkgcG9seWZpbGxcbiAqIENvcHlyaWdodCAyMDE0IFNjb3R0IEplaGxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVFxuICogaHR0cDovL2oubXAvcmVzcG9uZGpzICovXG5cbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjthLm1hdGNoTWVkaWE9YS5tYXRjaE1lZGlhfHxmdW5jdGlvbihhKXt2YXIgYixjPWEuZG9jdW1lbnRFbGVtZW50LGQ9Yy5maXJzdEVsZW1lbnRDaGlsZHx8Yy5maXJzdENoaWxkLGU9YS5jcmVhdGVFbGVtZW50KFwiYm9keVwiKSxmPWEuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gZi5pZD1cIm1xLXRlc3QtMVwiLGYuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO3RvcDotMTAwZW1cIixlLnN0eWxlLmJhY2tncm91bmQ9XCJub25lXCIsZS5hcHBlbmRDaGlsZChmKSxmdW5jdGlvbihhKXtyZXR1cm4gZi5pbm5lckhUTUw9JyZzaHk7PHN0eWxlIG1lZGlhPVwiJythKydcIj4gI21xLXRlc3QtMSB7IHdpZHRoOiA0MnB4OyB9PC9zdHlsZT4nLGMuaW5zZXJ0QmVmb3JlKGUsZCksYj00Mj09PWYub2Zmc2V0V2lkdGgsYy5yZW1vdmVDaGlsZChlKSx7bWF0Y2hlczpiLG1lZGlhOmF9fX0oYS5kb2N1bWVudCl9KHRoaXMpLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoKXt2KCEwKX12YXIgYz17fTthLnJlc3BvbmQ9YyxjLnVwZGF0ZT1mdW5jdGlvbigpe307dmFyIGQ9W10sZT1mdW5jdGlvbigpe3ZhciBiPSExO3RyeXtiPW5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGMpe2I9bmV3IGEuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfXJldHVybiBmdW5jdGlvbigpe3JldHVybiBifX0oKSxmPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZSgpO2MmJihjLm9wZW4oXCJHRVRcIixhLCEwKSxjLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQhPT1jLnJlYWR5U3RhdGV8fDIwMCE9PWMuc3RhdHVzJiYzMDQhPT1jLnN0YXR1c3x8YihjLnJlc3BvbnNlVGV4dCl9LDQhPT1jLnJlYWR5U3RhdGUmJmMuc2VuZChudWxsKSl9LGc9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShjLnJlZ2V4Lm1pbm1heHdoLFwiXCIpLm1hdGNoKGMucmVnZXgub3RoZXIpfTtpZihjLmFqYXg9ZixjLnF1ZXVlPWQsYy51bnN1cHBvcnRlZG1xPWcsYy5yZWdleD17bWVkaWE6L0BtZWRpYVteXFx7XStcXHsoW15cXHtcXH1dKlxce1teXFx9XFx7XSpcXH0pKy9naSxrZXlmcmFtZXM6L0AoPzpcXC0oPzpvfG1venx3ZWJraXQpXFwtKT9rZXlmcmFtZXNbXlxce10rXFx7KD86W15cXHtcXH1dKlxce1teXFx9XFx7XSpcXH0pK1teXFx9XSpcXH0vZ2ksY29tbWVudHM6L1xcL1xcKlteKl0qXFwqKyhbXi9dW14qXSpcXCorKSpcXC8vZ2ksdXJsczovKHVybFxcKClbJ1wiXT8oW15cXC9cXCknXCJdW146XFwpJ1wiXSspWydcIl0/KFxcKSkvZyxmaW5kU3R5bGVzOi9AbWVkaWEgKihbXlxce10rKVxceyhbXFxTXFxzXSs/KSQvLG9ubHk6Lyhvbmx5XFxzKyk/KFthLXpBLVpdKylcXHM/LyxtaW53Oi9cXChcXHMqbWluXFwtd2lkdGhcXHMqOlxccyooXFxzKlswLTlcXC5dKykocHh8ZW0pXFxzKlxcKS8sbWF4dzovXFwoXFxzKm1heFxcLXdpZHRoXFxzKjpcXHMqKFxccypbMC05XFwuXSspKHB4fGVtKVxccypcXCkvLG1pbm1heHdoOi9cXChcXHMqbShpbnxheClcXC0oaGVpZ2h0fHdpZHRoKVxccyo6XFxzKihcXHMqWzAtOVxcLl0rKShweHxlbSlcXHMqXFwpL2dpLG90aGVyOi9cXChbXlxcKV0qXFwpL2d9LGMubWVkaWFRdWVyaWVzU3VwcG9ydGVkPWEubWF0Y2hNZWRpYSYmbnVsbCE9PWEubWF0Y2hNZWRpYShcIm9ubHkgYWxsXCIpJiZhLm1hdGNoTWVkaWEoXCJvbmx5IGFsbFwiKS5tYXRjaGVzLCFjLm1lZGlhUXVlcmllc1N1cHBvcnRlZCl7dmFyIGgsaSxqLGs9YS5kb2N1bWVudCxsPWsuZG9jdW1lbnRFbGVtZW50LG09W10sbj1bXSxvPVtdLHA9e30scT0zMCxyPWsuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdfHxsLHM9ay5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJhc2VcIilbMF0sdD1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGlua1wiKSx1PWZ1bmN0aW9uKCl7dmFyIGEsYj1rLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYz1rLmJvZHksZD1sLnN0eWxlLmZvbnRTaXplLGU9YyYmYy5zdHlsZS5mb250U2l6ZSxmPSExO3JldHVybiBiLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbVwiLGN8fChjPWY9ay5jcmVhdGVFbGVtZW50KFwiYm9keVwiKSxjLnN0eWxlLmJhY2tncm91bmQ9XCJub25lXCIpLGwuc3R5bGUuZm9udFNpemU9XCIxMDAlXCIsYy5zdHlsZS5mb250U2l6ZT1cIjEwMCVcIixjLmFwcGVuZENoaWxkKGIpLGYmJmwuaW5zZXJ0QmVmb3JlKGMsbC5maXJzdENoaWxkKSxhPWIub2Zmc2V0V2lkdGgsZj9sLnJlbW92ZUNoaWxkKGMpOmMucmVtb3ZlQ2hpbGQoYiksbC5zdHlsZS5mb250U2l6ZT1kLGUmJihjLnN0eWxlLmZvbnRTaXplPWUpLGE9aj1wYXJzZUZsb2F0KGEpfSx2PWZ1bmN0aW9uKGIpe3ZhciBjPVwiY2xpZW50V2lkdGhcIixkPWxbY10sZT1cIkNTUzFDb21wYXRcIj09PWsuY29tcGF0TW9kZSYmZHx8ay5ib2R5W2NdfHxkLGY9e30sZz10W3QubGVuZ3RoLTFdLHA9KG5ldyBEYXRlKS5nZXRUaW1lKCk7aWYoYiYmaCYmcT5wLWgpcmV0dXJuIGEuY2xlYXJUaW1lb3V0KGkpLGk9YS5zZXRUaW1lb3V0KHYscSksdm9pZCAwO2g9cDtmb3IodmFyIHMgaW4gbSlpZihtLmhhc093blByb3BlcnR5KHMpKXt2YXIgdz1tW3NdLHg9dy5taW53LHk9dy5tYXh3LHo9bnVsbD09PXgsQT1udWxsPT09eSxCPVwiZW1cIjt4JiYoeD1wYXJzZUZsb2F0KHgpKih4LmluZGV4T2YoQik+LTE/anx8dSgpOjEpKSx5JiYoeT1wYXJzZUZsb2F0KHkpKih5LmluZGV4T2YoQik+LTE/anx8dSgpOjEpKSx3Lmhhc3F1ZXJ5JiYoeiYmQXx8ISh6fHxlPj14KXx8IShBfHx5Pj1lKSl8fChmW3cubWVkaWFdfHwoZlt3Lm1lZGlhXT1bXSksZlt3Lm1lZGlhXS5wdXNoKG5bdy5ydWxlc10pKX1mb3IodmFyIEMgaW4gbylvLmhhc093blByb3BlcnR5KEMpJiZvW0NdJiZvW0NdLnBhcmVudE5vZGU9PT1yJiZyLnJlbW92ZUNoaWxkKG9bQ10pO28ubGVuZ3RoPTA7Zm9yKHZhciBEIGluIGYpaWYoZi5oYXNPd25Qcm9wZXJ0eShEKSl7dmFyIEU9ay5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksRj1mW0RdLmpvaW4oXCJcXG5cIik7RS50eXBlPVwidGV4dC9jc3NcIixFLm1lZGlhPUQsci5pbnNlcnRCZWZvcmUoRSxnLm5leHRTaWJsaW5nKSxFLnN0eWxlU2hlZXQ/RS5zdHlsZVNoZWV0LmNzc1RleHQ9RjpFLmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dE5vZGUoRikpLG8ucHVzaChFKX19LHc9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEucmVwbGFjZShjLnJlZ2V4LmNvbW1lbnRzLFwiXCIpLnJlcGxhY2UoYy5yZWdleC5rZXlmcmFtZXMsXCJcIikubWF0Y2goYy5yZWdleC5tZWRpYSksZj1lJiZlLmxlbmd0aHx8MDtiPWIuc3Vic3RyaW5nKDAsYi5sYXN0SW5kZXhPZihcIi9cIikpO3ZhciBoPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoYy5yZWdleC51cmxzLFwiJDFcIitiK1wiJDIkM1wiKX0saT0hZiYmZDtiLmxlbmd0aCYmKGIrPVwiL1wiKSxpJiYoZj0xKTtmb3IodmFyIGo9MDtmPmo7aisrKXt2YXIgayxsLG8scDtpPyhrPWQsbi5wdXNoKGgoYSkpKTooaz1lW2pdLm1hdGNoKGMucmVnZXguZmluZFN0eWxlcykmJlJlZ0V4cC4kMSxuLnB1c2goUmVnRXhwLiQyJiZoKFJlZ0V4cC4kMikpKSxvPWsuc3BsaXQoXCIsXCIpLHA9by5sZW5ndGg7Zm9yKHZhciBxPTA7cD5xO3ErKylsPW9bcV0sZyhsKXx8bS5wdXNoKHttZWRpYTpsLnNwbGl0KFwiKFwiKVswXS5tYXRjaChjLnJlZ2V4Lm9ubHkpJiZSZWdFeHAuJDJ8fFwiYWxsXCIscnVsZXM6bi5sZW5ndGgtMSxoYXNxdWVyeTpsLmluZGV4T2YoXCIoXCIpPi0xLG1pbnc6bC5tYXRjaChjLnJlZ2V4Lm1pbncpJiZwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrKFJlZ0V4cC4kMnx8XCJcIiksbWF4dzpsLm1hdGNoKGMucmVnZXgubWF4dykmJnBhcnNlRmxvYXQoUmVnRXhwLiQxKSsoUmVnRXhwLiQyfHxcIlwiKX0pfXYoKX0seD1mdW5jdGlvbigpe2lmKGQubGVuZ3RoKXt2YXIgYj1kLnNoaWZ0KCk7ZihiLmhyZWYsZnVuY3Rpb24oYyl7dyhjLGIuaHJlZixiLm1lZGlhKSxwW2IuaHJlZl09ITAsYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eCgpfSwwKX0pfX0seT1mdW5jdGlvbigpe2Zvcih2YXIgYj0wO2I8dC5sZW5ndGg7YisrKXt2YXIgYz10W2JdLGU9Yy5ocmVmLGY9Yy5tZWRpYSxnPWMucmVsJiZcInN0eWxlc2hlZXRcIj09PWMucmVsLnRvTG93ZXJDYXNlKCk7ZSYmZyYmIXBbZV0mJihjLnN0eWxlU2hlZXQmJmMuc3R5bGVTaGVldC5yYXdDc3NUZXh0Pyh3KGMuc3R5bGVTaGVldC5yYXdDc3NUZXh0LGUsZikscFtlXT0hMCk6KCEvXihbYS16QS1aOl0qXFwvXFwvKS8udGVzdChlKSYmIXN8fGUucmVwbGFjZShSZWdFeHAuJDEsXCJcIikuc3BsaXQoXCIvXCIpWzBdPT09YS5sb2NhdGlvbi5ob3N0KSYmKFwiLy9cIj09PWUuc3Vic3RyaW5nKDAsMikmJihlPWEubG9jYXRpb24ucHJvdG9jb2wrZSksZC5wdXNoKHtocmVmOmUsbWVkaWE6Zn0pKSl9eCgpfTt5KCksYy51cGRhdGU9eSxjLmdldEVtVmFsdWU9dSxhLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsYiwhMSk6YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudChcIm9ucmVzaXplXCIsYil9fSh0aGlzKTtcbi8vID0gdGhpcmQtcGFydHkvaXBpbml0LmpzXG4vKiFcbiAqIEJvb3RzdHJhcCB2My4yLjAgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICovXG5cbi8qIVxuICogR2VuZXJhdGVkIHVzaW5nIHRoZSBCb290c3RyYXAgQ3VzdG9taXplciAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20vY3VzdG9taXplLz9pZD1lMTc3ODdkM2Y0MDUzYWY4YWExYilcbiAqIENvbmZpZyBzYXZlZCB0byBjb25maWcuanNvbiBhbmQgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZTE3Nzg3ZDNmNDA1M2FmOGFhMWJcbiAqL1xuaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoXCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeVwiKTsrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dCh0aGlzKSxzPWkuZGF0YShcImJzLmFsZXJ0XCIpO3N8fGkuZGF0YShcImJzLmFsZXJ0XCIscz1uZXcgbyh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGUmJnNbZV0uY2FsbChpKX0pfXZhciBpPSdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLG89ZnVuY3Rpb24oZSl7dChlKS5vbihcImNsaWNrXCIsaSx0aGlzLmNsb3NlKX07by5WRVJTSU9OPVwiMy4yLjBcIixvLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7bi5kZXRhY2goKS50cmlnZ2VyKFwiY2xvc2VkLmJzLmFsZXJ0XCIpLnJlbW92ZSgpfXZhciBvPXQodGhpcykscz1vLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtzfHwocz1vLmF0dHIoXCJocmVmXCIpLHM9cyYmcy5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgbj10KHMpO2UmJmUucHJldmVudERlZmF1bHQoKSxuLmxlbmd0aHx8KG49by5oYXNDbGFzcyhcImFsZXJ0XCIpP286by5wYXJlbnQoKSksbi50cmlnZ2VyKGU9dC5FdmVudChcImNsb3NlLmJzLmFsZXJ0XCIpKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwobi5yZW1vdmVDbGFzcyhcImluXCIpLHQuc3VwcG9ydC50cmFuc2l0aW9uJiZuLmhhc0NsYXNzKFwiZmFkZVwiKT9uLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGkpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6aSgpKX07dmFyIHM9dC5mbi5hbGVydDt0LmZuLmFsZXJ0PWUsdC5mbi5hbGVydC5Db25zdHJ1Y3Rvcj1vLHQuZm4uYWxlcnQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLmFsZXJ0PXMsdGhpc30sdChkb2N1bWVudCkub24oXCJjbGljay5icy5hbGVydC5kYXRhLWFwaVwiLGksby5wcm90b3R5cGUuY2xvc2UpfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLHM9by5kYXRhKFwiYnMuYnV0dG9uXCIpLG49XCJvYmplY3RcIj09dHlwZW9mIGUmJmU7c3x8by5kYXRhKFwiYnMuYnV0dG9uXCIscz1uZXcgaSh0aGlzLG4pKSxcInRvZ2dsZVwiPT1lP3MudG9nZ2xlKCk6ZSYmcy5zZXRTdGF0ZShlKX0pfXZhciBpPWZ1bmN0aW9uKGUsbyl7dGhpcy4kZWxlbWVudD10KGUpLHRoaXMub3B0aW9ucz10LmV4dGVuZCh7fSxpLkRFRkFVTFRTLG8pLHRoaXMuaXNMb2FkaW5nPSExfTtpLlZFUlNJT049XCIzLjIuMFwiLGkuREVGQVVMVFM9e2xvYWRpbmdUZXh0OlwibG9hZGluZy4uLlwifSxpLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgaT1cImRpc2FibGVkXCIsbz10aGlzLiRlbGVtZW50LHM9by5pcyhcImlucHV0XCIpP1widmFsXCI6XCJodG1sXCIsbj1vLmRhdGEoKTtlKz1cIlRleHRcIixudWxsPT1uLnJlc2V0VGV4dCYmby5kYXRhKFwicmVzZXRUZXh0XCIsb1tzXSgpKSxvW3NdKG51bGw9PW5bZV0/dGhpcy5vcHRpb25zW2VdOm5bZV0pLHNldFRpbWVvdXQodC5wcm94eShmdW5jdGlvbigpe1wibG9hZGluZ1RleHRcIj09ZT8odGhpcy5pc0xvYWRpbmc9ITAsby5hZGRDbGFzcyhpKS5hdHRyKGksaSkpOnRoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9ITEsby5yZW1vdmVDbGFzcyhpKS5yZW1vdmVBdHRyKGkpKX0sdGhpcyksMCl9LGkucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3ZhciB0PSEwLGU9dGhpcy4kZWxlbWVudC5jbG9zZXN0KCdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJyk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuJGVsZW1lbnQuZmluZChcImlucHV0XCIpO1wicmFkaW9cIj09aS5wcm9wKFwidHlwZVwiKSYmKGkucHJvcChcImNoZWNrZWRcIikmJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIik/dD0hMTplLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpKSx0JiZpLnByb3AoXCJjaGVja2VkXCIsIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIikpLnRyaWdnZXIoXCJjaGFuZ2VcIil9dCYmdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKX07dmFyIG89dC5mbi5idXR0b247dC5mbi5idXR0b249ZSx0LmZuLmJ1dHRvbi5Db25zdHJ1Y3Rvcj1pLHQuZm4uYnV0dG9uLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5idXR0b249byx0aGlzfSx0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihpKXt2YXIgbz10KGkudGFyZ2V0KTtvLmhhc0NsYXNzKFwiYnRuXCIpfHwobz1vLmNsb3Nlc3QoXCIuYnRuXCIpKSxlLmNhbGwobyxcInRvZ2dsZVwiKSxpLnByZXZlbnREZWZhdWx0KCl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89dCh0aGlzKSxzPW8uZGF0YShcImJzLmNhcm91c2VsXCIpLG49dC5leHRlbmQoe30saS5ERUZBVUxUUyxvLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSkscj1cInN0cmluZ1wiPT10eXBlb2YgZT9lOm4uc2xpZGU7c3x8by5kYXRhKFwiYnMuY2Fyb3VzZWxcIixzPW5ldyBpKHRoaXMsbikpLFwibnVtYmVyXCI9PXR5cGVvZiBlP3MudG8oZSk6cj9zW3JdKCk6bi5pbnRlcnZhbCYmcy5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgaT1mdW5jdGlvbihlLGkpe3RoaXMuJGVsZW1lbnQ9dChlKS5vbihcImtleWRvd24uYnMuY2Fyb3VzZWxcIix0LnByb3h5KHRoaXMua2V5ZG93bix0aGlzKSksdGhpcy4kaW5kaWNhdG9ycz10aGlzLiRlbGVtZW50LmZpbmQoXCIuY2Fyb3VzZWwtaW5kaWNhdG9yc1wiKSx0aGlzLm9wdGlvbnM9aSx0aGlzLnBhdXNlZD10aGlzLnNsaWRpbmc9dGhpcy5pbnRlcnZhbD10aGlzLiRhY3RpdmU9dGhpcy4kaXRlbXM9bnVsbCxcImhvdmVyXCI9PXRoaXMub3B0aW9ucy5wYXVzZSYmdGhpcy4kZWxlbWVudC5vbihcIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWxcIix0LnByb3h5KHRoaXMucGF1c2UsdGhpcykpLm9uKFwibW91c2VsZWF2ZS5icy5jYXJvdXNlbFwiLHQucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2kuVkVSU0lPTj1cIjMuMi4wXCIsaS5ERUZBVUxUUz17aW50ZXJ2YWw6NWUzLHBhdXNlOlwiaG92ZXJcIix3cmFwOiEwfSxpLnByb3RvdHlwZS5rZXlkb3duPWZ1bmN0aW9uKHQpe3N3aXRjaCh0LndoaWNoKXtjYXNlIDM3OnRoaXMucHJldigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dC5wcmV2ZW50RGVmYXVsdCgpfSxpLnByb3RvdHlwZS5jeWNsZT1mdW5jdGlvbihlKXtyZXR1cm4gZXx8KHRoaXMucGF1c2VkPSExKSx0aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCYmIXRoaXMucGF1c2VkJiYodGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbCh0LnByb3h5KHRoaXMubmV4dCx0aGlzKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKSx0aGlzfSxpLnByb3RvdHlwZS5nZXRJdGVtSW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJGl0ZW1zPXQucGFyZW50KCkuY2hpbGRyZW4oXCIuaXRlbVwiKSx0aGlzLiRpdGVtcy5pbmRleCh0fHx0aGlzLiRhY3RpdmUpfSxpLnByb3RvdHlwZS50bz1mdW5jdGlvbihlKXt2YXIgaT10aGlzLG89dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSk7cmV0dXJuIGU+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fDA+ZT92b2lkIDA6dGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKFwic2xpZC5icy5jYXJvdXNlbFwiLGZ1bmN0aW9uKCl7aS50byhlKX0pOm89PWU/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZShlPm8/XCJuZXh0XCI6XCJwcmV2XCIsdCh0aGlzLiRpdGVtc1tlXSkpfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihlKXtyZXR1cm4gZXx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoXCIubmV4dCwgLnByZXZcIikubGVuZ3RoJiZ0LnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcih0LnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30saS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRpbmc/dm9pZCAwOnRoaXMuc2xpZGUoXCJuZXh0XCIpfSxpLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcInByZXZcIil9LGkucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGUsaSl7dmFyIG89dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpLHM9aXx8b1tlXSgpLG49dGhpcy5pbnRlcnZhbCxyPVwibmV4dFwiPT1lP1wibGVmdFwiOlwicmlnaHRcIixhPVwibmV4dFwiPT1lP1wiZmlyc3RcIjpcImxhc3RcIixsPXRoaXM7aWYoIXMubGVuZ3RoKXtpZighdGhpcy5vcHRpb25zLndyYXApcmV0dXJuO3M9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW1cIilbYV0oKX1pZihzLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXJldHVybiB0aGlzLnNsaWRpbmc9ITE7dmFyIGg9c1swXSxwPXQuRXZlbnQoXCJzbGlkZS5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmgsZGlyZWN0aW9uOnJ9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIocCksIXAuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxuJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGM9dCh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgocyldKTtjJiZjLmFkZENsYXNzKFwiYWN0aXZlXCIpfXZhciBkPXQuRXZlbnQoXCJzbGlkLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aCxkaXJlY3Rpb246cn0pO3JldHVybiB0LnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcInNsaWRlXCIpPyhzLmFkZENsYXNzKGUpLHNbMF0ub2Zmc2V0V2lkdGgsby5hZGRDbGFzcyhyKSxzLmFkZENsYXNzKHIpLG8ub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtzLnJlbW92ZUNsYXNzKFtlLHJdLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxvLnJlbW92ZUNsYXNzKFtcImFjdGl2ZVwiLHJdLmpvaW4oXCIgXCIpKSxsLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2wuJGVsZW1lbnQudHJpZ2dlcihkKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxZTMqby5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIpLnNsaWNlKDAsLTEpKSk6KG8ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikscy5hZGRDbGFzcyhcImFjdGl2ZVwiKSx0aGlzLnNsaWRpbmc9ITEsdGhpcy4kZWxlbWVudC50cmlnZ2VyKGQpKSxuJiZ0aGlzLmN5Y2xlKCksdGhpc319O3ZhciBvPXQuZm4uY2Fyb3VzZWw7dC5mbi5jYXJvdXNlbD1lLHQuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3I9aSx0LmZuLmNhcm91c2VsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5jYXJvdXNlbD1vLHRoaXN9LHQoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGlcIixcIltkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dXCIsZnVuY3Rpb24oaSl7dmFyIG8scz10KHRoaXMpLG49dChzLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KG89cy5hdHRyKFwiaHJlZlwiKSkmJm8ucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSk7aWYobi5oYXNDbGFzcyhcImNhcm91c2VsXCIpKXt2YXIgcj10LmV4dGVuZCh7fSxuLmRhdGEoKSxzLmRhdGEoKSksYT1zLmF0dHIoXCJkYXRhLXNsaWRlLXRvXCIpO2EmJihyLmludGVydmFsPSExKSxlLmNhbGwobixyKSxhJiZuLmRhdGEoXCJicy5jYXJvdXNlbFwiKS50byhhKSxpLnByZXZlbnREZWZhdWx0KCl9fSksdCh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dCgnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcyk7ZS5jYWxsKGksaS5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtlJiYzPT09ZS53aGljaHx8KHQocykucmVtb3ZlKCksdChuKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89aSh0KHRoaXMpKSxzPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O28uaGFzQ2xhc3MoXCJvcGVuXCIpJiYoby50cmlnZ2VyKGU9dC5FdmVudChcImhpZGUuYnMuZHJvcGRvd25cIixzKSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5yZW1vdmVDbGFzcyhcIm9wZW5cIikudHJpZ2dlcihcImhpZGRlbi5icy5kcm9wZG93blwiLHMpKX0pKX1mdW5jdGlvbiBpKGUpe3ZhciBpPWUuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2l8fChpPWUuYXR0cihcImhyZWZcIiksaT1pJiYvI1tBLVphLXpdLy50ZXN0KGkpJiZpLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBvPWkmJnQoaSk7cmV0dXJuIG8mJm8ubGVuZ3RoP286ZS5wYXJlbnQoKX1mdW5jdGlvbiBvKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLG89aS5kYXRhKFwiYnMuZHJvcGRvd25cIik7b3x8aS5kYXRhKFwiYnMuZHJvcGRvd25cIixvPW5ldyByKHRoaXMpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmb1tlXS5jYWxsKGkpfSl9dmFyIHM9XCIuZHJvcGRvd24tYmFja2Ryb3BcIixuPSdbZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXScscj1mdW5jdGlvbihlKXt0KGUpLm9uKFwiY2xpY2suYnMuZHJvcGRvd25cIix0aGlzLnRvZ2dsZSl9O3IuVkVSU0lPTj1cIjMuMi4wXCIsci5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKG8pe3ZhciBzPXQodGhpcyk7aWYoIXMuaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIG49aShzKSxyPW4uaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKGUoKSwhcil7XCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmIW4uY2xvc2VzdChcIi5uYXZiYXItbmF2XCIpLmxlbmd0aCYmdCgnPGRpdiBjbGFzcz1cImRyb3Bkb3duLWJhY2tkcm9wXCIvPicpLmluc2VydEFmdGVyKHQodGhpcykpLm9uKFwiY2xpY2tcIixlKTt2YXIgYT17cmVsYXRlZFRhcmdldDp0aGlzfTtpZihuLnRyaWdnZXIobz10LkV2ZW50KFwic2hvdy5icy5kcm9wZG93blwiLGEpKSxvLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybjtzLnRyaWdnZXIoXCJmb2N1c1wiKSxuLnRvZ2dsZUNsYXNzKFwib3BlblwiKS50cmlnZ2VyKFwic2hvd24uYnMuZHJvcGRvd25cIixhKX1yZXR1cm4hMX19LHIucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oZSl7aWYoLygzOHw0MHwyNykvLnRlc3QoZS5rZXlDb2RlKSl7dmFyIG89dCh0aGlzKTtpZihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSwhby5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgcz1pKG8pLHI9cy5oYXNDbGFzcyhcIm9wZW5cIik7aWYoIXJ8fHImJjI3PT1lLmtleUNvZGUpcmV0dXJuIDI3PT1lLndoaWNoJiZzLmZpbmQobikudHJpZ2dlcihcImZvY3VzXCIpLG8udHJpZ2dlcihcImNsaWNrXCIpO3ZhciBhPVwiIGxpOm5vdCguZGl2aWRlcik6dmlzaWJsZSBhXCIsbD1zLmZpbmQoJ1tyb2xlPVwibWVudVwiXScrYSsnLCBbcm9sZT1cImxpc3Rib3hcIl0nK2EpO2lmKGwubGVuZ3RoKXt2YXIgaD1sLmluZGV4KGwuZmlsdGVyKFwiOmZvY3VzXCIpKTszOD09ZS5rZXlDb2RlJiZoPjAmJmgtLSw0MD09ZS5rZXlDb2RlJiZoPGwubGVuZ3RoLTEmJmgrKyx+aHx8KGg9MCksbC5lcShoKS50cmlnZ2VyKFwiZm9jdXNcIil9fX19O3ZhciBhPXQuZm4uZHJvcGRvd247dC5mbi5kcm9wZG93bj1vLHQuZm4uZHJvcGRvd24uQ29uc3RydWN0b3I9cix0LmZuLmRyb3Bkb3duLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5kcm9wZG93bj1hLHRoaXN9LHQoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixlKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24gZm9ybVwiLGZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsbixyLnByb3RvdHlwZS50b2dnbGUpLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLG4rJywgW3JvbGU9XCJtZW51XCJdLCBbcm9sZT1cImxpc3Rib3hcIl0nLHIucHJvdG90eXBlLmtleWRvd24pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsbyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzPXQodGhpcyksbj1zLmRhdGEoXCJicy5tb2RhbFwiKSxyPXQuZXh0ZW5kKHt9LGkuREVGQVVMVFMscy5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIGUmJmUpO258fHMuZGF0YShcImJzLm1vZGFsXCIsbj1uZXcgaSh0aGlzLHIpKSxcInN0cmluZ1wiPT10eXBlb2YgZT9uW2VdKG8pOnIuc2hvdyYmbi5zaG93KG8pfSl9dmFyIGk9ZnVuY3Rpb24oZSxpKXt0aGlzLm9wdGlvbnM9aSx0aGlzLiRib2R5PXQoZG9jdW1lbnQuYm9keSksdGhpcy4kZWxlbWVudD10KGUpLHRoaXMuJGJhY2tkcm9wPXRoaXMuaXNTaG93bj1udWxsLHRoaXMuc2Nyb2xsYmFyV2lkdGg9MCx0aGlzLm9wdGlvbnMucmVtb3RlJiZ0aGlzLiRlbGVtZW50LmZpbmQoXCIubW9kYWwtY29udGVudFwiKS5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUsdC5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihcImxvYWRlZC5icy5tb2RhbFwiKX0sdGhpcykpfTtpLlZFUlNJT049XCIzLjIuMFwiLGkuREVGQVVMVFM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGkucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyh0KX0saS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihlKXt2YXIgaT10aGlzLG89dC5FdmVudChcInNob3cuYnMubW9kYWxcIix7cmVsYXRlZFRhcmdldDplfSk7dGhpcy4kZWxlbWVudC50cmlnZ2VyKG8pLHRoaXMuaXNTaG93bnx8by5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuaXNTaG93bj0hMCx0aGlzLmNoZWNrU2Nyb2xsYmFyKCksdGhpcy4kYm9keS5hZGRDbGFzcyhcIm1vZGFsLW9wZW5cIiksdGhpcy5zZXRTY3JvbGxiYXIoKSx0aGlzLmVzY2FwZSgpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsdC5wcm94eSh0aGlzLmhpZGUsdGhpcykpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgbz10LnN1cHBvcnQudHJhbnNpdGlvbiYmaS4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik7aS4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGh8fGkuJGVsZW1lbnQuYXBwZW5kVG8oaS4kYm9keSksaS4kZWxlbWVudC5zaG93KCkuc2Nyb2xsVG9wKDApLG8mJmkuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaS4kZWxlbWVudC5hZGRDbGFzcyhcImluXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCExKSxpLmVuZm9yY2VGb2N1cygpO3ZhciBzPXQuRXZlbnQoXCJzaG93bi5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmV9KTtvP2kuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1kaWFsb2dcIikub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtpLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKHMpfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzAwKTppLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKHMpfSkpfSxpLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGUpe2UmJmUucHJldmVudERlZmF1bHQoKSxlPXQuRXZlbnQoXCJoaWRlLmJzLm1vZGFsXCIpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKSx0aGlzLmlzU2hvd24mJiFlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYodGhpcy5pc1Nob3duPSExLHRoaXMuJGJvZHkucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpLHRoaXMucmVzZXRTY3JvbGxiYXIoKSx0aGlzLmVzY2FwZSgpLHQoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIiksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImluXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKS5vZmYoXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIpLHQuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRlbGVtZW50Lm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHQucHJveHkodGhpcy5oaWRlTW9kYWwsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDMwMCk6dGhpcy5oaWRlTW9kYWwoKSl9LGkucHJvdG90eXBlLmVuZm9yY2VGb2N1cz1mdW5jdGlvbigpe3QoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIikub24oXCJmb2N1c2luLmJzLm1vZGFsXCIsdC5wcm94eShmdW5jdGlvbih0KXt0aGlzLiRlbGVtZW50WzBdPT09dC50YXJnZXR8fHRoaXMuJGVsZW1lbnQuaGFzKHQudGFyZ2V0KS5sZW5ndGh8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpfSx0aGlzKSl9LGkucHJvdG90eXBlLmVzY2FwZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmtleWJvYXJkP3RoaXMuJGVsZW1lbnQub24oXCJrZXl1cC5kaXNtaXNzLmJzLm1vZGFsXCIsdC5wcm94eShmdW5jdGlvbih0KXsyNz09dC53aGljaCYmdGhpcy5oaWRlKCl9LHRoaXMpKTp0aGlzLmlzU2hvd258fHRoaXMuJGVsZW1lbnQub2ZmKFwia2V5dXAuZGlzbWlzcy5icy5tb2RhbFwiKX0saS5wcm90b3R5cGUuaGlkZU1vZGFsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLiRlbGVtZW50LmhpZGUoKSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7dC4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLm1vZGFsXCIpfSl9LGkucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wPWZ1bmN0aW9uKCl7dGhpcy4kYmFja2Ryb3AmJnRoaXMuJGJhY2tkcm9wLnJlbW92ZSgpLHRoaXMuJGJhY2tkcm9wPW51bGx9LGkucHJvdG90eXBlLmJhY2tkcm9wPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMsbz10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT9cImZhZGVcIjpcIlwiO2lmKHRoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmJhY2tkcm9wKXt2YXIgcz10LnN1cHBvcnQudHJhbnNpdGlvbiYmbztpZih0aGlzLiRiYWNrZHJvcD10KCc8ZGl2IGNsYXNzPVwibW9kYWwtYmFja2Ryb3AgJytvKydcIiAvPicpLmFwcGVuZFRvKHRoaXMuJGJvZHkpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsdC5wcm94eShmdW5jdGlvbih0KXt0LnRhcmdldD09PXQuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PXRoaXMub3B0aW9ucy5iYWNrZHJvcD90aGlzLiRlbGVtZW50WzBdLmZvY3VzLmNhbGwodGhpcy4kZWxlbWVudFswXSk6dGhpcy5oaWRlLmNhbGwodGhpcykpfSx0aGlzKSkscyYmdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGgsdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoXCJpblwiKSwhZSlyZXR1cm47cz90aGlzLiRiYWNrZHJvcC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOmUoKX1lbHNlIGlmKCF0aGlzLmlzU2hvd24mJnRoaXMuJGJhY2tkcm9wKXt0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcyhcImluXCIpO3ZhciBuPWZ1bmN0aW9uKCl7aS5yZW1vdmVCYWNrZHJvcCgpLGUmJmUoKX07dC5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLG4pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6bigpfWVsc2UgZSYmZSgpfSxpLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhcj1mdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg+PXdpbmRvdy5pbm5lcldpZHRofHwodGhpcy5zY3JvbGxiYXJXaWR0aD10aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm1lYXN1cmVTY3JvbGxiYXIoKSl9LGkucHJvdG90eXBlLnNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciB0PXBhcnNlSW50KHRoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiKXx8MCwxMCk7dGhpcy5zY3JvbGxiYXJXaWR0aCYmdGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsdCt0aGlzLnNjcm9sbGJhcldpZHRoKX0saS5wcm90b3R5cGUucmVzZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIixcIlwiKX0saS5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZVwiLHRoaXMuJGJvZHkuYXBwZW5kKHQpO3ZhciBlPXQub2Zmc2V0V2lkdGgtdC5jbGllbnRXaWR0aDtyZXR1cm4gdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZCh0KSxlfTt2YXIgbz10LmZuLm1vZGFsO3QuZm4ubW9kYWw9ZSx0LmZuLm1vZGFsLkNvbnN0cnVjdG9yPWksdC5mbi5tb2RhbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4ubW9kYWw9byx0aGlzfSx0KGRvY3VtZW50KS5vbihcImNsaWNrLmJzLm1vZGFsLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxmdW5jdGlvbihpKXt2YXIgbz10KHRoaXMpLHM9by5hdHRyKFwiaHJlZlwiKSxuPXQoby5hdHRyKFwiZGF0YS10YXJnZXRcIil8fHMmJnMucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSkscj1uLmRhdGEoXCJicy5tb2RhbFwiKT9cInRvZ2dsZVwiOnQuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KHMpJiZzfSxuLmRhdGEoKSxvLmRhdGEoKSk7by5pcyhcImFcIikmJmkucHJldmVudERlZmF1bHQoKSxuLm9uZShcInNob3cuYnMubW9kYWxcIixmdW5jdGlvbih0KXt0LmlzRGVmYXVsdFByZXZlbnRlZCgpfHxuLm9uZShcImhpZGRlbi5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7by5pcyhcIjp2aXNpYmxlXCIpJiZvLnRyaWdnZXIoXCJmb2N1c1wiKX0pfSksZS5jYWxsKG4scix0aGlzKX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLHM9by5kYXRhKFwiYnMudG9vbHRpcFwiKSxuPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlOyhzfHxcImRlc3Ryb3lcIiE9ZSkmJihzfHxvLmRhdGEoXCJicy50b29sdGlwXCIscz1uZXcgaSh0aGlzLG4pKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmc1tlXSgpKX0pfXZhciBpPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXRoaXMub3B0aW9ucz10aGlzLmVuYWJsZWQ9dGhpcy50aW1lb3V0PXRoaXMuaG92ZXJTdGF0ZT10aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pbml0KFwidG9vbHRpcFwiLHQsZSl9O2kuVkVSU0lPTj1cIjMuMi4wXCIsaS5ERUZBVUxUUz17YW5pbWF0aW9uOiEwLHBsYWNlbWVudDpcInRvcFwiLHNlbGVjdG9yOiExLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsdHJpZ2dlcjpcImhvdmVyIGZvY3VzXCIsdGl0bGU6XCJcIixkZWxheTowLGh0bWw6ITEsY29udGFpbmVyOiExLHZpZXdwb3J0OntzZWxlY3RvcjpcImJvZHlcIixwYWRkaW5nOjB9fSxpLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUsaSxvKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy50eXBlPWUsdGhpcy4kZWxlbWVudD10KGkpLHRoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMobyksdGhpcy4kdmlld3BvcnQ9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZ0KHRoaXMub3B0aW9ucy52aWV3cG9ydC5zZWxlY3Rvcnx8dGhpcy5vcHRpb25zLnZpZXdwb3J0KTtmb3IodmFyIHM9dGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoXCIgXCIpLG49cy5sZW5ndGg7bi0tOyl7dmFyIHI9c1tuXTtpZihcImNsaWNrXCI9PXIpdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsdC5wcm94eSh0aGlzLnRvZ2dsZSx0aGlzKSk7ZWxzZSBpZihcIm1hbnVhbFwiIT1yKXt2YXIgYT1cImhvdmVyXCI9PXI/XCJtb3VzZWVudGVyXCI6XCJmb2N1c2luXCIsbD1cImhvdmVyXCI9PXI/XCJtb3VzZWxlYXZlXCI6XCJmb2N1c291dFwiO3RoaXMuJGVsZW1lbnQub24oYStcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLHQucHJveHkodGhpcy5lbnRlcix0aGlzKSksdGhpcy4kZWxlbWVudC5vbihsK1wiLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsdC5wcm94eSh0aGlzLmxlYXZlLHRoaXMpKX19dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9dC5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOlwibWFudWFsXCIsc2VsZWN0b3I6XCJcIn0pOnRoaXMuZml4VGl0bGUoKX0saS5wcm90b3R5cGUuZ2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gaS5ERUZBVUxUU30saS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbihlKXtyZXR1cm4gZT10LmV4dGVuZCh7fSx0aGlzLmdldERlZmF1bHRzKCksdGhpcy4kZWxlbWVudC5kYXRhKCksZSksZS5kZWxheSYmXCJudW1iZXJcIj09dHlwZW9mIGUuZGVsYXkmJihlLmRlbGF5PXtzaG93OmUuZGVsYXksaGlkZTplLmRlbGF5fSksZX0saS5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGU9e30saT10aGlzLmdldERlZmF1bHRzKCk7cmV0dXJuIHRoaXMuX29wdGlvbnMmJnQuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKHQsbyl7aVt0XSE9byYmKGVbdF09byl9KSxlfSxpLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbihlKXt2YXIgaT1lIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9lOnQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gaXx8KGk9bmV3IHRoaXMuY29uc3RydWN0b3IoZS5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLHQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGkpKSxjbGVhclRpbWVvdXQoaS50aW1lb3V0KSxpLmhvdmVyU3RhdGU9XCJpblwiLGkub3B0aW9ucy5kZWxheSYmaS5vcHRpb25zLmRlbGF5LnNob3c/dm9pZChpLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wiaW5cIj09aS5ob3ZlclN0YXRlJiZpLnNob3coKX0saS5vcHRpb25zLmRlbGF5LnNob3cpKTppLnNob3coKX0saS5wcm90b3R5cGUubGVhdmU9ZnVuY3Rpb24oZSl7dmFyIGk9ZSBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/ZTp0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGl8fChpPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSx0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxpKSksY2xlYXJUaW1lb3V0KGkudGltZW91dCksaS5ob3ZlclN0YXRlPVwib3V0XCIsaS5vcHRpb25zLmRlbGF5JiZpLm9wdGlvbnMuZGVsYXkuaGlkZT92b2lkKGkudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJvdXRcIj09aS5ob3ZlclN0YXRlJiZpLmhpZGUoKX0saS5vcHRpb25zLmRlbGF5LmhpZGUpKTppLmhpZGUoKX0saS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBlPXQuRXZlbnQoXCJzaG93LmJzLlwiK3RoaXMudHlwZSk7aWYodGhpcy5oYXNDb250ZW50KCkmJnRoaXMuZW5hYmxlZCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpO3ZhciBpPXQuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuJGVsZW1lbnRbMF0pO2lmKGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFpKXJldHVybjt2YXIgbz10aGlzLHM9dGhpcy50aXAoKSxuPXRoaXMuZ2V0VUlEKHRoaXMudHlwZSk7dGhpcy5zZXRDb250ZW50KCkscy5hdHRyKFwiaWRcIixuKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsbiksdGhpcy5vcHRpb25zLmFuaW1hdGlvbiYmcy5hZGRDbGFzcyhcImZhZGVcIik7dmFyIHI9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnBsYWNlbWVudD90aGlzLm9wdGlvbnMucGxhY2VtZW50LmNhbGwodGhpcyxzWzBdLHRoaXMuJGVsZW1lbnRbMF0pOnRoaXMub3B0aW9ucy5wbGFjZW1lbnQsYT0vXFxzP2F1dG8/XFxzPy9pLGw9YS50ZXN0KHIpO2wmJihyPXIucmVwbGFjZShhLFwiXCIpfHxcInRvcFwiKSxzLmRldGFjaCgpLmNzcyh7dG9wOjAsbGVmdDowLGRpc3BsYXk6XCJibG9ja1wifSkuYWRkQ2xhc3MocikuZGF0YShcImJzLlwiK3RoaXMudHlwZSx0aGlzKSx0aGlzLm9wdGlvbnMuY29udGFpbmVyP3MuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik6cy5pbnNlcnRBZnRlcih0aGlzLiRlbGVtZW50KTt2YXIgaD10aGlzLmdldFBvc2l0aW9uKCkscD1zWzBdLm9mZnNldFdpZHRoLGM9c1swXS5vZmZzZXRIZWlnaHQ7aWYobCl7dmFyIGQ9cixmPXRoaXMuJGVsZW1lbnQucGFyZW50KCksdT10aGlzLmdldFBvc2l0aW9uKGYpO3I9XCJib3R0b21cIj09ciYmaC50b3AraC5oZWlnaHQrYy11LnNjcm9sbD51LmhlaWdodD9cInRvcFwiOlwidG9wXCI9PXImJmgudG9wLXUuc2Nyb2xsLWM8MD9cImJvdHRvbVwiOlwicmlnaHRcIj09ciYmaC5yaWdodCtwPnUud2lkdGg/XCJsZWZ0XCI6XCJsZWZ0XCI9PXImJmgubGVmdC1wPHUubGVmdD9cInJpZ2h0XCI6cixzLnJlbW92ZUNsYXNzKGQpLmFkZENsYXNzKHIpfXZhciBnPXRoaXMuZ2V0Q2FsY3VsYXRlZE9mZnNldChyLGgscCxjKTt0aGlzLmFwcGx5UGxhY2VtZW50KGcscik7dmFyIHY9ZnVuY3Rpb24oKXtvLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5cIitvLnR5cGUpLG8uaG92ZXJTdGF0ZT1udWxsfTt0LnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kdGlwLmhhc0NsYXNzKFwiZmFkZVwiKT9zLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHYpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6digpfX0saS5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQ9ZnVuY3Rpb24oZSxpKXt2YXIgbz10aGlzLnRpcCgpLHM9b1swXS5vZmZzZXRXaWR0aCxuPW9bMF0ub2Zmc2V0SGVpZ2h0LHI9cGFyc2VJbnQoby5jc3MoXCJtYXJnaW4tdG9wXCIpLDEwKSxhPXBhcnNlSW50KG8uY3NzKFwibWFyZ2luLWxlZnRcIiksMTApO2lzTmFOKHIpJiYocj0wKSxpc05hTihhKSYmKGE9MCksZS50b3A9ZS50b3ArcixlLmxlZnQ9ZS5sZWZ0K2EsdC5vZmZzZXQuc2V0T2Zmc2V0KG9bMF0sdC5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKHQpe28uY3NzKHt0b3A6TWF0aC5yb3VuZCh0LnRvcCksbGVmdDpNYXRoLnJvdW5kKHQubGVmdCl9KX19LGUpLDApLG8uYWRkQ2xhc3MoXCJpblwiKTt2YXIgbD1vWzBdLm9mZnNldFdpZHRoLGg9b1swXS5vZmZzZXRIZWlnaHQ7XCJ0b3BcIj09aSYmaCE9biYmKGUudG9wPWUudG9wK24taCk7dmFyIHA9dGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEoaSxlLGwsaCk7cC5sZWZ0P2UubGVmdCs9cC5sZWZ0OmUudG9wKz1wLnRvcDt2YXIgYz1wLmxlZnQ/MipwLmxlZnQtcytsOjIqcC50b3AtbitoLGQ9cC5sZWZ0P1wibGVmdFwiOlwidG9wXCIsZj1wLmxlZnQ/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCI7by5vZmZzZXQoZSksdGhpcy5yZXBsYWNlQXJyb3coYyxvWzBdW2ZdLGQpfSxpLnByb3RvdHlwZS5yZXBsYWNlQXJyb3c9ZnVuY3Rpb24odCxlLGkpe3RoaXMuYXJyb3coKS5jc3MoaSx0PzUwKigxLXQvZSkrXCIlXCI6XCJcIil9LGkucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRpcCgpLGU9dGhpcy5nZXRUaXRsZSgpO3QuZmluZChcIi50b29sdGlwLWlubmVyXCIpW3RoaXMub3B0aW9ucy5odG1sP1wiaHRtbFwiOlwidGV4dFwiXShlKSx0LnJlbW92ZUNsYXNzKFwiZmFkZSBpbiB0b3AgYm90dG9tIGxlZnQgcmlnaHRcIil9LGkucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7XCJpblwiIT1pLmhvdmVyU3RhdGUmJm8uZGV0YWNoKCksaS4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLlwiK2kudHlwZSl9dmFyIGk9dGhpcyxvPXRoaXMudGlwKCkscz10LkV2ZW50KFwiaGlkZS5icy5cIit0aGlzLnR5cGUpO3JldHVybiB0aGlzLiRlbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzKSxzLmlzRGVmYXVsdFByZXZlbnRlZCgpP3ZvaWQgMDooby5yZW1vdmVDbGFzcyhcImluXCIpLHQuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP28ub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTplKCksdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpcyl9LGkucHJvdG90eXBlLmZpeFRpdGxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kZWxlbWVudDsodC5hdHRyKFwidGl0bGVcIil8fFwic3RyaW5nXCIhPXR5cGVvZiB0LmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpKSYmdC5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiLHQuYXR0cihcInRpdGxlXCIpfHxcIlwiKS5hdHRyKFwidGl0bGVcIixcIlwiKX0saS5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl9LGkucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy4kZWxlbWVudDt2YXIgaT1lWzBdLG89XCJCT0RZXCI9PWkudGFnTmFtZTtyZXR1cm4gdC5leHRlbmQoe30sXCJmdW5jdGlvblwiPT10eXBlb2YgaS5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTpudWxsLHtzY3JvbGw6bz9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDplLnNjcm9sbFRvcCgpLHdpZHRoOm8/dCh3aW5kb3cpLndpZHRoKCk6ZS5vdXRlcldpZHRoKCksaGVpZ2h0Om8/dCh3aW5kb3cpLmhlaWdodCgpOmUub3V0ZXJIZWlnaHQoKX0sbz97dG9wOjAsbGVmdDowfTplLm9mZnNldCgpKX0saS5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldD1mdW5jdGlvbih0LGUsaSxvKXtyZXR1cm5cImJvdHRvbVwiPT10P3t0b3A6ZS50b3ArZS5oZWlnaHQsbGVmdDplLmxlZnQrZS53aWR0aC8yLWkvMn06XCJ0b3BcIj09dD97dG9wOmUudG9wLW8sbGVmdDplLmxlZnQrZS53aWR0aC8yLWkvMn06XCJsZWZ0XCI9PXQ/e3RvcDplLnRvcCtlLmhlaWdodC8yLW8vMixsZWZ0OmUubGVmdC1pfTp7dG9wOmUudG9wK2UuaGVpZ2h0LzItby8yLGxlZnQ6ZS5sZWZ0K2Uud2lkdGh9fSxpLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGE9ZnVuY3Rpb24odCxlLGksbyl7dmFyIHM9e3RvcDowLGxlZnQ6MH07aWYoIXRoaXMuJHZpZXdwb3J0KXJldHVybiBzO3ZhciBuPXRoaXMub3B0aW9ucy52aWV3cG9ydCYmdGhpcy5vcHRpb25zLnZpZXdwb3J0LnBhZGRpbmd8fDAscj10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtpZigvcmlnaHR8bGVmdC8udGVzdCh0KSl7dmFyIGE9ZS50b3Atbi1yLnNjcm9sbCxsPWUudG9wK24tci5zY3JvbGwrbzthPHIudG9wP3MudG9wPXIudG9wLWE6bD5yLnRvcCtyLmhlaWdodCYmKHMudG9wPXIudG9wK3IuaGVpZ2h0LWwpfWVsc2V7dmFyIGg9ZS5sZWZ0LW4scD1lLmxlZnQrbitpO2g8ci5sZWZ0P3MubGVmdD1yLmxlZnQtaDpwPnIud2lkdGgmJihzLmxlZnQ9ci5sZWZ0K3Iud2lkdGgtcCl9cmV0dXJuIHN9LGkucHJvdG90eXBlLmdldFRpdGxlPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLiRlbGVtZW50LGk9dGhpcy5vcHRpb25zO3JldHVybiB0PWUuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIil8fChcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLnRpdGxlP2kudGl0bGUuY2FsbChlWzBdKTppLnRpdGxlKX0saS5wcm90b3R5cGUuZ2V0VUlEPWZ1bmN0aW9uKHQpe2RvIHQrPX5+KDFlNipNYXRoLnJhbmRvbSgpKTt3aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSk7cmV0dXJuIHR9LGkucHJvdG90eXBlLnRpcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0aXA9dGhpcy4kdGlwfHx0KHRoaXMub3B0aW9ucy50ZW1wbGF0ZSl9LGkucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIudG9vbHRpcC1hcnJvd1wiKX0saS5wcm90b3R5cGUudmFsaWRhdGU9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50WzBdLnBhcmVudE5vZGV8fCh0aGlzLmhpZGUoKSx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5vcHRpb25zPW51bGwpfSxpLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITB9LGkucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITF9LGkucHJvdG90eXBlLnRvZ2dsZUVuYWJsZWQ9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9IXRoaXMuZW5hYmxlZH0saS5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7ZSYmKGk9dChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpLGl8fChpPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSx0KGUuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxpKSkpLGkudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9pLmxlYXZlKGkpOmkuZW50ZXIoaSl9LGkucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLmhpZGUoKS4kZWxlbWVudC5vZmYoXCIuXCIrdGhpcy50eXBlKS5yZW1vdmVEYXRhKFwiYnMuXCIrdGhpcy50eXBlKX07dmFyIG89dC5mbi50b29sdGlwO3QuZm4udG9vbHRpcD1lLHQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvcj1pLHQuZm4udG9vbHRpcC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4udG9vbHRpcD1vLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLHM9by5kYXRhKFwiYnMucG9wb3ZlclwiKSxuPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlOyhzfHxcImRlc3Ryb3lcIiE9ZSkmJihzfHxvLmRhdGEoXCJicy5wb3BvdmVyXCIscz1uZXcgaSh0aGlzLG4pKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmc1tlXSgpKX0pfXZhciBpPWZ1bmN0aW9uKHQsZSl7dGhpcy5pbml0KFwicG9wb3ZlclwiLHQsZSl9O2lmKCF0LmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKFwiUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzXCIpO2kuVkVSU0lPTj1cIjMuMi4wXCIsaS5ERUZBVUxUUz10LmV4dGVuZCh7fSx0LmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2Pid9KSxpLnByb3RvdHlwZT10LmV4dGVuZCh7fSx0LmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGkuREVGQVVMVFN9LGkucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRpcCgpLGU9dGhpcy5nZXRUaXRsZSgpLGk9dGhpcy5nZXRDb250ZW50KCk7dC5maW5kKFwiLnBvcG92ZXItdGl0bGVcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGUpLHQuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIikuZW1wdHkoKVt0aGlzLm9wdGlvbnMuaHRtbD9cInN0cmluZ1wiPT10eXBlb2YgaT9cImh0bWxcIjpcImFwcGVuZFwiOlwidGV4dFwiXShpKSx0LnJlbW92ZUNsYXNzKFwiZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW5cIiksdC5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaHRtbCgpfHx0LmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5oaWRlKCl9LGkucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0saS5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGVsZW1lbnQsZT10aGlzLm9wdGlvbnM7cmV0dXJuIHQuYXR0cihcImRhdGEtY29udGVudFwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY29udGVudD9lLmNvbnRlbnQuY2FsbCh0WzBdKTplLmNvbnRlbnQpfSxpLnByb3RvdHlwZS5hcnJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhcnJvdz10aGlzLiRhcnJvd3x8dGhpcy50aXAoKS5maW5kKFwiLmFycm93XCIpfSxpLnByb3RvdHlwZS50aXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdGlwfHwodGhpcy4kdGlwPXQodGhpcy5vcHRpb25zLnRlbXBsYXRlKSksdGhpcy4kdGlwfTt2YXIgbz10LmZuLnBvcG92ZXI7dC5mbi5wb3BvdmVyPWUsdC5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWksdC5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5wb3BvdmVyPW8sdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBvPXQodGhpcykscz1vLmRhdGEoXCJicy50YWJcIik7c3x8by5kYXRhKFwiYnMudGFiXCIscz1uZXcgaSh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGUmJnNbZV0oKX0pfXZhciBpPWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudD10KGUpfTtpLlZFUlNJT049XCIzLjIuMFwiLGkucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsaT1lLmNsb3Nlc3QoXCJ1bDpub3QoLmRyb3Bkb3duLW1lbnUpXCIpLG89ZS5kYXRhKFwidGFyZ2V0XCIpO2lmKG98fChvPWUuYXR0cihcImhyZWZcIiksbz1vJiZvLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpLCFlLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXt2YXIgcz1pLmZpbmQoXCIuYWN0aXZlOmxhc3QgYVwiKVswXSxuPXQuRXZlbnQoXCJzaG93LmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OnN9KTtpZihlLnRyaWdnZXIobiksIW4uaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciByPXQobyk7dGhpcy5hY3RpdmF0ZShlLmNsb3Nlc3QoXCJsaVwiKSxpKSx0aGlzLmFjdGl2YXRlKHIsci5wYXJlbnQoKSxmdW5jdGlvbigpe2UudHJpZ2dlcih7dHlwZTpcInNob3duLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6c30pfSl9fX0saS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSxpLG8pe2Z1bmN0aW9uIHMoKXtuLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmZpbmQoXCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxlLmFkZENsYXNzKFwiYWN0aXZlXCIpLHI/KGVbMF0ub2Zmc2V0V2lkdGgsZS5hZGRDbGFzcyhcImluXCIpKTplLnJlbW92ZUNsYXNzKFwiZmFkZVwiKSxlLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpJiZlLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxvJiZvKCl9dmFyIG49aS5maW5kKFwiPiAuYWN0aXZlXCIpLHI9byYmdC5zdXBwb3J0LnRyYW5zaXRpb24mJm4uaGFzQ2xhc3MoXCJmYWRlXCIpO3I/bi5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixzKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOnMoKSxuLnJlbW92ZUNsYXNzKFwiaW5cIil9O3ZhciBvPXQuZm4udGFiO3QuZm4udGFiPWUsdC5mbi50YWIuQ29uc3RydWN0b3I9aSx0LmZuLnRhYi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4udGFiPW8sdGhpc30sdChkb2N1bWVudCkub24oXCJjbGljay5icy50YWIuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdJyxmdW5jdGlvbihpKXtpLnByZXZlbnREZWZhdWx0KCksZS5jYWxsKHQodGhpcyksXCJzaG93XCIpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBvPXQodGhpcykscz1vLmRhdGEoXCJicy5hZmZpeFwiKSxuPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlO3N8fG8uZGF0YShcImJzLmFmZml4XCIscz1uZXcgaSh0aGlzLG4pKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmc1tlXSgpfSl9dmFyIGk9ZnVuY3Rpb24oZSxvKXt0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30saS5ERUZBVUxUUyxvKSx0aGlzLiR0YXJnZXQ9dCh0aGlzLm9wdGlvbnMudGFyZ2V0KS5vbihcInNjcm9sbC5icy5hZmZpeC5kYXRhLWFwaVwiLHQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpKS5vbihcImNsaWNrLmJzLmFmZml4LmRhdGEtYXBpXCIsdC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLHRoaXMpKSx0aGlzLiRlbGVtZW50PXQoZSksdGhpcy5hZmZpeGVkPXRoaXMudW5waW49dGhpcy5waW5uZWRPZmZzZXQ9bnVsbCx0aGlzLmNoZWNrUG9zaXRpb24oKX07aS5WRVJTSU9OPVwiMy4yLjBcIixpLlJFU0VUPVwiYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbVwiLGkuREVGQVVMVFM9e29mZnNldDowLHRhcmdldDp3aW5kb3d9LGkucHJvdG90eXBlLmdldFBpbm5lZE9mZnNldD1mdW5jdGlvbigpe2lmKHRoaXMucGlubmVkT2Zmc2V0KXJldHVybiB0aGlzLnBpbm5lZE9mZnNldDt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGkuUkVTRVQpLmFkZENsYXNzKFwiYWZmaXhcIik7dmFyIHQ9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGU9dGhpcy4kZWxlbWVudC5vZmZzZXQoKTtyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ9ZS50b3AtdH0saS5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3A9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpLDEpfSxpLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKXt2YXIgZT10KGRvY3VtZW50KS5oZWlnaHQoKSxvPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxzPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCksbj10aGlzLm9wdGlvbnMub2Zmc2V0LHI9bi50b3AsYT1uLmJvdHRvbTtcIm9iamVjdFwiIT10eXBlb2YgbiYmKGE9cj1uKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYocj1uLnRvcCh0aGlzLiRlbGVtZW50KSksXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKGE9bi5ib3R0b20odGhpcy4kZWxlbWVudCkpO3ZhciBsPW51bGwhPXRoaXMudW5waW4mJm8rdGhpcy51bnBpbjw9cy50b3A/ITE6bnVsbCE9YSYmcy50b3ArdGhpcy4kZWxlbWVudC5oZWlnaHQoKT49ZS1hP1wiYm90dG9tXCI6bnVsbCE9ciYmcj49bz9cInRvcFwiOiExO2lmKHRoaXMuYWZmaXhlZCE9PWwpe251bGwhPXRoaXMudW5waW4mJnRoaXMuJGVsZW1lbnQuY3NzKFwidG9wXCIsXCJcIik7dmFyIGg9XCJhZmZpeFwiKyhsP1wiLVwiK2w6XCJcIikscD10LkV2ZW50KGgrXCIuYnMuYWZmaXhcIik7dGhpcy4kZWxlbWVudC50cmlnZ2VyKHApLHAuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0aGlzLmFmZml4ZWQ9bCx0aGlzLnVucGluPVwiYm90dG9tXCI9PWw/dGhpcy5nZXRQaW5uZWRPZmZzZXQoKTpudWxsLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoaS5SRVNFVCkuYWRkQ2xhc3MoaCkudHJpZ2dlcih0LkV2ZW50KGgucmVwbGFjZShcImFmZml4XCIsXCJhZmZpeGVkXCIpKSksXCJib3R0b21cIj09bCYmdGhpcy4kZWxlbWVudC5vZmZzZXQoe3RvcDplLXRoaXMuJGVsZW1lbnQuaGVpZ2h0KCktYX0pKX19fTt2YXIgbz10LmZuLmFmZml4O3QuZm4uYWZmaXg9ZSx0LmZuLmFmZml4LkNvbnN0cnVjdG9yPWksdC5mbi5hZmZpeC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm4uYWZmaXg9byx0aGlzfSx0KHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt0KCdbZGF0YS1zcHk9XCJhZmZpeFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLG89aS5kYXRhKCk7by5vZmZzZXQ9by5vZmZzZXR8fHt9LG8ub2Zmc2V0Qm90dG9tJiYoby5vZmZzZXQuYm90dG9tPW8ub2Zmc2V0Qm90dG9tKSxvLm9mZnNldFRvcCYmKG8ub2Zmc2V0LnRvcD1vLm9mZnNldFRvcCksZS5jYWxsKGksbyl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLHM9by5kYXRhKFwiYnMuY29sbGFwc2VcIiksbj10LmV4dGVuZCh7fSxpLkRFRkFVTFRTLG8uZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlKTshcyYmbi50b2dnbGUmJlwic2hvd1wiPT1lJiYoZT0hZSksc3x8by5kYXRhKFwiYnMuY29sbGFwc2VcIixzPW5ldyBpKHRoaXMsbikpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZzW2VdKCl9KX12YXIgaT1mdW5jdGlvbihlLG8pe3RoaXMuJGVsZW1lbnQ9dChlKSx0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30saS5ERUZBVUxUUyxvKSx0aGlzLnRyYW5zaXRpb25pbmc9bnVsbCx0aGlzLm9wdGlvbnMucGFyZW50JiYodGhpcy4kcGFyZW50PXQodGhpcy5vcHRpb25zLnBhcmVudCkpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O2kuVkVSU0lPTj1cIjMuMi4wXCIsaS5ERUZBVUxUUz17dG9nZ2xlOiEwfSxpLnByb3RvdHlwZS5kaW1lbnNpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwid2lkdGhcIik7cmV0dXJuIHQ/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJ9LGkucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiYhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgaT10LkV2ZW50KFwic2hvdy5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoaSksIWkuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBvPXRoaXMuJHBhcmVudCYmdGhpcy4kcGFyZW50LmZpbmQoXCI+IC5wYW5lbCA+IC5pblwiKTtpZihvJiZvLmxlbmd0aCl7dmFyIHM9by5kYXRhKFwiYnMuY29sbGFwc2VcIik7aWYocyYmcy50cmFuc2l0aW9uaW5nKXJldHVybjtlLmNhbGwobyxcImhpZGVcIiksc3x8by5kYXRhKFwiYnMuY29sbGFwc2VcIixudWxsKX12YXIgbj10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIilbbl0oMCksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIHI9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlIGluXCIpW25dKFwiXCIpLHRoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLmNvbGxhcHNlXCIpfTtpZighdC5zdXBwb3J0LnRyYW5zaXRpb24pcmV0dXJuIHIuY2FsbCh0aGlzKTt2YXIgYT10LmNhbWVsQ2FzZShbXCJzY3JvbGxcIixuXS5qb2luKFwiLVwiKSk7dGhpcy4kZWxlbWVudC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIix0LnByb3h5KHIsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDM1MClbbl0odGhpcy4kZWxlbWVudFswXVthXSl9fX0saS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKSl7dmFyIGU9dC5FdmVudChcImhpZGUuYnMuY29sbGFwc2VcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpLCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgaT10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnRbaV0odGhpcy4kZWxlbWVudFtpXSgpKVswXS5vZmZzZXRIZWlnaHQsdGhpcy4kZWxlbWVudC5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIikucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5yZW1vdmVDbGFzcyhcImluXCIpLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBvPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLmNvbGxhcHNlXCIpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpfTtyZXR1cm4gdC5zdXBwb3J0LnRyYW5zaXRpb24/dm9pZCB0aGlzLiRlbGVtZW50W2ldKDApLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHQucHJveHkobyx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzUwKTpvLmNhbGwodGhpcyl9fX0saS5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIik/XCJoaWRlXCI6XCJzaG93XCJdKCl9O3ZhciBvPXQuZm4uY29sbGFwc2U7dC5mbi5jb2xsYXBzZT1lLHQuZm4uY29sbGFwc2UuQ29uc3RydWN0b3I9aSx0LmZuLmNvbGxhcHNlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5jb2xsYXBzZT1vLHRoaXN9LHQoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nLGZ1bmN0aW9uKGkpe3ZhciBvLHM9dCh0aGlzKSxuPXMuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHxpLnByZXZlbnREZWZhdWx0KCl8fChvPXMuYXR0cihcImhyZWZcIikpJiZvLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIikscj10KG4pLGE9ci5kYXRhKFwiYnMuY29sbGFwc2VcIiksbD1hP1widG9nZ2xlXCI6cy5kYXRhKCksaD1zLmF0dHIoXCJkYXRhLXBhcmVudFwiKSxwPWgmJnQoaCk7YSYmYS50cmFuc2l0aW9uaW5nfHwocCYmcC5maW5kKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicraCsnXCJdJykubm90KHMpLmFkZENsYXNzKFwiY29sbGFwc2VkXCIpLHNbci5oYXNDbGFzcyhcImluXCIpP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwiY29sbGFwc2VkXCIpKSxlLmNhbGwocixsKX0pfShqUXVlcnkpLCtmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGksbyl7dmFyIHM9dC5wcm94eSh0aGlzLnByb2Nlc3MsdGhpcyk7dGhpcy4kYm9keT10KFwiYm9keVwiKSx0aGlzLiRzY3JvbGxFbGVtZW50PXQodChpKS5pcyhcImJvZHlcIik/d2luZG93OmkpLHRoaXMub3B0aW9ucz10LmV4dGVuZCh7fSxlLkRFRkFVTFRTLG8pLHRoaXMuc2VsZWN0b3I9KHRoaXMub3B0aW9ucy50YXJnZXR8fFwiXCIpK1wiIC5uYXYgbGkgPiBhXCIsdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuc2Nyb2xsSGVpZ2h0PTAsdGhpcy4kc2Nyb2xsRWxlbWVudC5vbihcInNjcm9sbC5icy5zY3JvbGxzcHlcIixzKSx0aGlzLnJlZnJlc2goKSx0aGlzLnByb2Nlc3MoKX1mdW5jdGlvbiBpKGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz10KHRoaXMpLHM9by5kYXRhKFwiYnMuc2Nyb2xsc3B5XCIpLG49XCJvYmplY3RcIj09dHlwZW9mIGkmJmk7c3x8by5kYXRhKFwiYnMuc2Nyb2xsc3B5XCIscz1uZXcgZSh0aGlzLG4pKSxcInN0cmluZ1wiPT10eXBlb2YgaSYmc1tpXSgpfSl9ZS5WRVJTSU9OPVwiMy4yLjBcIixlLkRFRkFVTFRTPXtvZmZzZXQ6MTB9LGUucHJvdG90eXBlLmdldFNjcm9sbEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRzY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodHx8TWF0aC5tYXgodGhpcy4kYm9keVswXS5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgZT1cIm9mZnNldFwiLGk9MDt0LmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pfHwoZT1cInBvc2l0aW9uXCIsaT10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpKSx0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuc2Nyb2xsSGVpZ2h0PXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCk7dmFyIG89dGhpczt0aGlzLiRib2R5LmZpbmQodGhpcy5zZWxlY3RvcikubWFwKGZ1bmN0aW9uKCl7dmFyIG89dCh0aGlzKSxzPW8uZGF0YShcInRhcmdldFwiKXx8by5hdHRyKFwiaHJlZlwiKSxuPS9eIy4vLnRlc3QocykmJnQocyk7cmV0dXJuIG4mJm4ubGVuZ3RoJiZuLmlzKFwiOnZpc2libGVcIikmJltbbltlXSgpLnRvcCtpLHNdXXx8bnVsbH0pLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdFswXS1lWzBdfSkuZWFjaChmdW5jdGlvbigpe28ub2Zmc2V0cy5wdXNoKHRoaXNbMF0pLG8udGFyZ2V0cy5wdXNoKHRoaXNbMV0pfSl9LGUucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkrdGhpcy5vcHRpb25zLm9mZnNldCxpPXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksbz10aGlzLm9wdGlvbnMub2Zmc2V0K2ktdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKSxzPXRoaXMub2Zmc2V0cyxuPXRoaXMudGFyZ2V0cyxyPXRoaXMuYWN0aXZlVGFyZ2V0O2lmKHRoaXMuc2Nyb2xsSGVpZ2h0IT1pJiZ0aGlzLnJlZnJlc2goKSxlPj1vKXJldHVybiByIT0odD1uW24ubGVuZ3RoLTFdKSYmdGhpcy5hY3RpdmF0ZSh0KTtpZihyJiZlPD1zWzBdKXJldHVybiByIT0odD1uWzBdKSYmdGhpcy5hY3RpdmF0ZSh0KTtmb3IodD1zLmxlbmd0aDt0LS07KXIhPW5bdF0mJmU+PXNbdF0mJighc1t0KzFdfHxlPD1zW3QrMV0pJiZ0aGlzLmFjdGl2YXRlKG5bdF0pfSxlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLmFjdGl2ZVRhcmdldD1lLHQodGhpcy5zZWxlY3RvcikucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50YXJnZXQsXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO3ZhciBpPXRoaXMuc2VsZWN0b3IrJ1tkYXRhLXRhcmdldD1cIicrZSsnXCJdLCcrdGhpcy5zZWxlY3RvcisnW2hyZWY9XCInK2UrJ1wiXScsbz10KGkpLnBhcmVudHMoXCJsaVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtvLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpLmxlbmd0aCYmKG89by5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikpLG8udHJpZ2dlcihcImFjdGl2YXRlLmJzLnNjcm9sbHNweVwiKX07dmFyIG89dC5mbi5zY3JvbGxzcHk7dC5mbi5zY3JvbGxzcHk9aSx0LmZuLnNjcm9sbHNweS5Db25zdHJ1Y3Rvcj1lLHQuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5mbi5zY3JvbGxzcHk9byx0aGlzfSx0KHdpbmRvdykub24oXCJsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaVwiLGZ1bmN0aW9uKCl7dCgnW2RhdGEtc3B5PVwic2Nyb2xsXCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7aS5jYWxsKGUsZS5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib290c3RyYXBcIiksZT17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifTtmb3IodmFyIGkgaW4gZSlpZih2b2lkIDAhPT10LnN0eWxlW2ldKXJldHVybntlbmQ6ZVtpXX07cmV0dXJuITF9dC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZD1mdW5jdGlvbihlKXt2YXIgaT0hMSxvPXRoaXM7dCh0aGlzKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2k9ITB9KTt2YXIgcz1mdW5jdGlvbigpe2l8fHQobykudHJpZ2dlcih0LnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpfTtyZXR1cm4gc2V0VGltZW91dChzLGUpLHRoaXN9LHQoZnVuY3Rpb24oKXt0LnN1cHBvcnQudHJhbnNpdGlvbj1lKCksdC5zdXBwb3J0LnRyYW5zaXRpb24mJih0LmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kPXtiaW5kVHlwZTp0LnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZGVsZWdhdGVUeXBlOnQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxoYW5kbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZS50YXJnZXQpLmlzKHRoaXMpP2UuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19KX0pfShqUXVlcnkpO1xuXG5cbi8qIVxuICogaW1hZ2VzTG9hZGVkIFBBQ0tBR0VEIHYzLjEuOFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiB0KGUsdCl7Zm9yKHZhciBuPWUubGVuZ3RoO24tLTspaWYoZVtuXS5saXN0ZW5lcj09PXQpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBpPWUucHJvdG90eXBlLHI9dGhpcyxvPXIuRXZlbnRFbWl0dGVyO2kuZ2V0TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl9nZXRFdmVudHMoKTtpZihcIm9iamVjdFwiPT10eXBlb2YgZSl7dD17fTtmb3IobiBpbiBpKWkuaGFzT3duUHJvcGVydHkobikmJmUudGVzdChuKSYmKHRbbl09aVtuXSl9ZWxzZSB0PWlbZV18fChpW2VdPVtdKTtyZXR1cm4gdH0saS5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrPTEpbi5wdXNoKGVbdF0ubGlzdGVuZXIpO3JldHVybiBufSxpLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5nZXRMaXN0ZW5lcnMoZSk7cmV0dXJuIG4gaW5zdGFuY2VvZiBBcnJheSYmKHQ9e30sdFtlXT1uKSx0fHxufSxpLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpLG89XCJvYmplY3RcIj09dHlwZW9mIG47Zm9yKGkgaW4gcilyLmhhc093blByb3BlcnR5KGkpJiYtMT09PXQocltpXSxuKSYmcltpXS5wdXNoKG8/bjp7bGlzdGVuZXI6bixvbmNlOiExfSk7cmV0dXJuIHRoaXN9LGkub249bihcImFkZExpc3RlbmVyXCIpLGkuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZSx7bGlzdGVuZXI6dCxvbmNlOiEwfSl9LGkub25jZT1uKFwiYWRkT25jZUxpc3RlbmVyXCIpLGkuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGUpLHRoaXN9LGkuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCs9MSl0aGlzLmRlZmluZUV2ZW50KGVbdF0pO3JldHVybiB0aGlzfSxpLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZSk7Zm9yKHIgaW4gbylvLmhhc093blByb3BlcnR5KHIpJiYoaT10KG9bcl0sbiksLTEhPT1pJiZvW3JdLnNwbGljZShpLDEpKTtyZXR1cm4gdGhpc30saS5vZmY9bihcInJlbW92ZUxpc3RlbmVyXCIpLGkuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMSxlLHQpfSxpLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITAsZSx0KX0saS5tYW5pcHVsYXRlTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89ZT90aGlzLnJlbW92ZUxpc3RlbmVyOnRoaXMuYWRkTGlzdGVuZXIscz1lP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzO2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgUmVnRXhwKWZvcihpPW4ubGVuZ3RoO2ktLTspby5jYWxsKHRoaXMsdCxuW2ldKTtlbHNlIGZvcihpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKHI9dFtpXSkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiByP28uY2FsbCh0aGlzLGkscik6cy5jYWxsKHRoaXMsaSxyKSk7cmV0dXJuIHRoaXN9LGkucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj10eXBlb2YgZSxpPXRoaXMuX2dldEV2ZW50cygpO2lmKFwic3RyaW5nXCI9PT1uKWRlbGV0ZSBpW2VdO2Vsc2UgaWYoXCJvYmplY3RcIj09PW4pZm9yKHQgaW4gaSlpLmhhc093blByb3BlcnR5KHQpJiZlLnRlc3QodCkmJmRlbGV0ZSBpW3RdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30saS5yZW1vdmVBbGxMaXN0ZW5lcnM9bihcInJlbW92ZUV2ZW50XCIpLGkuZW1pdEV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8scz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihyIGluIHMpaWYocy5oYXNPd25Qcm9wZXJ0eShyKSlmb3IoaT1zW3JdLmxlbmd0aDtpLS07KW49c1tyXVtpXSxuLm9uY2U9PT0hMCYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLG4ubGlzdGVuZXIpLG89bi5saXN0ZW5lci5hcHBseSh0aGlzLHR8fFtdKSxvPT09dGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuLmxpc3RlbmVyKTtyZXR1cm4gdGhpc30saS50cmlnZ2VyPW4oXCJlbWl0RXZlbnRcIiksaS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoZSx0KX0saS5zZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZT1lLHRoaXN9LGkuX2dldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KFwiX29uY2VSZXR1cm5WYWx1ZVwiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGkuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gci5FdmVudEVtaXR0ZXI9byxlfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lOnRoaXMuRXZlbnRFbWl0dGVyPWV9KS5jYWxsKHRoaXMpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5ldmVudDtyZXR1cm4gbi50YXJnZXQ9bi50YXJnZXR8fG4uc3JjRWxlbWVudHx8dCxufXZhciBuPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxpPWZ1bmN0aW9uKCl7fTtuLmFkZEV2ZW50TGlzdGVuZXI/aT1mdW5jdGlvbihlLHQsbil7ZS5hZGRFdmVudExpc3RlbmVyKHQsbiwhMSl9Om4uYXR0YWNoRXZlbnQmJihpPWZ1bmN0aW9uKGUsbixpKXtlW24raV09aS5oYW5kbGVFdmVudD9mdW5jdGlvbigpe3ZhciBuPXQoZSk7aS5oYW5kbGVFdmVudC5jYWxsKGksbil9OmZ1bmN0aW9uKCl7dmFyIG49dChlKTtpLmNhbGwoZSxuKX0sZS5hdHRhY2hFdmVudChcIm9uXCIrbixlW24raV0pfSk7dmFyIHI9ZnVuY3Rpb24oKXt9O24ucmVtb3ZlRXZlbnRMaXN0ZW5lcj9yPWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX06bi5kZXRhY2hFdmVudCYmKHI9ZnVuY3Rpb24oZSx0LG4pe2UuZGV0YWNoRXZlbnQoXCJvblwiK3QsZVt0K25dKTt0cnl7ZGVsZXRlIGVbdCtuXX1jYXRjaChpKXtlW3Qrbl09dm9pZCAwfX0pO3ZhciBvPXtiaW5kOmksdW5iaW5kOnJ9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldmVudGllL2V2ZW50aWVcIixvKTplLmV2ZW50aWU9b30odGhpcyksZnVuY3Rpb24oZSx0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImV2ZW50aWUvZXZlbnRpZVwiXSxmdW5jdGlvbihuLGkpe3JldHVybiB0KGUsbixpKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPXQoZSxyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImV2ZW50aWVcIikpOmUuaW1hZ2VzTG9hZGVkPXQoZSxlLkV2ZW50RW1pdHRlcixlLmV2ZW50aWUpfSh3aW5kb3csZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gcihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1kLmNhbGwoZSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1bXTtpZihyKGUpKXQ9ZTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdC5wdXNoKGVbbl0pO2Vsc2UgdC5wdXNoKGUpO3JldHVybiB0fWZ1bmN0aW9uIHMoZSx0LG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIHMpKXJldHVybiBuZXcgcyhlLHQpO1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKSx0aGlzLmVsZW1lbnRzPW8oZSksdGhpcy5vcHRpb25zPWkoe30sdGhpcy5vcHRpb25zKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P249dDppKHRoaXMub3B0aW9ucyx0KSxuJiZ0aGlzLm9uKFwiYWx3YXlzXCIsbiksdGhpcy5nZXRJbWFnZXMoKSxhJiYodGhpcy5qcURlZmVycmVkPW5ldyBhLkRlZmVycmVkKTt2YXIgcj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmNoZWNrKCl9KX1mdW5jdGlvbiBmKGUpe3RoaXMuaW1nPWV9ZnVuY3Rpb24gYyhlKXt0aGlzLnNyYz1lLHZbZV09dGhpc312YXIgYT1lLmpRdWVyeSx1PWUuY29uc29sZSxoPXUhPT12b2lkIDAsZD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3MucHJvdG90eXBlPW5ldyB0LHMucHJvdG90eXBlLm9wdGlvbnM9e30scy5wcm90b3R5cGUuZ2V0SW1hZ2VzPWZ1bmN0aW9uKCl7dGhpcy5pbWFnZXM9W107Zm9yKHZhciBlPTAsdD10aGlzLmVsZW1lbnRzLmxlbmd0aDt0PmU7ZSsrKXt2YXIgbj10aGlzLmVsZW1lbnRzW2VdO1wiSU1HXCI9PT1uLm5vZGVOYW1lJiZ0aGlzLmFkZEltYWdlKG4pO3ZhciBpPW4ubm9kZVR5cGU7aWYoaSYmKDE9PT1pfHw5PT09aXx8MTE9PT1pKSlmb3IodmFyIHI9bi5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpLG89MCxzPXIubGVuZ3RoO3M+bztvKyspe3ZhciBmPXJbb107dGhpcy5hZGRJbWFnZShmKX19fSxzLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgZihlKTt0aGlzLmltYWdlcy5wdXNoKHQpfSxzLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtyZXR1cm4gdC5vcHRpb25zLmRlYnVnJiZoJiZ1LmxvZyhcImNvbmZpcm1cIixlLHIpLHQucHJvZ3Jlc3MoZSksbisrLG49PT1pJiZ0LmNvbXBsZXRlKCksITB9dmFyIHQ9dGhpcyxuPTAsaT10aGlzLmltYWdlcy5sZW5ndGg7aWYodGhpcy5oYXNBbnlCcm9rZW49ITEsIWkpcmV0dXJuIHRoaXMuY29tcGxldGUoKSx2b2lkIDA7Zm9yKHZhciByPTA7aT5yO3IrKyl7dmFyIG89dGhpcy5pbWFnZXNbcl07by5vbihcImNvbmZpcm1cIixlKSxvLmNoZWNrKCl9fSxzLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihlKXt0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWUuaXNMb2FkZWQ7dmFyIHQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5lbWl0KFwicHJvZ3Jlc3NcIix0LGUpLHQuanFEZWZlcnJlZCYmdC5qcURlZmVycmVkLm5vdGlmeSYmdC5qcURlZmVycmVkLm5vdGlmeSh0LGUpfSl9LHMucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5oYXNBbnlCcm9rZW4/XCJmYWlsXCI6XCJkb25lXCI7dGhpcy5pc0NvbXBsZXRlPSEwO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHQuZW1pdChlLHQpLHQuZW1pdChcImFsd2F5c1wiLHQpLHQuanFEZWZlcnJlZCl7dmFyIG49dC5oYXNBbnlCcm9rZW4/XCJyZWplY3RcIjpcInJlc29sdmVcIjt0LmpxRGVmZXJyZWRbbl0odCl9fSl9LGEmJihhLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBzKHRoaXMsZSx0KTtyZXR1cm4gbi5qcURlZmVycmVkLnByb21pc2UoYSh0aGlzKSl9KSxmLnByb3RvdHlwZT1uZXcgdCxmLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3ZhciBlPXZbdGhpcy5pbWcuc3JjXXx8bmV3IGModGhpcy5pbWcuc3JjKTtpZihlLmlzQ29uZmlybWVkKXJldHVybiB0aGlzLmNvbmZpcm0oZS5pc0xvYWRlZCxcImNhY2hlZCB3YXMgY29uZmlybWVkXCIpLHZvaWQgMDtpZih0aGlzLmltZy5jb21wbGV0ZSYmdm9pZCAwIT09dGhpcy5pbWcubmF0dXJhbFdpZHRoKXJldHVybiB0aGlzLmNvbmZpcm0oMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aCxcIm5hdHVyYWxXaWR0aFwiKSx2b2lkIDA7dmFyIHQ9dGhpcztlLm9uKFwiY29uZmlybVwiLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuY29uZmlybShlLmlzTG9hZGVkLG4pLCEwfSksZS5jaGVjaygpfSxmLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGUsdCl7dGhpcy5pc0xvYWRlZD1lLHRoaXMuZW1pdChcImNvbmZpcm1cIix0aGlzLHQpfTt2YXIgdj17fTtyZXR1cm4gYy5wcm90b3R5cGU9bmV3IHQsYy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NoZWNrZWQpe3ZhciBlPW5ldyBJbWFnZTtuLmJpbmQoZSxcImxvYWRcIix0aGlzKSxuLmJpbmQoZSxcImVycm9yXCIsdGhpcyksZS5zcmM9dGhpcy5zcmMsdGhpcy5pc0NoZWNrZWQ9ITB9fSxjLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihlKXt2YXIgdD1cIm9uXCIrZS50eXBlO3RoaXNbdF0mJnRoaXNbdF0oZSl9LGMucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbihlKXt0aGlzLmNvbmZpcm0oITAsXCJvbmxvYWRcIiksdGhpcy51bmJpbmRQcm94eUV2ZW50cyhlKX0sYy5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbihlKXt0aGlzLmNvbmZpcm0oITEsXCJvbmVycm9yXCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoZSl9LGMucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oZSx0KXt0aGlzLmlzQ29uZmlybWVkPSEwLHRoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXQoXCJjb25maXJtXCIsdGhpcyx0KX0sYy5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHM9ZnVuY3Rpb24oZSl7bi51bmJpbmQoZS50YXJnZXQsXCJsb2FkXCIsdGhpcyksbi51bmJpbmQoZS50YXJnZXQsXCJlcnJvclwiLHRoaXMpfSxzfSk7XG5cblxuLyohXG4gKiBNYXNvbnJ5IFBBQ0tBR0VEIHYzLjIuMlxuICogQ2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnlcbiAqIGh0dHA6Ly9tYXNvbnJ5LmRlc2FuZHJvLmNvbVxuICogTUlUIExpY2Vuc2VcbiAqIGJ5IERhdmlkIERlU2FuZHJvXG4gKi9cblxuIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBjKGIpe2IucHJvdG90eXBlLm9wdGlvbnx8KGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiKXthLmlzUGxhaW5PYmplY3QoYikmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLGIpKX0pfWZ1bmN0aW9uIGUoYixjKXthLmZuW2JdPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3IodmFyIGc9ZC5jYWxsKGFyZ3VtZW50cywxKSxoPTAsaT10aGlzLmxlbmd0aDtpPmg7aCsrKXt2YXIgaj10aGlzW2hdLGs9YS5kYXRhKGosYik7aWYoaylpZihhLmlzRnVuY3Rpb24oa1tlXSkmJlwiX1wiIT09ZS5jaGFyQXQoMCkpe3ZhciBsPWtbZV0uYXBwbHkoayxnKTtpZih2b2lkIDAhPT1sKXJldHVybiBsfWVsc2UgZihcIm5vIHN1Y2ggbWV0aG9kICdcIitlK1wiJyBmb3IgXCIrYitcIiBpbnN0YW5jZVwiKTtlbHNlIGYoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK2IrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsICdcIitlK1wiJ1wiKX1yZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YS5kYXRhKHRoaXMsYik7ZD8oZC5vcHRpb24oZSksZC5faW5pdCgpKTooZD1uZXcgYyh0aGlzLGUpLGEuZGF0YSh0aGlzLGIsZCkpfSl9fWlmKGEpe3ZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2I6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX07cmV0dXJuIGEuYnJpZGdldD1mdW5jdGlvbihhLGIpe2MoYiksZShhLGIpfSxhLmJyaWRnZXR9fXZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwianF1ZXJ5LWJyaWRnZXQvanF1ZXJ5LmJyaWRnZXRcIixbXCJqcXVlcnlcIl0sYyk6YyhcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9yZXF1aXJlKFwianF1ZXJ5XCIpOmEualF1ZXJ5KX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEuZXZlbnQ7cmV0dXJuIGMudGFyZ2V0PWMudGFyZ2V0fHxjLnNyY0VsZW1lbnR8fGIsY312YXIgYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZD1mdW5jdGlvbigpe307Yy5hZGRFdmVudExpc3RlbmVyP2Q9ZnVuY3Rpb24oYSxiLGMpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsITEpfTpjLmF0dGFjaEV2ZW50JiYoZD1mdW5jdGlvbihhLGMsZCl7YVtjK2RdPWQuaGFuZGxlRXZlbnQ/ZnVuY3Rpb24oKXt2YXIgYz1iKGEpO2QuaGFuZGxlRXZlbnQuY2FsbChkLGMpfTpmdW5jdGlvbigpe3ZhciBjPWIoYSk7ZC5jYWxsKGEsYyl9LGEuYXR0YWNoRXZlbnQoXCJvblwiK2MsYVtjK2RdKX0pO3ZhciBlPWZ1bmN0aW9uKCl7fTtjLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZT1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9OmMuZGV0YWNoRXZlbnQmJihlPWZ1bmN0aW9uKGEsYixjKXthLmRldGFjaEV2ZW50KFwib25cIitiLGFbYitjXSk7dHJ5e2RlbGV0ZSBhW2IrY119Y2F0Y2goZCl7YVtiK2NdPXZvaWQgMH19KTt2YXIgZj17YmluZDpkLHVuYmluZDplfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRpZS9ldmVudGllXCIsZik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZjphLmV2ZW50aWU9Zn0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoYi5pc1JlYWR5P2EoKTpnLnB1c2goYSkpfWZ1bmN0aW9uIGMoYSl7dmFyIGM9XCJyZWFkeXN0YXRlY2hhbmdlXCI9PT1hLnR5cGUmJlwiY29tcGxldGVcIiE9PWYucmVhZHlTdGF0ZTtiLmlzUmVhZHl8fGN8fGQoKX1mdW5jdGlvbiBkKCl7Yi5pc1JlYWR5PSEwO2Zvcih2YXIgYT0wLGM9Zy5sZW5ndGg7Yz5hO2ErKyl7dmFyIGQ9Z1thXTtkKCl9fWZ1bmN0aW9uIGUoZSl7cmV0dXJuXCJjb21wbGV0ZVwiPT09Zi5yZWFkeVN0YXRlP2QoKTooZS5iaW5kKGYsXCJET01Db250ZW50TG9hZGVkXCIsYyksZS5iaW5kKGYsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYyksZS5iaW5kKGEsXCJsb2FkXCIsYykpLGJ9dmFyIGY9YS5kb2N1bWVudCxnPVtdO2IuaXNSZWFkeT0hMSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZG9jLXJlYWR5L2RvYy1yZWFkeVwiLFtcImV2ZW50aWUvZXZlbnRpZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJldmVudGllXCIpKTphLmRvY1JlYWR5PWUoYS5ldmVudGllKX0od2luZG93KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY10ubGlzdGVuZXI9PT1iKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgZD1hLnByb3RvdHlwZSxlPXRoaXMsZj1lLkV2ZW50RW1pdHRlcjtkLmdldExpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoYSBpbnN0YW5jZW9mIFJlZ0V4cCl7Yj17fTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmEudGVzdChjKSYmKGJbY109ZFtjXSl9ZWxzZSBiPWRbYV18fChkW2FdPVtdKTtyZXR1cm4gYn0sZC5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9W107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrPTEpYy5wdXNoKGFbYl0ubGlzdGVuZXIpO3JldHVybiBjfSxkLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRMaXN0ZW5lcnMoYSk7cmV0dXJuIGMgaW5zdGFuY2VvZiBBcnJheSYmKGI9e30sYlthXT1jKSxifHxjfSxkLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpLGY9XCJvYmplY3RcIj09dHlwZW9mIGM7Zm9yKGQgaW4gZSllLmhhc093blByb3BlcnR5KGQpJiYtMT09PWIoZVtkXSxjKSYmZVtkXS5wdXNoKGY/Yzp7bGlzdGVuZXI6YyxvbmNlOiExfSk7cmV0dXJuIHRoaXN9LGQub249YyhcImFkZExpc3RlbmVyXCIpLGQuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoYSx7bGlzdGVuZXI6YixvbmNlOiEwfSl9LGQub25jZT1jKFwiYWRkT25jZUxpc3RlbmVyXCIpLGQuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGEpLHRoaXN9LGQuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7Yis9MSl0aGlzLmRlZmluZUV2ZW50KGFbYl0pO3JldHVybiB0aGlzfSxkLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZSxmPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZilmLmhhc093blByb3BlcnR5KGUpJiYoZD1iKGZbZV0sYyksLTEhPT1kJiZmW2VdLnNwbGljZShkLDEpKTtyZXR1cm4gdGhpc30sZC5vZmY9YyhcInJlbW92ZUxpc3RlbmVyXCIpLGQuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMSxhLGIpfSxkLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITAsYSxiKX0sZC5tYW5pcHVsYXRlTGlzdGVuZXJzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YT90aGlzLnJlbW92ZUxpc3RlbmVyOnRoaXMuYWRkTGlzdGVuZXIsZz1hP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzO2lmKFwib2JqZWN0XCIhPXR5cGVvZiBifHxiIGluc3RhbmNlb2YgUmVnRXhwKWZvcihkPWMubGVuZ3RoO2QtLTspZi5jYWxsKHRoaXMsYixjW2RdKTtlbHNlIGZvcihkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmKGU9YltkXSkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2YuY2FsbCh0aGlzLGQsZSk6Zy5jYWxsKHRoaXMsZCxlKSk7cmV0dXJuIHRoaXN9LGQucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10eXBlb2YgYSxkPXRoaXMuX2dldEV2ZW50cygpO2lmKFwic3RyaW5nXCI9PT1jKWRlbGV0ZSBkW2FdO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJmEudGVzdChiKSYmZGVsZXRlIGRbYl07ZWxzZSBkZWxldGUgdGhpcy5fZXZlbnRzO3JldHVybiB0aGlzfSxkLnJlbW92ZUFsbExpc3RlbmVycz1jKFwicmVtb3ZlRXZlbnRcIiksZC5lbWl0RXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZylpZihnLmhhc093blByb3BlcnR5KGUpKWZvcihkPWdbZV0ubGVuZ3RoO2QtLTspYz1nW2VdW2RdLGMub25jZT09PSEwJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGEsYy5saXN0ZW5lciksZj1jLmxpc3RlbmVyLmFwcGx5KHRoaXMsYnx8W10pLGY9PT10aGlzLl9nZXRPbmNlUmV0dXJuVmFsdWUoKSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGMubGlzdGVuZXIpO3JldHVybiB0aGlzfSxkLnRyaWdnZXI9YyhcImVtaXRFdmVudFwiKSxkLmVtaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVtaXRFdmVudChhLGIpfSxkLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlPWEsdGhpc30sZC5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoXCJfb25jZVJldHVyblZhbHVlXCIpP3RoaXMuX29uY2VSZXR1cm5WYWx1ZTohMH0sZC5fZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSl9LGEubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBlLkV2ZW50RW1pdHRlcj1mLGF9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyXCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWE6ZS5FdmVudEVtaXR0ZXI9YX0uY2FsbCh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKGEpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBkW2FdKXJldHVybiBhO2E9YS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpO2Zvcih2YXIgYixlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWlmKGI9Y1tlXSthLFwic3RyaW5nXCI9PXR5cGVvZiBkW2JdKXJldHVybiBifX12YXIgYz1cIldlYmtpdCBNb3ogbXMgTXMgT1wiLnNwbGl0KFwiIFwiKSxkPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXN0eWxlLXByb3BlcnR5L2dldC1zdHlsZS1wcm9wZXJ0eVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iOmEuZ2V0U3R5bGVQcm9wZXJ0eT1ifSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9cGFyc2VGbG9hdChhKSxjPS0xPT09YS5pbmRleE9mKFwiJVwiKSYmIWlzTmFOKGIpO3JldHVybiBjJiZifWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gZCgpe2Zvcih2YXIgYT17d2lkdGg6MCxoZWlnaHQ6MCxpbm5lcldpZHRoOjAsaW5uZXJIZWlnaHQ6MCxvdXRlcldpZHRoOjAsb3V0ZXJIZWlnaHQ6MH0sYj0wLGM9Zy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9Z1tiXTthW2RdPTB9cmV0dXJuIGF9ZnVuY3Rpb24gZShjKXtmdW5jdGlvbiBlKCl7aWYoIW0pe209ITA7dmFyIGQ9YS5nZXRDb21wdXRlZFN0eWxlO2lmKGo9ZnVuY3Rpb24oKXt2YXIgYT1kP2Z1bmN0aW9uKGEpe3JldHVybiBkKGEsbnVsbCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX07cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWEoYik7cmV0dXJuIGN8fGYoXCJTdHlsZSByZXR1cm5lZCBcIitjK1wiLiBBcmUgeW91IHJ1bm5pbmcgdGhpcyBjb2RlIGluIGEgaGlkZGVuIGlmcmFtZSBvbiBGaXJlZm94PyBTZWUgaHR0cDovL2JpdC5seS9nZXRzaXplYnVnMVwiKSxjfX0oKSxrPWMoXCJib3hTaXppbmdcIikpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zdHlsZS53aWR0aD1cIjIwMHB4XCIsZS5zdHlsZS5wYWRkaW5nPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3JkZXJTdHlsZT1cInNvbGlkXCIsZS5zdHlsZS5ib3JkZXJXaWR0aD1cIjFweCAycHggM3B4IDRweFwiLGUuc3R5bGVba109XCJib3JkZXItYm94XCI7dmFyIGc9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2cuYXBwZW5kQ2hpbGQoZSk7dmFyIGg9aihlKTtsPTIwMD09PWIoaC53aWR0aCksZy5yZW1vdmVDaGlsZChlKX19fWZ1bmN0aW9uIGgoYSl7aWYoZSgpLFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGEpKSxhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmYS5ub2RlVHlwZSl7dmFyIGM9aihhKTtpZihcIm5vbmVcIj09PWMuZGlzcGxheSlyZXR1cm4gZCgpO3ZhciBmPXt9O2Yud2lkdGg9YS5vZmZzZXRXaWR0aCxmLmhlaWdodD1hLm9mZnNldEhlaWdodDtmb3IodmFyIGg9Zi5pc0JvcmRlckJveD0hKCFrfHwhY1trXXx8XCJib3JkZXItYm94XCIhPT1jW2tdKSxtPTAsbj1nLmxlbmd0aDtuPm07bSsrKXt2YXIgbz1nW21dLHA9Y1tvXTtwPWkoYSxwKTt2YXIgcT1wYXJzZUZsb2F0KHApO2Zbb109aXNOYU4ocSk/MDpxfXZhciByPWYucGFkZGluZ0xlZnQrZi5wYWRkaW5nUmlnaHQscz1mLnBhZGRpbmdUb3ArZi5wYWRkaW5nQm90dG9tLHQ9Zi5tYXJnaW5MZWZ0K2YubWFyZ2luUmlnaHQsdT1mLm1hcmdpblRvcCtmLm1hcmdpbkJvdHRvbSx2PWYuYm9yZGVyTGVmdFdpZHRoK2YuYm9yZGVyUmlnaHRXaWR0aCx3PWYuYm9yZGVyVG9wV2lkdGgrZi5ib3JkZXJCb3R0b21XaWR0aCx4PWgmJmwseT1iKGMud2lkdGgpO3khPT0hMSYmKGYud2lkdGg9eSsoeD8wOnIrdikpO3ZhciB6PWIoYy5oZWlnaHQpO3JldHVybiB6IT09ITEmJihmLmhlaWdodD16Kyh4PzA6cyt3KSksZi5pbm5lcldpZHRoPWYud2lkdGgtKHIrdiksZi5pbm5lckhlaWdodD1mLmhlaWdodC0ocyt3KSxmLm91dGVyV2lkdGg9Zi53aWR0aCt0LGYub3V0ZXJIZWlnaHQ9Zi5oZWlnaHQrdSxmfX1mdW5jdGlvbiBpKGIsYyl7aWYoYS5nZXRDb21wdXRlZFN0eWxlfHwtMT09PWMuaW5kZXhPZihcIiVcIikpcmV0dXJuIGM7dmFyIGQ9Yi5zdHlsZSxlPWQubGVmdCxmPWIucnVudGltZVN0eWxlLGc9ZiYmZi5sZWZ0O3JldHVybiBnJiYoZi5sZWZ0PWIuY3VycmVudFN0eWxlLmxlZnQpLGQubGVmdD1jLGM9ZC5waXhlbExlZnQsZC5sZWZ0PWUsZyYmKGYubGVmdD1nKSxjfXZhciBqLGssbCxtPSExO3JldHVybiBofXZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2M6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX0sZz1bXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nVG9wXCIsXCJwYWRkaW5nQm90dG9tXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIixcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwiYm9yZGVyVG9wV2lkdGhcIixcImJvcmRlckJvdHRvbVdpZHRoXCJdO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFtcImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHlcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZGVzYW5kcm8tZ2V0LXN0eWxlLXByb3BlcnR5XCIpKTphLmdldFNpemU9ZShhLmdldFN0eWxlUHJvcGVydHkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYVtnXShiKX1mdW5jdGlvbiBjKGEpe2lmKCFhLnBhcmVudE5vZGUpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiLmFwcGVuZENoaWxkKGEpfX1mdW5jdGlvbiBkKGEsYil7YyhhKTtmb3IodmFyIGQ9YS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKylpZihkW2VdPT09YSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBlKGEsZCl7cmV0dXJuIGMoYSksYihhLGQpfXZhciBmLGc9ZnVuY3Rpb24oKXtpZihhLm1hdGNoZXNTZWxlY3RvcilyZXR1cm5cIm1hdGNoZXNTZWxlY3RvclwiO2Zvcih2YXIgYj1bXCJ3ZWJraXRcIixcIm1velwiLFwibXNcIixcIm9cIl0sYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9YltjXSxmPWUrXCJNYXRjaGVzU2VsZWN0b3JcIjtpZihhW2ZdKXJldHVybiBmfX0oKTtpZihnKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGk9YihoLFwiZGl2XCIpO2Y9aT9iOmV9ZWxzZSBmPWQ7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIm1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1mOndpbmRvdy5tYXRjaGVzU2VsZWN0b3I9Zn0oRWxlbWVudC5wcm90b3R5cGUpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4gYj1udWxsLCEwfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVyblwiLVwiK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGUoYSxlLGYpe2Z1bmN0aW9uIGgoYSxiKXthJiYodGhpcy5lbGVtZW50PWEsdGhpcy5sYXlvdXQ9Yix0aGlzLnBvc2l0aW9uPXt4OjAseTowfSx0aGlzLl9jcmVhdGUoKSl9dmFyIGk9ZihcInRyYW5zaXRpb25cIiksaj1mKFwidHJhbnNmb3JtXCIpLGs9aSYmaixsPSEhZihcInBlcnNwZWN0aXZlXCIpLG09e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn1baV0sbj1bXCJ0cmFuc2Zvcm1cIixcInRyYW5zaXRpb25cIixcInRyYW5zaXRpb25EdXJhdGlvblwiLFwidHJhbnNpdGlvblByb3BlcnR5XCJdLG89ZnVuY3Rpb24oKXtmb3IodmFyIGE9e30sYj0wLGM9bi5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9bltiXSxlPWYoZCk7ZSYmZSE9PWQmJihhW2RdPWUpfXJldHVybiBhfSgpO2IoaC5wcm90b3R5cGUsYS5wcm90b3R5cGUpLGgucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0saC5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9XCJvblwiK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxoLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWUodGhpcy5lbGVtZW50KX0saC5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9b1tjXXx8YztiW2RdPWFbY119fSxoLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPWcodGhpcy5lbGVtZW50KSxiPXRoaXMubGF5b3V0Lm9wdGlvbnMsYz1iLmlzT3JpZ2luTGVmdCxkPWIuaXNPcmlnaW5Ub3AsZT1wYXJzZUludChhW2M/XCJsZWZ0XCI6XCJyaWdodFwiXSwxMCksZj1wYXJzZUludChhW2Q/XCJ0b3BcIjpcImJvdHRvbVwiXSwxMCk7ZT1pc05hTihlKT8wOmUsZj1pc05hTihmKT8wOmY7dmFyIGg9dGhpcy5sYXlvdXQuc2l6ZTtlLT1jP2gucGFkZGluZ0xlZnQ6aC5wYWRkaW5nUmlnaHQsZi09ZD9oLnBhZGRpbmdUb3A6aC5wYWRkaW5nQm90dG9tLHRoaXMucG9zaXRpb24ueD1lLHRoaXMucG9zaXRpb24ueT1mfSxoLnByb3RvdHlwZS5sYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5b3V0LnNpemUsYj10aGlzLmxheW91dC5vcHRpb25zLGM9e307Yi5pc09yaWdpbkxlZnQ/KGMubGVmdD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nTGVmdCtcInB4XCIsYy5yaWdodD1cIlwiKTooYy5yaWdodD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nUmlnaHQrXCJweFwiLGMubGVmdD1cIlwiKSxiLmlzT3JpZ2luVG9wPyhjLnRvcD10aGlzLnBvc2l0aW9uLnkrYS5wYWRkaW5nVG9wK1wicHhcIixjLmJvdHRvbT1cIlwiKTooYy5ib3R0b209dGhpcy5wb3NpdGlvbi55K2EucGFkZGluZ0JvdHRvbStcInB4XCIsYy50b3A9XCJcIiksdGhpcy5jc3MoYyksdGhpcy5lbWl0RXZlbnQoXCJsYXlvdXRcIixbdGhpc10pfTt2YXIgcD1sP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIithK1wicHgsIFwiK2IrXCJweCwgMClcIn06ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInRyYW5zbGF0ZShcIithK1wicHgsIFwiK2IrXCJweClcIn07aC5wcm90b3R5cGUuX3RyYW5zaXRpb25Ubz1mdW5jdGlvbihhLGIpe3RoaXMuZ2V0UG9zaXRpb24oKTt2YXIgYz10aGlzLnBvc2l0aW9uLngsZD10aGlzLnBvc2l0aW9uLnksZT1wYXJzZUludChhLDEwKSxmPXBhcnNlSW50KGIsMTApLGc9ZT09PXRoaXMucG9zaXRpb24ueCYmZj09PXRoaXMucG9zaXRpb24ueTtpZih0aGlzLnNldFBvc2l0aW9uKGEsYiksZyYmIXRoaXMuaXNUcmFuc2l0aW9uaW5nKXJldHVybiB2b2lkIHRoaXMubGF5b3V0UG9zaXRpb24oKTt2YXIgaD1hLWMsaT1iLWQsaj17fSxrPXRoaXMubGF5b3V0Lm9wdGlvbnM7aD1rLmlzT3JpZ2luTGVmdD9oOi1oLGk9ay5pc09yaWdpblRvcD9pOi1pLGoudHJhbnNmb3JtPXAoaCxpKSx0aGlzLnRyYW5zaXRpb24oe3RvOmosb25UcmFuc2l0aW9uRW5kOnt0cmFuc2Zvcm06dGhpcy5sYXlvdXRQb3NpdGlvbn0saXNDbGVhbmluZzohMH0pfSxoLnByb3RvdHlwZS5nb1RvPWZ1bmN0aW9uKGEsYil7dGhpcy5zZXRQb3NpdGlvbihhLGIpLHRoaXMubGF5b3V0UG9zaXRpb24oKX0saC5wcm90b3R5cGUubW92ZVRvPWs/aC5wcm90b3R5cGUuX3RyYW5zaXRpb25UbzpoLnByb3RvdHlwZS5nb1RvLGgucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKGEsYil7dGhpcy5wb3NpdGlvbi54PXBhcnNlSW50KGEsMTApLHRoaXMucG9zaXRpb24ueT1wYXJzZUludChiLDEwKX0saC5wcm90b3R5cGUuX25vblRyYW5zaXRpb249ZnVuY3Rpb24oYSl7dGhpcy5jc3MoYS50byksYS5pc0NsZWFuaW5nJiZ0aGlzLl9yZW1vdmVTdHlsZXMoYS50byk7Zm9yKHZhciBiIGluIGEub25UcmFuc2l0aW9uRW5kKWEub25UcmFuc2l0aW9uRW5kW2JdLmNhbGwodGhpcyl9LGgucHJvdG90eXBlLl90cmFuc2l0aW9uPWZ1bmN0aW9uKGEpe2lmKCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLl9ub25UcmFuc2l0aW9uKGEpO3ZhciBiPXRoaXMuX3RyYW5zbjtmb3IodmFyIGMgaW4gYS5vblRyYW5zaXRpb25FbmQpYi5vbkVuZFtjXT1hLm9uVHJhbnNpdGlvbkVuZFtjXTtmb3IoYyBpbiBhLnRvKWIuaW5nUHJvcGVydGllc1tjXT0hMCxhLmlzQ2xlYW5pbmcmJihiLmNsZWFuW2NdPSEwKTtpZihhLmZyb20pe3RoaXMuY3NzKGEuZnJvbSk7dmFyIGQ9dGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtkPW51bGx9dGhpcy5lbmFibGVUcmFuc2l0aW9uKGEudG8pLHRoaXMuY3NzKGEudG8pLHRoaXMuaXNUcmFuc2l0aW9uaW5nPSEwfTt2YXIgcT1qJiZkKGopK1wiLG9wYWNpdHlcIjtoLnByb3RvdHlwZS5lbmFibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5pc1RyYW5zaXRpb25pbmd8fCh0aGlzLmNzcyh7dHJhbnNpdGlvblByb3BlcnR5OnEsdHJhbnNpdGlvbkR1cmF0aW9uOnRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9ufSksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobSx0aGlzLCExKSl9LGgucHJvdG90eXBlLnRyYW5zaXRpb249aC5wcm90b3R5cGVbaT9cIl90cmFuc2l0aW9uXCI6XCJfbm9uVHJhbnNpdGlvblwiXSxoLnByb3RvdHlwZS5vbndlYmtpdFRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYSl7dGhpcy5vbnRyYW5zaXRpb25lbmQoYSl9LGgucHJvdG90eXBlLm9ub3RyYW5zaXRpb25lbmQ9ZnVuY3Rpb24oYSl7dGhpcy5vbnRyYW5zaXRpb25lbmQoYSl9O3ZhciByPXtcIi13ZWJraXQtdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIixcIi1tb3otdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIixcIi1vLXRyYW5zZm9ybVwiOlwidHJhbnNmb3JtXCJ9O2gucHJvdG90eXBlLm9udHJhbnNpdGlvbmVuZD1mdW5jdGlvbihhKXtpZihhLnRhcmdldD09PXRoaXMuZWxlbWVudCl7dmFyIGI9dGhpcy5fdHJhbnNuLGQ9clthLnByb3BlcnR5TmFtZV18fGEucHJvcGVydHlOYW1lO2lmKGRlbGV0ZSBiLmluZ1Byb3BlcnRpZXNbZF0sYyhiLmluZ1Byb3BlcnRpZXMpJiZ0aGlzLmRpc2FibGVUcmFuc2l0aW9uKCksZCBpbiBiLmNsZWFuJiYodGhpcy5lbGVtZW50LnN0eWxlW2EucHJvcGVydHlOYW1lXT1cIlwiLGRlbGV0ZSBiLmNsZWFuW2RdKSxkIGluIGIub25FbmQpe3ZhciBlPWIub25FbmRbZF07ZS5jYWxsKHRoaXMpLGRlbGV0ZSBiLm9uRW5kW2RdfXRoaXMuZW1pdEV2ZW50KFwidHJhbnNpdGlvbkVuZFwiLFt0aGlzXSl9fSxoLnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG0sdGhpcywhMSksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITF9LGgucHJvdG90eXBlLl9yZW1vdmVTdHlsZXM9ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT1cIlwiO3RoaXMuY3NzKGIpfTt2YXIgcz17dHJhbnNpdGlvblByb3BlcnR5OlwiXCIsdHJhbnNpdGlvbkR1cmF0aW9uOlwiXCJ9O3JldHVybiBoLnByb3RvdHlwZS5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3Mocyl9LGgucHJvdG90eXBlLnJlbW92ZUVsZW09ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZW1pdEV2ZW50KFwicmVtb3ZlXCIsW3RoaXNdKX0saC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoIWl8fCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUVsZW0oKTt2YXIgYT10aGlzO3RoaXMub24oXCJ0cmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW1vdmVFbGVtKCksITB9KSx0aGlzLmhpZGUoKX0saC5wcm90b3R5cGUucmV2ZWFsPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuaXNIaWRkZW4sdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEuaGlkZGVuU3R5bGUsdG86YS52aXNpYmxlU3R5bGUsaXNDbGVhbmluZzohMH0pfSxoLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIGE9dGhpcy5sYXlvdXQub3B0aW9uczt0aGlzLnRyYW5zaXRpb24oe2Zyb206YS52aXNpYmxlU3R5bGUsdG86YS5oaWRkZW5TdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDp7b3BhY2l0eTpmdW5jdGlvbigpe3RoaXMuaXNIaWRkZW4mJnRoaXMuY3NzKHtkaXNwbGF5Olwibm9uZVwifSl9fX0pfSxoLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jc3Moe3Bvc2l0aW9uOlwiXCIsbGVmdDpcIlwiLHJpZ2h0OlwiXCIsdG9wOlwiXCIsYm90dG9tOlwiXCIsdHJhbnNpdGlvbjpcIlwiLHRyYW5zZm9ybTpcIlwifSl9LGh9dmFyIGY9YS5nZXRDb21wdXRlZFN0eWxlLGc9Zj9mdW5jdGlvbihhKXtyZXR1cm4gZihhLG51bGwpfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9pdGVtXCIsW1wiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHlcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpLHJlcXVpcmUoXCJkZXNhbmRyby1nZXQtc3R5bGUtcHJvcGVydHlcIikpOihhLk91dGxheWVyPXt9LGEuT3V0bGF5ZXIuSXRlbT1lKGEuRXZlbnRFbWl0dGVyLGEuZ2V0U2l6ZSxhLmdldFN0eWxlUHJvcGVydHkpKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09bC5jYWxsKGEpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9W107aWYoYyhhKSliPWE7ZWxzZSBpZihhJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGgpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWIucHVzaChhW2RdKTtlbHNlIGIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBlKGEsYil7dmFyIGM9bihiLGEpOy0xIT09YyYmYi5zcGxpY2UoYywxKX1mdW5jdGlvbiBmKGEpe3JldHVybiBhLnJlcGxhY2UoLyguKShbQS1aXSkvZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIrXCItXCIrY30pLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZyhjLGcsbCxuLG8scCl7ZnVuY3Rpb24gcShhLGMpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1oLnF1ZXJ5U2VsZWN0b3IoYSkpLCFhfHwhbShhKSlyZXR1cm4gdm9pZChpJiZpLmVycm9yKFwiQmFkIFwiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlK1wiIGVsZW1lbnQ6IFwiK2EpKTt0aGlzLmVsZW1lbnQ9YSx0aGlzLm9wdGlvbnM9Yih7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihjKTt2YXIgZD0rK3I7dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRD1kLHNbZF09dGhpcyx0aGlzLl9jcmVhdGUoKSx0aGlzLm9wdGlvbnMuaXNJbml0TGF5b3V0JiZ0aGlzLmxheW91dCgpfXZhciByPTAscz17fTtyZXR1cm4gcS5uYW1lc3BhY2U9XCJvdXRsYXllclwiLHEuSXRlbT1wLHEuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGlzSW5pdExheW91dDohMCxpc09yaWdpbkxlZnQ6ITAsaXNPcmlnaW5Ub3A6ITAsaXNSZXNpemVCb3VuZDohMCxpc1Jlc2l6aW5nQ29udGFpbmVyOiEwLHRyYW5zaXRpb25EdXJhdGlvbjpcIjAuNHNcIixoaWRkZW5TdHlsZTp7b3BhY2l0eTowLHRyYW5zZm9ybTpcInNjYWxlKDAuMDAxKVwifSx2aXNpYmxlU3R5bGU6e29wYWNpdHk6MSx0cmFuc2Zvcm06XCJzY2FsZSgxKVwifX0sYihxLnByb3RvdHlwZSxsLnByb3RvdHlwZSkscS5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGEpe2IodGhpcy5vcHRpb25zLGEpfSxxLnByb3RvdHlwZS5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5yZWxvYWRJdGVtcygpLHRoaXMuc3RhbXBzPVtdLHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSxiKHRoaXMuZWxlbWVudC5zdHlsZSx0aGlzLm9wdGlvbnMuY29udGFpbmVyU3R5bGUpLHRoaXMub3B0aW9ucy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLmJpbmRSZXNpemUoKX0scS5wcm90b3R5cGUucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0scS5wcm90b3R5cGUuX2l0ZW1pemU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMoYSksYz10aGlzLmNvbnN0cnVjdG9yLkl0ZW0sZD1bXSxlPTAsZj1iLmxlbmd0aDtmPmU7ZSsrKXt2YXIgZz1iW2VdLGg9bmV3IGMoZyx0aGlzKTtkLnB1c2goaCl9cmV0dXJuIGR9LHEucHJvdG90eXBlLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKGEpe2E9ZChhKTtmb3IodmFyIGI9dGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcixjPVtdLGU9MCxmPWEubGVuZ3RoO2Y+ZTtlKyspe3ZhciBnPWFbZV07aWYobShnKSlpZihiKXtvKGcsYikmJmMucHVzaChnKTtmb3IodmFyIGg9Zy5xdWVyeVNlbGVjdG9yQWxsKGIpLGk9MCxqPWgubGVuZ3RoO2o+aTtpKyspYy5wdXNoKGhbaV0pfWVsc2UgYy5wdXNoKGcpfXJldHVybiBjfSxxLnByb3RvdHlwZS5nZXRJdGVtRWxlbWVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKylhLnB1c2godGhpcy5pdGVtc1tiXS5lbGVtZW50KTtyZXR1cm4gYX0scS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgYT12b2lkIDAhPT10aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50P3RoaXMub3B0aW9ucy5pc0xheW91dEluc3RhbnQ6IXRoaXMuX2lzTGF5b3V0SW5pdGVkO3RoaXMubGF5b3V0SXRlbXModGhpcy5pdGVtcyxhKSx0aGlzLl9pc0xheW91dEluaXRlZD0hMH0scS5wcm90b3R5cGUuX2luaXQ9cS5wcm90b3R5cGUubGF5b3V0LHEucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpfSxxLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPW4odGhpcy5lbGVtZW50KX0scS5wcm90b3R5cGUuX2dldE1lYXN1cmVtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLm9wdGlvbnNbYV07ZD8oXCJzdHJpbmdcIj09dHlwZW9mIGQ/Yz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihkKTptKGQpJiYoYz1kKSx0aGlzW2FdPWM/bihjKVtiXTpkKTp0aGlzW2FdPTB9LHEucHJvdG90eXBlLmxheW91dEl0ZW1zPWZ1bmN0aW9uKGEsYil7YT10aGlzLl9nZXRJdGVtc0ZvckxheW91dChhKSx0aGlzLl9sYXlvdXRJdGVtcyhhLGIpLHRoaXMuX3Bvc3RMYXlvdXQoKX0scS5wcm90b3R5cGUuX2dldEl0ZW1zRm9yTGF5b3V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2UuaXNJZ25vcmVkfHxiLnB1c2goZSl9cmV0dXJuIGJ9LHEucHJvdG90eXBlLl9sYXlvdXRJdGVtcz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtkLmVtaXRFdmVudChcImxheW91dENvbXBsZXRlXCIsW2QsYV0pfXZhciBkPXRoaXM7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdm9pZCBjKCk7dGhpcy5faXRlbXNPbihhLFwibGF5b3V0XCIsYyk7Zm9yKHZhciBlPVtdLGY9MCxnPWEubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWFbZl0saT10aGlzLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24oaCk7aS5pdGVtPWgsaS5pc0luc3RhbnQ9Ynx8aC5pc0xheW91dEluc3RhbnQsZS5wdXNoKGkpfXRoaXMuX3Byb2Nlc3NMYXlvdXRRdWV1ZShlKX0scS5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0scS5wcm90b3R5cGUuX3Byb2Nlc3NMYXlvdXRRdWV1ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWFbYl07dGhpcy5fcG9zaXRpb25JdGVtKGQuaXRlbSxkLngsZC55LGQuaXNJbnN0YW50KX19LHEucHJvdG90eXBlLl9wb3NpdGlvbkl0ZW09ZnVuY3Rpb24oYSxiLGMsZCl7ZD9hLmdvVG8oYixjKTphLm1vdmVUbyhiLGMpfSxxLnByb3RvdHlwZS5fcG9zdExheW91dD1mdW5jdGlvbigpe3RoaXMucmVzaXplQ29udGFpbmVyKCl9LHEucHJvdG90eXBlLnJlc2l6ZUNvbnRhaW5lcj1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5pc1Jlc2l6aW5nQ29udGFpbmVyKXt2YXIgYT10aGlzLl9nZXRDb250YWluZXJTaXplKCk7YSYmKHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoYS53aWR0aCwhMCksdGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShhLmhlaWdodCwhMSkpfX0scS5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ayxxLnByb3RvdHlwZS5fc2V0Q29udGFpbmVyTWVhc3VyZT1mdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWEpe3ZhciBjPXRoaXMuc2l6ZTtjLmlzQm9yZGVyQm94JiYoYSs9Yj9jLnBhZGRpbmdMZWZ0K2MucGFkZGluZ1JpZ2h0K2MuYm9yZGVyTGVmdFdpZHRoK2MuYm9yZGVyUmlnaHRXaWR0aDpjLnBhZGRpbmdCb3R0b20rYy5wYWRkaW5nVG9wK2MuYm9yZGVyVG9wV2lkdGgrYy5ib3JkZXJCb3R0b21XaWR0aCksYT1NYXRoLm1heChhLDApLHRoaXMuZWxlbWVudC5zdHlsZVtiP1wid2lkdGhcIjpcImhlaWdodFwiXT1hK1wicHhcIn19LHEucHJvdG90eXBlLl9pdGVtc09uPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7cmV0dXJuIGUrKyxlPT09ZiYmYy5jYWxsKGcpLCEwfWZvcih2YXIgZT0wLGY9YS5sZW5ndGgsZz10aGlzLGg9MCxpPWEubGVuZ3RoO2k+aDtoKyspe3ZhciBqPWFbaF07ai5vbihiLGQpfX0scS5wcm90b3R5cGUuaWdub3JlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SXRlbShhKTtiJiYoYi5pc0lnbm9yZWQ9ITApfSxxLnByb3RvdHlwZS51bmlnbm9yZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEl0ZW0oYSk7YiYmZGVsZXRlIGIuaXNJZ25vcmVkfSxxLnByb3RvdHlwZS5zdGFtcD1mdW5jdGlvbihhKXtpZihhPXRoaXMuX2ZpbmQoYSkpe3RoaXMuc3RhbXBzPXRoaXMuc3RhbXBzLmNvbmNhdChhKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWFbYl07dGhpcy5pZ25vcmUoZCl9fX0scS5wcm90b3R5cGUudW5zdGFtcD1mdW5jdGlvbihhKXtpZihhPXRoaXMuX2ZpbmQoYSkpZm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO2UoZCx0aGlzLnN0YW1wcyksdGhpcy51bmlnbm9yZShkKX19LHEucHJvdG90eXBlLl9maW5kPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYSkpLGE9ZChhKSk6dm9pZCAwfSxxLnByb3RvdHlwZS5fbWFuYWdlU3RhbXBzPWZ1bmN0aW9uKCl7aWYodGhpcy5zdGFtcHMmJnRoaXMuc3RhbXBzLmxlbmd0aCl7dGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCk7Zm9yKHZhciBhPTAsYj10aGlzLnN0YW1wcy5sZW5ndGg7Yj5hO2ErKyl7dmFyIGM9dGhpcy5zdGFtcHNbYV07dGhpcy5fbWFuYWdlU3RhbXAoYyl9fX0scS5wcm90b3R5cGUuX2dldEJvdW5kaW5nUmVjdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxiPXRoaXMuc2l6ZTt0aGlzLl9ib3VuZGluZ1JlY3Q9e2xlZnQ6YS5sZWZ0K2IucGFkZGluZ0xlZnQrYi5ib3JkZXJMZWZ0V2lkdGgsdG9wOmEudG9wK2IucGFkZGluZ1RvcCtiLmJvcmRlclRvcFdpZHRoLHJpZ2h0OmEucmlnaHQtKGIucGFkZGluZ1JpZ2h0K2IuYm9yZGVyUmlnaHRXaWR0aCksYm90dG9tOmEuYm90dG9tLShiLnBhZGRpbmdCb3R0b20rYi5ib3JkZXJCb3R0b21XaWR0aCl9fSxxLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ayxxLnByb3RvdHlwZS5fZ2V0RWxlbWVudE9mZnNldD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9dGhpcy5fYm91bmRpbmdSZWN0LGQ9bihhKSxlPXtsZWZ0OmIubGVmdC1jLmxlZnQtZC5tYXJnaW5MZWZ0LHRvcDpiLnRvcC1jLnRvcC1kLm1hcmdpblRvcCxyaWdodDpjLnJpZ2h0LWIucmlnaHQtZC5tYXJnaW5SaWdodCxib3R0b206Yy5ib3R0b20tYi5ib3R0b20tZC5tYXJnaW5Cb3R0b219O3JldHVybiBlfSxxLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj1cIm9uXCIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LHEucHJvdG90eXBlLmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmR8fChjLmJpbmQoYSxcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMCl9LHEucHJvdG90eXBlLnVuYmluZFJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNSZXNpemVCb3VuZCYmYy51bmJpbmQoYSxcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMX0scS5wcm90b3R5cGUub25yZXNpemU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Yi5yZXNpemUoKSxkZWxldGUgYi5yZXNpemVUaW1lb3V0fXRoaXMucmVzaXplVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7dmFyIGI9dGhpczt0aGlzLnJlc2l6ZVRpbWVvdXQ9c2V0VGltZW91dChhLDEwMCl9LHEucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNSZXNpemVCb3VuZCYmdGhpcy5uZWVkc1Jlc2l6ZUxheW91dCgpJiZ0aGlzLmxheW91dCgpfSxxLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPW4odGhpcy5lbGVtZW50KSxiPXRoaXMuc2l6ZSYmYTtyZXR1cm4gYiYmYS5pbm5lcldpZHRoIT09dGhpcy5zaXplLmlubmVyV2lkdGh9LHEucHJvdG90eXBlLmFkZEl0ZW1zPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2l0ZW1pemUoYSk7cmV0dXJuIGIubGVuZ3RoJiYodGhpcy5pdGVtcz10aGlzLml0ZW1zLmNvbmNhdChiKSksYn0scS5wcm90b3R5cGUuYXBwZW5kZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hZGRJdGVtcyhhKTtiLmxlbmd0aCYmKHRoaXMubGF5b3V0SXRlbXMoYiwhMCksdGhpcy5yZXZlYWwoYikpfSxxLnByb3RvdHlwZS5wcmVwZW5kZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5faXRlbWl6ZShhKTtpZihiLmxlbmd0aCl7dmFyIGM9dGhpcy5pdGVtcy5zbGljZSgwKTt0aGlzLml0ZW1zPWIuY29uY2F0KGMpLHRoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCksdGhpcy5sYXlvdXRJdGVtcyhiLCEwKSx0aGlzLnJldmVhbChiKSx0aGlzLmxheW91dEl0ZW1zKGMpfX0scS5wcm90b3R5cGUucmV2ZWFsPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEubGVuZ3RoO2lmKGIpZm9yKHZhciBjPTA7Yj5jO2MrKyl7dmFyIGQ9YVtjXTtkLnJldmVhbCgpfX0scS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihhKXt2YXIgYj1hJiZhLmxlbmd0aDtpZihiKWZvcih2YXIgYz0wO2I+YztjKyspe3ZhciBkPWFbY107ZC5oaWRlKCl9fSxxLnByb3RvdHlwZS5nZXRJdGVtPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5pdGVtc1tiXTtpZihkLmVsZW1lbnQ9PT1hKXJldHVybiBkfX0scS5wcm90b3R5cGUuZ2V0SXRlbXM9ZnVuY3Rpb24oYSl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdLGY9dGhpcy5nZXRJdGVtKGUpO2YmJmIucHVzaChmKX1yZXR1cm4gYn19LHEucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXthPWQoYSk7dmFyIGI9dGhpcy5nZXRJdGVtcyhhKTtpZihiJiZiLmxlbmd0aCl7dGhpcy5faXRlbXNPbihiLFwicmVtb3ZlXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXRFdmVudChcInJlbW92ZUNvbXBsZXRlXCIsW3RoaXMsYl0pfSk7Zm9yKHZhciBjPTAsZj1iLmxlbmd0aDtmPmM7YysrKXt2YXIgZz1iW2NdO2cucmVtb3ZlKCksZShnLHRoaXMuaXRlbXMpfX19LHEucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQuc3R5bGU7YS5oZWlnaHQ9XCJcIixhLnBvc2l0aW9uPVwiXCIsYS53aWR0aD1cIlwiO2Zvcih2YXIgYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5pdGVtc1tiXTtkLmRlc3Ryb3koKX10aGlzLnVuYmluZFJlc2l6ZSgpO3ZhciBlPXRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7ZGVsZXRlIHNbZV0sZGVsZXRlIHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQsaiYmai5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCx0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZSl9LHEuZGF0YT1mdW5jdGlvbihhKXt2YXIgYj1hJiZhLm91dGxheWVyR1VJRDtyZXR1cm4gYiYmc1tiXX0scS5jcmVhdGU9ZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKCl7cS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIE9iamVjdC5jcmVhdGU/ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShxLnByb3RvdHlwZSk6YihkLnByb3RvdHlwZSxxLnByb3RvdHlwZSksZC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZCxkLmRlZmF1bHRzPWIoe30scS5kZWZhdWx0cyksYihkLmRlZmF1bHRzLGMpLGQucHJvdG90eXBlLnNldHRpbmdzPXt9LGQubmFtZXNwYWNlPWEsZC5kYXRhPXEuZGF0YSxkLkl0ZW09ZnVuY3Rpb24oKXtwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5JdGVtLnByb3RvdHlwZT1uZXcgcCxnKGZ1bmN0aW9uKCl7Zm9yKHZhciBiPWYoYSksYz1oLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtXCIrYiksZT1cImRhdGEtXCIrYitcIi1vcHRpb25zXCIsZz0wLGs9Yy5sZW5ndGg7az5nO2crKyl7dmFyIGwsbT1jW2ddLG49bS5nZXRBdHRyaWJ1dGUoZSk7dHJ5e2w9biYmSlNPTi5wYXJzZShuKX1jYXRjaChvKXtpJiZpLmVycm9yKFwiRXJyb3IgcGFyc2luZyBcIitlK1wiIG9uIFwiK20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSsobS5pZD9cIiNcIittLmlkOlwiXCIpK1wiOiBcIitvKTtjb250aW51ZX12YXIgcD1uZXcgZChtLGwpO2omJmouZGF0YShtLGEscCl9fSksaiYmai5icmlkZ2V0JiZqLmJyaWRnZXQoYSxkKSxkfSxxLkl0ZW09cCxxfXZhciBoPWEuZG9jdW1lbnQsaT1hLmNvbnNvbGUsaj1hLmpRdWVyeSxrPWZ1bmN0aW9uKCl7fSxsPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBIVE1MRWxlbWVudHx8XCJvYmplY3RcIj09dHlwZW9mIEhUTUxFbGVtZW50P2Z1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgSFRNTEVsZW1lbnR9OmZ1bmN0aW9uKGEpe3JldHVybiBhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmMT09PWEubm9kZVR5cGUmJlwic3RyaW5nXCI9PXR5cGVvZiBhLm5vZGVOYW1lfSxuPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKX06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9vdXRsYXllclwiLFtcImV2ZW50aWUvZXZlbnRpZVwiLFwiZG9jLXJlYWR5L2RvYy1yZWFkeVwiLFwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcIm1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLFwiLi9pdGVtXCJdLGcpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWcocmVxdWlyZShcImV2ZW50aWVcIikscmVxdWlyZShcImRvYy1yZWFkeVwiKSxyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpLHJlcXVpcmUoXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yXCIpLHJlcXVpcmUoXCIuL2l0ZW1cIikpOmEuT3V0bGF5ZXI9ZyhhLmV2ZW50aWUsYS5kb2NSZWFkeSxhLkV2ZW50RW1pdHRlcixhLmdldFNpemUsYS5tYXRjaGVzU2VsZWN0b3IsYS5PdXRsYXllci5JdGVtKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGQ9YS5jcmVhdGUoXCJtYXNvbnJ5XCIpO3JldHVybiBkLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcImNvbHVtbldpZHRoXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMubWVhc3VyZUNvbHVtbnMoKTt2YXIgYT10aGlzLmNvbHM7Zm9yKHRoaXMuY29sWXM9W107YS0tOyl0aGlzLmNvbFlzLnB1c2goMCk7dGhpcy5tYXhZPTB9LGQucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5zPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRDb250YWluZXJXaWR0aCgpLCF0aGlzLmNvbHVtbldpZHRoKXt2YXIgYT10aGlzLml0ZW1zWzBdLGM9YSYmYS5lbGVtZW50O3RoaXMuY29sdW1uV2lkdGg9YyYmYihjKS5vdXRlcldpZHRofHx0aGlzLmNvbnRhaW5lcldpZHRofXRoaXMuY29sdW1uV2lkdGgrPXRoaXMuZ3V0dGVyLHRoaXMuY29scz1NYXRoLmZsb29yKCh0aGlzLmNvbnRhaW5lcldpZHRoK3RoaXMuZ3V0dGVyKS90aGlzLmNvbHVtbldpZHRoKSx0aGlzLmNvbHM9TWF0aC5tYXgodGhpcy5jb2xzLDEpfSxkLnByb3RvdHlwZS5nZXRDb250YWluZXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoP3RoaXMuZWxlbWVudC5wYXJlbnROb2RlOnRoaXMuZWxlbWVudCxjPWIoYSk7dGhpcy5jb250YWluZXJXaWR0aD1jJiZjLmlubmVyV2lkdGh9LGQucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oYSl7YS5nZXRTaXplKCk7dmFyIGI9YS5zaXplLm91dGVyV2lkdGgldGhpcy5jb2x1bW5XaWR0aCxkPWImJjE+Yj9cInJvdW5kXCI6XCJjZWlsXCIsZT1NYXRoW2RdKGEuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO2U9TWF0aC5taW4oZSx0aGlzLmNvbHMpO2Zvcih2YXIgZj10aGlzLl9nZXRDb2xHcm91cChlKSxnPU1hdGgubWluLmFwcGx5KE1hdGgsZiksaD1jKGYsZyksaT17eDp0aGlzLmNvbHVtbldpZHRoKmgseTpnfSxqPWcrYS5zaXplLm91dGVySGVpZ2h0LGs9dGhpcy5jb2xzKzEtZi5sZW5ndGgsbD0wO2s+bDtsKyspdGhpcy5jb2xZc1toK2xdPWo7cmV0dXJuIGl9LGQucHJvdG90eXBlLl9nZXRDb2xHcm91cD1mdW5jdGlvbihhKXtpZigyPmEpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBiPVtdLGM9dGhpcy5jb2xzKzEtYSxkPTA7Yz5kO2QrKyl7dmFyIGU9dGhpcy5jb2xZcy5zbGljZShkLGQrYSk7YltkXT1NYXRoLm1heC5hcHBseShNYXRoLGUpfXJldHVybiBifSxkLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24oYSl7dmFyIGM9YihhKSxkPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQoYSksZT10aGlzLm9wdGlvbnMuaXNPcmlnaW5MZWZ0P2QubGVmdDpkLnJpZ2h0LGY9ZStjLm91dGVyV2lkdGgsZz1NYXRoLmZsb29yKGUvdGhpcy5jb2x1bW5XaWR0aCk7Zz1NYXRoLm1heCgwLGcpO3ZhciBoPU1hdGguZmxvb3IoZi90aGlzLmNvbHVtbldpZHRoKTtoLT1mJXRoaXMuY29sdW1uV2lkdGg/MDoxLGg9TWF0aC5taW4odGhpcy5jb2xzLTEsaCk7Zm9yKHZhciBpPSh0aGlzLm9wdGlvbnMuaXNPcmlnaW5Ub3A/ZC50b3A6ZC5ib3R0b20pK2Mub3V0ZXJIZWlnaHQsaj1nO2g+PWo7aisrKXRoaXMuY29sWXNbal09TWF0aC5tYXgoaSx0aGlzLmNvbFlzW2pdKX0sZC5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXt0aGlzLm1heFk9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLmNvbFlzKTt2YXIgYT17aGVpZ2h0OnRoaXMubWF4WX07cmV0dXJuIHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYoYS53aWR0aD10aGlzLl9nZXRDb250YWluZXJGaXRXaWR0aCgpKSxhfSxkLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuY29sczstLWImJjA9PT10aGlzLmNvbFlzW2JdOylhKys7cmV0dXJuKHRoaXMuY29scy1hKSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxkLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyV2lkdGg7cmV0dXJuIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSxhIT09dGhpcy5jb250YWluZXJXaWR0aH0sZH12YXIgYz1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOmEuTWFzb25yeT1iKGEuT3V0bGF5ZXIsYS5nZXRTaXplKX0od2luZG93KTtcblxuXG4vKiFcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBJbmZpbml0ZSBTY3JvbGxcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICArIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsaXJpc2gvaW5maW5pdGUtc2Nyb2xsXG4gICArIHZlcnNpb24gMi4xLjBcbiAgICsgQ29weXJpZ2h0IDIwMTEvMTIgUGF1bCBJcmlzaCAmIEx1a2UgU2h1bWFyZFxuICAgKyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcblxuICAgKyBEb2N1bWVudGF0aW9uOiBodHRwOi8vaW5maW5pdGUtc2Nyb2xsLmNvbS9cbiovXG47KGZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXCJqcXVlcnlcIl0sZSl9ZWxzZXtlKGpRdWVyeSl9fSkoZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtlLmluZmluaXRlc2Nyb2xsPWZ1bmN0aW9uKG4scixpKXt0aGlzLmVsZW1lbnQ9ZShpKTtpZighdGhpcy5fY3JlYXRlKG4scikpe3RoaXMuZmFpbGVkPXRydWV9fTtlLmluZmluaXRlc2Nyb2xsLmRlZmF1bHRzPXtsb2FkaW5nOntmaW5pc2hlZDp0LGZpbmlzaGVkTXNnOlwiPGVtPkNvbmdyYXR1bGF0aW9ucywgeW91J3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgaW50ZXJuZXQuPC9lbT5cIixpbWc6XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGgzQUFUQVBRZUFQRHkrTW5RNkxXLzROM2g4TXpUNnJqQzRzVE01ci9JNU5IWDdON2o4YzdVNnR2ZzhPTGw4dVhvOU9qcjliM0c1TWZQNk92dTl0UFo3UFQxK3ZYMit0YmI3dmY0KzgvVzY5amQ3ckM3M3ZuNS9PL3grSzI0M2FpMDIvLy8vd0FBQUNIL0MwNUZWRk5EUVZCRk1pNHdBd0VBQUFBaCtRUUVDZ0QvQUN3QUFBQUEzQUFUQUFBRi82QW5qbVJwbm1pcXJtenJ2bkFzejNSdDMzaXU3M3p2LzhDZ2NFajBCQVNjcEhMSmJEcWYwS2gwU3ExYXI5aXNkaW9JdEFLR3crTUFLWU1GaGJGNjNDVzQzOGYwbWcxUjJPOEV1WGovYU9QdGFIeDdmbjk2Z29SNGhtdUlkNHFEZFg5NWM0K1JCSUdDQjR5QWpwbVFoWk4wWUdZR1hpdGRaQklWR0FzTG9xNEJCS1FEc3dtMUNRUmtjRzZ5dHJZS3VicTh2YmZBY01LOXY3cTdFTU8xeWNySHZzVzZ6Y1RLc2N6Tno4SFp3OXZHM2NqVHNNSVlxUWtDTEJ3SENnc01EUTRSREFZSXFmWVNGeER4RWZ6ODgvWDM4T25yMTYrQnA0QURDY283ZUM4aFFZTUFFZTU3eU5DZXc0SVZCVTdFR05EaVJuOFo4MzFjR0xIaFNJZ2RGZjljaEllQmc3b0E3Z2phV1VXVFZRQUdFM0xxQkRDVGxjOVdPSGZtN1BrVHFOQ2g1NHJlUERxQjZNK2xSNTM2aENwVXFzMmdWWk0reGJyVHF0R29XcWR5MWVtVmFsZVhLemdnWUJCQjV5MWFjRk5abUV2WEFvTjJjR2ZKclR2M2JsNjlGZmoyeFp0M0wxKy9mdzNYUlZ3NHNHREdjUjBmSmh4WnNGM0t0QlRUaFp4WjhtTE1nQzNmUmF0Q2JZTU5GQ3p3TEVxTGdFNE5zRFdzL3R2cWRlelpmMTNIdmsyQTlTemR1MlgzcGcxOE4rNjh4WG43cmgxYytQTGtzSS9EaGU2Y3VPM293M05mVjkyYmRBclRxQzJFYmQzQTh2amY1UVdmSDZCZzdOejE3YzJmajY5K2ZucSs4TjJMdHkrZnVQNzgvZVYyWDEzbmVJY0NlQlJ3eG9yYlpyQTFBTm9DREdyZ29HOFJUc2hhaFE5aVNLRUV6VW1ZSVlmTldWaVVoaGVDR0p5SVA1RTRvb203V1dqZ0NlQkZBSk52MURWVjAxTUFkSmhoamRrcGxXTnpPLzVvWEk4NDZuampWRUlxUjJPUzJCMXBFNVBWc2Nhamt4aE15Y3FMSmdoUVN3VDQwUGdmQWw0R3FOU1hZZFpYSm41Z1NrbW1tbUp1MWFaWWIxNFY1MWRvK3BUT0NtQTQwQXFWQ0loRzVJSjlQdlluaElGT3htZHFocGFJNkdlSEN0cG9vaXN1dXRtZytFZzYyS09NS3Vxb1RhWGdpY1FXb0lZcTZxaWtsbW9xRlYwVW9lcXFyTGJxNnF1d3hpcnJyTFRXYXV1dEo0UUFBQ0g1QkFVS0FCd0FMQWNBQkFET0FBc0FBQVgvSVBkMEQyZHlSQ29VcC9rOGdwSE9LdHNlUjl5aVNtR2J1QnlrbGVyOVhMQWhrYkRhdlhUTDVrMm9xRnFOT3h6VVpQVTVZWVpkMVhzRDcyclpwQmpiZWg1Mm1TTm5NU0M4bHdibEtaR3dpKzBRZklKOENuY25Db0NEZ29WbkJIbUtmQnlHSmltUGtJd3RpQWVCa0g2WkhKYUttQ2VWbktLVEhJaWhnNUtOcTR1b3FtRXRjUlV0RVJFTUJnZ3RFcjRRRHJqQ3VSQzhoNy9Cd3hFTmVpY1NGOERLeTgycHlOTE1PeHpXeWd6Rm1kdkQyTDNQMGR6ZTQrWGgxQXJreWVwaTdkZkZ2dlR0TFFrWkJDMFQvRlgzQ1JnQ01PQkhzSitFSFlRWTdPaW5BR0VDZ1FzQitMdTNBT0srQ2V3Y1dqd3hRZUpCaWh0TkdIU29RT0UraVEzLy80WGt3QkJoUlpNY1VTNllTWE9Bd0lMOFBHcUVhU0pDaVl0OVNOb0NtbkpQQWdVVkxDaGRhb0ZCVVJOOE1BemwyUFFwaHdRTGZERmQ2bFRvd2dsSHZlNnJLcGJqaEs3L3BHNVZpblpQMXFraXoxcmw0K3RyMkxSd1dVNjRjRkVpaHdFdFpnYmdSMVVpSGFNVnZ4cE9Td0JBMzdrekd6OWU4RytCNU1JRUtMdXRPR0VzQUgyQVRRd1lmVG11WDhhRVRXZEdQWm1pWmNjY05TemVUQ0ExU3cwYmRpaXRDN0xCV2d1OGpRcjhIUnpxZ3BLNmdYODhRYnJCMTR6L2tGK0VMcHdCOGVWUWovSmtxZHlsQXVkamkvK3RzMzAzOXZFRWZLOFZ6MmRsdnhaS0cwQ21ia0tEQnZsbFJkNmZDekR2QkxLQkRTQ2VmZmhSSkVGZWJGazFrL012OWpWSW9JSlpTZUJnZ3dVYU5lQitRazM0SUUwY1hsaWhjZlJ4a09BSkZGaHdHbUtsbVdEaWFrWmhVSnRuTEJwbldXY25LYUFaY3hJMHBpRkdHTEJtMW1jOTBrYWpTQ3ZlZUJWV0tlWUVvVTJ3cWVhUWkwUGV0b0UrcnIxNEVwVkM3b0FiQVVIcWhZRXhibjJYSEhzVnFiY1Zldzl0eDgrWEpLazVBWnNxcWRsZGRHcHFBS2RiQVlCbjFwY2N6bVNUZFd2ZG1aMTdjMWIzRlo5OXZuVGRDUkZNOE9FY0FoTHdtMU5kWG5XY0JCU01SV21ma1dacVZsc21MSWlBcC9vMWdHVjJ2cFM0bGFsR1lzVU9xWHJkZGNLQ21LNjFhWjhTakVwVXBWRlZvQ3BUajRyNjYxS203a0JIanJEeWMxUkFJUUFBSWZrRUJRb0FHd0FzQndBRUFNNEFDd0FBQmYvZ3RtVUNkNGdvUVFnRktqNlBZS2kweXJyYmM4aTRvaFF0MTJFSGNhbCtNTlNRaUNQOGdpZ2R6N2lDaW9hQ0l2VW1aTHA4UUJ6VzBFTjJ2U2xDdUR0RkthcTRSeUh6UUxFS1pOZGlRRGhSRFZvb0N3a2JmbTU5RUFtS2k0U0dJbStBaklzS2poc3FCNG1TalQySU9JT1VuSUNlQ2FCL21aS0ZOVFNSbXFWcG1KcWtsU3Fza3E2UGZZWUNEd1lIREM0UkVRd0dDQkxHeHhJUURzSE13aEFJWDhiS3pjRU5nU0xHRjlQVTFqM1N5OXpYMk5yZ3pRemlDaExrMUJIV3hjamY3TjA0NnR2TjgyNzE1Y3puOVByeXo2SWxjNEFDajRFQk9DWk04S0VuQVlZQURCUktuQUNBWVVNRnYxd290SWhDRWNhSkNpc3F3SkZnQVVTUUd5WC9rQ1NWVVVUSWRLTXdKbHlvMG9YSGxoc2t3clRKY2laSEVYc2dhcVM0czZQSmlDQXIxdXpZVThrQkJTZ25XRnFwb01KTVVqR3REbVV3a21mVm1WeXBha1doRUt2WHNTNG5oTFc1d05qVnJvSklvYzA1d1N6VHIwUHRpaWdwWWU0RUMydmo0aVdyRnU1ZXVXSU1SQmhhY2FWSmhZUUJFRmpBOWpIanlRMHhFQUJ3R2NlR0FaWWpZMFlCT3JSTEN4VXAyOVFNK2JSa3g1czdaeVlnVmJUcXd3dGkyeWJKK3ZMdERZcHljeVpiWU9scHR4ZHgwa1YrVjdsQzVpSkF5eVJyd1lLeEFkaXo4Mm5nMC9qbkFkTUpGejBjUGkxMDRFYzFWajkvTTZGMTczdktML2ZlWHYxNTZkdzExdGxxZU1NbnY0VjVBcDUzR21qUVFIOTduRmZnK0lGaXVjZmdSWDVaOEtBZ2JVbFE0SVVMSWxnaGhoZE9TQjZBZ1gwSVZuOGVSZWdoZW4zTlJJQnNSZ25INGw0THVFaWRaQmp3UnB0Nk5NNVdHd29XMEtTakN3WDZ5SlNNYWIyR3d3QVBEWGZhQkN0V3BsdVJUUXFDNUpNNW9VWkFqVU5TK1ZlT0xXcEpFUTdWWVFBTlcwSU5KU1pWREZTblpwaGpTaWtmbXpFNU40RUViUUkxUUptbldYQ21IdWxScDJlZHdEWEY0M3R4dWtlbkp3dkk5eHlnOVEyNlozTXpHVWNCWUZFQ2haaDZEVlRxMzRBVThJZmxoNTFTZCtDbktGWVE2bW1aa2hxZkJLZlN4WldxQTlEWmFuV2p4bWhyV3dpMHF0Q3J0LzQzSzZXcVZqanBtaElxZ0VHdmN1bGFHS2tsS3N0QUFDRUFBQ0g1QkFVS0FCd0FMQWNBQkFET0FBc0FBQVgvSUNkeVFtYU1ZeUFVcVBnSUJpSFB4TnB5NzlrcVJYSDh3QVBzUm1EZFhwQVdnV2RFSVltMmxsQ0hxalZIVStqakprd3FCVGVjd0l0U2hNWGtFZk5XU2g4ZTFOR0FjTGdwREdsUmdrN0VKLzZBZTNWS2ZvRi9mRHVGaG9oVmVEZUNmWGtjQ1FxRFZRY1FobitWTkRPWW1wU1dhb3FCbFVTZm1vd2pFQStpRUFFR0RSR3p0QXdHQ0RjWEVBNjB0WEVpQ3JxOHZSRU1FQkxJeVJMQ3hNV1NITXpFeG5iUnZRMlN5N3ZOMHp2VnROZlUydExZM3JQZ0xkbkR2Y2E0VlFTL0NwazNBQndTTFFrWUFRd1QvUDMwOXZjSTdPdlhyOTRqQlFNSi9uc2trR0EvQlFCUkxORG5jQUlBaURjRzZMc3hBV09MaVF6bWVVUkJLV1NMQ1Fidi8xRjBlREdpbkpVS1I0N1lZMUlFZ1FBU0trN1ljN0FDUndabTdtSHdlUkpvejU5QkpVb2dpc0tDVWFGTVIweDRTbEpCVkJGVGs4cFppdlRSMEs3M3JONXdxbFhFQXE1RnkzSVlnSGJFelEwbkx5NFFTb0NqWExvb205NlZPSkVlQ29zSzVuNGtrRmZxWGpsOTR3YStsMWd2QWNHSUNiZXdBT0F4WThsL0t5L1FoQUd6NGNVa0d4dTJITm96aHdNR0JuQ1VxVWRCZzlVdVc5ZVV5bnFTd0xISUJ1amVQZWYxWkdRWlhjTStPRnVFQmVCaGkzT1lnTHlxY3VheGJUOXZMa2Y0U2VxeVd4U1FwS0dCMmdRcG0xS2RXYnU3MnJQUnpSOU5lMk51OUt6ci8xSnFqMHlEL2Z2cVA0YVhPdDVzVy81cXNYWFZjdjFOc3A4SUJVQW1nc3dHRjNsbEdnZVUxWVZYWEtUTjFGbGhXRlhXM2dJRStEVkNoQXB5c0FDSEhvN1E0QTM1bExpY2hoK1JPQm1MS0F6Z1ltWUVZREFoQ2d4S0dPT01uNFdSNGtrRGFvQkJPeEp0ZE5LUXhGbWc1SklXSUJuUWMwN0dhT1JmVVk0QUVrZFY2akhsQ0VJU1NaNXlUWHBwMXBiR1pia1dtY3VabVFDYUU2aUowRmhqTWFEalRNc2daYU5FSEZSQVFWcDNicVhuWkVEMXFZY0VDT3o1VjZCaFNXQ29WSlFJS3VLUWkyS0ZLRWtFRkFxb0FvN3VZU21PM2prNjF3VVVNS21rbko0U0dpbUJtQWEwcVZRQmhBQUFJZmtFQlFvQUd3QXNCd0FFQU00QUN3QUFCZi9nSm01Rm1SbEVxaEpDK2J5d2dLNXBPNHJISTBEM3BpaTIyK01nNi8wRWo5NndlQ01BazdjRGtYZjdsWlRUbnJNbDdlYVlveTEwSk4wWkZkY28wWEF1dktJNnFrZ1ZGSlhZTndqa0lCY05CZ1I4VFFvR2ZSc0pDUnVDWVlRUWlJK0lDb3NpQ29HT2tJaUtmU2w4bUprSFo0VTlrWk1iS2FJM3BLR1htSktybmdtdWc0V3draEEwbHJDQldnWUZDQ01RRndvUURSSEd4d3dHQ0JMTXpSTEV4OGlHek1NTzBjWU5lQ01LekJEVzE5bG5GOURYRElZLzQ4WGcwOTNmMFEzczFkY1I4T0xlOCtZOTFPVHY1d3JqN283Qis3Vk5RcUFCSW9SVkNNQmdnc09IRTM2a1NvQ0JJY1NIM0ViRmFuZ3hvZ0pZRmk4Q2tKaHFRY2lMSkVmL0xEREpFZUpJQlQwR3NPd1lVWUpHQlMwZmpwUUFNaWRHbXlWUDZzeDRZNlZRaHpzOVZVd2t3cWFDQ2gwdG1Lb0Z0U01EbUJPZjlwaGc0U3JWclJPdWFzUlFBYXhYcFZVaGRzVTZJc0VDWmx2WDNrd0xVV3pSdDBCSE9MVGJObGJaRzN2WmluQXJnZTVEdm43d2JxdFFrU1lBQWd0S21uU3NZS1ZLbzJBZlcwNDh1YVBtRzM4Nmk0UThFUU1CQUlBbmZCN3hCeEJxdmFwSjl6WDlXZ1JTMllNcG52WU1HZFBLM2FNanQvM2RVY05JNGJscGo3aXdrTUZXRFhEdlNtZ0FsaWpydDlSVFI3OCtQUzZ6MXVBSlpJZTkzUThnNXpjc1dDaS80WStDOGJhaDV6VXYzdnY4OXVmdDMwUVAyM3B1bkdDeDU5NTRvQkJ3bndZYU5DRFkvd1lyc1llZ2duTTlCMkZwZjhHRzJDRVVWV2hiV0F0R291RUdEeTdZNElFSlZyYlNpWGdocUdLSW83ejFJVmNYSWtLV1dSMzYxUU9MV1duSWh3RVJwTGFhQ0NlZTVpTUJHSlFtSkd5UEZUbmJrZkhWWkdSdElHcmc1SEFMRUpBWmJ1MzlCdVVFVW1xMUpKUUlQdFppbFk1aEdlU1dzU2s1Mkc5WHFzbWdsamRJY0FCeXRxMTNIeUlNNlJjVUErcjFxWjRFQkYzV0hXQjI5dEJnQXpSaEVHaGlnOEttcUtGdjhTZUNlbyttZ3NGN1lGWGExcVdTYmtEcG9tL21xUjFQbUhDcUozZndOUlZYakM3UzZDWmhGVkNRMmxXdlppaXJoUXE0MlNBQ3QyNUlLMmh2OFRwcnJpVVYxdXNHZ2VrYTdMRmNObUNsZE1MaTZxWk1nRkxncHcxNkNpcGI3YkMxa25Yc0JpRUFBQ0g1QkFVS0FCc0FMQWNBQkFET0FBc0FBQVgvNEZac0pQa1VtVUdzTENFVVR5d1hnbEZ1U2c3ZlcxeEF2TldMRjZzRkZjUGI0MkM4RVpDajI0RUpkQ3AyeW9lZ1dzb2xTMFV1NmZtYW1nOG44WVljTFUyYlhTaVJhWE1HdnFWNi9LQWVKQWg4VmdacUNYK0JleENGaW9XQVlncU5pNHFBUjRPUmhSdUhZNDA4akFlVWhBbVlZaXVWbHBpZmxxR1phNUNXa3pjNWZLbWJiaElwc0FvUURSRzh2UXdRQ0JMQ3d4SzZ2YjVxd2hmR3h4RU5haHZDRUE3Tnpza1N5N3ZOenp6SzA5Vy9QTkhGMU52WDJkWGNOOEs1NWNmaDY5THV2ZW9sM3ZPOHp3aTRZaGorQVF3bUNCdzRJWWNsREFBSkRsUWdnVk9DaEFvTEtrZ0ZrU0NBSER3V0xLaElFT09OQVJzREtyeW9nRlBJaUFVYi85NWdKTklpdzR3bkk3NzhHRlBoekJLRk9BcThxTEpFaFFwaU5BcmpNY0hDbWxUQ1VESW91VEtCaEFwRUxTeEZXaUdpVktZNEUyQ0Fla1BnVXBoRHUwNzQyblJyVkxKWm55ckZTcUtRMm9ob1NZQU1XNklvRHBOSjRiTGRJTFRuQWo4S1VGN1VlRU5qQUt1RHl4SWdPdUdpT0kwRUJCTWdMTmV3NUFVckRUTUdzRml4d0JJYU5DUXVBWEpCNTdxTkoyT1dtMkFqNHNrd0NRQ0l5TmtoaHRNa2RzSXVvZEUwQU40TEpEUmdmTFB0bjVZRExkQmxyYUFCeXVVYkJneFF3SUN4TU9uWXBWT1BlajA3NE9GZGxmYzBUcUM2Mk9JYmNwcEhqVjRvK0xyaWVXaGZUOEpDL0kvVDZXOG9DbDI5dlEwWGpMZEJhQTNzMVJjUEJPN2xGdnBYOEJWb0c0TzVqVFhSUVJEdUo2RkRUekVXRjEvQkNaaGdieUFLRTlxSUNZTGxvUVlPRnRhaFZSc1dZbFo0S1FKSGx3SFMvSVlhWjZzWmQ5dG11NUhRbTJ4aTFVYVRienhZd0prL3dCRjVnNUVFWU9CWmVFZkdabU5kRnlGWm1aSVI0amlrYkxUaGxoNWtVVVZKR21SVDdzZWtremlSV1VJQUNBQmszVDRxQ3NlZGdPNHhoZ0djWTdxNXBISjRrbEJCVFFSSjBDZUhjb1lISFVoNndnZmRuOXVKZFNkTWllYkdKMHpVUFRjb1MyODZGQ2tyWnhuWW9ZWUtXTGtCb3doUW9CZWFPbFpBZ1ZoTGlkclhxZzJHaXFwUXBaNGFwd1N3UnRqcXJCM211b0Y5QmJvYVhLbXNobHFXcXNXaUd0MndwaEprUWJBVTVob0NBQ0g1QkFVS0FCc0FMQWNBQkFET0FBc0FBQVgvb0dGdzJXWnVUNW9aUk9zU1FuR2FLalJ2aWxJODkzTUl0bE5PSjV2NWdEY0ZySGhLSVdjRVl1L3hGRXFOdjZCMU42MmFjbHlzRjdmc1pZZTVhT3gyeUw1YUFVR1NhVDFvVFlNQndRNVZHQ0FKZ1lJSkNueDFnSU9CaFhkd2lJbDdkMHAyaVlHUVVBUUJqb09GU1FSL2xJUUhuWitVZTZPYWdxWXpTcVNKaTVlVHBUeEdjamNTQ2hBTkVidThEQkFJRXNIQkNoZTV2TDEzRzdmRnVzY1JEY25LdU0zSDBMYTNFQTdPejhrS0VzWGF6cjdDdzkvR3p0YXI1dUhIdnRlNDdNamt0em5aMncwRzErRDNCZ2lyQXFKbUpNQVFnTUdFZ3dnbjVFaTBnS0RCaEJNQUxHUllFT0pCYjVRY1dsUW80Y2JBaWhaejNHZ0lNcUZFQlNNMS80WkVPV1BBZ3BJSUpYWVUrUEloUkc4amExcVU2VkhselprbkpOUTZVYW5DalFrV0NJR1NVR0VqQXdWTGpjNDQrRFRxVVF0UFBTNWdlalVyVGE1VEozZzlzV0NyMUJOVVdaSTE2MVN0aVFVRG1MWWRHZmVzaWJRM1hNcTFPUFl0aHJ3dUEyeVUyTEJzMmNCSEl5cFlRUFBsWUFLRkQ1Y1Z2TlB0VzhlVkdiZGNRQURBVHNpTk80Y0ZBUGt2SHBlZFB6YzhrVWNQZ05HZ1o1Uk5EWkcwNXJlb0U5czJ2U0VQNzlNRUdpUUd5MXFQOExBNFpjZHRzSkU0OE9Ob0xUQnRUVjBCOUxzVG5QY2VvSURCRFF2UzdXN3ZmalZZM3EzZVo0QTMzOUo0ZWFBbUtxVS9zVjU4SHZKaDJSY25JQnNEVXcwQUJxaEJBNWFWNVY5WFVGR2lIZlZlQWlXd29GZ0pKcklYUkgxdEVNaURGVjRvSG9BRUdsYVdoZ0lHU0dCTzJuRm9tWVkzbUtqVmdsaWRhTllKR0pEa1dXMnh4VGZiakNiVmFPR05xb1gyR2xvUjhaZVRhRUNTOXB0aFJHSkgyZzBiM0FnYms2aE5BTnR0ZUhEMkdKVXVjZmFqQ1FCeTVPT1RRMjVaZ1VQdmFWVlFtYktoOTUxMC9xUXB3WHgzU1FkZms4dFpKT2Q1YjZKSkZwbFQzWm5tbVgzcWQ1bDFlZzVxMDBIcnRVa1VuMEFLYWlHakNsU0FnS0xZWmNnV1h3b2NHUmNDRkdDS3dTQjZjZXFwaHdtWVJVRllULzFXS2xPZFVwaXBteFcwbWxDcUhqWWtBYWVvWmxxcnFaNHFkK3VwUUthYXBuL0FtZ0FlZ1o4S1V0WXRGQVFRQWdBaCtRUUZDZ0FiQUN3SEFBUUF6Z0FMQUFBRi8rQzJQVWNtaUNpWkdVVHJFa0tCaXM4alFFcXVLd1U1SHlYSWJFUGd5WDdCWWE1d1RObUVNd1dzU1hzcUZiRWg4RFlzOW1yZ0dqZEs2R2tQWTVHT2VVNnJ5ejdVRm9wU1FFenlnT0doSkJqb0lnTURCQWNCTTBWL0NZcUxDUXFGT3dvYmlZeUtqbjJUbEk2R0tDMllqSlprbm91YVpBY1FsSlVIbDZlb29Kd0tvb29icW9ld3JKU0VteUtkdDU5TmhSS0ZNeExFRUE0UnlNa01FQWpERWhmR3ljcUFHOFRReDlJUkRSREUzZDNSMmN0RDFSTGcwdHRLRW5iWTV3WkQzK3pKNk03WDJSSGk5T2J5N3UvcjlnMzhVRmpUaDJ4WkpCRUJNREFib29nQWd3a1FJMDdJTVVPUndvY1NKd0NnV0RGQkFJd1pPYUpJc09CalJvZ0tKUDh3VE9EdzVFU1ZIVnRtM0FoenBFZVFFbE91TkRsVFoweWNFVVdLV0ZBU3FFYWhHd1lVUGJueG9BZ0VkbFlTcURCa2dvVU5DbEFsSUhiU0FvT3NxQ1JRblFIeHExYXhWYjA2RldGeExJcXlhemUwVGZ0MUpWcXlFK3BXWE1EMXBGNmJZbDMrSFRxQVdOVzhjUlVGem1paDBaQUFCMm9HS3VrU0FBR0dSSFdKZ0xpUjZBeWxCTHB1SEtLVU1sTUNuZ01wRFNBYTlRSVVnZ1pWVnZEYUpvYkxlQzNYWnB2Z05nQ210UGN1d1AzV2dtWFNxNGRvMERDNm8yL2d1emNzZUVDdFVvTzBobWNzR0tEZ090N3NzQmQwN3dxZXNBSUdaQzFZSUJhN1BRSHZiMStTRm8rKytIckpTUWZCMzN4ZmF2M2k1ZVgzSG5iNENUSmdlZ0VxOHRIL1lRRU9jSUp6Ym0yRzJFb1lSTGdCWEZwVm1GWURjUkVWNEhJY25tVWhpR0JSb3VFTUpHSkd6SElzcHFnZFh4SzB5Q0tIUk5Yb0lYNHVvckNkVHlqa3lOdGRQV3JBNFVwODJFYkFiek1SeHhaUlI1NFdYVkxESVJtUmNhZzVkMlI2dWdsM1pYek5oVGVjY2hwTWhJR1ZBS0FZcGdKampzU2tsQkVkOTltYVpvbzUzNVp2ZGFtakJFcHVzSnljdGczaDRYOFhxb2RCTXgwdGlOZWcvb0dKYUtHQUJwb2dTNDBLU3FpYUVnQnFsUVdMVXRxb1ZRbnl0ZWtFanpvMGhIcWhSb3JwcE9adDJwOTIzTTJBQVYrb0J0cEFublBOb0I2SGFVNm1BQUlVK0lYbWkzajJtdEZYdVVvSEt3WHB6VnJzamNnR09hdUtFalFyd3ExNTdoaXRHcTJOb1dtamg3ejZXbXhiMG01dzY2KzJWUkF1WE4veUZVQUlBQ0g1QkFVS0FCc0FMQWNBQkFET0FBc0FBQVgvNENadVJpYU00NU1acUJnSVJiczlBcVRjdUZMRTdWSExPaDdLQjVFUmRqSmFFYVU0Q2xPL2xnS1dqS0tjTWlKUThLZ3VtY2llVmRRTUQ4Y2JCZXVBa2tDNkxZTGhPeG9RMlBGNVlzOVBLUEJNZW4xN2YwQ0NnNFZTaDMySlY0dDhqU05xRUlPRWdKS1Bsa1lCbEpXUkluS2RpSmRrbVFsdktBc0xCeGRBQkE0UnNiSU1CZ2d0RWhjUXNMS3hEQkMyVEFTNnZMRU5kSkxEeE1aQXVidTh2akliemNRUnRNekp6NzlTMDhvUUV0L2d1Tml5eTdmY3ZNYmg0T2V6ZEF2R3Jha0xBUXd5QUJzRUxRa1k5QlArLy9ja3lQREQ0SjlCZkFNaDFHc0JvSW1NZVFVTitsTWdVSjlDaVJNYTVtc3hvQjlHaC9vOEdteFlNWlhJZ3h0Ui95UTQ2Uy9nUUFVUlIwcER3WURmeXdveUxQaXA1QWRuQ3dzTUZQQlU0QlBGaEtCRGk0NDRxdUNtREtaT2Z3WjlLRUdwQ0tnY04xamRBTFNwUHFJWXNhYlMrblNxdnFwbHZZcVFZQWVEUGd3S3dqYU10aURsMG9hcVVBeW8rM1R1V3dVQU1QcFZDZmVlMGNFalZCR1FxMkFCeDdvVFdtUWs0RmdsWk1HTjlmR1ZETUN1aUgyQU9WT3UvUG15eE02MzBnd00wQ0NuNnE4TGpWSjhHWHZwYTVVd245NU9UQy9uTnhrZGExL2RMU0s0NzVJakNENmRIYksxWk9hNGhYUDlEWHM1Y2hKMDBVcFZtNXhvMnFScG94cHR3RjJFNC9JYkpwQi9TRHo5K3E5YjFhTmZRSDA4K3A0YTh1dlg4QjUzZkxQK3ljQWZlbWpzUlVCZ3AxSDIwSytCZ2hIZ1ZndDFHWFpYWnBaNWx0NEVDanhZUjRTY1VXaVNoRXRacUJpSUluUkdXbkVSTm5qaUJnbHcrSnlHbnhVbUdvd3N5aWlaZzE4OWxOdFBHQUNqVjIrUzlVamJVMEpXRjZTUHZFazNRWkVxc1pZVGszVUFhUlNVbnpuSkk1TG1FU0NkQlZTeWFPV1VXTEs0STVnRFVZVmVWMVQ5bCtGWkNsQ0FVVkEwOXVTbVJIQkNLQUVDRkVoVzUxaHQ2cm5tV0JYa2FSK05qdUhwSjQwRDNEbW5RWHQyRitpaFp4bHFWS09mUVJBQ0FDSDVCQVVLQUJ3QUxBY0FCQURPQUFzQUFBWC9JQ2R5VUNrVW8vZzhtVUc4TUNHa0tnc3BlQzZqNlhFSUVCcEJVZUNOZkVDYWdsQmNPVmZKRks3WVF3WkhRNkpSWkJVcVRyU3VWRXVEM25JNDVwWWpGdVdLdmpqU2tDb1JhQlVNV3hrd0JHZ0pDWHNwUTM2Qmg0RUVCMG9LaG9pQmd5TkxqbzhLaTRRRWxJaVdmSnFIbklTTkVJK1FsNUo5bzZTZ2txS2tncVlpaGFtUGtXNm9OQmdTZmlNTURRa0dDQkxDd3hJUURoSEl5UXdRQ0dNS3hzbktWeVBDRjlEUkVRM014TVBYMGN1NHd0N0oydUhXeDlqbEtkM28zOU1pdWVmWUVjdk5rdUx0NU84YzFlUEkydHlFTFhHUXdvR0RBUWYraUVDMnhCeURDUkFqVGxBZ0lVV0NCUmdDUEpRNEFRQkZYQXMwY29UNDBXTElqUnhMLzQ3QWNITGt4SW9tUlhMMENIUEVSWmtwYTRxNGlWS2l5cDB0Ui83a3dITWtUVUJCSlI1ZE9DRUJBVmNLS3RDQXlPSHBvd1hDcGs3Z29BQnFCWmRjdldwbG9BQ3BCS2twSUpJMXE1T0QycklXRTBSMXVUWnUxTEZ3YldMOU9sS3VXYjRjNitvOWkzZEVndzBSQ0dEVUc5S2xSdzU2Z0RZMnFtQ0J5WkJhQVNpK1RBQ0EwVHVjQWFUdGVDY3kwWnVPSzNOMnZKbHg1OCtMUlF5WTNYbTBac2dqWmcrb1BRTGk3ZFVjTlhpMExPSncxcGdOdEI3WEc2Q0J5K1U3NVNZZlBUU1FBZ1pUTlVEblFIdDY3d25iWnl2d0xnS2lNTjNvQ1pCM0M3NnRkZXdwTEZnSVAyQzg4cmJpNFkrUVQzKzhTNVVTTUlDWlhXajFwa0VEZVVVM2xPWUdCM2FsU29FaU1JamdYNFdsZ05GMkVpYkl3UUlYYXVXWFNSZzJTQU9ISVU1SUlJTW9aa2hoV2lKYWlGVmJLbzZBUUVnUVhyVEFhek8xSmhrQnJCRzNZMlk2RXNVaGFHbjk1aHByU04wb1dwRkU3cmhrZWFRQmNoR09FV253RW1jMHVLV1pqMExldU5WM1c0WTJsWkhGbFFDU1JqVElsOHVaK2tHNUhVLzNzUmxuVEcyeXR5YWR5dG5EM0hybXVSY1NuKzBoMWR5Y2V4SUsxS0NqWWFDbmpDQ1ZxT0ZGSlRaNUdrVVVqRVNXYVVJS1UybGdDbUFLS1FJVWpIYXBYUktFK3Qyb2cxVmdhbmtOWW5vaHFLSjJDbUtwbHNvNkdLejdXWUNncXhldXlvRjh1OUlRQWdBN1wiLG1zZzpudWxsLG1zZ1RleHQ6XCI8ZW0+TG9hZGluZyB0aGUgbmV4dCBzZXQgb2YgcG9zdHMuLi48L2VtPlwiLHNlbGVjdG9yOm51bGwsc3BlZWQ6XCJmYXN0XCIsc3RhcnQ6dH0sc3RhdGU6e2lzRHVyaW5nQWpheDpmYWxzZSxpc0ludmFsaWRQYWdlOmZhbHNlLGlzRGVzdHJveWVkOmZhbHNlLGlzRG9uZTpmYWxzZSxpc1BhdXNlZDpmYWxzZSxpc0JleW9uZE1heFBhZ2U6ZmFsc2UsY3VyclBhZ2U6MX0sZGVidWc6ZmFsc2UsYmVoYXZpb3I6dCxiaW5kZXI6ZSh3aW5kb3cpLG5leHRTZWxlY3RvcjpcImRpdi5uYXZpZ2F0aW9uIGE6Zmlyc3RcIixuYXZTZWxlY3RvcjpcImRpdi5uYXZpZ2F0aW9uXCIsY29udGVudFNlbGVjdG9yOm51bGwsZXh0cmFTY3JvbGxQeDoxNTAsaXRlbVNlbGVjdG9yOlwiZGl2LnBvc3RcIixhbmltYXRlOmZhbHNlLHBhdGhQYXJzZTp0LGRhdGFUeXBlOlwiaHRtbFwiLGFwcGVuZENhbGxiYWNrOnRydWUsYnVmZmVyUHg6NDAsZXJyb3JDYWxsYmFjazpmdW5jdGlvbigpe30saW5maWQ6MCxwaXhlbHNGcm9tTmF2VG9Cb3R0b206dCxwYXRoOnQscHJlZmlsbDpmYWxzZSxtYXhQYWdlOnR9O2UuaW5maW5pdGVzY3JvbGwucHJvdG90eXBlPXtfYmluZGluZzpmdW5jdGlvbihuKXt2YXIgcj10aGlzLGk9ci5vcHRpb25zO2kudj1cIjIuMGIyLjEyMDUyMFwiO2lmKCEhaS5iZWhhdmlvciYmdGhpc1tcIl9iaW5kaW5nX1wiK2kuYmVoYXZpb3JdIT09dCl7dGhpc1tcIl9iaW5kaW5nX1wiK2kuYmVoYXZpb3JdLmNhbGwodGhpcyk7cmV0dXJufWlmKG4hPT1cImJpbmRcIiYmbiE9PVwidW5iaW5kXCIpe3RoaXMuX2RlYnVnKFwiQmluZGluZyB2YWx1ZSAgXCIrbitcIiBub3QgdmFsaWRcIik7cmV0dXJuIGZhbHNlfWlmKG49PT1cInVuYmluZFwiKXt0aGlzLm9wdGlvbnMuYmluZGVyLnVuYmluZChcInNtYXJ0c2Nyb2xsLmluZnNjci5cIityLm9wdGlvbnMuaW5maWQpfWVsc2V7dGhpcy5vcHRpb25zLmJpbmRlcltuXShcInNtYXJ0c2Nyb2xsLmluZnNjci5cIityLm9wdGlvbnMuaW5maWQsZnVuY3Rpb24oKXtyLnNjcm9sbCgpfSl9dGhpcy5fZGVidWcoXCJCaW5kaW5nXCIsbil9LF9jcmVhdGU6ZnVuY3Rpb24ocixpKXt2YXIgcz1lLmV4dGVuZCh0cnVlLHt9LGUuaW5maW5pdGVzY3JvbGwuZGVmYXVsdHMscik7dGhpcy5vcHRpb25zPXM7dmFyIG89ZSh3aW5kb3cpO3ZhciB1PXRoaXM7aWYoIXUuX3ZhbGlkYXRlKHIpKXtyZXR1cm4gZmFsc2V9dmFyIGE9ZShzLm5leHRTZWxlY3RvcikuYXR0cihcImhyZWZcIik7aWYoIWEpe3RoaXMuX2RlYnVnKFwiTmF2aWdhdGlvbiBzZWxlY3RvciBub3QgZm91bmRcIik7cmV0dXJuIGZhbHNlfXMucGF0aD1zLnBhdGh8fHRoaXMuX2RldGVybWluZXBhdGgoYSk7cy5jb250ZW50U2VsZWN0b3I9cy5jb250ZW50U2VsZWN0b3J8fHRoaXMuZWxlbWVudDtzLmxvYWRpbmcuc2VsZWN0b3I9cy5sb2FkaW5nLnNlbGVjdG9yfHxzLmNvbnRlbnRTZWxlY3RvcjtzLmxvYWRpbmcubXNnPXMubG9hZGluZy5tc2d8fGUoJzxkaXYgaWQ9XCJpbmZzY3ItbG9hZGluZ1wiPjxpbWcgYWx0PVwiTG9hZGluZy4uLlwiIHNyYz1cIicrcy5sb2FkaW5nLmltZysnXCIgLz48ZGl2Picrcy5sb2FkaW5nLm1zZ1RleHQrXCI8L2Rpdj48L2Rpdj5cIik7KG5ldyBJbWFnZSkuc3JjPXMubG9hZGluZy5pbWc7aWYocy5waXhlbHNGcm9tTmF2VG9Cb3R0b209PT10KXtzLnBpeGVsc0Zyb21OYXZUb0JvdHRvbT1lKGRvY3VtZW50KS5oZWlnaHQoKS1lKHMubmF2U2VsZWN0b3IpLm9mZnNldCgpLnRvcDt0aGlzLl9kZWJ1ZyhcInBpeGVsc0Zyb21OYXZUb0JvdHRvbTogXCIrcy5waXhlbHNGcm9tTmF2VG9Cb3R0b20pfXZhciBmPXRoaXM7cy5sb2FkaW5nLnN0YXJ0PXMubG9hZGluZy5zdGFydHx8ZnVuY3Rpb24oKXtlKHMubmF2U2VsZWN0b3IpLmhpZGUoKTtzLmxvYWRpbmcubXNnLmFwcGVuZFRvKHMubG9hZGluZy5zZWxlY3Rvcikuc2hvdyhzLmxvYWRpbmcuc3BlZWQsZS5wcm94eShmdW5jdGlvbigpe3RoaXMuYmVnaW5BamF4KHMpfSxmKSl9O3MubG9hZGluZy5maW5pc2hlZD1zLmxvYWRpbmcuZmluaXNoZWR8fGZ1bmN0aW9uKCl7aWYoIXMuc3RhdGUuaXNCZXlvbmRNYXhQYWdlKXMubG9hZGluZy5tc2cuZmFkZU91dChzLmxvYWRpbmcuc3BlZWQpfTtzLmNhbGxiYWNrPWZ1bmN0aW9uKG4scix1KXtpZighIXMuYmVoYXZpb3ImJm5bXCJfY2FsbGJhY2tfXCIrcy5iZWhhdmlvcl0hPT10KXtuW1wiX2NhbGxiYWNrX1wiK3MuYmVoYXZpb3JdLmNhbGwoZShzLmNvbnRlbnRTZWxlY3RvcilbMF0scix1KX1pZihpKXtpLmNhbGwoZShzLmNvbnRlbnRTZWxlY3RvcilbMF0scixzLHUpfWlmKHMucHJlZmlsbCl7by5iaW5kKFwicmVzaXplLmluZmluaXRlLXNjcm9sbFwiLG4uX3ByZWZpbGwpfX07aWYoci5kZWJ1Zyl7aWYoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJih0eXBlb2YgY29uc29sZT09PVwib2JqZWN0XCJ8fHR5cGVvZiBjb25zb2xlPT09XCJmdW5jdGlvblwiKSYmdHlwZW9mIGNvbnNvbGUubG9nPT09XCJvYmplY3RcIil7W1wibG9nXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiLFwiYXNzZXJ0XCIsXCJkaXJcIixcImNsZWFyXCIsXCJwcm9maWxlXCIsXCJwcm9maWxlRW5kXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7Y29uc29sZVtlXT10aGlzLmNhbGwoY29uc29sZVtlXSxjb25zb2xlKX0sRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpfX10aGlzLl9zZXR1cCgpO2lmKHMucHJlZmlsbCl7dGhpcy5fcHJlZmlsbCgpfXJldHVybiB0cnVlfSxfcHJlZmlsbDpmdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gZShuLm9wdGlvbnMuY29udGVudFNlbGVjdG9yKS5oZWlnaHQoKTw9ci5oZWlnaHQoKX12YXIgbj10aGlzO3ZhciByPWUod2luZG93KTt0aGlzLl9wcmVmaWxsPWZ1bmN0aW9uKCl7aWYoaSgpKXtuLnNjcm9sbCgpfXIuYmluZChcInJlc2l6ZS5pbmZpbml0ZS1zY3JvbGxcIixmdW5jdGlvbigpe2lmKGkoKSl7ci51bmJpbmQoXCJyZXNpemUuaW5maW5pdGUtc2Nyb2xsXCIpO24uc2Nyb2xsKCl9fSl9O3RoaXMuX3ByZWZpbGwoKX0sX2RlYnVnOmZ1bmN0aW9uKCl7aWYodHJ1ZSE9PXRoaXMub3B0aW9ucy5kZWJ1Zyl7cmV0dXJufWlmKHR5cGVvZiBjb25zb2xlIT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIGNvbnNvbGUubG9nPT09XCJmdW5jdGlvblwiKXtpZihBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLmxlbmd0aD09PTEmJnR5cGVvZiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpWzBdPT09XCJzdHJpbmdcIil7Y29uc29sZS5sb2coQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS50b1N0cmluZygpKX1lbHNle2NvbnNvbGUubG9nKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfX1lbHNlIGlmKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmdHlwZW9mIGNvbnNvbGUhPT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgY29uc29sZS5sb2c9PT1cIm9iamVjdFwiKXtGdW5jdGlvbi5wcm90b3R5cGUuY2FsbC5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9fSxfZGV0ZXJtaW5lcGF0aDpmdW5jdGlvbihuKXt2YXIgcj10aGlzLm9wdGlvbnM7aWYoISFyLmJlaGF2aW9yJiZ0aGlzW1wiX2RldGVybWluZXBhdGhfXCIrci5iZWhhdmlvcl0hPT10KXtyZXR1cm4gdGhpc1tcIl9kZXRlcm1pbmVwYXRoX1wiK3IuYmVoYXZpb3JdLmNhbGwodGhpcyxuKX1pZighIXIucGF0aFBhcnNlKXt0aGlzLl9kZWJ1ZyhcInBhdGhQYXJzZSBtYW51YWxcIik7cmV0dXJuIHIucGF0aFBhcnNlKG4sdGhpcy5vcHRpb25zLnN0YXRlLmN1cnJQYWdlKzEpfWVsc2UgaWYobi5tYXRjaCgvXiguKj8pXFxiMlxcYiguKj8kKS8pKXtuPW4ubWF0Y2goL14oLio/KVxcYjJcXGIoLio/JCkvKS5zbGljZSgxKX1lbHNlIGlmKG4ubWF0Y2goL14oLio/KTIoLio/JCkvKSl7aWYobi5tYXRjaCgvXiguKj9wYWdlPSkyKFxcLy4qfCQpLykpe249bi5tYXRjaCgvXiguKj9wYWdlPSkyKFxcLy4qfCQpLykuc2xpY2UoMSk7cmV0dXJuIG59bj1uLm1hdGNoKC9eKC4qPykyKC4qPyQpLykuc2xpY2UoMSl9ZWxzZXtpZihuLm1hdGNoKC9eKC4qP3BhZ2U9KTEoXFwvLip8JCkvKSl7bj1uLm1hdGNoKC9eKC4qP3BhZ2U9KTEoXFwvLip8JCkvKS5zbGljZSgxKTtyZXR1cm4gbn1lbHNle3RoaXMuX2RlYnVnKFwiU29ycnksIHdlIGNvdWxkbid0IHBhcnNlIHlvdXIgTmV4dCAoUHJldmlvdXMgUG9zdHMpIFVSTC4gVmVyaWZ5IHlvdXIgdGhlIGNzcyBzZWxlY3RvciBwb2ludHMgdG8gdGhlIGNvcnJlY3QgQSB0YWcuIElmIHlvdSBzdGlsbCBnZXQgdGhpcyBlcnJvcjogeWVsbCwgc2NyZWFtLCBhbmQga2luZGx5IGFzayBmb3IgaGVscCBhdCBpbmZpbml0ZS1zY3JvbGwuY29tLlwiKTtyLnN0YXRlLmlzSW52YWxpZFBhZ2U9dHJ1ZX19dGhpcy5fZGVidWcoXCJkZXRlcm1pbmVQYXRoXCIsbik7cmV0dXJuIG59LF9lcnJvcjpmdW5jdGlvbihuKXt2YXIgcj10aGlzLm9wdGlvbnM7aWYoISFyLmJlaGF2aW9yJiZ0aGlzW1wiX2Vycm9yX1wiK3IuYmVoYXZpb3JdIT09dCl7dGhpc1tcIl9lcnJvcl9cIityLmJlaGF2aW9yXS5jYWxsKHRoaXMsbik7cmV0dXJufWlmKG4hPT1cImRlc3Ryb3lcIiYmbiE9PVwiZW5kXCIpe249XCJ1bmtub3duXCJ9dGhpcy5fZGVidWcoXCJFcnJvclwiLG4pO2lmKG49PT1cImVuZFwifHxyLnN0YXRlLmlzQmV5b25kTWF4UGFnZSl7dGhpcy5fc2hvd2RvbmVtc2coKX1yLnN0YXRlLmlzRG9uZT10cnVlO3Iuc3RhdGUuY3VyclBhZ2U9MTtyLnN0YXRlLmlzUGF1c2VkPWZhbHNlO3Iuc3RhdGUuaXNCZXlvbmRNYXhQYWdlPWZhbHNlO3RoaXMuX2JpbmRpbmcoXCJ1bmJpbmRcIil9LF9sb2FkY2FsbGJhY2s6ZnVuY3Rpb24ocixpLHMpe3ZhciBvPXRoaXMub3B0aW9ucyx1PXRoaXMub3B0aW9ucy5jYWxsYmFjayxhPW8uc3RhdGUuaXNEb25lP1wiZG9uZVwiOiFvLmFwcGVuZENhbGxiYWNrP1wibm8tYXBwZW5kXCI6XCJhcHBlbmRcIixmO2lmKCEhby5iZWhhdmlvciYmdGhpc1tcIl9sb2FkY2FsbGJhY2tfXCIrby5iZWhhdmlvcl0hPT10KXt0aGlzW1wiX2xvYWRjYWxsYmFja19cIitvLmJlaGF2aW9yXS5jYWxsKHRoaXMscixpKTtyZXR1cm59c3dpdGNoKGEpe2Nhc2VcImRvbmVcIjp0aGlzLl9zaG93ZG9uZW1zZygpO3JldHVybiBmYWxzZTtjYXNlXCJuby1hcHBlbmRcIjppZihvLmRhdGFUeXBlPT09XCJodG1sXCIpe2k9XCI8ZGl2PlwiK2krXCI8L2Rpdj5cIjtpPWUoaSkuZmluZChvLml0ZW1TZWxlY3Rvcil9aWYoaS5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5fZXJyb3IoXCJlbmRcIil9YnJlYWs7Y2FzZVwiYXBwZW5kXCI6dmFyIGw9ci5jaGlsZHJlbigpO2lmKGwubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuX2Vycm9yKFwiZW5kXCIpfWY9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3doaWxlKHJbMF0uZmlyc3RDaGlsZCl7Zi5hcHBlbmRDaGlsZChyWzBdLmZpcnN0Q2hpbGQpfXRoaXMuX2RlYnVnKFwiY29udGVudFNlbGVjdG9yXCIsZShvLmNvbnRlbnRTZWxlY3RvcilbMF0pO2Uoby5jb250ZW50U2VsZWN0b3IpWzBdLmFwcGVuZENoaWxkKGYpO2k9bC5nZXQoKTticmVha31vLmxvYWRpbmcuZmluaXNoZWQuY2FsbChlKG8uY29udGVudFNlbGVjdG9yKVswXSxvKTtpZihvLmFuaW1hdGUpe3ZhciBjPWUod2luZG93KS5zY3JvbGxUb3AoKStlKG8ubG9hZGluZy5tc2cpLmhlaWdodCgpK28uZXh0cmFTY3JvbGxQeCtcInB4XCI7ZShcImh0bWwsYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6Y30sODAwLGZ1bmN0aW9uKCl7by5zdGF0ZS5pc0R1cmluZ0FqYXg9ZmFsc2V9KX1pZighby5hbmltYXRlKXtvLnN0YXRlLmlzRHVyaW5nQWpheD1mYWxzZX11KHRoaXMsaSxzKTtpZihvLnByZWZpbGwpe3RoaXMuX3ByZWZpbGwoKX19LF9uZWFyYm90dG9tOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vcHRpb25zLGk9MCtlKGRvY3VtZW50KS5oZWlnaHQoKS1yLmJpbmRlci5zY3JvbGxUb3AoKS1lKHdpbmRvdykuaGVpZ2h0KCk7aWYoISFyLmJlaGF2aW9yJiZ0aGlzW1wiX25lYXJib3R0b21fXCIrci5iZWhhdmlvcl0hPT10KXtyZXR1cm4gdGhpc1tcIl9uZWFyYm90dG9tX1wiK3IuYmVoYXZpb3JdLmNhbGwodGhpcyl9dGhpcy5fZGVidWcoXCJtYXRoOlwiLGksci5waXhlbHNGcm9tTmF2VG9Cb3R0b20pO3JldHVybiBpLXIuYnVmZmVyUHg8ci5waXhlbHNGcm9tTmF2VG9Cb3R0b219LF9wYXVzaW5nOmZ1bmN0aW9uKG4pe3ZhciByPXRoaXMub3B0aW9ucztpZighIXIuYmVoYXZpb3ImJnRoaXNbXCJfcGF1c2luZ19cIityLmJlaGF2aW9yXSE9PXQpe3RoaXNbXCJfcGF1c2luZ19cIityLmJlaGF2aW9yXS5jYWxsKHRoaXMsbik7cmV0dXJufWlmKG4hPT1cInBhdXNlXCImJm4hPT1cInJlc3VtZVwiJiZuIT09bnVsbCl7dGhpcy5fZGVidWcoXCJJbnZhbGlkIGFyZ3VtZW50LiBUb2dnbGluZyBwYXVzZSB2YWx1ZSBpbnN0ZWFkXCIpfW49biYmKG49PT1cInBhdXNlXCJ8fG49PT1cInJlc3VtZVwiKT9uOlwidG9nZ2xlXCI7c3dpdGNoKG4pe2Nhc2VcInBhdXNlXCI6ci5zdGF0ZS5pc1BhdXNlZD10cnVlO2JyZWFrO2Nhc2VcInJlc3VtZVwiOnIuc3RhdGUuaXNQYXVzZWQ9ZmFsc2U7YnJlYWs7Y2FzZVwidG9nZ2xlXCI6ci5zdGF0ZS5pc1BhdXNlZD0hci5zdGF0ZS5pc1BhdXNlZDticmVha310aGlzLl9kZWJ1ZyhcIlBhdXNlZFwiLHIuc3RhdGUuaXNQYXVzZWQpO3JldHVybiBmYWxzZX0sX3NldHVwOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zO2lmKCEhbi5iZWhhdmlvciYmdGhpc1tcIl9zZXR1cF9cIituLmJlaGF2aW9yXSE9PXQpe3RoaXNbXCJfc2V0dXBfXCIrbi5iZWhhdmlvcl0uY2FsbCh0aGlzKTtyZXR1cm59dGhpcy5fYmluZGluZyhcImJpbmRcIik7cmV0dXJuIGZhbHNlfSxfc2hvd2RvbmVtc2c6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLm9wdGlvbnM7aWYoISFyLmJlaGF2aW9yJiZ0aGlzW1wiX3Nob3dkb25lbXNnX1wiK3IuYmVoYXZpb3JdIT09dCl7dGhpc1tcIl9zaG93ZG9uZW1zZ19cIityLmJlaGF2aW9yXS5jYWxsKHRoaXMpO3JldHVybn1yLmxvYWRpbmcubXNnLmZpbmQoXCJpbWdcIikuaGlkZSgpLnBhcmVudCgpLmZpbmQoXCJkaXZcIikuaHRtbChyLmxvYWRpbmcuZmluaXNoZWRNc2cpLmFuaW1hdGUoe29wYWNpdHk6MX0sMmUzLGZ1bmN0aW9uKCl7ZSh0aGlzKS5wYXJlbnQoKS5mYWRlT3V0KHIubG9hZGluZy5zcGVlZCl9KTtyLmVycm9yQ2FsbGJhY2suY2FsbChlKHIuY29udGVudFNlbGVjdG9yKVswXSxcImRvbmVcIil9LF92YWxpZGF0ZTpmdW5jdGlvbihuKXtmb3IodmFyIHIgaW4gbil7aWYoci5pbmRleE9mJiZyLmluZGV4T2YoXCJTZWxlY3RvclwiKT4tMSYmZShuW3JdKS5sZW5ndGg9PT0wKXt0aGlzLl9kZWJ1ZyhcIllvdXIgXCIrcitcIiBmb3VuZCBubyBlbGVtZW50cy5cIik7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sYmluZDpmdW5jdGlvbigpe3RoaXMuX2JpbmRpbmcoXCJiaW5kXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnN0YXRlLmlzRGVzdHJveWVkPXRydWU7dGhpcy5vcHRpb25zLmxvYWRpbmcuZmluaXNoZWQoKTtyZXR1cm4gdGhpcy5fZXJyb3IoXCJkZXN0cm95XCIpfSxwYXVzZTpmdW5jdGlvbigpe3RoaXMuX3BhdXNpbmcoXCJwYXVzZVwiKX0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5fcGF1c2luZyhcInJlc3VtZVwiKX0sYmVnaW5BamF4OmZ1bmN0aW9uKHIpe3ZhciBpPXRoaXMscz1yLnBhdGgsbyx1LGEsZjtyLnN0YXRlLmN1cnJQYWdlKys7aWYoci5tYXhQYWdlIT09dCYmci5zdGF0ZS5jdXJyUGFnZT5yLm1heFBhZ2Upe3Iuc3RhdGUuaXNCZXlvbmRNYXhQYWdlPXRydWU7dGhpcy5kZXN0cm95KCk7cmV0dXJufW89ZShyLmNvbnRlbnRTZWxlY3RvcikuaXMoXCJ0YWJsZSwgdGJvZHlcIik/ZShcIjx0Ym9keS8+XCIpOmUoXCI8ZGl2Lz5cIik7dT10eXBlb2Ygcz09PVwiZnVuY3Rpb25cIj9zKHIuc3RhdGUuY3VyclBhZ2UpOnMuam9pbihyLnN0YXRlLmN1cnJQYWdlKTtpLl9kZWJ1ZyhcImhlYWRpbmcgaW50byBhamF4XCIsdSk7YT1yLmRhdGFUeXBlPT09XCJodG1sXCJ8fHIuZGF0YVR5cGU9PT1cImpzb25cIj9yLmRhdGFUeXBlOlwiaHRtbCtjYWxsYmFja1wiO2lmKHIuYXBwZW5kQ2FsbGJhY2smJnIuZGF0YVR5cGU9PT1cImh0bWxcIil7YSs9XCIrY2FsbGJhY2tcIn1zd2l0Y2goYSl7Y2FzZVwiaHRtbCtjYWxsYmFja1wiOmkuX2RlYnVnKFwiVXNpbmcgSFRNTCB2aWEgLmxvYWQoKSBtZXRob2RcIik7by5sb2FkKHUrXCIgXCIrci5pdGVtU2VsZWN0b3IsdCxmdW5jdGlvbih0KXtpLl9sb2FkY2FsbGJhY2sobyx0LHUpfSk7YnJlYWs7Y2FzZVwiaHRtbFwiOmkuX2RlYnVnKFwiVXNpbmcgXCIrYS50b1VwcGVyQ2FzZSgpK1wiIHZpYSAkLmFqYXgoKSBtZXRob2RcIik7ZS5hamF4KHt1cmw6dSxkYXRhVHlwZTpyLmRhdGFUeXBlLGNvbXBsZXRlOmZ1bmN0aW9uKHQsbil7Zj10eXBlb2YgdC5pc1Jlc29sdmVkIT09XCJ1bmRlZmluZWRcIj90LmlzUmVzb2x2ZWQoKTpuPT09XCJzdWNjZXNzXCJ8fG49PT1cIm5vdG1vZGlmaWVkXCI7aWYoZil7aS5fbG9hZGNhbGxiYWNrKG8sdC5yZXNwb25zZVRleHQsdSl9ZWxzZXtpLl9lcnJvcihcImVuZFwiKX19fSk7YnJlYWs7Y2FzZVwianNvblwiOmkuX2RlYnVnKFwiVXNpbmcgXCIrYS50b1VwcGVyQ2FzZSgpK1wiIHZpYSAkLmFqYXgoKSBtZXRob2RcIik7ZS5hamF4KHtkYXRhVHlwZTpcImpzb25cIix0eXBlOlwiR0VUXCIsdXJsOnUsc3VjY2VzczpmdW5jdGlvbihlLG4scyl7Zj10eXBlb2Ygcy5pc1Jlc29sdmVkIT09XCJ1bmRlZmluZWRcIj9zLmlzUmVzb2x2ZWQoKTpuPT09XCJzdWNjZXNzXCJ8fG49PT1cIm5vdG1vZGlmaWVkXCI7aWYoci5hcHBlbmRDYWxsYmFjayl7aWYoci50ZW1wbGF0ZSE9PXQpe3ZhciBhPXIudGVtcGxhdGUoZSk7by5hcHBlbmQoYSk7aWYoZil7aS5fbG9hZGNhbGxiYWNrKG8sYSl9ZWxzZXtpLl9lcnJvcihcImVuZFwiKX19ZWxzZXtpLl9kZWJ1ZyhcInRlbXBsYXRlIG11c3QgYmUgZGVmaW5lZC5cIik7aS5fZXJyb3IoXCJlbmRcIil9fWVsc2V7aWYoZil7aS5fbG9hZGNhbGxiYWNrKG8sZSx1KX1lbHNle2kuX2Vycm9yKFwiZW5kXCIpfX19LGVycm9yOmZ1bmN0aW9uKCl7aS5fZGVidWcoXCJKU09OIGFqYXggcmVxdWVzdCBmYWlsZWQuXCIpO2kuX2Vycm9yKFwiZW5kXCIpfX0pO2JyZWFrfX0scmV0cmlldmU6ZnVuY3Rpb24ocil7cj1yfHxudWxsO3ZhciBpPXRoaXMscz1pLm9wdGlvbnM7aWYoISFzLmJlaGF2aW9yJiZ0aGlzW1wicmV0cmlldmVfXCIrcy5iZWhhdmlvcl0hPT10KXt0aGlzW1wicmV0cmlldmVfXCIrcy5iZWhhdmlvcl0uY2FsbCh0aGlzLHIpO3JldHVybn1pZihzLnN0YXRlLmlzRGVzdHJveWVkKXt0aGlzLl9kZWJ1ZyhcIkluc3RhbmNlIGlzIGRlc3Ryb3llZFwiKTtyZXR1cm4gZmFsc2V9cy5zdGF0ZS5pc0R1cmluZ0FqYXg9dHJ1ZTtzLmxvYWRpbmcuc3RhcnQuY2FsbChlKHMuY29udGVudFNlbGVjdG9yKVswXSxzKX0sc2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zLHI9bi5zdGF0ZTtpZighIW4uYmVoYXZpb3ImJnRoaXNbXCJzY3JvbGxfXCIrbi5iZWhhdmlvcl0hPT10KXt0aGlzW1wic2Nyb2xsX1wiK24uYmVoYXZpb3JdLmNhbGwodGhpcyk7cmV0dXJufWlmKHIuaXNEdXJpbmdBamF4fHxyLmlzSW52YWxpZFBhZ2V8fHIuaXNEb25lfHxyLmlzRGVzdHJveWVkfHxyLmlzUGF1c2VkKXtyZXR1cm59aWYoIXRoaXMuX25lYXJib3R0b20oKSl7cmV0dXJufXRoaXMucmV0cmlldmUoKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy5fcGF1c2luZygpfSx1bmJpbmQ6ZnVuY3Rpb24oKXt0aGlzLl9iaW5kaW5nKFwidW5iaW5kXCIpfSx1cGRhdGU6ZnVuY3Rpb24obil7aWYoZS5pc1BsYWluT2JqZWN0KG4pKXt0aGlzLm9wdGlvbnM9ZS5leHRlbmQodHJ1ZSx0aGlzLm9wdGlvbnMsbil9fX07ZS5mbi5pbmZpbml0ZXNjcm9sbD1mdW5jdGlvbihuLHIpe3ZhciBpPXR5cGVvZiBuO3N3aXRjaChpKXtjYXNlXCJzdHJpbmdcIjp2YXIgcz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5kYXRhKHRoaXMsXCJpbmZpbml0ZXNjcm9sbFwiKTtpZighdCl7cmV0dXJuIGZhbHNlfWlmKCFlLmlzRnVuY3Rpb24odFtuXSl8fG4uY2hhckF0KDApPT09XCJfXCIpe3JldHVybiBmYWxzZX10W25dLmFwcGx5KHQscyl9KTticmVhaztjYXNlXCJvYmplY3RcIjp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lLmRhdGEodGhpcyxcImluZmluaXRlc2Nyb2xsXCIpO2lmKHQpe3QudXBkYXRlKG4pfWVsc2V7dD1uZXcgZS5pbmZpbml0ZXNjcm9sbChuLHIsdGhpcyk7aWYoIXQuZmFpbGVkKXtlLmRhdGEodGhpcyxcImluZmluaXRlc2Nyb2xsXCIsdCl9fX0pO2JyZWFrfXJldHVybiB0aGlzfTt2YXIgbj1lLmV2ZW50LHI7bi5zcGVjaWFsLnNtYXJ0c2Nyb2xsPXtzZXR1cDpmdW5jdGlvbigpe2UodGhpcykuYmluZChcInNjcm9sbFwiLG4uc3BlY2lhbC5zbWFydHNjcm9sbC5oYW5kbGVyKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtlKHRoaXMpLnVuYmluZChcInNjcm9sbFwiLG4uc3BlY2lhbC5zbWFydHNjcm9sbC5oYW5kbGVyKX0saGFuZGxlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscz1hcmd1bWVudHM7dC50eXBlPVwic21hcnRzY3JvbGxcIjtpZihyKXtjbGVhclRpbWVvdXQocil9cj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZShpKS50cmlnZ2VyKFwic21hcnRzY3JvbGxcIixzKX0sbj09PVwiZXhlY0FzYXBcIj8wOjEwMCl9fTtlLmZuLnNtYXJ0c2Nyb2xsPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuYmluZChcInNtYXJ0c2Nyb2xsXCIsZSk6dGhpcy50cmlnZ2VyKFwic21hcnRzY3JvbGxcIixbXCJleGVjQXNhcFwiXSl9fSk7XG5cblxuLyohXG4qIGJvb3RzdHJhcC1saWdodGJveC5qcyB2MC42LjEgXG4qIENvcHlyaWdodCAyMDEzIEphc29uIEJ1dHpcbiogaHR0cDovL3d3dy5qYXNvbmJ1dHouaW5mby9ib290c3RyYXAtbGlnaHRib3gvXG4qIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMC50eHRcbiovXG4hZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9ZnVuY3Rpb24odCxuKXt0aGlzLm9wdGlvbnM9bix0aGlzLiRlbGVtZW50PWUodCkuZGVsZWdhdGUoJ1tkYXRhLWRpc21pc3M9XCJsaWdodGJveFwiXScsXCJjbGljay5kaXNtaXNzLmxpZ2h0Ym94XCIsZS5wcm94eSh0aGlzLmhpZGUsdGhpcykpLHRoaXMub3B0aW9ucy5yZW1vdGUmJnRoaXMuJGVsZW1lbnQuZmluZChcIi5saWdodGJveC1ib2R5XCIpLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSl9O3QucHJvdG90eXBlPWUuZXh0ZW5kKHt9LGUuZm4ubW9kYWwuQ29uc3RydWN0b3IucHJvdG90eXBlKSx0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10LHQucHJvdG90eXBlLmVuZm9yY2VGb2N1cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7ZShkb2N1bWVudCkub24oXCJmb2N1c2luLmxpZ2h0Ym94XCIsZnVuY3Rpb24oZSl7dC4kZWxlbWVudFswXSE9PWUudGFyZ2V0JiYhdC4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCYmdC4kZWxlbWVudC5mb2N1cygpfSl9LHQucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZS5FdmVudChcInNob3dcIik7dGhpcy4kZWxlbWVudC50cmlnZ2VyKG4pO2lmKHRoaXMuaXNTaG93bnx8bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47dGhpcy5pc1Nob3duPSEwLHRoaXMuZXNjYXBlKCksdGhpcy5wcmVsb2FkU2l6ZShmdW5jdGlvbigpe3QuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgbj1lLnN1cHBvcnQudHJhbnNpdGlvbiYmdC4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik7dC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGh8fHQuJGVsZW1lbnQuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSksdC4kZWxlbWVudC5zaG93KCksbiYmdC4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCx0LiRlbGVtZW50LmFkZENsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpLHQuZW5mb3JjZUZvY3VzKCksbj90LiRlbGVtZW50Lm9uZShlLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZnVuY3Rpb24oKXt0LiRlbGVtZW50LmZvY3VzKCkudHJpZ2dlcihcInNob3duXCIpfSk6dC4kZWxlbWVudC5mb2N1cygpLnRyaWdnZXIoXCJzaG93blwiKX0pfSl9LHQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24odCl7dCYmdC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBuPXRoaXM7dD1lLkV2ZW50KFwiaGlkZVwiKSx0aGlzLiRlbGVtZW50LnRyaWdnZXIodCk7aWYoIXRoaXMuaXNTaG93bnx8dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47dGhpcy5pc1Nob3duPSExLHRoaXMuZXNjYXBlKCksZShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5saWdodGJveFwiKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLGUuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLmhpZGVXaXRoVHJhbnNpdGlvbigpOnRoaXMuaGlkZU1vZGFsKCl9LHQucHJvdG90eXBlLmVzY2FwZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMua2V5Ym9hcmQ/dGhpcy4kZWxlbWVudC5vbihcImtleXVwLmRpc21pc3MubGlnaHRib3hcIixmdW5jdGlvbih0KXt0LndoaWNoPT0yNyYmZS5oaWRlKCl9KTp0aGlzLmlzU2hvd258fHRoaXMuJGVsZW1lbnQub2ZmKFwia2V5dXAuZGlzbWlzcy5saWdodGJveFwiKX0sdC5wcm90b3R5cGUucHJlbG9hZFNpemU9ZnVuY3Rpb24odCl7dmFyIG49ZS5DYWxsYmFja3MoKTt0JiZuLmFkZCh0KTt2YXIgcj10aGlzLGkscyxvLHUsYSxmLGwsYyxoLHA7aT1lKHdpbmRvdykuaGVpZ2h0KCkscz1lKHdpbmRvdykud2lkdGgoKSxvPXBhcnNlSW50KHIuJGVsZW1lbnQuZmluZChcIi5saWdodGJveC1jb250ZW50XCIpLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKSx1PXBhcnNlSW50KHIuJGVsZW1lbnQuZmluZChcIi5saWdodGJveC1jb250ZW50XCIpLmNzcyhcInBhZGRpbmctYm90dG9tXCIpLDEwKSxhPXBhcnNlSW50KHIuJGVsZW1lbnQuZmluZChcIi5saWdodGJveC1jb250ZW50XCIpLmNzcyhcInBhZGRpbmctbGVmdFwiKSwxMCksZj1wYXJzZUludChyLiRlbGVtZW50LmZpbmQoXCIubGlnaHRib3gtY29udGVudFwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpLDEwKSxsPXIuJGVsZW1lbnQuZmluZChcIi5saWdodGJveC1jb250ZW50XCIpLmZpbmQoXCJpbWc6Zmlyc3RcIiksYz1uZXcgSW1hZ2UsYy5vbmxvYWQ9ZnVuY3Rpb24oKXtjLndpZHRoK2ErZj49cyYmKGg9Yy53aWR0aCxwPWMuaGVpZ2h0LGMud2lkdGg9cy1hLWYsYy5oZWlnaHQ9cC9oKmMud2lkdGgpLGMuaGVpZ2h0K28rdT49aSYmKGg9Yy53aWR0aCxwPWMuaGVpZ2h0LGMuaGVpZ2h0PWktby11LGMud2lkdGg9aC9wKmMuaGVpZ2h0KSxyLiRlbGVtZW50LmNzcyh7cG9zaXRpb246XCJmaXhlZFwiLHdpZHRoOmMud2lkdGgrYStmLGhlaWdodDpjLmhlaWdodCtvK3UsdG9wOmkvMi0oYy5oZWlnaHQrbyt1KS8yLGxlZnQ6XCI1MCVcIixcIm1hcmdpbi1sZWZ0XCI6LTEqKGMud2lkdGgrYStmKS8yfSksci4kZWxlbWVudC5maW5kKFwiLmxpZ2h0Ym94LWNvbnRlbnRcIikuY3NzKHt3aWR0aDpjLndpZHRoLGhlaWdodDpjLmhlaWdodH0pLG4uZmlyZSgpfSxjLnNyYz1sLmF0dHIoXCJzcmNcIil9O3ZhciBuPWUuZm4ubGlnaHRib3g7ZS5mbi5saWdodGJveD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9ZSh0aGlzKSxpPXIuZGF0YShcImxpZ2h0Ym94XCIpLHM9ZS5leHRlbmQoe30sZS5mbi5saWdodGJveC5kZWZhdWx0cyxyLmRhdGEoKSx0eXBlb2Ygbj09XCJvYmplY3RcIiYmbik7aXx8ci5kYXRhKFwibGlnaHRib3hcIixpPW5ldyB0KHRoaXMscykpLHR5cGVvZiBuPT1cInN0cmluZ1wiP2lbbl0oKTpzLnNob3cmJmkuc2hvdygpfSl9LGUuZm4ubGlnaHRib3guZGVmYXVsdHM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGUuZm4ubGlnaHRib3guQ29uc3RydWN0b3I9dCxlLmZuLmxpZ2h0Ym94Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5mbi5saWdodGJveD1uLHRoaXN9LGUoZG9jdW1lbnQpLm9uKFwiY2xpY2subGlnaHRib3guZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlKj1cImxpZ2h0Ym94XCJdJyxmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMpLHI9bi5hdHRyKFwiaHJlZlwiKSxpPWUobi5hdHRyKFwiZGF0YS10YXJnZXRcIil8fHImJnIucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSkscz1pLmRhdGEoXCJsaWdodGJveFwiKT9cInRvZ2dsZVwiOmUuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KHIpJiZyfSxpLmRhdGEoKSxuLmRhdGEoKSk7dC5wcmV2ZW50RGVmYXVsdCgpLGkubGlnaHRib3gocykub25lKFwiaGlkZVwiLGZ1bmN0aW9uKCl7bi5mb2N1cygpfSl9KX0od2luZG93LmpRdWVyeSk7XG5cblxuLyogUGxhY2Vob2xkZXJzLmpzIHYzLjAuMiAqL1xuLyogaHR0cDovL2phbWVzYWxsYXJkaWNlLmdpdGh1Yi5pby9QbGFjZWhvbGRlcnMuanMgKi9cbihmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKHQsZSxyKXtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyP3QuYWRkRXZlbnRMaXN0ZW5lcihlLHIsITEpOnQuYXR0YWNoRXZlbnQ/dC5hdHRhY2hFdmVudChcIm9uXCIrZSxyKTp2b2lkIDB9ZnVuY3Rpb24gcih0LGUpe3ZhciByLG47Zm9yKHI9MCxuPXQubGVuZ3RoO24+cjtyKyspaWYodFtyXT09PWUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbih0LGUpe3ZhciByO3QuY3JlYXRlVGV4dFJhbmdlPyhyPXQuY3JlYXRlVGV4dFJhbmdlKCksci5tb3ZlKFwiY2hhcmFjdGVyXCIsZSksci5zZWxlY3QoKSk6dC5zZWxlY3Rpb25TdGFydCYmKHQuZm9jdXMoKSx0LnNldFNlbGVjdGlvblJhbmdlKGUsZSkpfWZ1bmN0aW9uIGEodCxlKXt0cnl7cmV0dXJuIHQudHlwZT1lLCEwfWNhdGNoKHIpe3JldHVybiExfX10LlBsYWNlaG9sZGVycz17VXRpbHM6e2FkZEV2ZW50TGlzdGVuZXI6ZSxpbkFycmF5OnIsbW92ZUNhcmV0Om4sY2hhbmdlVHlwZTphfX19KSh0aGlzKSxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKCl7fWZ1bmN0aW9uIHIoKXt0cnl7cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9Y2F0Y2godCl7fX1mdW5jdGlvbiBuKHQsZSl7dmFyIHIsbixhPSEhZSYmdC52YWx1ZSE9PWUsdT10LnZhbHVlPT09dC5nZXRBdHRyaWJ1dGUoVik7cmV0dXJuKGF8fHUpJiZcInRydWVcIj09PXQuZ2V0QXR0cmlidXRlKEQpPyh0LnJlbW92ZUF0dHJpYnV0ZShEKSx0LnZhbHVlPXQudmFsdWUucmVwbGFjZSh0LmdldEF0dHJpYnV0ZShWKSxcIlwiKSx0LmNsYXNzTmFtZT10LmNsYXNzTmFtZS5yZXBsYWNlKFIsXCJcIiksbj10LmdldEF0dHJpYnV0ZShGKSxwYXJzZUludChuLDEwKT49MCYmKHQuc2V0QXR0cmlidXRlKFwibWF4TGVuZ3RoXCIsbiksdC5yZW1vdmVBdHRyaWJ1dGUoRikpLHI9dC5nZXRBdHRyaWJ1dGUoUCksciYmKHQudHlwZT1yKSwhMCk6ITF9ZnVuY3Rpb24gYSh0KXt2YXIgZSxyLG49dC5nZXRBdHRyaWJ1dGUoVik7cmV0dXJuXCJcIj09PXQudmFsdWUmJm4/KHQuc2V0QXR0cmlidXRlKEQsXCJ0cnVlXCIpLHQudmFsdWU9bix0LmNsYXNzTmFtZSs9XCIgXCIrSSxyPXQuZ2V0QXR0cmlidXRlKEYpLHJ8fCh0LnNldEF0dHJpYnV0ZShGLHQubWF4TGVuZ3RoKSx0LnJlbW92ZUF0dHJpYnV0ZShcIm1heExlbmd0aFwiKSksZT10LmdldEF0dHJpYnV0ZShQKSxlP3QudHlwZT1cInRleHRcIjpcInBhc3N3b3JkXCI9PT10LnR5cGUmJk0uY2hhbmdlVHlwZSh0LFwidGV4dFwiKSYmdC5zZXRBdHRyaWJ1dGUoUCxcInBhc3N3b3JkXCIpLCEwKTohMX1mdW5jdGlvbiB1KHQsZSl7dmFyIHIsbixhLHUsaSxsLG87aWYodCYmdC5nZXRBdHRyaWJ1dGUoVikpZSh0KTtlbHNlIGZvcihhPXQ/dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpOmIsdT10P3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZXh0YXJlYVwiKTpmLHI9YT9hLmxlbmd0aDowLG49dT91Lmxlbmd0aDowLG89MCxsPXIrbjtsPm87bysrKWk9cj5vP2Fbb106dVtvLXJdLGUoaSl9ZnVuY3Rpb24gaSh0KXt1KHQsbil9ZnVuY3Rpb24gbCh0KXt1KHQsYSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oKXttJiZ0LnZhbHVlPT09dC5nZXRBdHRyaWJ1dGUoVikmJlwidHJ1ZVwiPT09dC5nZXRBdHRyaWJ1dGUoRCk/TS5tb3ZlQ2FyZXQodCwwKTpuKHQpfX1mdW5jdGlvbiBjKHQpe3JldHVybiBmdW5jdGlvbigpe2EodCl9fWZ1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBBPXQudmFsdWUsXCJ0cnVlXCI9PT10LmdldEF0dHJpYnV0ZShEKSYmQT09PXQuZ2V0QXR0cmlidXRlKFYpJiZNLmluQXJyYXkoQyxlLmtleUNvZGUpPyhlLnByZXZlbnREZWZhdWx0JiZlLnByZXZlbnREZWZhdWx0KCksITEpOnZvaWQgMH19ZnVuY3Rpb24gZCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtuKHQsQSksXCJcIj09PXQudmFsdWUmJih0LmJsdXIoKSxNLm1vdmVDYXJldCh0LDApKX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZnVuY3Rpb24oKXt0PT09cigpJiZ0LnZhbHVlPT09dC5nZXRBdHRyaWJ1dGUoVikmJlwidHJ1ZVwiPT09dC5nZXRBdHRyaWJ1dGUoRCkmJk0ubW92ZUNhcmV0KHQsMCl9fWZ1bmN0aW9uIHYodCl7cmV0dXJuIGZ1bmN0aW9uKCl7aSh0KX19ZnVuY3Rpb24gcCh0KXt0LmZvcm0mJihUPXQuZm9ybSxcInN0cmluZ1wiPT10eXBlb2YgVCYmKFQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoVCkpLFQuZ2V0QXR0cmlidXRlKFUpfHwoTS5hZGRFdmVudExpc3RlbmVyKFQsXCJzdWJtaXRcIix2KFQpKSxULnNldEF0dHJpYnV0ZShVLFwidHJ1ZVwiKSkpLE0uYWRkRXZlbnRMaXN0ZW5lcih0LFwiZm9jdXNcIixvKHQpKSxNLmFkZEV2ZW50TGlzdGVuZXIodCxcImJsdXJcIixjKHQpKSxtJiYoTS5hZGRFdmVudExpc3RlbmVyKHQsXCJrZXlkb3duXCIscyh0KSksTS5hZGRFdmVudExpc3RlbmVyKHQsXCJrZXl1cFwiLGQodCkpLE0uYWRkRXZlbnRMaXN0ZW5lcih0LFwiY2xpY2tcIixnKHQpKSksdC5zZXRBdHRyaWJ1dGUoaixcInRydWVcIiksdC5zZXRBdHRyaWJ1dGUoVix4KSwobXx8dCE9PXIoKSkmJmEodCl9dmFyIGIsZixtLGgsQSx5LEUseCxMLFQsTixTLHcsQj1bXCJ0ZXh0XCIsXCJzZWFyY2hcIixcInVybFwiLFwidGVsXCIsXCJlbWFpbFwiLFwicGFzc3dvcmRcIixcIm51bWJlclwiLFwidGV4dGFyZWFcIl0sQz1bMjcsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsOCw0Nl0saz1cIiNjY2NcIixJPVwicGxhY2Vob2xkZXJzanNcIixSPVJlZ0V4cChcIig/Ol58XFxcXHMpXCIrSStcIig/IVxcXFxTKVwiKSxWPVwiZGF0YS1wbGFjZWhvbGRlci12YWx1ZVwiLEQ9XCJkYXRhLXBsYWNlaG9sZGVyLWFjdGl2ZVwiLFA9XCJkYXRhLXBsYWNlaG9sZGVyLXR5cGVcIixVPVwiZGF0YS1wbGFjZWhvbGRlci1zdWJtaXRcIixqPVwiZGF0YS1wbGFjZWhvbGRlci1ib3VuZFwiLHE9XCJkYXRhLXBsYWNlaG9sZGVyLWZvY3VzXCIsej1cImRhdGEtcGxhY2Vob2xkZXItbGl2ZVwiLEY9XCJkYXRhLXBsYWNlaG9sZGVyLW1heGxlbmd0aFwiLEc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLEg9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLEo9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LEs9dC5QbGFjZWhvbGRlcnMsTT1LLlV0aWxzO2lmKEsubmF0aXZlU3VwcG9ydD12b2lkIDAhPT1HLnBsYWNlaG9sZGVyLCFLLm5hdGl2ZVN1cHBvcnQpe2ZvcihiPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksZj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRleHRhcmVhXCIpLG09XCJmYWxzZVwiPT09Si5nZXRBdHRyaWJ1dGUocSksaD1cImZhbHNlXCIhPT1KLmdldEF0dHJpYnV0ZSh6KSx5PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSx5LnR5cGU9XCJ0ZXh0L2Nzc1wiLEU9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIuXCIrSStcIiB7IGNvbG9yOlwiK2srXCI7IH1cIikseS5zdHlsZVNoZWV0P3kuc3R5bGVTaGVldC5jc3NUZXh0PUUubm9kZVZhbHVlOnkuYXBwZW5kQ2hpbGQoRSksSC5pbnNlcnRCZWZvcmUoeSxILmZpcnN0Q2hpbGQpLHc9MCxTPWIubGVuZ3RoK2YubGVuZ3RoO1M+dzt3KyspTj1iLmxlbmd0aD53P2Jbd106Zlt3LWIubGVuZ3RoXSx4PU4uYXR0cmlidXRlcy5wbGFjZWhvbGRlcix4JiYoeD14Lm5vZGVWYWx1ZSx4JiZNLmluQXJyYXkoQixOLnR5cGUpJiZwKE4pKTtMPXNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKHc9MCxTPWIubGVuZ3RoK2YubGVuZ3RoO1M+dzt3KyspTj1iLmxlbmd0aD53P2Jbd106Zlt3LWIubGVuZ3RoXSx4PU4uYXR0cmlidXRlcy5wbGFjZWhvbGRlcix4Pyh4PXgubm9kZVZhbHVlLHgmJk0uaW5BcnJheShCLE4udHlwZSkmJihOLmdldEF0dHJpYnV0ZShqKXx8cChOKSwoeCE9PU4uZ2V0QXR0cmlidXRlKFYpfHxcInBhc3N3b3JkXCI9PT1OLnR5cGUmJiFOLmdldEF0dHJpYnV0ZShQKSkmJihcInBhc3N3b3JkXCI9PT1OLnR5cGUmJiFOLmdldEF0dHJpYnV0ZShQKSYmTS5jaGFuZ2VUeXBlKE4sXCJ0ZXh0XCIpJiZOLnNldEF0dHJpYnV0ZShQLFwicGFzc3dvcmRcIiksTi52YWx1ZT09PU4uZ2V0QXR0cmlidXRlKFYpJiYoTi52YWx1ZT14KSxOLnNldEF0dHJpYnV0ZShWLHgpKSkpOk4uZ2V0QXR0cmlidXRlKEQpJiYobihOKSxOLnJlbW92ZUF0dHJpYnV0ZShWKSk7aHx8Y2xlYXJJbnRlcnZhbChMKX0sMTAwKX1NLmFkZEV2ZW50TGlzdGVuZXIodCxcImJlZm9yZXVubG9hZFwiLGZ1bmN0aW9uKCl7Sy5kaXNhYmxlKCl9KSxLLmRpc2FibGU9Sy5uYXRpdmVTdXBwb3J0P2U6aSxLLmVuYWJsZT1LLm5hdGl2ZVN1cHBvcnQ/ZTpsfSh0aGlzKTtcblxuXG4vKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBXUCBFZGl0b3IgKi9cbi8qIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1JhZEdILzUyM2JlZDI3NGYzMDc4MzA3NTJjICovXG5mdW5jdGlvbiB0bWNlX2dldENvbnRlbnQoZWRpdG9yX2lkLCB0ZXh0YXJlYV9pZCkge1xuICBpZiAoIHR5cGVvZiBlZGl0b3JfaWQgPT0gJ3VuZGVmaW5lZCcgKSBlZGl0b3JfaWQgPSB3cEFjdGl2ZUVkaXRvcjtcbiAgaWYgKCB0eXBlb2YgdGV4dGFyZWFfaWQgPT0gJ3VuZGVmaW5lZCcgKSB0ZXh0YXJlYV9pZCA9IGVkaXRvcl9pZDtcbiAgXG4gIGlmICggalF1ZXJ5KCcjd3AtJytlZGl0b3JfaWQrJy13cmFwJykuaGFzQ2xhc3MoJ3RtY2UtYWN0aXZlJykgJiYgdGlueU1DRS5nZXQoZWRpdG9yX2lkKSApIHtcbiAgICByZXR1cm4gdGlueU1DRS5nZXQoZWRpdG9yX2lkKS5nZXRDb250ZW50KCk7XG4gIH1lbHNle1xuICAgIHJldHVybiBqUXVlcnkoJyMnK3RleHRhcmVhX2lkKS52YWwoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0bWNlX3NldENvbnRlbnQoY29udGVudCwgZWRpdG9yX2lkLCB0ZXh0YXJlYV9pZCkge1xuICBpZiAoIHR5cGVvZiBlZGl0b3JfaWQgPT0gJ3VuZGVmaW5lZCcgKSBlZGl0b3JfaWQgPSB3cEFjdGl2ZUVkaXRvcjtcbiAgaWYgKCB0eXBlb2YgdGV4dGFyZWFfaWQgPT0gJ3VuZGVmaW5lZCcgKSB0ZXh0YXJlYV9pZCA9IGVkaXRvcl9pZDtcbiAgXG4gIGlmICggalF1ZXJ5KCcjd3AtJytlZGl0b3JfaWQrJy13cmFwJykuaGFzQ2xhc3MoJ3RtY2UtYWN0aXZlJykgJiYgdGlueU1DRS5nZXQoZWRpdG9yX2lkKSApIHtcbiAgICByZXR1cm4gdGlueU1DRS5nZXQoZWRpdG9yX2lkKS5zZXRDb250ZW50KGNvbnRlbnQpO1xuICB9ZWxzZXtcbiAgICByZXR1cm4galF1ZXJ5KCcjJyt0ZXh0YXJlYV9pZCkudmFsKGNvbnRlbnQpO1xuICB9XG59XG5cbi8vZWRpdGVkOiBmb3IgaXBpbiBwcm9cbmZ1bmN0aW9uIHRtY2VfZm9jdXMoZWRpdG9yX2lkLCB0ZXh0YXJlYV9pZCkge1xuICBpZiAoIHR5cGVvZiBlZGl0b3JfaWQgPT0gJ3VuZGVmaW5lZCcgKSBlZGl0b3JfaWQgPSB3cEFjdGl2ZUVkaXRvcjtcbiAgaWYgKCB0eXBlb2YgdGV4dGFyZWFfaWQgPT0gJ3VuZGVmaW5lZCcgKSB0ZXh0YXJlYV9pZCA9IGVkaXRvcl9pZDtcbiAgXG4gIGlmICggalF1ZXJ5KCcjd3AtJytlZGl0b3JfaWQrJy13cmFwJykuaGFzQ2xhc3MoJ3RtY2UtYWN0aXZlJykgJiYgdGlueU1DRS5nZXQoZWRpdG9yX2lkKSApIHs7XG5cdHRpbnlNQ0UuZ2V0KGVkaXRvcl9pZCkuc2VsZWN0aW9uLnNlbGVjdCh0aW55TUNFLmdldChlZGl0b3JfaWQpLmdldEJvZHkoKSwgdHJ1ZSk7XG5cdHRpbnlNQ0UuZ2V0KGVkaXRvcl9pZCkuZm9jdXMoKTtcblx0cmV0dXJuIGZhbHNlO1xuICB9ZWxzZXtcbiAgICByZXR1cm4galF1ZXJ5KCcjJyt0ZXh0YXJlYV9pZCkuZm9jdXMoKS5zZWxlY3QoKTtcbiAgfVxufVxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG5cdHZhciBpb3MgPSAvKGlQYWR8aVBob25lfGlQb2QpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0dmFyIGllOWJlbG93ID0gZmFsc2U7XG5cdGlmIChkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKSB7IC8vaHR0cDovL3RhbmFsaW4uY29tL2VuL2FydGljbGVzL2llLXZlcnNpb24tanMvXG5cdFx0aWU5YmVsb3cgPSB0cnVlO1xuXHR9XG5cblx0Ly9tYXNvbnJ5XG5cdHZhciAkbWFzb25yeSA9ICQoJyNtYXNvbnJ5Jyk7XG5cdHZhciB1c2VyX3Byb2ZpbGVfZm9sbG93ID0gJCgnI3VzZXItcHJvZmlsZS1mb2xsb3cnKTtcblx0dmFyIHVzZXJfcHJvZmlsZV9ib2FyZHMgPSAkKCcjdXNlci1wcm9maWxlLWJvYXJkcycpO1xuXHR2YXIgdXNlcl9ub3RpZmljYXRpb25zID0gJCgnI3VzZXItbm90aWZpY2F0aW9ucycpO1xuXG5cdGlmIChvYmpfaXBpbi5pbmZpbml0ZXNjcm9sbCAhPSAnZGlzYWJsZScgJiYgKCRtYXNvbnJ5Lmxlbmd0aCB8fCB1c2VyX3Byb2ZpbGVfZm9sbG93Lmxlbmd0aCB8fCB1c2VyX3Byb2ZpbGVfYm9hcmRzLmxlbmd0aCB8fCAgdXNlcl9ub3RpZmljYXRpb25zLmxlbmd0aCkpIHtcblx0XHQkKCcjbmF2aWdhdGlvbicpLmNzcyh7J3Zpc2liaWxpdHknOidoaWRkZW4nLCAnaGVpZ2h0JzonMXB4J30pO1xuXHR9XG5cdFx0XG5cdGlmICgkbWFzb25yeS5sZW5ndGgpIHtcblx0XHRpZiAoJCgnLmNoZWNrLTQ4MHB4JykuY3NzKCdmbG9hdCcpID09ICdsZWZ0Jykge1xuXHRcdFx0JG1hc29ucnkuaW1hZ2VzTG9hZGVkKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbWFzb25yeS5tYXNvbnJ5KHtcblx0XHRcdFx0XHRpdGVtU2VsZWN0b3IgOiAnLnRodW1iJyxcblx0XHRcdFx0XHRpc0ZpdFdpZHRoOiB0cnVlLFxuXHRcdFx0XHRcdHRyYW5zaXRpb25EdXJhdGlvbjogMFxuXHRcdFx0XHR9KS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCQoJyNtYXNvbnJ5IC50aHVtYicpLmxlbmd0aCA9PSAxKSB7XG5cdFx0XHRcdFx0JCgnI21hc29ucnkgLnRodW1iJykuY3NzKCd3aWR0aCcsICc5NSUnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0JCgnI2FqYXgtbG9hZGVyLW1hc29ucnknKS5oaWRlKCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JG1hc29ucnkubWFzb25yeSh7XG5cdFx0XHRcdGl0ZW1TZWxlY3RvciA6ICcudGh1bWInLFxuXHRcdFx0XHRpc0ZpdFdpZHRoOiB0cnVlLFxuXHRcdFx0XHR0cmFuc2l0aW9uRHVyYXRpb246IDBcblx0XHRcdH0pLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG5cdFx0XHQkKCcjYWpheC1sb2FkZXItbWFzb25yeScpLmhpZGUoKTtcblx0XHR9XG5cdH1cblx0XG5cdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCRtYXNvbnJ5Lmxlbmd0aCB8fCB1c2VyX3Byb2ZpbGVfZm9sbG93Lmxlbmd0aCkge1xuXHRcdFx0JG1hc29ucnkud2lkdGgoJCh3aW5kb3cpLndpZHRoKCktMjgpLm1hc29ucnkoJ3JlbG9hZEl0ZW1zJykubWFzb25yeSgnbGF5b3V0Jyk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdCQod2luZG93KS5vbignbG9hZCByZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHQvL0FkanVzdCB0b3AgbWVudVxuXHRcdGlmICgkKCcuY2hlY2stNzY3cHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ2xlZnQnKSB7XG5cdFx0XHQkKCdib2R5JykuY3NzKCdwYWRkaW5nLXRvcCcsIDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAob2JqX2lwaW4udSA9PSAnMCcpIHtcblx0XHRcdFx0aWYgKCQoJyN0b3BtZW51JykubGVuZ3RoICYmICQoJyN0b3AtbWVzc2FnZS13cmFwcGVyJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnYm9keScpLmNzcygncGFkZGluZy10b3AnLCAkKCcjdG9wbWVudScpLmhlaWdodCgpICsgJCgnI3RvcC1tZXNzYWdlLXdyYXBwZXInKS5oZWlnaHQoKSArIDI0ICsgJ3B4Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICgkKCcjdG9wbWVudScpLmxlbmd0aCkge1xuXHRcdFx0XHRcdCQoJ2JvZHknKS5jc3MoJ3BhZGRpbmctdG9wJywgJCgnI3RvcG1lbnUnKS5oZWlnaHQoKSArIDEyICsgJ3B4Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly90b3AgbWVudSBkcm9wZG93biBpbiBtb2JpbGVcblx0XHRpZiAoJCgnLmNoZWNrLTc2N3B4JykuY3NzKCdmbG9hdCcpID09ICdsZWZ0Jykge1xuXHRcdFx0JChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjdG9wbWVudSAuZHJvcGRvd24tdG9nZ2xlJykub24oJ2NsaWNrJywgJyN0b3BtZW51IC5kcm9wZG93bi10b2dnbGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCh0aGlzKS5uZXh0KCkudG9nZ2xlKCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnI25hdi1tYWluIC5kcm9wZG93bi1tZW51JykucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdCQoJyNuYXYtbWFpbiB1bCBsaScpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG5cdFx0XHQkKCcjbmF2LW1haW4gLmRyb3Bkb3duLXRvZ2dsZScpLmJsdXIoKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly90b29sdGlwXG5cdFx0aWYgKCFpb3MgJiYgJCgnLmNoZWNrLTc2N3B4JykuY3NzKCdmbG9hdCcpID09ICdub25lJykge1xuXHRcdFx0JChkb2N1bWVudCkudG9vbHRpcCh7XG5cdFx0XHRcdHNlbGVjdG9yOiAnW3JlbD10b29sdGlwXSdcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHQvL1Jlc2l6ZSBmb2xsb3ctd3JhcHBlclxuXHRcdGlmICgkKCcuY2hlY2stNDgwcHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ2xlZnQnICYmICQoJyN1c2VyLXByb2ZpbGUtZm9sbG93JykubGVuZ3RoKSB7XG5cdFx0XHQkKCcuZm9sbG93LXdyYXBwZXIgLmZvbGxvdy11c2VyLXBvc3RzLXRodW1iJykuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuXHRcdFx0XHQkKCcuZm9sbG93LXVzZXItcG9zdHMnKS53aWR0aCgkKCcuZm9sbG93LXVzZXItbmFtZScpLndpZHRoKCktJCgnLmZvbGxvdy11c2VyLWF2YXRhcicpLndpZHRoKCktNik7XG5cdFx0XHRcdCQoJy5mb2xsb3ctdXNlci1wb3N0cy10aHVtYicpLndpZHRoKCQoJy5mb2xsb3ctdXNlci1wb3N0cycpLndpZHRoKCkvMi00KS5oZWlnaHQoJCgnLmZvbGxvdy11c2VyLWF2YXRhcicpLndpZHRoKCkvMi0yKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHRpZiAoJCgnLnBvc3QtdG9wLW1ldGEnKS5sZW5ndGgpIHtcblx0XHRcdHBvc3RUb3BNZXRhU2Nyb2xsKCk7XG5cdFx0fVxuXHRcdFxuXHR9KTtcblxuXHQvL2Nsb3NlIG1vZGFsIHdoZW4gY2xpY2sgb3V0c2lkZSBwb3VwLW92ZXJsYXlcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcubW9kYWwtZGlhbG9nJykubGVuZ3RoICYmICEkKGUudGFyZ2V0KS5jbG9zZXN0KCcjd3AtbGluay13cmFwJykubGVuZ3RoICYmICEkKGUudGFyZ2V0KS5jbG9zZXN0KCcjd3AtbGluay1iYWNrZHJvcCcpLmxlbmd0aCkge1xuXHRcdFx0aWYgKCQoJyNzY3JvbGx0b3RvcCcpLm5leHQoKS5hdHRyKCdpZCcpID09ICdwb3B1cC1saWdodGJveCcpIHtcblx0XHRcdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5oaWRlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjcG9wdXAtb3ZlcmxheScpLmRldGFjaCgpLmluc2VydEFmdGVyKCcjc2Nyb2xsdG90b3AnKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHQkKCcuaXBpbi1tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cdFx0XHRpZiAoJCgnI3Bvc3QtbGlnaHRib3gnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnYmxvY2snKSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnbW9kYWwtb3BlbicpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdFxuXHQvL2Nsb3NlIG1vZGFsIHdoZW4gY2xpY2sgY2xvc2Vcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2RhbCAucG9wdXAtY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJCgnI3Njcm9sbHRvdG9wJykubmV4dCgpLmF0dHIoJ2lkJykgPT0gJ3BvcHVwLWxpZ2h0Ym94Jykge1xuXHRcdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5oaWRlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNwb3B1cC1vdmVybGF5JykuZGV0YWNoKCkuaW5zZXJ0QWZ0ZXIoJyNzY3JvbGx0b3RvcCcpLmhpZGUoKTtcblx0XHR9XG5cdFx0JCgnLmlwaW4tbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXHRcdGlmICgkKCcjcG9zdC1saWdodGJveCcpLmNzcygnZGlzcGxheScpID09ICdibG9jaycpIHtcblx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnbW9kYWwtb3BlbicpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQvL2xvZ2luIGJveCBwb3B1cFxuXHQvL2FwcGVuZCBmb3JtIHRvIGxvZ2luYm94IHN1Y2ggdGhhdCB3c2wgYWxzbyB3b3Jrc1xuXHRpZiAob2JqX2lwaW4udSA9PSAnMCcpIHtcblx0XHQkKCcjbG9naW5ib3gnKS5wb3BvdmVyKHtcblx0XHRcdGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJCgnI2xvZ2luYm94JykuZGF0YSgnd3NsJykgKyBcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJlcnJvci1tc2ctbG9naW5ib3hcIj48L2Rpdj5cXFxuXHRcdFx0XHQ8Zm9ybSBuYW1lPVwibG9naW5mb3JtX2hlYWRlclwiIGlkPVwibG9naW5mb3JtX2hlYWRlclwiIG1ldGhvZD1cInBvc3RcIj5cXFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxcblx0XHRcdFx0XHRcdDxsYWJlbD4nICsgb2JqX2lwaW4uX19Vc2VybmFtZSArICc8YnIgLz5cXFxuXHRcdFx0XHRcdFx0PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBuYW1lPVwibG9nXCIgaWQ9XCJsb2dcIiB2YWx1ZT1cIlwiIHRhYmluZGV4PVwiMFwiIC8+PC9sYWJlbD5cXFxuXHRcdFx0XHRcdDwvZGl2PlxcXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXFxuXHRcdFx0XHRcdFx0PGxhYmVsPicgKyBvYmpfaXBpbi5fX1Bhc3N3b3JkICsgJ1xcXG5cdFx0XHRcdFx0XHQoPGEgaHJlZj1cIicgKyBvYmpfaXBpbi5ob21lX3VybCArICcvbG9naW4tbHB3L1wiIHRhYmluZGV4PVwiLTFcIj4nICsgb2JqX2lwaW4uX19Gb3Jnb3QgKyAnPC9hPilcXFxuXHRcdFx0XHRcdFx0PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCJ0eXBlPVwicGFzc3dvcmRcIiBuYW1lPVwicHdkXCIgaWQ9XCJwd2RcIiB2YWx1ZT1cIlwiIHRhYmluZGV4PVwiMFwiIC8+PC9sYWJlbD5cXFxuXHRcdFx0XHRcdDwvZGl2PlxcXG5cdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiIG5hbWU9XCJ3cC1zdWJtaXRcIiBpZD1cIndwLXN1Ym1pdFwiIHZhbHVlPVwiJyArIG9ial9pcGluLl9fTG9naW4gKyAnXCIgdGFiaW5kZXg9XCIwXCIgLz5cXFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJhamF4LWxvYWRlci1sb2dpbmJveCBhamF4LWxvYWRlciBoaWRlXCI+PC9kaXY+XFxcblx0XHRcdFx0XHQ8c3BhbiBpZD1cImxvZ2luYm94LXJlZ2lzdGVyXCI+JyArIG9ial9pcGluLl9fb3IgKyAnIDxhIGhyZWY9XCInICsgb2JqX2lwaW4uaG9tZV91cmwgKyAnL3NpZ251cC9cIiB0YWJpbmRleD1cIjBcIj4nICsgb2JqX2lwaW4uX19TaWduVXAgKyAnPC9hPjwvc3Bhbj5cXFxuXHRcdFx0XHRcdDxiciAvPlxcXG5cdFx0XHRcdDwvZm9ybT4nXG5cdFx0XHR9LFxuXHRcdFx0aHRtbDogJ3RydWUnLFxuXHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcblx0XHRcdHRpdGxlOiBvYmpfaXBpbi5fX1dlbGNvbWUgKyAnPGJ1dHRvbiBjbGFzcz1cImNsb3NlXCIgaWQ9XCJsb2dpbmJveC1jbG9zZVwiIHR5cGU9XCJidXR0b25cIj4mdGltZXM7PC9idXR0b24+J1xuXHRcdH0pO1xuXHRcdFxuXHRcdCQoJyNsb2dpbmJveCcpLm9uKCdzaG93bi5icy5wb3BvdmVyJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0JCgnLndwLXNvY2lhbC1sb2dpbi13aWRnZXQgYScpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQodGhpcykuYXR0cignb25jbGljaycsICd3aW5kb3cubG9jYXRpb24gPSBcIicgKyAkKHRoaXMpLmF0dHIoJ2hyZWYnKSArICdcIicpLnJlbW92ZUF0dHIoJ2hyZWYnKS5jc3MoJ2N1cnNvcicsICdwb2ludGVyJyk7XG5cdFx0XHR9KTtcblx0XHR9KVxuXHRcdFxuXHRcdCQoJyNsb2dpbmJveCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXHRcdFxuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbG9naW5ib3gtY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdCQoJyNsb2dpbmJveCcpLnBvcG92ZXIoJ2hpZGUnKTtcblx0XHR9KTtcblx0XHRcblx0XHQvL2xvZ2luIGJveCBoaWRlIHdoZW4gY2xpY2sgb3V0c2lkZVxuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcucG9wb3ZlcicpLmxlbmd0aCkge1xuXHRcdFx0XHQkKCcjbG9naW5ib3gnKS5wb3BvdmVyKCdoaWRlJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly9sb2dpbiBib3ggcHJvY2Vzc1xuXHRcdCQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2xvZ2luZm9ybV9oZWFkZXIsICNwb3B1cC1sb2dpbi1mb3JtJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCcjbG9naW5mb3JtX2hlYWRlciAuYWpheC1sb2FkZXItbG9naW5ib3gnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG5cdFx0XHRcblx0XHRcdCQoJy5lcnJvci1tc2ctbG9naW5ib3gnKS5oaWRlKCk7XG5cdFx0XHRpZiAoJCgnI2xvZycpLnZhbCgpID09ICcnIHx8ICQoJyNwd2QnKS52YWwoKSA9PSAnJykge1xuXHRcdFx0XHQkKCcuZXJyb3ItbXNnLWxvZ2luYm94JykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX3BsZWFzZWVudGVyYm90aHVzZXJuYW1lYW5kcGFzc3dvcmQgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0XHQkKCcjbG9naW5mb3JtX2hlYWRlciAuYWpheC1sb2FkZXItbG9naW5ib3gnKS5oaWRlKCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdGFjdGlvbjogJ2lwaW4tYWpheC1sb2dpbicsXG5cdFx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdFx0bG9nOiAkKCcjbG9naW5mb3JtX2hlYWRlciAjbG9nJykudmFsKCksXG5cdFx0XHRcdHB3ZDogJCgnI2xvZ2luZm9ybV9oZWFkZXIgI3B3ZCcpLnZhbCgpXG5cdFx0XHR9O1xuXHRcdFxuXHRcdFx0JC5hamF4KHtcblx0XHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmwsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRpZiAoZGF0YSA9PSAnZXJyb3InKSB7XG5cdFx0XHRcdFx0XHQkKCcuZXJyb3ItbXNnLWxvZ2luYm94JykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX2luY29ycmVjdHVzZXJuYW1lcGFzc3dvcmQgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0XHRcdFx0JCgnI2xvZ2luZm9ybV9oZWFkZXIgLmFqYXgtbG9hZGVyLWxvZ2luYm94JykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1x0XHRcdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblx0fVxuXHRcblx0Ly9oaWRlIGxpbmtzIGluIHdzbFxuXHRpZiAoJCgnLndwLXNvY2lhbC1sb2dpbi13aWRnZXQnKS5sZW5ndGgpIHtcblx0XHQkKCcud3Atc29jaWFsLWxvZ2luLXdpZGdldCBhJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdCQodGhpcykuYXR0cignb25jbGljaycsICd3aW5kb3cubG9jYXRpb24gPSBcIicgKyAkKHRoaXMpLmF0dHIoJ2hyZWYnKSArICdcIicpLnJlbW92ZUF0dHIoJ2hyZWYnKS5jc3MoJ2N1cnNvcicsICdwb2ludGVyJyk7XG5cdFx0fSk7XG5cdH1cblxuXHQvL25vdGlmaWNhdGlvbiBwb3B1cFx0XG5cdCQoJyN1c2VyLW5vdGlmaWNhdGlvbnMtY291bnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoISQodGhpcykubmV4dCgnZGl2LnBvcG92ZXInKS5sZW5ndGgpIHtcblx0XHRcdCQoJyN1c2VyLW5vdGlmaWNhdGlvbnMtY291bnQgLnRvb2x0aXAnKS5oaWRlKCk7XG5cdFx0XHQkKCcjdXNlci1ub3RpZmljYXRpb25zLWNvdW50Jylcblx0XHRcdC5wb3BvdmVyKHtcblx0XHRcdFx0Y29udGVudDogJzxkaXYgY2xhc3M9XCJhamF4LWxvYWRlclwiPjwvZGl2PicsXG5cdFx0XHRcdGh0bWw6ICd0cnVlJyxcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcblx0XHRcdFx0dHJpZ2dlcjogJ21hbnVhbCcsXG5cdFx0XHRcdHRpdGxlOiAnPHN0cm9uZz4nICsgb2JqX2lwaW4uX19Ob3RpZmljYXRpb25zTGF0ZXN0MzAgKyAnICg8YSBocmVmPVwiJyArIG9ial9pcGluLmhvbWVfdXJsICsgJy9ub3RpZmljYXRpb25zL1wiPjxzcGFuPicgKyBvYmpfaXBpbi5fX1NlZUFsbCArICc8L3NwYW4+PC9hPik8L3N0cm9uZz4gPGJ1dHRvbiBjbGFzcz1cImNsb3NlXCIgaWQ9XCJ1c2VyLW5vdGlmaWNhdGlvbnMtY291bnQtY2xvc2VcIiB0eXBlPVwiYnV0dG9uXCI+JnRpbWVzOzwvYnV0dG9uPidcblx0XHRcdH0pXG5cdFx0XHQucG9wb3Zlcignc2hvdycpO1xuXHRcdFx0XG5cdFx0XHQkKCc8ZGl2PicpLmxvYWQob2JqX2lwaW4uaG9tZV91cmwgKyAnL25vdGlmaWNhdGlvbnMvICN1c2VyLW5vdGlmaWNhdGlvbnMtdGFibGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3VzZXItbm90aWZpY2F0aW9ucy1jb3VudCcpLm5leHQoJy5wb3BvdmVyJykuY2hpbGRyZW4oJy5wb3BvdmVyLWNvbnRlbnQnKS5odG1sKCQodGhpcykuaHRtbCgpKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjdXNlci1ub3RpZmljYXRpb25zLWNvdW50JykucG9wb3ZlcignaGlkZScpO1xuXHRcdFx0JCgnI3VzZXItbm90aWZpY2F0aW9ucy1jb3VudCBhIHNwYW4nKS50ZXh0KCcwJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3VzZXItbm90aWZpY2F0aW9ucy1jb3VudC1udGgnKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdXNlci1ub3RpZmljYXRpb25zLWNvdW50LWNsb3NlJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3VzZXItbm90aWZpY2F0aW9ucy1jb3VudCcpLnBvcG92ZXIoJ2hpZGUnKTtcblx0XHQkKCcjdXNlci1ub3RpZmljYXRpb25zLWNvdW50IGEgc3BhbicpLnRleHQoJzAnKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygndXNlci1ub3RpZmljYXRpb25zLWNvdW50LW50aCcpO1xuXHR9KTtcblx0XG5cdC8vbm90aWZpY2F0aW9uIGhpZGUgd2hlbiBjbGljayBvdXRzaWRlXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLnBvcG92ZXInKS5sZW5ndGggJiYgJCgnI3VzZXItbm90aWZpY2F0aW9ucy1jb3VudCArIGRpdi5wb3BvdmVyJykubGVuZ3RoKSB7XG5cdFx0XHQkKCcjdXNlci1ub3RpZmljYXRpb25zLWNvdW50JykucG9wb3ZlcignaGlkZScpO1xuXHRcdFx0JCgnI3VzZXItbm90aWZpY2F0aW9ucy1jb3VudCBhIHNwYW4nKS50ZXh0KCcwJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3VzZXItbm90aWZpY2F0aW9ucy1jb3VudC1udGgnKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0Ly9zY3JvbGwgdG8gdG9wXHRcblx0JCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcblx0XHR2YXIgJHNjcm9sbHRvdG9wID0gJCgnI3Njcm9sbHRvdG9wJyk7XG5cdFx0XG5cdFx0aWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiAxMDApIHtcblx0XHRcdCRzY3JvbGx0b3RvcC5zbGlkZURvd24oJ2Zhc3QnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHNjcm9sbHRvdG9wLnNsaWRlVXAoJ2Zhc3QnKTtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKCQoJy5wb3N0LXRvcC1tZXRhJykubGVuZ3RoKSB7XG5cdFx0XHRwb3N0VG9wTWV0YVNjcm9sbCgpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnI3Njcm9sbHRvdG9wJykuY2xpY2soZnVuY3Rpb24oKSB7XG5cdFx0JCgnYm9keSxodG1sJykuYW5pbWF0ZSh7XG5cdFx0XHRzY3JvbGxUb3A6IDBcblx0XHR9LCAnZmFzdCcpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdFxuXHQvL3Bvc3QgYWN0aW9uIGJhciBzY3JvbGxcblx0aWYgKCQoJy5wb3N0LXRvcC1tZXRhJykubGVuZ3RoKSB7XG5cdFx0dmFyIHBvc3RfdG9wX21ldGEgPSAkKCcucG9zdC10b3AtbWV0YScpO1xuXHRcdHZhciBwb3N0X3RvcF9tZXRhX3RvcCA9IHBvc3RfdG9wX21ldGEub2Zmc2V0KCkudG9wO1xuXHRcdHZhciBwb3N0X3RvcF9tZXRhX2JvdHRvbSA9IHBvc3RfdG9wX21ldGFfdG9wICsgcG9zdF90b3BfbWV0YS5vdXRlckhlaWdodCgpLTE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBvc3RUb3BNZXRhU2Nyb2xsKCkge1xuXHRcdGlmICgkKCcuY2hlY2stNzY3cHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ25vbmUnKSB7XG5cdFx0XHR2YXIgdG9wbWVudV9ib3R0b20sIHRvcG1lbnVfdG9wO1xuXHRcdFx0aWYgKCQoJyN0b3AtbWVzc2FnZS13cmFwcGVyJykubGVuZ3RoKSB7XG5cdFx0XHRcdHRvcG1lbnVfYm90dG9tID0gJCgnI3RvcC1tZXNzYWdlLXdyYXBwZXInKS5vZmZzZXQoKS50b3ArJCgnI3RvcC1tZXNzYWdlLXdyYXBwZXInKS5oZWlnaHQoKTtcblx0XHRcdFx0dG9wbWVudV90b3AgPSAkKCcjdG9wLW1lc3NhZ2Utd3JhcHBlcicpLm91dGVySGVpZ2h0KCkgKyAkKCcjdG9wbWVudScpLmhlaWdodCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9wbWVudV9ib3R0b20gPSAkKCcjdG9wbWVudScpLm9mZnNldCgpLnRvcCskKCcjdG9wbWVudScpLmhlaWdodCgpO1xuXHRcdFx0XHR0b3BtZW51X3RvcCA9ICQoJyN0b3BtZW51JykuaGVpZ2h0KCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIHBvc3RfdG9wX21ldGFfbGVmdCA9ICQoJyNwb3N0LWZlYXR1cmVkLXBob3RvJykub2Zmc2V0KCkubGVmdDtcblx0XHRcdGlmIChwb3N0X3RvcF9tZXRhX3RvcCA8PSB0b3BtZW51X2JvdHRvbSAmJiAkKHRoaXMpLnNjcm9sbFRvcCgpIDw9ICgkKCcjcG9zdC1mZWF0dXJlZC1waG90bycpLm9mZnNldCgpLnRvcCArICQoJyNwb3N0LWZlYXR1cmVkLXBob3RvJykub3V0ZXJIZWlnaHQoKS1wb3N0X3RvcF9tZXRhX2JvdHRvbSsxMCkpIHtcblx0XHRcdFx0JCgnLnBvc3QtdG9wLW1ldGEnKS5jc3MoeydvcGFjaXR5JzogJzAuOTUnLCAncG9zaXRpb24nOiAnZml4ZWQnLCAndG9wJzogdG9wbWVudV90b3AsICdsZWZ0JzogcG9zdF90b3BfbWV0YV9sZWZ0LCAnd2lkdGgnOiAkKCcjcG9zdC1mZWF0dXJlZC1waG90bycpLm91dGVyV2lkdGgoKX0pO1xuXHRcdFx0XHQkKCcucG9zdC10b3AtbWV0YS1wbGFjZWhvbGRlcicpLmNzcygnaGVpZ2h0JywgcG9zdF90b3BfbWV0YS5vdXRlckhlaWdodCgpLTEpLnNob3coKTtcblx0XHRcdH0gZWxzZSBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+ICgkKCcjcG9zdC1mZWF0dXJlZC1waG90bycpLm9mZnNldCgpLnRvcCArICQoJyNwb3N0LWZlYXR1cmVkLXBob3RvJykub3V0ZXJIZWlnaHQoKS1wb3N0X3RvcF9tZXRhX2JvdHRvbSsxMCkpIHtcblx0XHRcdFx0JCgnLnBvc3QtdG9wLW1ldGEnKS5jc3Moeydwb3NpdGlvbic6ICdhYnNvbHV0ZScsICd0b3AnOiAoJCgnI3Bvc3QtZmVhdHVyZWQtcGhvdG8nKS5vZmZzZXQoKS50b3AgKyAkKCcjcG9zdC1mZWF0dXJlZC1waG90bycpLm91dGVySGVpZ2h0KCkgLSBwb3N0X3RvcF9tZXRhX2JvdHRvbSksICdsZWZ0JzogMTZ9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJy5wb3N0LXRvcC1tZXRhJykuY3NzKHsnb3BhY2l0eSc6ICcxJywgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJywgJ3RvcCc6IDAsICdsZWZ0JzogMCwgJ3dpZHRoJzogJ2F1dG8nfSk7XG5cdFx0XHRcdCQoJy5wb3N0LXRvcC1tZXRhLXBsYWNlaG9sZGVyJykuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcucG9zdC10b3AtbWV0YScpLmNzcyh7J29wYWNpdHknOiAnMScsICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsICd0b3AnOiAwLCAnbGVmdCc6IDAsICd3aWR0aCc6ICdhdXRvJ30pO1xuXHRcdFx0JCgnLnBvc3QtdG9wLW1ldGEtcGxhY2Vob2xkZXInKS5oaWRlKCk7XG5cdFx0fVxuXHR9XG5cblx0Ly9saWtlcyBmb3IgZnJvbnRwYWdlLCBsaWdodGJveCwgcG9zdHNcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5pcGluLWxpa2UnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAob2JqX2lwaW4udSAhPSAnMCcpIHtcblx0XHRcdHZhciBsaWtlID0gJCh0aGlzKTtcblx0XHRcdHZhclx0cG9zdF9pZCA9IGxpa2UuZGF0YSgncG9zdF9pZCcpO1xuXG5cdFx0XHRsaWtlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykuY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cblx0XHRcdGlmICghbGlrZS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuXHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRhY3Rpb246ICdpcGluLWxpa2UnLFxuXHRcdFx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdFx0XHRwb3N0X2lkOiBwb3N0X2lkLFxuXHRcdFx0XHRcdHBvc3RfYXV0aG9yOiBsaWtlLmRhdGEoJ3Bvc3RfYXV0aG9yJyksXG5cdFx0XHRcdFx0aXBpbl9saWtlOiAnbGlrZSdcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmwsXG5cdFx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihjb3VudCkge1xuXHRcdFx0XHRcdFx0JCgnW2lkPWlwaW4tbGlrZS0nK3Bvc3RfaWQrJ10nKS5hZGRDbGFzcygnZGlzYWJsZWQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLmNzcygncG9pbnRlci1ldmVudHMnLCAnYXV0bycpO1xuXHRcdFx0XHRcdFx0JCgnW2lkPWxpa2VzLWNvdW50LScrcG9zdF9pZCsnXScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoY291bnQgPT0gMSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoJCgnI3Bvc3QtcmVwaW5zJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI3Bvc3QtcmVwaW5zJykuYmVmb3JlKCc8ZGl2IGNsYXNzPVwicG9zdC1saWtlc1wiPjxkaXYgY2xhc3M9XCJwb3N0LWxpa2VzLXdyYXBwZXJcIj48aDQ+JyArIG9ial9pcGluLl9fTGlrZXMgKyAnPC9oND48ZGl2IGNsYXNzPVwicG9zdC1saWtlcy1hdmF0YXJcIj48YSBocmVmPVwiJyArIG9ial9pcGluLmhvbWVfdXJsICsgJy8nICsgb2JqX2lwaW4udXNlcl9yZXdyaXRlICsgJy8nICsgb2JqX2lwaW4udWwgKyAnL1wiIHJlbD1cInRvb2x0aXBcIiB0aXRsZT1cIicgKyBvYmpfaXBpbi51aSArICdcIj4nICsgb2JqX2lwaW4uYXZhdGFyNDggKyAnPC9hPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNwb3N0LWVtYmVkLWJveCcpLmJlZm9yZSgnPGRpdiBjbGFzcz1cInBvc3QtbGlrZXNcIj48ZGl2IGNsYXNzPVwicG9zdC1saWtlcy13cmFwcGVyXCI+PGg0PicgKyBvYmpfaXBpbi5fX0xpa2VzICsgJzwvaDQ+PGRpdiBjbGFzcz1cInBvc3QtbGlrZXMtYXZhdGFyXCI+PGEgaHJlZj1cIicgKyBvYmpfaXBpbi5ob21lX3VybCArICcvJyArIG9ial9pcGluLnVzZXJfcmV3cml0ZSArICcvJyArIG9ial9pcGluLnVsICsgJy9cIiByZWw9XCJ0b29sdGlwXCIgdGl0bGU9XCInICsgb2JqX2lwaW4udWkgKyAnXCI+JyArIG9ial9pcGluLmF2YXRhcjQ4ICsgJzwvYT48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQkKCdbaWQ9bGlrZXMtY291bnQtJytwb3N0X2lkKyddJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWhlYXJ0XCI+PC9pPiAxJyk7XG5cdFx0XHRcdFx0XHRcdCQoJyNidXR0b24tbGlrZXMtY291bnQnKS5odG1sKCcmbmJzcDsgMScpO1xuXHRcdFx0XHRcdFx0XHRpZigkKCcjbWFzb25yeScpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JCgnLnBvc3QtbGlrZXMtYXZhdGFyJykuYXBwZW5kKCc8YSBpZD1saWtlcy0nICsgb2JqX2lwaW4udSArICAnIGhyZWY9XCInICsgb2JqX2lwaW4uaG9tZV91cmwgKyAnLycgKyBvYmpfaXBpbi51c2VyX3Jld3JpdGUgKyAnLycgKyBvYmpfaXBpbi51bCArICcvXCIgcmVsPVwidG9vbHRpcFwiIHRpdGxlPVwiJyArIG9ial9pcGluLnVpICsgJ1wiPicgKyBvYmpfaXBpbi5hdmF0YXI0OCArICc8L2E+Jyk7XG5cdFx0XHRcdFx0XHRcdCQoJ1tpZD1saWtlcy1jb3VudC0nK3Bvc3RfaWQrJ10nKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWhlYXJ0XCI+PC9pPiAnICsgY291bnQpO1xuXHRcdFx0XHRcdFx0XHQkKCcjYnV0dG9uLWxpa2VzLWNvdW50JykuaHRtbCgnJm5ic3A7ICcgKyBjb3VudCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRcdGFjdGlvbjogJ2lwaW4tbGlrZScsXG5cdFx0XHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlLFxuXHRcdFx0XHRcdHBvc3RfaWQ6IHBvc3RfaWQsXG5cdFx0XHRcdFx0aXBpbl9saWtlOiAndW5saWtlJ1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGNvdW50KSB7XG5cdFx0XHRcdFx0XHQkKCdbaWQ9aXBpbi1saWtlLScrcG9zdF9pZCsnXScpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykuY3NzKCdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XG5cdFx0XHRcdFx0XHQkKCcjcG9zdC0nICsgcG9zdF9pZCArICcgLmlwaW4tbGlrZScpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG5cdFx0XHRcdFx0XHRpZiAoY291bnQgPT0gMCkge1xuXHRcdFx0XHRcdFx0XHQkKCcucG9zdC1saWtlcycpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHQkKCdbaWQ9bGlrZXMtY291bnQtJytwb3N0X2lkKyddJykuYWRkQ2xhc3MoJ2hpZGUnKS50ZXh0KCcnKTtcblx0XHRcdFx0XHRcdFx0JCgnI2J1dHRvbi1saWtlcy1jb3VudCcpLnRleHQoJycpO1xuXHRcdFx0XHRcdFx0XHRpZigkKCcjbWFzb25yeScpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JCgnI2xpa2VzLScgKyBvYmpfaXBpbi51KS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0JCgnW2lkPWxpa2VzLWNvdW50LScrcG9zdF9pZCsnXScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtaGVhcnRcIj48L2k+ICcgKyBjb3VudCk7XG5cdFx0XHRcdFx0XHRcdCQoJyNidXR0b24tbGlrZXMtY291bnQnKS5odG1sKCcmbmJzcDsgJyArIGNvdW50KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsb2dpblBvcHVwKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9KTtcblxuXHQvL3JlcGluIHNob3cgZm9ybSBmb3IgZnJvbnRwYWdlLCBsaWdodGJveCwgcG9zdHNcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5pcGluLXJlcGluJywgZnVuY3Rpb24oKSB7XG5cdFx0aWYgKG9ial9pcGluLnUgIT0gJzAnKSB7XG5cdFx0XHR2YXIgcmVwaW4gPSAkKHRoaXMpO1xuXHRcdFx0dmFyIHBvc3RfaWQgPSByZXBpbi5kYXRhKCdwb3N0X2lkJyk7XG5cdFx0XHR2YXIgcG9zdF9kZXNjcmlwdGlvbiA9ICQoJyNtYXNvbnJ5ICNwb3N0LScgKyBwb3N0X2lkICsgJyAucG9zdC10aXRsZScpLmRhdGEoJ3RpdGxlJyk7XG5cdFx0XHR2YXIgcG9zdF9jb250ZW50ID0gJCgnI21hc29ucnkgI3Bvc3QtJyArIHBvc3RfaWQgKyAnIC5wb3N0LXRpdGxlJykuZGF0YSgnY29udGVudCcpO1xuXHRcdFx0dmFyIHBvc3RfdGFncyA9ICQoJyNwb3N0LScgKyBwb3N0X2lkICsgJyAucG9zdC10aXRsZScpLmRhdGEoJ3RhZ3MnKTtcblx0XHRcdHZhciBwb3N0X3ByaWNlID0gJCgnI3Bvc3QtJyArIHBvc3RfaWQgKyAnIC5wb3N0LXRpdGxlJykuZGF0YSgncHJpY2UnKTtcblx0XHRcdFxuXHRcdFx0aWYgKCQoJyNwb3N0LWxpZ2h0Ym94JykuY3NzKCdkaXNwbGF5JykgPT0gJ2Jsb2NrJykge1xuXHRcdFx0XHRpZiAoIWllOWJlbG93KSB7XG5cdFx0XHRcdFx0d2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vdXNlIGFqYXggZmV0Y2ggYm9hcmRzIGlmIHVzZXIgY3JlYXRlZCBhIG5ldyBib2FyZFxuXHRcdFx0aWYgKCQoJyNuZXdib2FyZCcpLmxlbmd0aCkge1xuXHRcdFx0XHQvL3BvcHVsYXRlIGJvYXJkIGZpZWxkXG5cdFx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRcdGFjdGlvbjogJ2lwaW4tcmVwaW4tYm9hcmQtcG9wdWxhdGUnLFxuXHRcdFx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRcblx0XHRcdFx0JC5hamF4KHtcblx0XHRcdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdFx0JCgnI2JvYXJkJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtLWFkZC1uZXctYm9hcmQnKS5hZnRlcihkYXRhKTtcblxuXHRcdFx0XHRcdFx0Ly93aGVuIGluIHNpbmdsZS1waW4ucGhwXG5cdFx0XHRcdFx0XHRpZiAoIXBvc3RfZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0XHRcdFx0cG9zdF9kZXNjcmlwdGlvbiA9ICQoJyNwb3N0LScgKyBwb3N0X2lkICsgJyAucG9zdC10aXRsZScpLmRhdGEoJ3RpdGxlJyk7XG5cdFx0XHRcdFx0XHRcdHBvc3RfY29udGVudCA9ICQoJyNwb3N0LScgKyBwb3N0X2lkICsgJyAucG9zdC10aXRsZScpLmRhdGEoJ2NvbnRlbnQnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0JCgnI3Bvc3QtbGlnaHRib3gnKS5tb2RhbCgnaGlkZScpO1xuXHRcdFx0XHRcdFx0JCgnI3Bvc3QtcmVwaW4tYm94IC5wb3N0LXJlcGluLWJveC1waG90bycpLmh0bWwoJzxpbWcgc3JjPVwiJyArICQoJyNwb3N0LScgKyBwb3N0X2lkICsgJyAuZmVhdHVyZWQtdGh1bWInKS5hdHRyKCdzcmMnKSArICdcIiAvPicpO1xuXHRcdFx0XHRcdFx0dG1jZV9zZXRDb250ZW50KHBvc3RfZGVzY3JpcHRpb24sICdwaW4tdGl0bGUnKTtcblx0XHRcdFx0XHRcdHRtY2Vfc2V0Q29udGVudChwb3N0X2NvbnRlbnQsICdwaW4tY29udGVudCcpO1xuXHRcdFx0XHRcdFx0JCgnI3Bvc3QtcmVwaW4tYm94ICN0YWdzJykudmFsKHBvc3RfdGFncyk7XG5cdFx0XHRcdFx0XHQkKCcjcG9zdC1yZXBpbi1ib3ggI3ByaWNlJykudmFsKHBvc3RfcHJpY2UpO1xuXHRcdFx0XHRcdFx0JCgnI3JlcGluZm9ybS1hZGQtbmV3LWJvYXJkJykudGV4dChvYmpfaXBpbi5fX2FkZG5ld2JvYXJkKTtcblx0XHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoJycpLmhpZGUoKTtcblx0XHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXctY2F0ZWdvcnknKS52YWwoJy0xJykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQnKS5zaG93KCk7XG5cdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtICNyZXBpbi1wb3N0LWlkJykudmFsKHBvc3RfaWQpO1xuXHRcdFx0XHRcdFx0JCgnI3JlcGlubmVkbXNnLCAucmVwaW5uZWRtc2ctc2hhcmUnKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtJykuc2hvdygpO1xuXG5cdFx0XHRcdFx0XHQkKCcjcG9wdXAtb3ZlcmxheScpLnNob3coKTtcblx0XHRcdFx0XHRcdCQoJyNwb3N0LXJlcGluLWJveCcpLm1vZGFsKCk7XG5cblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHRtY2VfZm9jdXMoJ3Bpbi10aXRsZScpO1xuXG5cdFx0XHRcdFx0XHRcdGlmICh0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpICE9ICcnJiYgKCQoJyNyZXBpbmZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpKSkpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNwaW5pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmICgkKCcjcGluLXRpdGxlX2lmcicpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdCQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bpbi10aXRsZV9pZnInKS5jb250ZW50V2luZG93LmRvY3VtZW50KS5rZXl1cChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpICE9ICcnJiYgKCQoJyNyZXBpbmZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpKSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCQoJyNwaW5pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdCQoJyNuZXdib2FyZCcpLnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly93aGVuIGluIHNpbmdsZS1waW4ucGhwXG5cdFx0XHRcdGlmICghcG9zdF9kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRcdHBvc3RfZGVzY3JpcHRpb24gPSAkKCcjcG9zdC0nICsgcG9zdF9pZCArICcgLnBvc3QtdGl0bGUnKS5kYXRhKCd0aXRsZScpO1xuXHRcdFx0XHRcdHBvc3RfY29udGVudCA9ICQoJyNwb3N0LScgKyBwb3N0X2lkICsgJyAucG9zdC10aXRsZScpLmRhdGEoJ2NvbnRlbnQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCcjdmlkZW8tZW1iZWQnKS5yZW1vdmUoKTsgLy9oaWRlIHlvdXR1YmUgcGxheWVyIGlmIG5vdCBpbiBzaW5nbGUtcGluLnBocFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0JCgnI3Bvc3QtbGlnaHRib3gnKS5tb2RhbCgnaGlkZScpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9hamF4IGZldGNoIGJvYXJkcyBmb3IgZmlyc3QgdGltZVxuXHRcdFx0XHRpZiAoJCgnI3Bvc3QtcmVwaW4tYm94JykubGVuZ3RoID09IDApe1xuXHRcdFx0XHRcdC8vcG9wdWxhdGUgYm9hcmQgZmllbGRcblx0XHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRcdGFjdGlvbjogJ2lwaW4tcmVwaW4tYm9hcmQtcG9wdWxhdGUnLFxuXHRcdFx0XHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0XHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsLFxuXHRcdFx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0JCgnYm9keScpLmFwcGVuZCgnXFxcblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibW9kYWwgaXBpbi1tb2RhbFwiIGlkPVwicG9zdC1yZXBpbi1ib3hcIiBkYXRhLWJhY2tkcm9wPVwiZmFsc2VcIiBkYXRhLWtleWJvYXJkPVwiZmFsc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIiByb2xlPVwiZGlhbG9nXCI+XFxcblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cImNsb3NlIHBvcHVwLWNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB0eXBlPVwiYnV0dG9uXCI+JnRpbWVzOzwvYnV0dG9uPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+XFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicG9zdC1yZXBpbi1ib3gtcGhvdG9cIj48L2Rpdj5cXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxmb3JtIGlkPVwicmVwaW5mb3JtXCI+XFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCcgKyBvYmpfaXBpbi5kZXNjcmlwdGlvbl9maWVsZHMgKyAnXFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxwPjwvcD5cXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JyArIG9ial9pcGluLnRhZ3NfaHRtbCArICdcXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JyArIG9ial9pcGluLnByaWNlX2h0bWwgKyAnXFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxhIGlkPVwicmVwaW5mb3JtLWFkZC1uZXctYm9hcmRcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLXJpZ2h0XCIgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+JyArIG9ial9pcGluLl9fYWRkbmV3Ym9hcmQgKyAnPC9hPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQnICsgZGF0YSArICdcXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IGlkPVwiYm9hcmQtYWRkLW5ld1wiIGNsYXNzPVwiZm9ybS1jb250cm9sIGJvYXJkLWFkZC1uZXdcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiJyArIG9ial9pcGluLl9fZW50ZXJuZXdib2FyZHRpdGxlICsgJ1wiIC8+XFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCcgKyBvYmpfaXBpbi5jYXRlZ29yaWVzICsgJ1xcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgaWQ9XCJyZXBpbi1wb3N0LWlkXCIgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJyZXBpbi1wb3N0LWlkXCIgdmFsdWU9XCJcIiAvPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj5cXFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1ibG9jayBidG4taXBpbi1jdXN0b21cIiB0eXBlPVwic3VibWl0XCIgbmFtZT1cInBpbml0XCIgaWQ9XCJwaW5pdFwiIHZhbHVlPVwiJyArIG9ial9pcGluLl9fUmVwaW4gKyAnXCIgLz4gXFxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGlkPVwicmVwaW4tc3RhdHVzXCI+PC9zcGFuPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0PC9mb3JtPlxcXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxcXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cXFxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxcXG5cdFx0XHRcdFx0XHRcdCcpO1xuXG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGlueW1jZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoJCgndGV4dGFyZWEjcGluLWNvbnRlbnQnKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbnltY2UuaW5pdCh0aW55TUNFUHJlSW5pdC5tY2VJbml0WydwaW4tY29udGVudCddKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGlueW1jZS5pbml0KHRpbnlNQ0VQcmVJbml0Lm1jZUluaXRbJ3Bpbi10aXRsZSddKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdCQoJyNwb3N0LXJlcGluLWJveCAucG9zdC1yZXBpbi1ib3gtcGhvdG8nKS5odG1sKCc8aW1nIHNyYz1cIicgKyAkKCcjcG9zdC0nICsgcG9zdF9pZCArICcgLmZlYXR1cmVkLXRodW1iJykuYXR0cignc3JjJykgKyAnXCIgLz4nKTtcblx0XHRcdFx0XHRcdFx0dG1jZV9zZXRDb250ZW50KHBvc3RfZGVzY3JpcHRpb24sICdwaW4tdGl0bGUnKTtcblx0XHRcdFx0XHRcdFx0dG1jZV9zZXRDb250ZW50KHBvc3RfY29udGVudCwgJ3Bpbi1jb250ZW50Jyk7XG5cdFx0XHRcdFx0XHRcdCQoJyNwb3N0LXJlcGluLWJveCAjdGFncycpLnZhbChwb3N0X3RhZ3MpO1xuXHRcdFx0XHRcdFx0XHQkKCcjcG9zdC1yZXBpbi1ib3ggI3ByaWNlJykudmFsKHBvc3RfcHJpY2UpO1xuXHRcdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtLWFkZC1uZXctYm9hcmQnKS50ZXh0KG9ial9pcGluLl9fYWRkbmV3Ym9hcmQpO1xuXHRcdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCcnKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXctY2F0ZWdvcnknKS52YWwoJy0xJykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHQkKCcjcmVwaW5mb3JtICNib2FyZCcpLnNob3coKTtcblx0XHRcdFx0XHRcdFx0JCgnI3JlcGluZm9ybSAjcmVwaW4tcG9zdC1pZCcpLnZhbChwb3N0X2lkKTtcblx0XHRcdFx0XHRcdFx0JCgnI3JlcGlubmVkbXNnLCAucmVwaW5uZWRtc2ctc2hhcmUnKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0nKS5zaG93KCk7XG5cblx0XHRcdFx0XHRcdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5zaG93KCk7XG5cdFx0XHRcdFx0XHRcdCQoJyNwb3N0LXJlcGluLWJveCcpLm1vZGFsKCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHRtY2VfZm9jdXMoJ3Bpbi10aXRsZScpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJykgIT0gJycmJiAoJCgnI3JlcGluZm9ybSAjYm9hcmQnKS52YWwoKSAhPSAnLTEnIHx8ICQudHJpbSgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCQoJyNwaW4tdGl0bGVfaWZyJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaW4tdGl0bGVfaWZyJykuY29udGVudFdpbmRvdy5kb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpICE9ICcnJiYgKCQoJyNyZXBpbmZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpKSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCQoJyNwaW5pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vYXV0b2NvbXBsZXRlIHRhZ3Ncblx0XHRcdFx0XHRcdFx0JC5nZXRTY3JpcHQob2JqX2lwaW4uc2l0ZV91cmwgKyAnL3dwLWluY2x1ZGVzL2pzL2pxdWVyeS9zdWdnZXN0Lm1pbi5qcycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdCQoJ2lucHV0I3RhZ3MnKS5zdWdnZXN0KG9ial9pcGluLmFqYXh1cmwgKyAnP2FjdGlvbj1hamF4LXRhZy1zZWFyY2gmdGF4PXBvc3RfdGFnJywge21pbmNoYXJzOiAzLCBtdWx0aXBsZTogdHJ1ZX0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCcjcG9zdC1yZXBpbi1ib3ggLnBvc3QtcmVwaW4tYm94LXBob3RvJykuaHRtbCgnPGltZyBzcmM9XCInICsgJCgnI3Bvc3QtJyArIHBvc3RfaWQgKyAnIC5mZWF0dXJlZC10aHVtYicpLmF0dHIoJ3NyYycpICsgJ1wiIC8+Jyk7XG5cdFx0XHRcdFx0dG1jZV9zZXRDb250ZW50KHBvc3RfZGVzY3JpcHRpb24sICdwaW4tdGl0bGUnKTtcblx0XHRcdFx0XHR0bWNlX3NldENvbnRlbnQocG9zdF9jb250ZW50LCAncGluLWNvbnRlbnQnKTtcblx0XHRcdFx0XHQkKCcjcG9zdC1yZXBpbi1ib3ggI3RhZ3MnKS52YWwocG9zdF90YWdzKTtcblx0XHRcdFx0XHQkKCcjcG9zdC1yZXBpbi1ib3ggI3ByaWNlJykudmFsKHBvc3RfcHJpY2UpO1xuXHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0tYWRkLW5ldy1ib2FyZCcpLnRleHQob2JqX2lwaW4uX19hZGRuZXdib2FyZCk7XG5cdFx0XHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgnJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXctY2F0ZWdvcnknKS52YWwoJy0xJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkJykuc2hvdygpO1xuXHRcdFx0XHRcdCQoJyNyZXBpbmZvcm0gI3JlcGluLXBvc3QtaWQnKS52YWwocG9zdF9pZCk7XG5cdFx0XHRcdFx0JCgnI3JlcGlubmVkbXNnLCAucmVwaW5uZWRtc2ctc2hhcmUnKS5oaWRlKCk7XG5cdFx0XHRcdFx0JCgnI3JlcGluZm9ybScpLnNob3coKTtcblxuXHRcdFx0XHRcdCQoJyNwb3B1cC1vdmVybGF5Jykuc2hvdygpO1xuXHRcdFx0XHRcdCQoJyNwb3N0LXJlcGluLWJveCcpLm1vZGFsKCk7XG5cblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dG1jZV9mb2N1cygncGluLXRpdGxlJyk7XG5cblx0XHRcdFx0XHRcdGlmICh0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpICE9ICcnJiYgKCQoJyNyZXBpbmZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpKSkpIHtcblx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCQoJyNwaW5pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmICgkKCcjcGluLXRpdGxlX2lmcicpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHQkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaW4tdGl0bGVfaWZyJykuY29udGVudFdpbmRvdy5kb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJykgIT0gJycmJiAoJCgnI3JlcGluZm9ybSAjYm9hcmQnKS52YWwoKSAhPSAnLTEnIHx8ICQudHJpbSgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bG9naW5Qb3B1cCgpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQvL2Rpc2FibGUgc3VibWl0IGJ1dHRvbiBpZiBlbXB0eSB0ZXh0YXJlYSBhbmQgbm8gYm9hcmRcblx0JChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNwb3N0LXJlcGluLWJveCB0ZXh0YXJlYSNwaW4tdGl0bGUnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJC50cmltKCQoJyNyZXBpbmZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcmVwaW5mb3JtICNib2FyZCcpLnZhbCgpICE9ICctMScgfHwgJC50cmltKCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoKSkpKSB7XG5cdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdH1cblxuXHRcdCQodGhpcykua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoJC50cmltKCQoJyNyZXBpbmZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcmVwaW5mb3JtICNib2FyZCcpLnZhbCgpICE9ICctMScgfHwgJC50cmltKCQoJyNyZXBpbmZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoKSkpKSB7XG5cdFx0XHRcdCQoJyNwaW5pdCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0XG5cdCQoZG9jdW1lbnQpLm9uKCdmb2N1cycsICcjcG9zdC1yZXBpbi1ib3ggI2JvYXJkLWFkZC1uZXcnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgY29udGVudCA9ICcnO1xuXHRcdGlmICgkKCcjcGluLXRpdGxlX2lmcicpLmxlbmd0aCkge1xuXHRcdFx0Y29udGVudCA9IHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRlbnQgPSAkLnRyaW0oJCgnI3JlcGluZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSk7XG5cdFx0fVxuXHRcdFxuXHRcdCQodGhpcykua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoJCgnI3Bpbi10aXRsZV9pZnInKS5sZW5ndGgpIHtcblx0XHRcdFx0Y29udGVudCA9IHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZW50ID0gJC50cmltKCQoJyNyZXBpbmZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoY29udGVudCAmJiAoJCgnI3JlcGluZm9ybSAjYm9hcmQnKS52YWwoKSAhPSAnLTEnIHx8ICQudHJpbSgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdFxuXHQvL3ByZXZlbnQgZm9ybSBzdWJtaXQgb24gZW50ZXIga2V5XG5cdCQoZG9jdW1lbnQpLm9uKCdrZXlwcmVzcycsICcjYm9hcmQtYWRkLW5ldycsIGZ1bmN0aW9uKGUpIHtcblx0XHRyZXR1cm4gZS5rZXlDb2RlICE9IDEzO1xuXHR9KTtcblx0XG5cdC8vcmVwaW4gZm9ybSBhZGQgbmV3IGJvYXJkIHRvZ2dsZVxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3JlcGluZm9ybS1hZGQtbmV3LWJvYXJkJywgZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCQodGhpcykudGV4dCgpID09IG9ial9pcGluLl9fY2FuY2VsKSB7XG5cdFx0XHRpZigkKCcjbm9ib2FyZCcpLmxlbmd0aCkge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdFx0JCh0aGlzKS50ZXh0KG9ial9pcGluLl9fYWRkbmV3Ym9hcmQpO1xuXHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgnJykuaGlkZSgpO1xuXHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldy1jYXRlZ29yeScpLnZhbCgnLTEnKS5oaWRlKCk7XG5cdFx0XHQkKCcjcmVwaW5mb3JtICNib2FyZCcpLnNob3coKS5mb2N1cygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRoaXMpLnRleHQob2JqX2lwaW4uX19jYW5jZWwpO1xuXHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnNob3coKS5mb2N1cygpO1xuXHRcdFx0JCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldy1jYXRlZ29yeScpLnNob3coKTtcblx0XHRcdCQoJyNyZXBpbmZvcm0gI2JvYXJkJykuaGlkZSgpO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0Ly9yZXBpbiBmb3IgZnJvbnRwYWdlLCBsaWdodGJveCwgcG9zdHNcblx0JChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjcmVwaW5mb3JtJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJlcGluX3N0YXR1cyA9ICQoJyNyZXBpbi1zdGF0dXMnKTtcblx0XHRyZXBpbl9zdGF0dXMuaHRtbCgnJyk7XG5cdFx0cmVwaW5fc3RhdHVzLmh0bWwoJyA8ZGl2IGNsYXNzPVwiYWpheC1sb2FkZXJcIj48L2Rpdj4nKTtcblx0XHRcblx0XHQvL2VtcHR5IHRpdGxlXG5cdFx0aWYgKCEkLnRyaW0oJCgnI3JlcGluZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSkpIHtcblx0XHRcdHJlcGluX3N0YXR1cy5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZyB0ZXh0LWNlbnRlclwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fUGxlYXNlZW50ZXJ0aXRsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdFxuXHRcdC8vZW1wdHkgYm9hcmRcblx0XHRpZiAoJCgnI3JlcGluZm9ybSAjYm9hcmQnKS52YWwoKSA9PSAnLTEnICYmICQudHJpbSgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpID09ICcnKSB7XG5cdFx0XHRyZXBpbl9zdGF0dXMuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmcgdGV4dC1jZW50ZXJcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX1BsZWFzZWNyZWF0ZWFuZXdib2FyZCAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0JCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcblx0XHR2YXIgcG9zdF9pZCA9ICQoJyNyZXBpbmZvcm0gI3JlcGluLXBvc3QtaWQnKS52YWwoKTtcblx0XHR2YXIgcHJpY2UgPSAnJztcblx0XHRpZiAoJCgnI3JlcGluZm9ybSAjcHJpY2UnKS5sZW5ndGgpXG5cdFx0XHRwcmljZSA9ICQoJyNyZXBpbmZvcm0gI3ByaWNlJykudmFsKCkucmVwbGFjZSgvW14wLTkuXS9nLCAnJyk7XG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRhY3Rpb246ICdpcGluLXJlcGluJyxcblx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdHJlcGluX3RpdGxlOiB0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpLFxuXHRcdFx0cmVwaW5fY29udGVudDogdG1jZV9nZXRDb250ZW50KCdwaW4tY29udGVudCcpLFxuXHRcdFx0cmVwaW5fdGFnczogJCgnI3JlcGluZm9ybSAjdGFncycpLnZhbCgpLFxuXHRcdFx0cmVwaW5fcHJpY2U6IHByaWNlLFxuXHRcdFx0cmVwaW5fcG9zdF9pZDogcG9zdF9pZCxcblx0XHRcdHJlcGluX2JvYXJkOiAkKCcjcmVwaW5mb3JtICNib2FyZCcpLnZhbCgpLFxuXHRcdFx0cmVwaW5fYm9hcmRfYWRkX25ldzogJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpLFxuXHRcdFx0cmVwaW5fYm9hcmRfYWRkX25ld19jYXRlZ29yeTogJCgnI3JlcGluZm9ybSAjYm9hcmQtYWRkLW5ldy1jYXRlZ29yeScpLnZhbCgpXG5cdFx0fTtcblx0XHRcblx0XHQvL2lmIHVzZXIgY3JlYXRlIGEgbmV3IGJvYXJkLCBpbmplY3QgYSBzcGFuIHRvIGluZGljYXRlIHRvIGFqYXggZmV0Y2ggYm9hcmQgbmV4dCByb3VuZFxuXHRcdGlmICgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkgIT0gJycpIHtcblx0XHRcdHJlcGluX3N0YXR1cy5hZnRlcignPHNwYW4gaWQ9XCJuZXdib2FyZFwiPjwvc3Bhbj4nKTtcblx0XHR9XG5cdFx0XG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlcGluX3N0YXR1cy5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZyB0ZXh0LWNlbnRlclwiPjxzdHJvbmc+PHNtYWxsPicgKyBvYmpfaXBpbi5fX2Vycm9ycGxlYXNldHJ5YWdhaW4gICsgJzwvc21hbGw+PC9zdHJvbmc+PC9kaXY+Jyk7XG5cdFx0XHR9LFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRyZXBpbl9zdGF0dXMuaHRtbCgnJyk7XG5cdFx0XHRcdCQoJyNyZXBpbmZvcm0nKS5oaWRlKCk7XG5cdFx0XHRcdGlmICgkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkgPT0gJycpIHtcblx0XHRcdFx0XHRib2FyZF9uYW1lID0gJCgnI3JlcGluZm9ybSAjYm9hcmQgb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJvYXJkX25hbWUgPSAkKCcjcmVwaW5mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JCgnI3Bvc3QtcmVwaW4tYm94IC5wb3N0LXJlcGluLWJveC1waG90bycpLmFmdGVyKCc8aDMgaWQ9XCJyZXBpbm5lZG1zZ1wiIGNsYXNzPVwidGV4dC1jZW50ZXJcIj4nICsgb2JqX2lwaW4uX19yZXBpbm5lZHRvICsgJyAnICsgYm9hcmRfbmFtZSArICc8cD48L3A+PGEgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3NcIiBocmVmPVwiJyArIGRhdGEgKyAnXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PHN0cm9uZz4nICsgb2JqX2lwaW4uX19zZWV0aGlzcGluICsgJzwvc3Ryb25nPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3MgcG9wdXAtY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fY2xvc2UgKyAnPC9zdHJvbmc+PC9hPjwvaDM+PGg1IGNsYXNzPVwicmVwaW5uZWRtc2ctc2hhcmUgdGV4dC1jZW50ZXJcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX3NoYXJlaXR3aXRoeW91cmZyaWVuZHMgKyAnPC9zdHJvbmc+PC9oNT48cCBjbGFzcz1cInJlcGlubmVkbXNnLXNoYXJlIHRleHQtY2VudGVyXCI+PGEgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCIgaHJlZj1cIlwiIG9uY2xpY2s9XCJ3aW5kb3cub3BlbihcXCdodHRwczovL3d3dy5mYWNlYm9vay5jb20vc2hhcmVyL3NoYXJlci5waHA/dT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpICsgJ1xcJywgXFwnZmFjZWJvb2stc2hhcmUtZGlhbG9nXFwnLCBcXCd3aWR0aD02MjYsaGVpZ2h0PTUwMFxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLWZhY2Vib29rIGZhLWZ3XCI+PC9pPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLWluZm8gYnRuLXNtXCIgaHJlZj1cIlwiIG9uY2xpY2s9XCJ3aW5kb3cub3BlbihcXCdodHRwczovL3R3aXR0ZXIuY29tL3NoYXJlP3VybD0nICsgZGF0YSArICcmYW1wO3RleHQ9JyArIGVuY29kZVVSSUNvbXBvbmVudCgkKCcjcmVwaW5mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKSArICdcXCcsIFxcJ3R3aXR0ZXItc2hhcmUtZGlhbG9nXFwnLCBcXCd3aWR0aD02MjYsaGVpZ2h0PTUwMFxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLXR3aXR0ZXIgZmEtZndcIj48L2k+PC9hPiA8YSBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGJ0bi1zbVwiIGhyZWY9XCJcIiBvbmNsaWNrPVwid2luZG93Lm9wZW4oXFwnaHR0cHM6Ly9wbHVzLmdvb2dsZS5jb20vc2hhcmU/dXJsPScgKyBkYXRhICsgJ1xcJywgXFwnZ3BsdXMtc2hhcmUtZGlhbG9nXFwnLCBcXCd3aWR0aD02MjYsaGVpZ2h0PTUwMFxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLWdvb2dsZS1wbHVzIGZhLWZ3XCI+PC9pPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLWluZm8gYnRuLXNtXCIgaHJlZj1cIlwiIG9uY2xpY2s9XCJ3aW5kb3cub3BlbihcXCdodHRwOi8vd3d3LnJlZGRpdC5jb20vc3VibWl0P3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpICsgJyZhbXA7dGl0bGU9JyArIGVuY29kZVVSSUNvbXBvbmVudCgkKCcjcmVwaW5mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKSArICdcXCcsIFxcJ3JlZGRpdC1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTg4MCxoZWlnaHQ9NTAwLHNjcm9sbGJhcnM9MVxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLXJlZGRpdCBmYS1md1wiPjwvaT48L2E+PC9wPicpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR2YXIgbmV3cmVwaW4gPSAnPGxpPjxhIGNsYXNzPVwicG9zdC1yZXBpbnMtYXZhdGFyXCI+JyArIG9ial9pcGluLmF2YXRhcjQ4ICsgJzwvYT4gPGEgaHJlZj1cIicgKyBvYmpfaXBpbi5ob21lX3VybCArICcvJyArIG9ial9pcGluLnVzZXJfcmV3cml0ZSArICcvJyArIG9ial9pcGluLnVsICsgJy9cIj4nICsgb2JqX2lwaW4udWkgKyAnPC9hPiAnICsgb2JqX2lwaW4uX19vbnRvICsgJyA8c3Ryb25nPicgKyAkKCcjcmVwaW5mb3JtICNib2FyZCBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCkgKyAnPC9zdHJvbmc+PC9saT4nO1xuXG5cdFx0XHRcdGlmICghJCgnI3Bvc3QtcmVwaW5zJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnLnBvc3Qtd3JhcHBlcicpLmFwcGVuZCgnPGRpdiBpZD1cInBvc3QtcmVwaW5zXCI+PGRpdiBjbGFzcz1cInBvc3QtcmVwaW5zLXdyYXBwZXJcIj48aDQ+JyArIG9ial9pcGluLl9fUmVwaW5zICsgJzwvaDQ+PHVsPjwvdWw+PC9kaXY+PC9kaXY+Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JCgnI3Bvc3QtcmVwaW5zIHVsJykuYXBwZW5kKG5ld3JlcGluKTtcblxuXHRcdFx0XHR2YXIgcmVwaW5zX2NvdW50bXNnID0gJCgnI3JlcGlucy1jb3VudC0nK3Bvc3RfaWQpO1xuXHRcdFx0XHR2YXIgcmVwaW5zX2NvdW50ID0gcmVwaW5zX2NvdW50bXNnLnRleHQoKTtcblx0XHRcdFx0cmVwaW5zX2NvdW50ID0gcmVwaW5zX2NvdW50LnN1YnN0cmluZyhyZXBpbnNfY291bnQubGFzdEluZGV4T2YoJyAnKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocmVwaW5zX2NvdW50ID09ICcnKSB7XG5cdFx0XHRcdFx0JCgnI3JlcGlucy1jb3VudC0nK3Bvc3RfaWQpLnJlbW92ZUNsYXNzKCdoaWRlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1yZXR3ZWV0XCI+PC9pPiAxJyk7XG5cdFx0XHRcdFx0aWYoJCgnI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCQoJyNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCgnI3JlcGlucy1jb3VudC0nK3Bvc3RfaWQpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtcmV0d2VldFwiPjwvaT4gJyArIChwYXJzZUludChyZXBpbnNfY291bnQsMTApKzEpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly9mb3Igc2luZ2xlIHBvc3QgY291bnQgaW5jcmVtZW50XG5cdFx0XHRcdHZhciBidXR0b25fcmVwaW5zX2NvdW50ID0gJCgnI2J1dHRvbi1yZXBpbnMtY291bnQnKTtcblx0XHRcdFx0aWYgKGJ1dHRvbl9yZXBpbnNfY291bnQudGV4dCgpID09ICcnKSB7XG5cdFx0XHRcdFx0YnV0dG9uX3JlcGluc19jb3VudC5odG1sKCcmbmJzcDsgMScpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJ1dHRvbl9yZXBpbnNfY291bnQuaHRtbCgnJm5ic3A7ICcgKyBwYXJzZUludChidXR0b25fcmVwaW5zX2NvdW50LnRleHQoKSwxMCkrMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdC8vY29tbWVudHMgZm9yIGxpZ2h0Ym94IGFuZCBwb3N0c1xuXHQkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNjb21tZW50Zm9ybScsIGZ1bmN0aW9uKCkge1xuXHRcdGlmIChvYmpfaXBpbi51ICE9ICcwJykge1xuXHRcdFx0dmFyIGNvbW1lbnRmb3JtID0gJCh0aGlzKTtcblx0XHRcdFxuXHRcdFx0aWYgKCQudHJpbSgkKHRoaXMpLmZpbmQoJyNjb21tZW50JykudmFsKCkpID09ICcnKSB7XG5cdFx0XHRcdCQoJyNjb21tZW50LXN0YXR1cycpLnJlbW92ZSgpO1xuXHRcdFx0XHQkKCcuY29tbWVudC1zdGF0dXMtYWpheC1sb2FkZXInKS5yZW1vdmUoKTtcblx0XHRcdFx0JCgnLnRleHRhcmVhLXdyYXBwZXInKS5wcmVwZW5kKCc8ZGl2IGlkPVwiY29tbWVudC1zdGF0dXNcIj48L2Rpdj4nKTtcblx0XHRcdFx0JCgnI2NvbW1lbnQtc3RhdHVzJykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPjxzbWFsbD4nICsgb2JqX2lwaW4uX19QbGVhc2V0eXBlYWNvbW1lbnQgKyAnPC9zbWFsbD48L3N0cm9uZz48L2Rpdj4nKTtcblx0XHRcdFx0JCgnI2NvbW1lbnRmb3JtIHRleHRhcmVhJykuZm9jdXMoKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb21tZW50Zm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XG5cdFx0XHR2YXIgcG9zdF9pZCA9ICQoJyNjb21tZW50Zm9ybSAjY29tbWVudF9wb3N0X0lEJykudmFsKCk7XG5cdFx0XHR2YXIgZm9ybWRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xuXHRcdFx0dmFyIGZvcm11cmwgPSAkKHRoaXMpLmF0dHIoJ2FjdGlvbicpO1xuXHRcdFx0dmFyIGNvbW1lbnRfcGFyZW50ID0gJCgnI2NvbW1lbnRmb3JtICNjb21tZW50X3BhcmVudCcpLnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQkKCcjY29tbWVudC1zdGF0dXMnKS5yZW1vdmUoKTtcblx0XHRcdCQoJy5mb3JtLXN1Ym1pdCcpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJjb21tZW50LXN0YXR1cy1hamF4LWxvYWRlciBhamF4LWxvYWRlciBhamF4LWxvYWRlci1pbmxpbmUgcHVsbC1yaWdodFwiIHN0eWxlPVwibWFyZ2luOiAxNXB4IDAgMCA1cHg7XCI+PC9kaXY+Jyk7XG5cdFx0XHRcblx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdFx0dXJsOiBmb3JtdXJsLFxuXHRcdFx0XHRkYXRhOiBmb3JtZGF0YSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0KSB7XG5cdFx0XHRcdFx0dmFyIGVycm9ybXNnID0gWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0LnN1YnN0cihYTUxIdHRwUmVxdWVzdC5yZXNwb25zZVRleHQuaW5kZXhPZignPHA+JykrMyk7XG5cdFx0XHRcdFx0ZXJyb3Jtc2cgPSBlcnJvcm1zZy5zdWJzdHIoMCwgZXJyb3Jtc2cuaW5kZXhPZignPC9wPicpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoZXJyb3Jtc2cgPT0gJycpIHtcblx0XHRcdFx0XHRcdGVycm9ybXNnID0gb2JqX2lwaW4uX19lcnJvcnBsZWFzZXRyeWFnYWluO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkKCcudGV4dGFyZWEtd3JhcHBlcicpLnByZXBlbmQoJzxkaXYgaWQ9XCJjb21tZW50LXN0YXR1c1wiPjwvZGl2PicpO1xuXHRcdFx0XHRcdCQoJy5jb21tZW50LXN0YXR1cy1hamF4LWxvYWRlcicpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdCQoJyNjb21tZW50LXN0YXR1cycpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PHN0cm9uZz48c21hbGw+JyArIGVycm9ybXNnICsgJzwvc21hbGw+PC9zdHJvbmc+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0JCgnI2NvbW1lbnRmb3JtIHRleHRhcmVhJykuZm9jdXMoKTtcblx0XHRcdFx0XHRjb21tZW50Zm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGNvbW1lbnR0ZXh0ID0gICQoJyNjb21tZW50Zm9ybSAjY29tbWVudCcpLnZhbCgpO1xuXHRcdFx0XHRcdHZhciBuZXdjb21tZW50ID0gJzxsaT48ZGl2IGNsYXNzPVwiY29tbWVudC1hdmF0YXJcIj4nICsgb2JqX2lwaW4uYXZhdGFyNDggKyAnPC9kaXY+PGRpdiBjbGFzcz1cImNvbW1lbnQtY29udGVudFwiPjxzdHJvbmc+PHNwYW4gY2xhc3M9XCJjb21tZW50XCI+PGEgaHJlZj1cIicgKyBvYmpfaXBpbi5ob21lX3VybCArICcvJyArIG9ial9pcGluLnVzZXJfcmV3cml0ZSArICcvJyArIG9ial9pcGluLnVsICsgJy9cIj4nICsgb2JqX2lwaW4udWkgKyAnPC9hPjwvc3Bhbj48L3N0cm9uZz4gPHNwYW4gY2xhc3M9XCJ0ZXh0LW11dGVkXCI+JiM4MjI2OyAnICsgb2JqX2lwaW4uY3VycmVudF9kYXRlICsgJzwvc3Bhbj48cD4nICsgY29tbWVudHRleHQucmVwbGFjZSgvKD86XFxyXFxufFxccnxcXG4pL2csICc8YnIgLz4nKSArICc8L3A+PC9kaXY+PC9saT4nO1xuXHRcblx0XHRcdFx0XHQkKCcuY29tbWVudC1zdGF0dXMtYWpheC1sb2FkZXInKS5yZW1vdmUoKTtcblx0XHRcdFx0XHQkKCcjY29tbWVudGZvcm0gI2NvbW1lbnQnKS52YWwoJycpO1xuXHRcdFx0XHRcdCQoJyNjb21tZW50Zm9ybSAjY29tbWVudF9wYXJlbnQnKS52YWwoJycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjb21tZW50X3BhcmVudCA9PSAnMCcgfHwgY29tbWVudF9wYXJlbnQgPT0gJycgKSB7XG5cdFx0XHRcdFx0XHRpZiAoJCgnI2NvbW1lbnRzJykuZmluZCgnLmNvbW1lbnRsaXN0Jykuc2l6ZSgpID09IDApIHtcblx0XHRcdFx0XHRcdFx0JCgnI2NvbW1lbnRzJykucHJlcGVuZCgnPG9sIGNsYXNzPVwiY29tbWVudGxpc3RcIj48L29sPicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0JCgnLmNvbW1lbnRsaXN0JykuYXBwZW5kKG5ld2NvbW1lbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoJCgnI2NvbW1lbnQtJyArIGNvbW1lbnRfcGFyZW50KS5maW5kKCc+dWwuY2hpbGRyZW4nKS5zaXplKCkgPT0gMCkge1xuXHRcdFx0XHRcdFx0XHQkKCcjY29tbWVudC0nICsgY29tbWVudF9wYXJlbnQpLmFwcGVuZCgnPHVsIGNsYXNzPVwiY2hpbGRyZW5cIj48L3VsPicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0JCgnI2NvbW1lbnQtJyArIGNvbW1lbnRfcGFyZW50ICsgJyA+dWwuY2hpbGRyZW4nKS5hcHBlbmQobmV3Y29tbWVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHZhciBjb21tZW50c19jb3VudG1zZyA9ICQoJyNjb21tZW50cy1jb3VudC0nK3Bvc3RfaWQpO1xuXHRcdFx0XHRcdHZhciBjb21tZW50c19jb3VudCA9IGNvbW1lbnRzX2NvdW50bXNnLnRleHQoKTtcblx0XHRcdFx0XHRjb21tZW50c19jb3VudCA9IGNvbW1lbnRzX2NvdW50LnN1YnN0cmluZyhjb21tZW50c19jb3VudC5sYXN0SW5kZXhPZignICcpKTtcblx0XG5cdFx0XHRcdFx0aWYgKGNvbW1lbnRzX2NvdW50ID09ICcnKSB7XG5cdFx0XHRcdFx0XHQkKCcjY29tbWVudHMtY291bnQtJytwb3N0X2lkKS5yZW1vdmVDbGFzcygnaGlkZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtY29tbWVudFwiPjwvaT4gMScpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKCcjY29tbWVudHMtY291bnQtJytwb3N0X2lkKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWNvbW1lbnRcIj48L2k+ICcgKyAocGFyc2VJbnQoY29tbWVudHNfY291bnQsMTApKzEpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dmFyIG5ld2NvbW1lbnRfbWFzb25yeSA9ICc8ZGl2IGlkPVwibWFzb25yeS1tZXRhLWNvbW1lbnQtd3JhcHBlci0nICsgcG9zdF9pZCArICdcIiBjbGFzcz1cIm1hc29ucnktbWV0YVwiPjxkaXYgY2xhc3M9XCJtYXNvbnJ5LW1ldGEtYXZhdGFyXCI+JyArIG9ial9pcGluLmF2YXRhcjMwICsgJzwvZGl2PjxkaXYgY2xhc3M9XCJtYXNvbnJ5LW1ldGEtY29tbWVudFwiPjxzcGFuIGNsYXNzPVwibWFzb25yeS1tZXRhLWF1dGhvclwiPicgKyBvYmpfaXBpbi51aSArICc8L3NwYW4+PHNwYW4gY2xhc3M9XCJtYXNvbnJ5LW1ldGEtY29tbWVudC1jb250ZW50XCI+ICcgKyBjb21tZW50dGV4dCArICc8L3NwYW4+PC9kaXY+PC9kaXY+Jztcblx0XHRcdFx0XHQkKCdbaWQ9bWFzb25yeS1tZXRhLWNvbW1lbnRmb3JtLScgKyBwb3N0X2lkICsgJ10nKS5wcmV2KCkuYXBwZW5kKG5ld2NvbW1lbnRfbWFzb25yeSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKCQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKS5tYXNvbnJ5KCdyZWxvYWRJdGVtcycpLm1hc29ucnkoJ2xheW91dCcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoJCgnI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCQoJyNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29tbWVudGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsb2dpblBvcHVwKCk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdFxuXHQvL1pvb20gZnVsbCBzaXplIHBob3RvXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuaXBpbi16b29tJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3Bvc3Qtem9vbS1vdmVybGF5Jykuc2hvdygpO1xuXHRcdCQoJy5saWdodGJveC1jb250ZW50IGltZycpLmF0dHIoJ3NyYycsICQoJy5saWdodGJveC1jb250ZW50IGltZycpLmRhdGEoJ3NyYycpKTtcblx0XHQkKCcjcG9zdC1mdWxsc2l6ZScpLmxpZ2h0Ym94KHtiYWNrZHJvcDpmYWxzZSwga2V5Ym9hcmQ6ZmFsc2V9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwb3N0LWZ1bGxzaXplLWNsb3NlJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3Bvc3Qtem9vbS1vdmVybGF5JykuZmFkZU91dCgpO1xuXHRcdCQoJyNwb3N0LWZ1bGxzaXplJykubGlnaHRib3goJ2hpZGUnKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwb3N0LXpvb20tb3ZlcmxheScsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNwb3N0LXpvb20tb3ZlcmxheScpLmZhZGVPdXQoKTtcblx0XHQkKCcjcG9zdC1mdWxsc2l6ZScpLmxpZ2h0Ym94KCdoaWRlJyk7XG5cdH0pO1xuXG5cdC8vRW1iZWQgZm9yIGxpZ2h0Ym94ICYgcG9zdHNcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3N0LWVtYmVkJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5kZXRhY2goKS5pbnNlcnRBZnRlcignI3Bvc3QtcmVwb3J0LWJveCcpLnNob3coKTtcblx0XHQkKCcjcG9zdC1lbWJlZC1ib3gnKS5tb2RhbCgpO1xuXHRcdCQoJyNwb3N0LWVtYmVkLWJveCB0ZXh0YXJlYScpLmZvY3VzKCkuc2VsZWN0KCk7XG5cdFx0aWYgKGlvcykge1xuXHRcdFx0JCgnYm9keScpLnNjcm9sbFRvcCgwKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbigna2V5ZG93bicsICcjZW1iZWQtd2lkdGgnLCBmdW5jdGlvbigpIHtcblx0XHRvbGRfaGVpZ2h0ID0gJCgnI2VtYmVkLWhlaWdodCcpLnZhbCgpO1xuXHRcdG9sZF93aWR0aF9zdHIgPSBcIndpZHRoPVxcJ1wiICsgJCh0aGlzKS52YWwoKSArIFwiJ1wiO1xuXHRcdG9sZF9oZWlnaHRfc3RyID0gXCJoZWlnaHQ9XFwnXCIgKyAkKCcjZW1iZWQtaGVpZ2h0JykudmFsKCkgKyBcIidcIjtcblx0XHRyYXRpbyA9ICQoJy5wb3N0LWZlYXR1cmVkLXBob3RvIGltZycpLndpZHRoKCkgLyAkKCcucG9zdC1mZWF0dXJlZC1waG90byBpbWcnKS5oZWlnaHQoKTtcblx0fSkub24oJ2tleXVwJywgJyNlbWJlZC13aWR0aCcsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbWJlZF9jb2RlID0gJCgnI3Bvc3QtZW1iZWQtYm94IHRleHRhcmVhJykudmFsKCk7XG5cdFx0dmFyIG5ld19oZWlnaHQgPSBNYXRoLmNlaWwoJCh0aGlzKS52YWwoKS9yYXRpbyk7XG5cdFx0dmFyIG5ld19oZWlnaHRfc3RyID0gXCJoZWlnaHQ9J1wiICsgbmV3X2hlaWdodCArIFwiJ1wiO1xuXHRcdHZhciBuZXdfd2lkdGhfc3RyID0gXCJ3aWR0aD0nXCIgKyAkKHRoaXMpLnZhbCgpICsgXCInXCI7XG5cdFx0XG5cdFx0JCgnI2VtYmVkLWhlaWdodCcpLnZhbChuZXdfaGVpZ2h0KTtcblx0XHRlbWJlZF9jb2RlID0gZW1iZWRfY29kZS5yZXBsYWNlKG9sZF9oZWlnaHRfc3RyLCBuZXdfaGVpZ2h0X3N0cik7XG5cdFx0ZW1iZWRfY29kZSA9IGVtYmVkX2NvZGUucmVwbGFjZShvbGRfd2lkdGhfc3RyLCBuZXdfd2lkdGhfc3RyKTtcblx0XHQkKCcjcG9zdC1lbWJlZC1ib3ggdGV4dGFyZWEnKS52YWwoZW1iZWRfY29kZSk7XG5cdH0pO1xuXHRcblx0JChkb2N1bWVudCkub24oJ2tleWRvd24nLCAnI2VtYmVkLWhlaWdodCcsIGZ1bmN0aW9uKCkge1xuXHRcdG9sZF93aWR0aCA9ICQoJyNlbWJlZC13aWR0aCcpLnZhbCgpO1xuXHRcdG9sZF93aWR0aF9zdHIgPSBcIndpZHRoPVxcJ1wiICsgJCgnI2VtYmVkLXdpZHRoJykudmFsKCkgKyBcIidcIjtcblx0XHRvbGRfaGVpZ2h0X3N0ciA9IFwiaGVpZ2h0PVxcJ1wiICsgJCh0aGlzKS52YWwoKSArIFwiJ1wiO1xuXHRcdHJhdGlvID0gJCgnLnBvc3QtZmVhdHVyZWQtcGhvdG8gaW1nJykud2lkdGgoKSAvICQoJy5wb3N0LWZlYXR1cmVkLXBob3RvIGltZycpLmhlaWdodCgpO1xuXHR9KS5vbigna2V5dXAnLCAnI2VtYmVkLWhlaWdodCcsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbWJlZF9jb2RlID0gJCgnI3Bvc3QtZW1iZWQtYm94IHRleHRhcmVhJykudmFsKCk7XG5cdFx0dmFyIG5ld193aWR0aCA9IE1hdGguY2VpbCgkKHRoaXMpLnZhbCgpKnJhdGlvKTtcblx0XHR2YXIgbmV3X3dpZHRoX3N0ciA9IFwid2lkdGg9J1wiICsgbmV3X3dpZHRoICsgXCInXCI7XG5cdFx0dmFyIG5ld19oZWlnaHRfc3RyID0gXCJoZWlnaHQ9J1wiICsgJCh0aGlzKS52YWwoKSArIFwiJ1wiO1xuXHRcdFxuXHRcdCQoJyNlbWJlZC13aWR0aCcpLnZhbChuZXdfd2lkdGgpO1xuXHRcdGVtYmVkX2NvZGUgPSBlbWJlZF9jb2RlLnJlcGxhY2Uob2xkX2hlaWdodF9zdHIsIG5ld19oZWlnaHRfc3RyKTtcblx0XHRlbWJlZF9jb2RlID0gZW1iZWRfY29kZS5yZXBsYWNlKG9sZF93aWR0aF9zdHIsIG5ld193aWR0aF9zdHIpO1xuXHRcdCQoJyNwb3N0LWVtYmVkLWJveCB0ZXh0YXJlYScpLnZhbChlbWJlZF9jb2RlKTtcblx0fSk7XG5cdFxuXHQvL0VtYWlsIGZyaWVuZCBmb3IgbGlnaHRib3ggJiBwb3N0c1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvc3QtZW1haWwnLCBmdW5jdGlvbigpIHtcdFx0XG5cdFx0aWYgKG9ial9pcGluLnUgIT0gJzAnKSB7XG5cdFx0XHRpZigkKCcjbWFzb25yeScpLmxlbmd0aCkge1xuXHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLm5leHQoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoJyNwb3B1cC1vdmVybGF5JykuZGV0YWNoKCkuaW5zZXJ0QWZ0ZXIoJyNwb3N0LWVtYWlsLWJveCcpLnNob3coKTtcblx0XHRcdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3gnKS5tb2RhbCgpO1xuXHRcdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAuYWxlcnQsICNwb3N0LWVtYWlsLWJveCAjcG9zdC1lbWFpbC1jbG9zZScpLmhpZGUoKTtcblx0XHRcdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggdGV4dGFyZWEsICNwb3N0LWVtYWlsLWJveCAucmFkaW8sICNwb3N0LWVtYWlsLWJveCBpbnB1dFt0eXBlPVwiZW1haWxcIl0sICNwb3N0LWVtYWlsLWJveCAjcG9zdC1lbWFpbC1zdWJtaXQnKS5zaG93KCk7XG5cblx0XHRcdFx0XHRpZiAoaW9zKSB7XG5cdFx0XHRcdFx0XHQkKCdib2R5Jykuc2Nyb2xsVG9wKDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0sIDE1MDApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdCQoJyNwb3B1cC1vdmVybGF5JykuZGV0YWNoKCkuaW5zZXJ0QWZ0ZXIoJyNwb3N0LWVtYWlsLWJveCcpLnNob3coKTtcblx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCcpLm1vZGFsKCk7XG5cdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggLmFsZXJ0LCAjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtY2xvc2UnKS5oaWRlKCk7XG5cdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggdGV4dGFyZWEsICNwb3N0LWVtYWlsLWJveCAucmFkaW8sICNwb3N0LWVtYWlsLWJveCBpbnB1dFt0eXBlPVwiZW1haWxcIl0sICNwb3N0LWVtYWlsLWJveCAjcG9zdC1lbWFpbC1zdWJtaXQnKS5zaG93KCk7XG5cdFx0XHQvLyQoJyNwb3N0LWVtYWlsLWJveCB0ZXh0YXJlYSwgI3Bvc3QtZW1haWwtYm94IGlucHV0W3R5cGU9XCJlbWFpbFwiXScpLnZhbCgnJyk7XG5cdFx0XHQvKmlmICgkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1lbWFpbCcpLnZhbCgpID09ICcnKSB7XG5cdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAjcmVjaXBpZW50LWVtYWlsJykuZm9jdXMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCB0ZXh0YXJlYScpLmZvY3VzKCk7XG5cdFx0XHR9Ki9cblx0XHRcdGlmIChpb3MpIHtcblx0XHRcdFx0JCgnYm9keScpLnNjcm9sbFRvcCgwKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bG9naW5Qb3B1cCgpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3Bvc3QtZW1haWwtc3VibWl0JywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVtYWlsX3JlZ2V4ID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuXHRcdHZhciBlbWFpbF9wYXNzID0gZW1haWxfcmVnZXgudGVzdCgkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1lbWFpbCcpLnZhbCgpKTtcblx0XHRpZiAoIWVtYWlsX3Bhc3MpIHtcblx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAuYWxlcnQtd2FybmluZycpLnNob3coKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggLmFqYXgtbG9hZGVyLWVtYWlsLXBpbicpLnNob3coKTtcblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdGFjdGlvbjogJ2lwaW4tcG9zdC1lbWFpbCcsXG5cdFx0XHRub25jZTogb2JqX2lwaW4ubm9uY2UsXG5cdFx0XHRlbWFpbF9wb3N0X2lkOiAkKCcjcG9zdC1lbWFpbC1ib3ggI2VtYWlsLXBvc3QtaWQnKS52YWwoKSxcblx0XHRcdHJlY2lwaWVudF9uYW1lOiAkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1uYW1lJykudmFsKCksXG5cdFx0XHRyZWNpcGllbnRfZW1haWw6ICQoJyNwb3N0LWVtYWlsLWJveCAjcmVjaXBpZW50LWVtYWlsJykudmFsKCksXG5cdFx0XHRyZWNpcGllbnRfbWVzc2FnZTogJCgnI3Bvc3QtZW1haWwtYm94IHRleHRhcmVhJykudmFsKCksXG5cdFx0XHRwb3N0X2VtYWlsX3NlbGVjdGlvbjogJCgnI3Bvc3QtZW1haWwtYm94ICNwb3N0LWVtYWlsLXNlbGVjdGlvbjpjaGVja2VkJykudmFsKCksXG5cdFx0fTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmwsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAuYWpheC1sb2FkZXItZW1haWwtcGluLCAjcG9zdC1lbWFpbC1ib3ggLmFsZXJ0LXdhcm5pbmcnKS5oaWRlKCk7XG5cdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCB0ZXh0YXJlYSwgI3Bvc3QtZW1haWwtYm94IC5yYWRpbywgI3Bvc3QtZW1haWwtYm94IGlucHV0W3R5cGU9XCJlbWFpbFwiXSwgI3Bvc3QtZW1haWwtYm94ICNwb3N0LWVtYWlsLXN1Ym1pdCcpLmhpZGUoKTtcblx0XHRcdFx0JCgnI3Bvc3QtZW1haWwtYm94IC5hbGVydC1zdWNjZXNzLCAjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtY2xvc2UnKS5zaG93KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHQkKCcjcG9wdXAtb3ZlcmxheScpLmhpZGUoKTtcblx0XHQkKCcjcG9zdC1lbWFpbC1ib3gnKS5tb2RhbCgnaGlkZScpO1xuXHR9KTtcblx0XG5cdC8vRW1haWwgZnJpZW5kIC0gZGlzYWJsZSBzdWJtaXQgYnV0dG9uIGlmIGVtcHR5IHJlY2lwaWVudCBuYW1lIGFuZCBlbWFpbFxuXHQkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3Bvc3QtZW1haWwtYm94IHRleHRhcmVhJywgZnVuY3Rpb24oKSB7IC8vZWRpdGVkOiB0ZXh0YXJlYVxuXHRcdGlmICgkLnRyaW0oJCgnI3Bvc3QtZW1haWwtYm94IHRleHRhcmVhJykudmFsKCkpICYmICQudHJpbSgkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1lbWFpbCcpLnZhbCgpKSkgeyAvL2VkaXRlZDogdGV4dGFyZWFcblx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAjcG9zdC1lbWFpbC1zdWJtaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtc3VibWl0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmtleXVwKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCQudHJpbSgkKCcjcG9zdC1lbWFpbC1ib3ggIHRleHRhcmVhJykudmFsKCkpICYmICQudHJpbSgkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1lbWFpbCcpLnZhbCgpKSkgeyAvL2VkaXRlZDogdGV4dGFyZWFcblx0XHRcdFx0JCgnI3Bvc3QtZW1haWwtYm94ICNwb3N0LWVtYWlsLXN1Ym1pdCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtc3VibWl0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdFxuXHQkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnI3Bvc3QtZW1haWwtYm94ICNyZWNpcGllbnQtZW1haWwnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJC50cmltKCQoJyNwb3N0LWVtYWlsLWJveCB0ZXh0YXJlYScpLnZhbCgpKSAmJiAkLnRyaW0oJCgnI3Bvc3QtZW1haWwtYm94ICNyZWNpcGllbnQtZW1haWwnKS52YWwoKSkpIHsgLy9lZGl0ZWQ6IHRleHRhcmVhXG5cdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtc3VibWl0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnI3Bvc3QtZW1haWwtYm94ICNwb3N0LWVtYWlsLXN1Ym1pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0fVxuXG5cdFx0JCh0aGlzKS5rZXl1cChmdW5jdGlvbigpIHtcblx0XHRcdGlmICgkLnRyaW0oJCgnI3Bvc3QtZW1haWwtYm94IHRleHRhcmVhJykudmFsKCkpICYmICQudHJpbSgkKCcjcG9zdC1lbWFpbC1ib3ggI3JlY2lwaWVudC1lbWFpbCcpLnZhbCgpKSkgeyAvL2VkaXRlZDogdGV4dGFyZWFcXFxuXHRcdFx0XHQkKCcjcG9zdC1lbWFpbC1ib3ggI3Bvc3QtZW1haWwtc3VibWl0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJyNwb3N0LWVtYWlsLWJveCAjcG9zdC1lbWFpbC1zdWJtaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0XG5cdC8vUmVwb3J0IHBpbiBmb3IgbGlnaHRib3ggJiBwb3N0c1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvc3QtcmVwb3J0JywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5kZXRhY2goKS5pbnNlcnRBZnRlcignI3Bvc3QtcmVwb3J0LWJveCcpLnNob3coKTtcblx0XHQkKCcjcG9zdC1yZXBvcnQtYm94JykubW9kYWwoKTtcblx0XHQkKCcjcG9zdC1yZXBvcnQtYm94IC5hbGVydCwgI3Bvc3QtcmVwb3J0LWJveCAjcG9zdC1yZXBvcnQtY2xvc2UnKS5oaWRlKCk7XG5cdFx0JCgnI3Bvc3QtcmVwb3J0LWJveCB0ZXh0YXJlYSwgI3Bvc3QtcmVwb3J0LWJveCAjcG9zdC1yZXBvcnQtc3VibWl0Jykuc2hvdygpO1xuXHRcdCQoJyNwb3N0LXJlcG9ydC1ib3ggdGV4dGFyZWEnKS52YWwoJycpLmZvY3VzKCk7XG5cdFx0aWYgKGlvcykge1xuXHRcdFx0JCgnYm9keScpLnNjcm9sbFRvcCgwKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcG9zdC1yZXBvcnQtc3VibWl0JywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3Bvc3QtcmVwb3J0LWJveCAuYWpheC1sb2FkZXItcmVwb3J0LXBpbicpLnNob3coKTtcblx0XHQkKCcjcG9zdC1yZXBvcnQtYm94ICNwb3N0LXJlcG9ydC1zdWJtaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFxuXHRcdHZhciBkYXRhID0ge1xuXHRcdFx0YWN0aW9uOiAnaXBpbi1wb3N0LXJlcG9ydCcsXG5cdFx0XHRub25jZTogb2JqX2lwaW4ubm9uY2UsXG5cdFx0XHRyZXBvcnRfcG9zdF9pZDogJCgnI3Bvc3QtcmVwb3J0LWJveCAjcmVwb3J0LXBvc3QtaWQnKS52YWwoKSxcblx0XHRcdHJlcG9ydF9tZXNzYWdlOiAkKCcjcG9zdC1yZXBvcnQtYm94IHRleHRhcmVhJykudmFsKClcblx0XHR9O1xuXHRcblx0XHQkLmFqYXgoe1xuXHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcjcG9zdC1yZXBvcnQtYm94IC5hamF4LWxvYWRlci1yZXBvcnQtcGluLCAjcG9zdC1yZXBvcnQtYm94IHRleHRhcmVhLCAjcG9zdC1yZXBvcnQtYm94ICNwb3N0LXJlcG9ydC1zdWJtaXQnKS5oaWRlKCk7XG5cdFx0XHRcdCQoJyNwb3N0LXJlcG9ydC1ib3ggLmFsZXJ0LCAjcG9zdC1yZXBvcnQtYm94ICNwb3N0LXJlcG9ydC1jbG9zZScpLnNob3coKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwb3N0LXJlcG9ydC1ib3ggI3Bvc3QtcmVwb3J0LWNsb3NlJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3BvcHVwLW92ZXJsYXknKS5oaWRlKCk7XG5cdFx0JCgnI3Bvc3QtcmVwb3J0LWJveCcpLm1vZGFsKCdoaWRlJyk7XG5cdH0pO1xuXHRcblx0Ly9SZXBvcnQgcGluIC0gZGlzYWJsZSBzdWJtaXQgYnV0dG9uIGlmIGVtcHR5IG1lc3NhZ2Vcblx0JChkb2N1bWVudCkub24oJ2ZvY3VzJywgJyNwb3N0LXJlcG9ydC1ib3ggdGV4dGFyZWEnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJC50cmltKCQoJyNwb3N0LXJlcG9ydC1ib3ggdGV4dGFyZWEnKS52YWwoKSkpIHtcblx0XHRcdCQoJyNwb3N0LXJlcG9ydC1ib3ggI3Bvc3QtcmVwb3J0LXN1Ym1pdCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNwb3N0LXJlcG9ydC1ib3ggI3Bvc3QtcmVwb3J0LXN1Ym1pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0fVxuXG5cdFx0JCh0aGlzKS5rZXl1cChmdW5jdGlvbigpIHtcblx0XHRcdGlmICgkLnRyaW0oJCgnI3Bvc3QtcmVwb3J0LWJveCB0ZXh0YXJlYScpLnZhbCgpKSkge1xuXHRcdFx0XHQkKCcjcG9zdC1yZXBvcnQtYm94ICNwb3N0LXJlcG9ydC1zdWJtaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI3Bvc3QtcmVwb3J0LWJveCAjcG9zdC1yZXBvcnQtc3VibWl0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdFxuXHQvL2ZvbGxvdyBmb3IgbGlnaHRib3gsIHBvc3RzLCBhdXRob3Jcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5pcGluLWZvbGxvdycsIGZ1bmN0aW9uKCkge1xuXHRcdGlmIChvYmpfaXBpbi51ICE9ICcwJykge1xuXHRcdFx0dmFyIGZvbGxvdyA9ICQodGhpcyk7XG5cdFx0XHR2YXJcdGJvYXJkX3BhcmVudF9pZCA9IGZvbGxvdy5kYXRhKCdib2FyZF9wYXJlbnRfaWQnKTtcblx0XHRcdHZhclx0Ym9hcmRfaWQgPSBmb2xsb3cuZGF0YSgnYm9hcmRfaWQnKTtcblx0XHRcdHZhclx0YXV0aG9yX2lkID0gZm9sbG93LmRhdGEoJ2F1dGhvcl9pZCcpO1xuXHRcdFx0dmFyXHRkaXNhYmxlX290aGVycyA9IGZvbGxvdy5kYXRhKCdkaXNhYmxlX290aGVycycpO1xuXHRcdFx0Zm9sbG93LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRpZiAoIWZvbGxvdy5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuXHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRhY3Rpb246ICdpcGluLWZvbGxvdycsXG5cdFx0XHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlLFxuXHRcdFx0XHRcdGlwaW5fZm9sbG93OiAnZm9sbG93Jyxcblx0XHRcdFx0XHRib2FyZF9wYXJlbnRfaWQ6IGJvYXJkX3BhcmVudF9pZCxcblx0XHRcdFx0XHRib2FyZF9pZDogYm9hcmRfaWQsXG5cdFx0XHRcdFx0YXV0aG9yX2lkOiBhdXRob3JfaWQsXG5cdFx0XHRcdFx0ZGlzYWJsZV9vdGhlcnM6IGRpc2FibGVfb3RoZXJzXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JC5hamF4KHtcblx0XHRcdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoZm9sbG93LmRhdGEoJ2JvYXJkX3BhcmVudF9pZCcpICE9IDApIHtcblx0XHRcdFx0XHRcdFx0Zm9sbG93LmFkZENsYXNzKCdkaXNhYmxlZCcpLnRleHQob2JqX2lwaW4uX19VbmZvbGxvd0JvYXJkKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Zm9sbG93LmFkZENsYXNzKCdkaXNhYmxlZCcpLnRleHQob2JqX2lwaW4uX19VbmZvbGxvdykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly9pbmNyZWFzZSBmb2xsb3dlcnMgY291bnQgaW4gYXV0aG9yLnBocFxuXHRcdFx0XHRcdFx0aWYgKCQoJyNhamF4LWZvbGxvd2VyLWNvdW50JykgJiYgZm9sbG93LnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ2lkJykgPT0gJ3VzZXJiYXInKSB7XG5cdFx0XHRcdFx0XHRcdCQoJyNhamF4LWZvbGxvd2VyLWNvdW50JykuaHRtbChwYXJzZUludCgkKCcjYWpheC1mb2xsb3dlci1jb3VudCcpLmh0bWwoKSwgMTApKzEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL2Rpc2FibGUgb3RoZXIgZm9sbG93IGJ1dHRvblxuXHRcdFx0XHRcdFx0aWYgKGJvYXJkX3BhcmVudF9pZCA9PSAnMCcgJiYgKGRpc2FibGVfb3RoZXJzICE9ICdubycgfHwgJCgnI3VzZXJiYXIgLm5hdiBsaTpmaXJzdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkpIHtcblx0XHRcdFx0XHRcdFx0JCgnLmlwaW4tZm9sbG93JykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoJCh0aGlzKS5kYXRhKCdib2FyZF9wYXJlbnRfaWQnKSAhPSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdkaXNhYmxlZCcpLnRleHQob2JqX2lwaW4uX19VbmZvbGxvd0JvYXJkKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1x0XHRcdFx0XHRcdFxuXHRcdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0XHRhY3Rpb246ICdpcGluLWZvbGxvdycsXG5cdFx0XHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlLFxuXHRcdFx0XHRcdGlwaW5fZm9sbG93OiAndW5mb2xsb3cnLFxuXHRcdFx0XHRcdGJvYXJkX3BhcmVudF9pZDogYm9hcmRfcGFyZW50X2lkLFxuXHRcdFx0XHRcdGJvYXJkX2lkOiBib2FyZF9pZCxcblx0XHRcdFx0XHRhdXRob3JfaWQ6IGF1dGhvcl9pZFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmIChmb2xsb3cuZGF0YSgnYm9hcmRfcGFyZW50X2lkJykgIT0gMCkge1x0XHRcblx0XHRcdFx0XHRcdFx0Zm9sbG93LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpLnRleHQob2JqX2lwaW4uX19Gb2xsb3dCb2FyZCkucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGZvbGxvdy5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS50ZXh0KG9ial9pcGluLl9fRm9sbG93KS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL2RlY3JlYXNlIGZvbGxvd2VycyBjb3VudCBpbiBhdXRob3IucGhwXG5cdFx0XHRcdFx0XHRpZiAoJCgnI2FqYXgtZm9sbG93ZXItY291bnQnKSAmJiBmb2xsb3cucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuYXR0cignaWQnKSA9PSAndXNlcmJhcicpIHtcblx0XHRcdFx0XHRcdFx0JCgnI2FqYXgtZm9sbG93ZXItY291bnQnKS5odG1sKHBhcnNlSW50KCQoJyNhamF4LWZvbGxvd2VyLWNvdW50JykuaHRtbCgpLCAxMCktMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vZW5hYmxlIG90aGVyIGZvbGxvdyBidXR0b25cblx0XHRcdFx0XHRcdGlmIChkYXRhID09ICd1bmZvbGxvd19hbGwnICYmIChkaXNhYmxlX290aGVycyAhPSAnbm8nIHx8ICQoJyN1c2VyYmFyIC5uYXYgbGk6Zmlyc3QnKS5oYXNDbGFzcygnYWN0aXZlJykpKSB7XG5cdFx0XHRcdFx0XHRcdCQoJy5pcGluLWZvbGxvdycpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCQodGhpcykuZGF0YSgnYm9hcmRfcGFyZW50X2lkJykgIT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS50ZXh0KG9ial9pcGluLl9fRm9sbG93Qm9hcmQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bG9naW5Qb3B1cCgpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQvL2luZmluaXRlIHNjcm9sbFxuXHRpZiAoJG1hc29ucnkubGVuZ3RoICYmIG9ial9pcGluLmluZmluaXRlc2Nyb2xsICE9ICdkaXNhYmxlJykge1xuXHRcdG5leHRTZWxlY3RvciA9IG9ial9pcGluLm5leHRzZWxlY3Rvcjtcblx0XHRpZiAoZG9jdW1lbnQuVVJMLmluZGV4T2YoJy9zb3VyY2UvJykgIT0gLTEpIHtcblx0XHRcdG5leHRTZWxlY3RvciA9ICcjbmF2aWdhdGlvbiAjbmF2aWdhdGlvbi1uZXh0IGEnO1xuXHRcdH1cblx0XHRcblx0XHQkbWFzb25yeS5pbmZpbml0ZXNjcm9sbCh7XG5cdFx0XHRuYXZTZWxlY3RvciA6ICcjbmF2aWdhdGlvbicsXG5cdFx0XHRuZXh0U2VsZWN0b3IgOiBuZXh0U2VsZWN0b3IsXG5cdFx0XHRpdGVtU2VsZWN0b3IgOiAnLnRodW1iJyxcblx0XHRcdHByZWZpbGw6IHRydWUsXG5cdFx0XHRidWZmZXJQeCA6IDUwMCxcblx0XHRcdGxvYWRpbmc6IHtcblx0XHRcdFx0bXNnVGV4dDogJycsXG5cdFx0XHRcdGZpbmlzaGVkTXNnOiBvYmpfaXBpbi5fX2FsbGl0ZW1zbG9hZGVkLFxuXHRcdFx0XHRpbWc6IG9ial9pcGluLnN0eWxlc2hlZXRfZGlyZWN0b3J5X3VyaSArICcvaW1nL2FqYXgtbG9hZGVyLmdpZicsXG5cdFx0XHRcdGZpbmlzaGVkOiBmdW5jdGlvbigpIHt9XG5cdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24obmV3RWxlbWVudHMpIHtcblx0XHRcdGlmICgkKCcuY2hlY2stNDgwcHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ2xlZnQnKSB7XG5cdFx0XHRcdHZhciAkbmV3RWxlbXMgPSAkKG5ld0VsZW1lbnRzKS5oaWRlKCk7XG5cdFxuXHRcdFx0XHQkbmV3RWxlbXMuaW1hZ2VzTG9hZGVkKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoJyNpbmZzY3ItbG9hZGluZycpLmZhZGVPdXQoJ25vcm1hbCcpO1xuXHRcdFx0XHRcdCRuZXdFbGVtcy5zaG93KCk7XG5cdFx0XHRcdFx0JG1hc29ucnkubWFzb25yeSgnYXBwZW5kZWQnLCAkbmV3RWxlbXMsIHRydWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciAkbmV3RWxlbXMgPSAkKG5ld0VsZW1lbnRzKTtcblx0XHRcdFx0JCgnI2luZnNjci1sb2FkaW5nJykuZmFkZU91dCgnbm9ybWFsJyk7XG5cdFx0XHRcdCRtYXNvbnJ5Lm1hc29ucnkoJ2FwcGVuZGVkJywgJG5ld0VsZW1zLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcblx0Ly9pbmZpbml0ZSBzY3JvbGwgZm9yIHVzZXIgcHJvZmlsZSAtIGJvYXJkc1xuXHRpZiAodXNlcl9wcm9maWxlX2JvYXJkcy5sZW5ndGggJiYgb2JqX2lwaW4uaW5maW5pdGVzY3JvbGwgIT0gJ2Rpc2FibGUnKSB7XG5cdFx0dXNlcl9wcm9maWxlX2JvYXJkcy5pbmZpbml0ZXNjcm9sbCh7XG5cdFx0XHRuYXZTZWxlY3RvciA6ICcjbmF2aWdhdGlvbicsXG5cdFx0XHRuZXh0U2VsZWN0b3IgOiAnI25hdmlnYXRpb24gI25hdmlnYXRpb24tbmV4dCBhJyxcblx0XHRcdGl0ZW1TZWxlY3RvciA6ICcuYm9hcmQtbWluaScsXG5cdFx0XHRwcmVmaWxsOiB0cnVlLFxuXHRcdFx0YnVmZmVyUHggOiA1MDAsXG5cdFx0XHRsb2FkaW5nOiB7XG5cdFx0XHRcdG1zZ1RleHQ6ICcnLFxuXHRcdFx0XHRmaW5pc2hlZE1zZzogb2JqX2lwaW4uX19hbGxpdGVtc2xvYWRlZCxcblx0XHRcdFx0aW1nOiBvYmpfaXBpbi5zdHlsZXNoZWV0X2RpcmVjdG9yeV91cmkgKyAnL2ltZy9hamF4LWxvYWRlci5naWYnXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdC8vaW5maW5pdGUgc2Nyb2xsIGZvciB1c2VyIHByb2ZpbGUgLSBmb2xsb3dlcnMgJiBmb2xsb3dpbmdcblx0aWYgKHVzZXJfcHJvZmlsZV9mb2xsb3cubGVuZ3RoICYmIG9ial9pcGluLmluZmluaXRlc2Nyb2xsICE9ICdkaXNhYmxlJykge1xuXHRcdHVzZXJfcHJvZmlsZV9mb2xsb3cuaW5maW5pdGVzY3JvbGwoe1xuXHRcdFx0bmF2U2VsZWN0b3IgOiAnI25hdmlnYXRpb24nLFxuXHRcdFx0bmV4dFNlbGVjdG9yIDogJyNuYXZpZ2F0aW9uICNuYXZpZ2F0aW9uLW5leHQgYScsXG5cdFx0XHRpdGVtU2VsZWN0b3IgOiAnLmZvbGxvdy13cmFwcGVyJyxcblx0XHRcdHByZWZpbGw6IHRydWUsXG5cdFx0XHRidWZmZXJQeCA6IDUwMCxcblx0XHRcdGxvYWRpbmc6IHtcblx0XHRcdFx0bXNnVGV4dDogJycsXG5cdFx0XHRcdGZpbmlzaGVkTXNnOiBvYmpfaXBpbi5fX2FsbGl0ZW1zbG9hZGVkLFxuXHRcdFx0XHRpbWc6IG9ial9pcGluLnN0eWxlc2hlZXRfZGlyZWN0b3J5X3VyaSArICcvaW1nL2FqYXgtbG9hZGVyLmdpZicsXG5cdFx0XHRcdGZpbmlzaGVkOiBmdW5jdGlvbigpIHt9XG5cdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24obmV3RWxlbWVudHMpIHtcblx0XHRcdHZhciAkbmV3RWxlbXMgPSAkKG5ld0VsZW1lbnRzKS5oaWRlKCk7XG5cblx0XHRcdCRuZXdFbGVtcy5pbWFnZXNMb2FkZWQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNpbmZzY3ItbG9hZGluZycpLmZhZGVPdXQoJ25vcm1hbCcpO1xuXHRcdFx0XHQkbmV3RWxlbXMuc2hvdygpO1xuXHRcdFx0XHR1c2VyX3Byb2ZpbGVfZm9sbG93Lm1hc29ucnkoJ2FwcGVuZGVkJywgJG5ld0VsZW1zLCB0cnVlKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHQvL2luZmluaXRlIHNjcm9sbCBmb3Igbm90aWZpY2F0aW9uc1xuXHRpZiAodXNlcl9ub3RpZmljYXRpb25zLmxlbmd0aCAmJiBvYmpfaXBpbi5pbmZpbml0ZXNjcm9sbCAhPSAnZGlzYWJsZScpIHtcblx0XHR1c2VyX25vdGlmaWNhdGlvbnMuaW5maW5pdGVzY3JvbGwoe1xuXHRcdFx0bmF2U2VsZWN0b3IgOiAnI25hdmlnYXRpb24nLFxuXHRcdFx0bmV4dFNlbGVjdG9yIDogJyNuYXZpZ2F0aW9uICNuYXZpZ2F0aW9uLW5leHQgYScsXG5cdFx0XHRpdGVtU2VsZWN0b3IgOiAnLm5vdGlmaWNhdGlvbnMtd3JhcHBlcicsXG5cdFx0XHRwcmVmaWxsOiB0cnVlLFxuXHRcdFx0YnVmZmVyUHggOiA1MDAsXG5cdFx0XHRsb2FkaW5nOiB7XG5cdFx0XHRcdG1zZ1RleHQ6ICcnLFxuXHRcdFx0XHRmaW5pc2hlZE1zZzogb2JqX2lwaW4uX19hbGxpdGVtc2xvYWRlZCxcblx0XHRcdFx0aW1nOiBvYmpfaXBpbi5zdHlsZXNoZWV0X2RpcmVjdG9yeV91cmkgKyAnL2ltZy9hamF4LWxvYWRlci5naWYnLFxuXHRcdFx0XHRmaW5pc2hlZDogZnVuY3Rpb24oKSB7fVxuXHRcdFx0fVxuXHRcdH0sIGZ1bmN0aW9uKG5ld0VsZW1lbnRzKSB7XG5cdFx0XHR2YXIgJG5ld0VsZW1zID0gJChuZXdFbGVtZW50cykuaGlkZSgpO1xuXHRcdFx0JG5ld0VsZW1zLmFwcGVuZFRvKCQoJy50YWJsZScpKTtcblx0XHRcdCQoJyNpbmZzY3ItbG9hZGluZycpLmZhZGVPdXQoJ25vcm1hbCcpO1xuXHRcdFx0JG5ld0VsZW1zLnNob3coKTtcblx0XHR9KTtcblx0fVxuXHRcblx0Ly9hY3Rpb25iYXJcblx0JChkb2N1bWVudCkub24oJ21vdXNlZW50ZXInLCAnLnRodW1iLWhvbGRlcicsIGZ1bmN0aW9uKCkge1xuXHRcdGlmICgkKCcuY2hlY2stNDgwcHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ25vbmUnICYmICFpb3MpIHtcblx0XHRcdCQodGhpcykuY2hpbGRyZW4oJy5tYXNvbnJ5LWFjdGlvbmJhcicpLmZhZGVJbigxMDApO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcudGh1bWItaG9sZGVyJywgZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCQoJy5jaGVjay00ODBweCcpLmNzcygnZmxvYXQnKSA9PSAnbm9uZScgJiYgIWlvcykge1xuXHRcdFx0JCh0aGlzKS5jaGlsZHJlbignLm1hc29ucnktYWN0aW9uYmFyJykuZmFkZU91dCgxMDApO1xuXHRcdH1cblx0fSk7XG5cdFxuXHQvL2NvbW1lbnRzIGZvciBmcm9udHBhZ2Vcblx0JChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcubWFzb25yeS1tZXRhIGZvcm0nLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgY29tbWVudGZvcm0gPSAkKHRoaXMpO1xuXHRcdHZhciBmb3JtZGF0YSA9ICQodGhpcykuc2VyaWFsaXplKCk7XG5cdFx0dmFyIGZvcm11cmwgPSAkKHRoaXMpLmF0dHIoJ2FjdGlvbicpO1xuXHRcdHZhciBwb3N0X2lkID0gJCh0aGlzKS5hdHRyKCdpZCcpLnN1YnN0cigxMik7XG5cdFx0XG5cdFx0aWYgKCQudHJpbSgkKHRoaXMpLmZpbmQoJ3RleHRhcmVhJykudmFsKCkpID09ICcnKSB7XG5cdFx0XHRjb21tZW50Zm9ybS5maW5kKCcjY29tbWVudC1zdGF0dXMnKS5yZW1vdmUoKTtcblx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJy5mb3JtLXN1Ym1pdCAuY29tbWVudC1zdGF0dXMtYWpheC1sb2FkZXInKS5yZW1vdmUoKTtcblx0XHRcdGNvbW1lbnRmb3JtLnByZXBlbmQoJzxkaXYgaWQ9XCJjb21tZW50LXN0YXR1c1wiPjwvZGl2PicpO1xuXHRcdFx0Y29tbWVudGZvcm0uZmluZCgnI2NvbW1lbnQtc3RhdHVzJykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX1BsZWFzZXR5cGVhY29tbWVudCArICc8L3N0cm9uZz48L2Rpdj4nKTtcblx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJ3RleHRhcmVhJykuZm9jdXMoKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdFx0Y29tbWVudGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0Y29tbWVudGZvcm0uZmluZCgnI2NvbW1lbnQtc3RhdHVzJykucmVtb3ZlKCk7XG5cdFx0Y29tbWVudGZvcm0uZmluZCgnLmNvbW1lbnQtc3RhdHVzLWFqYXgtbG9hZGVyJykucmVtb3ZlKCk7XG5cdFx0Y29tbWVudGZvcm0uZmluZCgnLmZvcm0tc3VibWl0JykuYXBwZW5kKCcgPGRpdiBjbGFzcz1cImNvbW1lbnQtc3RhdHVzLWFqYXgtbG9hZGVyIGFqYXgtbG9hZGVyIGFqYXgtbG9hZGVyLWlubGluZVwiPjwvZGl2PicpO1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogZm9ybXVybCxcblx0XHRcdGRhdGE6IGZvcm1kYXRhLFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0KSB7XG5cdFx0XHRcdHZhciBlcnJvcm1zZyA9IFhNTEh0dHBSZXF1ZXN0LnJlc3BvbnNlVGV4dC5zdWJzdHIoWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0LmluZGV4T2YoJzxwPicpKzMpO1xuXHRcdFx0XHRlcnJvcm1zZyA9IGVycm9ybXNnLnN1YnN0cigwLCBlcnJvcm1zZy5pbmRleE9mKCc8L3A+JykpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGVycm9ybXNnID09ICcnKSB7XG5cdFx0XHRcdFx0ZXJyb3Jtc2cgPSBvYmpfaXBpbi5fX2Vycm9ycGxlYXNldHJ5YWdhaW47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGNvbW1lbnRmb3JtLnByZXBlbmQoJzxkaXYgaWQ9XCJjb21tZW50LXN0YXR1c1wiPjwvZGl2PicpO1xuXHRcdFx0XHRjb21tZW50Zm9ybS5maW5kKCcjY29tbWVudC1zdGF0dXMnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIGVycm9ybXNnICsgJzwvc3Ryb25nPjwvZGl2PicpO1xuXHRcdFx0XHRjb21tZW50Zm9ybS5maW5kKCd0ZXh0YXJlYScpLmZvY3VzKCk7XG5cdFx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJy5mb3JtLXN1Ym1pdCAuY29tbWVudC1zdGF0dXMtYWpheC1sb2FkZXInKS5yZW1vdmUoKTtcblx0XHRcdFx0aWYgKCQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHQkKCcjcG9zdC1tYXNvbnJ5ICNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCQoJyNtYXNvbnJ5JykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnI21hc29ucnknKS5tYXNvbnJ5KCdyZWxvYWRJdGVtcycpLm1hc29ucnkoJ2xheW91dCcpO1xuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb21tZW50Zm9ybS5maW5kKCcuZm9ybS1zdWJtaXQgLmNvbW1lbnQtc3RhdHVzLWFqYXgtbG9hZGVyJykucmVtb3ZlKCk7XG5cdFx0XHRcdHZhciBjb21tZW50dGV4dCA9ICBjb21tZW50Zm9ybS5maW5kKCd0ZXh0YXJlYScpLnZhbCgpO1xuXHRcdFx0XHR2YXIgbmV3Y29tbWVudCA9ICc8ZGl2IGlkPVwibWFzb25yeS1tZXRhLWNvbW1lbnQtd3JhcHBlci0nICsgcG9zdF9pZCArICdcIiBjbGFzcz1cIm1hc29ucnktbWV0YVwiPjxkaXYgY2xhc3M9XCJtYXNvbnJ5LW1ldGEtYXZhdGFyXCI+JyArIG9ial9pcGluLmF2YXRhcjMwICsgJzwvZGl2PjxkaXYgY2xhc3M9XCJtYXNvbnJ5LW1ldGEtY29tbWVudFwiPjxzcGFuIGNsYXNzPVwibWFzb25yeS1tZXRhLWF1dGhvclwiPicgKyBvYmpfaXBpbi51aSArICc8L3NwYW4+PHNwYW4gY2xhc3M9XCJtYXNvbnJ5LW1ldGEtY29tbWVudC1jb250ZW50XCI+ICcgKyBjb21tZW50dGV4dCArICc8L3NwYW4+PC9kaXY+PC9kaXY+Jztcblx0XHRcdFx0XG5cdFx0XHRcdCQoJ1tpZD1tYXNvbnJ5LW1ldGEtY29tbWVudGZvcm0tJyArIHBvc3RfaWQgKyAnXScpLnByZXYoKS5hcHBlbmQobmV3Y29tbWVudCk7XG5cdFx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJyNjb21tZW50JykudmFsKCcnKTtcblx0XHRcdFx0Y29tbWVudGZvcm0uY2xvc2VzdCgnI21hc29ucnktbWV0YS1jb21tZW50Zm9ybS0nICsgcG9zdF9pZCkuaGlkZSgpO1xuXHRcdFx0XHRjb21tZW50Zm9ybS5jbG9zZXN0KCcjcG9zdC0nICsgcG9zdF9pZCkuZmluZCgnLmlwaW4tY29tbWVudCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIGNvbW1lbnRzX2NvdW50bXNnID0gY29tbWVudGZvcm0uY2xvc2VzdCgnI3Bvc3QtJyArIHBvc3RfaWQpLmZpbmQoJyNjb21tZW50cy1jb3VudC0nK3Bvc3RfaWQpO1xuXHRcdFx0XHR2YXIgY29tbWVudHNfY291bnQgPSBjb21tZW50c19jb3VudG1zZy5odG1sKCk7XG5cdFx0XHRcdGNvbW1lbnRzX2NvdW50ID0gY29tbWVudHNfY291bnQuc3Vic3RyaW5nKGNvbW1lbnRzX2NvdW50Lmxhc3RJbmRleE9mKCcgJykpO1xuXG5cdFx0XHRcdGlmIChjb21tZW50c19jb3VudCA9PSAnJykge1x0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQoJ1tpZD1jb21tZW50cy1jb3VudC0nK3Bvc3RfaWQrJ10nKS5yZW1vdmVDbGFzcygnaGlkZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtY29tbWVudFwiPjwvaT4gMScpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoJ1tpZD1jb21tZW50cy1jb3VudC0nK3Bvc3RfaWQrJ10nKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWNvbW1lbnRcIj48L2k+ICcgKyAocGFyc2VJbnQoY29tbWVudHNfY291bnQsMTApKzEpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHQkKCcjcG9zdC1tYXNvbnJ5ICNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCQoJyNtYXNvbnJ5JykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JCgnI21hc29ucnknKS5tYXNvbnJ5KCdyZWxvYWRJdGVtcycpLm1hc29ucnkoJ2xheW91dCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRjb21tZW50Zm9ybS5maW5kKCd0ZXh0YXJlYScpLnZhbCgnJyk7XG5cdFx0XHRcdGNvbW1lbnRmb3JtLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdFxuXHQvL2NvbW1lbnRzIHRvZ2dsZSBmcm9udHBhZ2UgY29tbWVudHMgZm9ybVxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmlwaW4tY29tbWVudCcsIGZ1bmN0aW9uKCkge1xuXHRcdGlmIChvYmpfaXBpbi51ICE9ICcwJykge1xuXHRcdFx0dmFyIGNvbW1lbnRzZm9ybSA9ICQodGhpcyk7XG5cdFx0XHRpZiAoIWNvbW1lbnRzZm9ybS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuXHRcdFx0XHRjb21tZW50c2Zvcm0uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb21tZW50c2Zvcm0ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdCQodGhpcykuY2xvc2VzdCgnI3Bvc3QtJyArICQodGhpcykuZGF0YSgncG9zdF9pZCcpKS5maW5kKCcjbWFzb25yeS1tZXRhLWNvbW1lbnRmb3JtLScgKyAkKHRoaXMpLmRhdGEoJ3Bvc3RfaWQnKSkuc2xpZGVUb2dnbGUoJ2Zhc3QnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKS5sZW5ndGgpIHtcblx0XHRcdFx0XHQkKCcjcG9zdC1tYXNvbnJ5ICNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0fSBlbHNlIGlmICgkKCcjbWFzb25yeScpLmxlbmd0aCkge1xuXHRcdFx0XHRcdCQoJyNtYXNvbnJ5JykubWFzb25yeSgncmVsb2FkSXRlbXMnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuZmluZCgndGV4dGFyZWEnKS5mb2N1cygpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsb2dpblBvcHVwKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9KTtcblx0XG5cdC8vbGlnaHRib3hcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNtYXNvbnJ5IC5mZWF0dXJlZC10aHVtYiwgLnBvc3Qtd3JhcHBlciAucG9zdC1uYXYtbmV4dCBhLCAucG9zdC13cmFwcGVyIC5wb3N0LW5hdi1wcmV2IGEnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJG1hc29ucnkubGVuZ3RoICYmICEkKCdib2R5JykuaGFzQ2xhc3MoJ3NpbmdsZS1wb3N0JykgJiYgISQoJ2JvZHknKS5oYXNDbGFzcygncGFnZS10ZW1wbGF0ZS1wYWdlX2Z1bGxfd2lkdGhfMTAwcGVyY2V0LXBocCcpICYmIG9ial9pcGluLmxpZ2h0Ym94ICE9ICdkaXNhYmxlJyAmJiAkKCcuY2hlY2stNzY3cHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ25vbmUnICYmICFpb3MpIHtcblx0XHRcdHZhciBsaWdodGJveCA9ICQoJyNwb3N0LWxpZ2h0Ym94Jyk7XG5cdFx0XHR2YXIgaHJlZiA9ICQodGhpcykuY2xvc2VzdCgnYScpLmF0dHIoJ2hyZWYnKTtcblx0XHRcdFxuXHRcdFx0aWYgKCEkKCcjc2luZ2xlLXBpbicpLmxlbmd0aCB8fCAkKCcjc2luZ2xlLXBpbicpLmhlaWdodCgpIDw9IDApIHtcdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWllOWJlbG93KSB7XG5cdFx0XHRcdFx0d2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKCcnLCAnJywgaHJlZik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XHRcdFx0XHRcblx0XHRcdFx0aWYgKCFpZTliZWxvdykge1xuXHRcdFx0XHRcdHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSgnJywgJycsIGhyZWYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGxpZ2h0Ym94Lmh0bWwoJzxkaXYgaWQ9XCJhamF4LWxvYWRlci1tYXNvbnJ5XCI+PC9kaXY+Jylcblx0XHRcdFx0Lm1vZGFsKCkubG9hZChocmVmICsgJyAjc2luZ2xlLXBpbi13cmFwcGVyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHBvc3RfbWFzb25yeSA9ICQoJyNwb3N0LW1hc29ucnkgI21hc29ucnknKTtcblx0XHRcdFx0XHRpZiAocG9zdF9tYXNvbnJ5Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0cG9zdF9tYXNvbnJ5Lm1hc29ucnkoe1xuXHRcdFx0XHRcdFx0XHRpdGVtU2VsZWN0b3IgOiAnLnRodW1iJyxcblx0XHRcdFx0XHRcdFx0aXNGaXRXaWR0aDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0dHJhbnNpdGlvbkR1cmF0aW9uOiAwXG5cdFx0XHRcdFx0XHR9KS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuXHRcdFx0XHRcdFx0JCgnI3Bvc3QtbWFzb25yeSAjYWpheC1sb2FkZXItbWFzb25yeSwgI3Bvc3QtbWFzb25yeSAjbmF2aWdhdGlvbicpLmhpZGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JCgnLnBvc3Qtd3JhcHBlciAucG9zdC1uYXYtbmV4dCBhLCAucG9zdC13cmFwcGVyIC5wb3N0LW5hdi1wcmV2IGEnKS5hZGRDbGFzcygncG9zdC1uYXYtbGluay1saWdodGJveCcpO1xuXHRcdFx0XHRcdGxpZ2h0Ym94X3Bvc3RpZCA9ICQoJyNzaW5nbGUtcGluJykuZGF0YSgncG9zdGlkJyk7XG5cdFx0XHRcdFx0bGlnaHRib3hfcHJldmxpbmsgPSAkKCcuY29udGFpbmVyLWZsdWlkID4gI21hc29ucnkgPiAjcG9zdC0nICsgbGlnaHRib3hfcG9zdGlkKS5wcmV2QWxsKCcucG9zdCcpLmZpcnN0KCkuZmluZCgnLmZlYXR1cmVkLXRodW1iLWxpbmsnKS5hdHRyKCdocmVmJyk7XG5cdFx0XHRcdFx0bGlnaHRib3hfbmV4dGxpbmsgPSAkKCcuY29udGFpbmVyLWZsdWlkID4gI21hc29ucnkgPiAjcG9zdC0nICsgbGlnaHRib3hfcG9zdGlkKS5uZXh0QWxsKCcucG9zdCcpLmZpcnN0KCkuZmluZCgnLmZlYXR1cmVkLXRodW1iLWxpbmsnKS5hdHRyKCdocmVmJyk7XG5cdFx0XHRcdFx0aWYgKCFsaWdodGJveF9wcmV2bGluaykge1xuXHRcdFx0XHRcdFx0JCgnLnBvc3Qtd3JhcHBlciAucG9zdC1uYXYtcHJldiBhJykuaGlkZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKCcucG9zdC13cmFwcGVyIC5wb3N0LW5hdi1wcmV2IGEnKS5hdHRyKCdocmVmJywgbGlnaHRib3hfcHJldmxpbmspO1x0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWxpZ2h0Ym94X25leHRsaW5rKSB7XG5cdFx0XHRcdFx0XHQkKCcucG9zdC13cmFwcGVyIC5wb3N0LW5hdi1uZXh0IGEnKS5oaWRlKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCQoJy5wb3N0LXdyYXBwZXIgLnBvc3QtbmF2LW5leHQgYScpLmF0dHIoJ2hyZWYnLCBsaWdodGJveF9uZXh0bGluayk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQoJyNwb3N0LWNsb3NlJykuc2hvdygpO1xuXG5cdFx0XHRcdFx0bGlnaHRib3guc2Nyb2xsVG9wKDApLmZvY3VzKCk7XG5cdFx0XHRcdFx0JCgnI3Bvc3QtZmVhdHVyZWQtcGhvdG8nKS5pbWFnZXNMb2FkZWQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRsaWdodGJveC5zY3JvbGxUb3AoMCk7XG5cdFx0XHRcdFx0XHR2YXIgcG9zdF90b3BfbWV0YSA9ICQoJy5wb3N0LXRvcC1tZXRhJyk7XG5cdFx0XHRcdFx0XHR2YXIgcG9zdF90b3BfbWV0YV90b3AgPSBwb3N0X3RvcF9tZXRhLnBvc2l0aW9uKCkudG9wO1xuXHRcdFx0XHRcdFx0dmFyIHBvc3RfdG9wX21ldGFfaGVpZ2h0ID0gcG9zdF90b3BfbWV0YS5vdXRlckhlaWdodCgpO1xuXHRcblx0XHRcdFx0XHRcdHZhciBwb3N0X2ZlYXR1cmVkX3Bob3RvX3RvcCA9ICQoJyNwb3N0LWZlYXR1cmVkLXBob3RvJykub2Zmc2V0KCkudG9wO1xuXHRcdFx0XHRcdFx0dmFyIHBvc3RfZmVhdHVyZWRfcGhvdG9fYm90dG9tID0gcG9zdF9mZWF0dXJlZF9waG90b190b3AgKyAkKCcjcG9zdC1mZWF0dXJlZC1waG90bycpLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGxpZ2h0Ym94LnNjcm9sbChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0dmFyIHBvc3RfdG9wX21ldGFfbGVmdCA9ICQoJyNwb3N0LWZlYXR1cmVkLXBob3RvJykub2Zmc2V0KCkubGVmdDtcblx0XHRcdFx0XHRcdFx0aWYgKGxpZ2h0Ym94LnNjcm9sbFRvcCgpID4gcG9zdF90b3BfbWV0YV90b3AgJiYgbGlnaHRib3guc2Nyb2xsVG9wKCkgPD0gKHBvc3RfZmVhdHVyZWRfcGhvdG9fYm90dG9tIC0gcG9zdF90b3BfbWV0YV9oZWlnaHQgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSkpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcucG9zdC10b3AtbWV0YScpLmNzcyh7J29wYWNpdHknOiAnMC45NScsICdwb3NpdGlvbic6ICdmaXhlZCcsICd0b3AnOiAwLCAnbGVmdCc6IHBvc3RfdG9wX21ldGFfbGVmdCwgJ3dpZHRoJzogJCgnI3Bvc3QtZmVhdHVyZWQtcGhvdG8nKS5vdXRlcldpZHRoKCl9KTtcblx0XHRcdFx0XHRcdFx0XHQkKCcucG9zdC10b3AtbWV0YS1wbGFjZWhvbGRlcicpLmNzcygnaGVpZ2h0JywgcG9zdF90b3BfbWV0YV9oZWlnaHQtMSkuc2hvdygpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxpZ2h0Ym94LnNjcm9sbFRvcCgpID4gKHBvc3RfZmVhdHVyZWRfcGhvdG9fYm90dG9tIC0gcG9zdF90b3BfbWV0YV9oZWlnaHQgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSkpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcucG9zdC10b3AtbWV0YScpLmNzcyh7J3Bvc2l0aW9uJzogJ2Fic29sdXRlJywgJ3RvcCc6IChwb3N0X2ZlYXR1cmVkX3Bob3RvX2JvdHRvbSAtIHBvc3RfdG9wX21ldGFfaGVpZ2h0IC0kKGRvY3VtZW50KS5zY3JvbGxUb3AoKSAtIDIpLCAnbGVmdCc6IDE2fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnLnBvc3QtdG9wLW1ldGEnKS5jc3MoeydvcGFjaXR5JzogJzEnLCAncG9zaXRpb24nOiAncmVsYXRpdmUnLCAndG9wJzogMCwgJ2xlZnQnOiAwLCAnd2lkdGgnOiAnYXV0byd9KTtcblx0XHRcdFx0XHRcdFx0XHQkKCcucG9zdC10b3AtbWV0YS1wbGFjZWhvbGRlcicpLmhpZGUoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKCQoJy5hZHNieWdvb2dsZScpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JC5nZXRTY3JpcHQoJy8vcGFnZWFkMi5nb29nbGVzeW5kaWNhdGlvbi5jb20vcGFnZWFkL2pzL2Fkc2J5Z29vZ2xlLmpzJyk7XG5cdFx0XHRcdFx0XHQoYWRzYnlnb29nbGUgPSB3aW5kb3cuYWRzYnlnb29nbGUgfHwgW10pLnB1c2goe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoJCgnLmZiLWNvbW1lbnRzJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRGQi5YRkJNTC5wYXJzZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0aWYgKHR5cGVvZiBnYSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGdhKCdzZW5kJywgJ3BhZ2V2aWV3JywgeydwYWdlJzogaHJlZi5yZXBsYWNlKG9ial9pcGluLmhvbWVfdXJsLCAnJyl9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZiBfZ2FxICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRfZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldycsIGhyZWYucmVwbGFjZShvYmpfaXBpbi5ob21lX3VybCwgJycpXSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vaGlkZSBsaWdodGJveCB3aGVuIGNsaWNrIG91dHNpZGVcblx0JCgnI3Bvc3QtbGlnaHRib3gnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0dmFyIGxpZ2h0Ym94ID0gJCgnI3Bvc3QtbGlnaHRib3gnKTtcblxuXHRcdGlmICgobGlnaHRib3guaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDAgfHwgJCgnLnJvdycpLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSAmJiBlLnBhZ2VYIDwgKCQod2luZG93KS53aWR0aCgpIC0gMjIpKSB7IC8vc2Vjb25kIGNvbmRpdGlvbiBmb3IgZmlyZWZveC1zY3JvbGxiYXItb25jbGljay1jbG9zZS1saWdodGJveCBmaXhcblx0XHRcdGxpZ2h0Ym94LnNjcm9sbFRvcCgwKTtcblx0XHRcdCQoJyN2aWRlby1lbWJlZCcpLnJlbW92ZSgpO1xuXHRcdFx0JCgnLm5hdmJhci1icmFuZCcpLmZvY3VzKCkuYmx1cigpO1xuXHRcdFx0bGlnaHRib3gubW9kYWwoJ2hpZGUnKTtcblx0XHRcdFxuXHRcdFx0aWYgKCFpZTliZWxvdykge1xuXHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9KTtcblx0XG4gICAgLy9oaWRlIGxpZ2h0Ym94IHdoZW4gZXNjIGtleSBpcyBwcmVzc2VkLiBtdXN0IHVzZSBrZXlkb3duIG5vdCBrZXl1cC5cblx0JChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbihlKSB7XG5cdFx0aWYgKCQoJyNwb3N0LWxpZ2h0Ym94JykuY3NzKCdkaXNwbGF5JykgPT0gJ2Jsb2NrJyAmJiBlLmtleUNvZGUgPT0gMjcpIHtcblx0XHRcdCQoJyNwb3N0LWxpZ2h0Ym94Jykuc2Nyb2xsVG9wKDApO1xuXHRcdFx0aWYgKCFpZTliZWxvdykge1xuXHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG4gICAgLy9oaWRlIGxpZ2h0Ym94IHdoZW4gYmFjayBidXR0b24gaXMgcHJlc3NlZFxuXHQkKHdpbmRvdykub24oJ3BvcHN0YXRlJywgZnVuY3Rpb24oZSl7XG5cdFx0dmFyIGxpZ2h0Ym94ID0gJCgnI3Bvc3QtbGlnaHRib3gnKTtcblxuXHRcdGlmIChsaWdodGJveC5sZW5ndGgpIHtcblx0XHRcdGxpZ2h0Ym94LnNjcm9sbFRvcCgwKTtcblx0XHRcdCQoJyN2aWRlby1lbWJlZCcpLnJlbW92ZSgpO1xuXHRcdFx0JCgnLm5hdmJhci1icmFuZCcpLmZvY3VzKCkuYmx1cigpO1xuXHRcdFx0bGlnaHRib3gubW9kYWwoJ2hpZGUnKTtcblx0XHR9XG4gICAgfSk7XG5cdFxuICAgIC8vaGlkZSBsaWdodGJveCB3aGVuIHNpZGViYXIgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwb3N0LWNsb3NlJywgZnVuY3Rpb24oZSkge1xuXHRcdGlmIChpZTliZWxvdykge1xuXHRcdFx0dmFyIGxpZ2h0Ym94ID0gJCgnI3Bvc3QtbGlnaHRib3gnKTtcblx0XG5cdFx0XHRpZiAobGlnaHRib3gubGVuZ3RoKSB7XG5cdFx0XHRcdGxpZ2h0Ym94LnNjcm9sbFRvcCgwKTtcblx0XHRcdFx0JCgnI3ZpZGVvLWVtYmVkJykucmVtb3ZlKCk7XG5cdFx0XHRcdCQoJy5uYXZiYXItYnJhbmQnKS5mb2N1cygpLmJsdXIoKTtcblx0XHRcdFx0bGlnaHRib3gubW9kYWwoJ2hpZGUnKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93Lmhpc3RvcnkuYmFjaygpO1x0XG5cdFx0fVxuXHR9KTtcblx0XG5cdC8vTWFuaXB1bGF0ZSBoaXN0b3J5IGZvciBsaW5rcyBpbiBsaWdodGJveFxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3Bvc3QtbGlnaHRib3ggYScsIGZ1bmN0aW9uKGUpIHtcblx0XHRocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG5cblx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnaXBpbi1lZGl0JykgfHwgJCh0aGlzKS5oYXNDbGFzcygnZWRpdC1ib2FyZCcpIHx8ICghJCh0aGlzKS5oYXNDbGFzcygncG9zdC1uYXYtbGluay1saWdodGJveCcpICYmICEkKHRoaXMpLmhhc0NsYXNzKCdidG4nKSAmJiBocmVmICE9ICcnICYmICQodGhpcykuYXR0cigndGFyZ2V0JykgIT0gJ19ibGFuaycpKSB7XG5cdFx0XHRpZiAoIWllOWJlbG93KSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKC9DaHJvbWVbXFwvXFxzXShcXGQrXFwuXFxkKykvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHsgLy9oYXZlIHRvIHVzZSBzZXRUaW1lb3V0IGZvciBjaHJvbWU/XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9LCAwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdC8vQWRkIGJvYXJkXG5cdCQoJyNhZGRfYm9hcmRfZm9ybScpLnN1Ym1pdChmdW5jdGlvbigpIHtcblx0XHR2YXIgYWRkYm9hcmRmb3JtID0gJCh0aGlzKTtcblx0XHR2YXIgZXJyb3Jtc2cgPSAkKCcuZXJyb3ItbXNnJyk7XG5cdFx0dmFyIGFqYXhsb2FkZXIgPSAkKCcuYWpheC1sb2FkZXInKTtcblxuXHRcdGFkZGJvYXJkZm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRlcnJvcm1zZy5oaWRlKCk7XG5cdFx0YWpheGxvYWRlci5zaG93KCk7XG5cdFx0XG5cdFx0aWYgKCQoJyNib2FyZC10aXRsZScpLnZhbCgpID09ICcnKSB7XG5cdFx0XHRlcnJvcm1zZy5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fUGxlYXNlZW50ZXJ0aXRsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHQkKCcjYm9hcmQtdGl0bGUnKS5mb2N1cygpO1xuXHRcdFx0JCgnLmFqYXgtbG9hZGVyJykuaGlkZSgpO1xuXHRcdFx0YWRkYm9hcmRmb3JtLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0YWN0aW9uOiAnaXBpbi1hZGQtYm9hcmQnLFxuXHRcdFx0XHRub25jZTogb2JqX2lwaW4ubm9uY2UsXG5cdFx0XHRcdGJvYXJkX3RpdGxlOiAkKCcjYm9hcmQtdGl0bGUnKS52YWwoKSxcblx0XHRcdFx0Y2F0ZWdvcnlfaWQ6ICQoJyNjYXRlZ29yeS1pZCcpLnZhbCgpLFxuXHRcdFx0XHR0ZXJtX2lkOiAkKCcjdGVybS1pZCcpLnZhbCgpLFxuXHRcdFx0XHRtb2RlOiAkKCcjbW9kZScpLnZhbCgpXG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0XHRcdGVycm9ybXNnLmh0bWwob2JqX2lwaW4uX19lcnJvcnBsZWFzZXRyeWFnYWluKS5mYWRlSW4oKTtcblx0XHRcdFx0XHRhZGRib2FyZGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRhamF4bG9hZGVyLmhpZGUoKTtcblx0XHRcdFx0XHRpZiAoJCgnI2FkZF9ib2FyZF9mb3JtICNtb2RlJykudmFsKCkgPT0gJ2FkZCcgfHwgJCgnI2FkZF9ib2FyZF9mb3JtICNtb2RlJykudmFsKCkgPT0gJ2VkaXQnICkge1xuXHRcdFx0XHRcdFx0aWYgKGRhdGEgPT0gJ2Vycm9yJykge1xuXHRcdFx0XHRcdFx0XHRlcnJvcm1zZy5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fYm9hcmRhbHJlYWR5ZXhpc3RzICArICc8L3N0cm9uZz48L2Rpdj4nKS5mYWRlSW4oKTtcblx0XHRcdFx0XHRcdFx0JCgnI2JvYXJkLXRpdGxlJykuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0YWRkYm9hcmRmb3JtLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gZGF0YTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXG5cdC8vZGVsZXRlIGJvYXJkIGNvbmZpcm1hdGlvblxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmlwaW4tZGVsZXRlLWJvYXJkJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI2RlbGV0ZS1ib2FyZC1tb2RhbCcpLm1vZGFsKCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdC8vZGVsZXRlIGJvYXJkXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjaXBpbi1kZWxldGUtYm9hcmQtY29uZmlybWVkJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFqYXhsb2FkZXIgPSAkKCcuYWpheC1sb2FkZXItZGVsZXRlLWJvYXJkJyk7XG5cdFx0dmFyIGRlbGV0ZV9idG4gPSAkKHRoaXMpO1xuXHRcdHZhclx0Ym9hcmRfaWQgPSBkZWxldGVfYnRuLmRhdGEoJ2JvYXJkX2lkJyk7XG5cblx0XHRkZWxldGVfYnRuLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykucHJldigpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0YWpheGxvYWRlci5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdHRhcmdldDogJy5hamF4LWxvYWRlci1hZGQtcGluJyxcblx0XHRcdGFjdGlvbjogJ2lwaW4tZGVsZXRlLWJvYXJkJyxcblx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdGJvYXJkX2lkOiBib2FyZF9pZFxuXHRcdH07XG5cblx0XHQkLmFqYXgoe1xuXHRcdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gZGF0YTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0Ly9hZGQgcGluIGZyb20gY29tcHV0ZXJcblx0JCgnI3Bpbl91cGxvYWRfZmlsZScpLmNoYW5nZShmdW5jdGlvbigpIHsgXG5cdFx0JCgnLmVycm9yLW1zZycpLmhpZGUoKTtcblx0XHQkKCcjcGluX3VwbG9hZF9mb3JtJykuc3VibWl0KCk7XG5cdH0pO1xuXHRcblx0aWYgKCQoJyNwaW5fdXBsb2FkX2Zvcm0nKS5sZW5ndGgpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHtcblx0XHRcdGJlZm9yZVN1Ym1pdDogc2hvd1JlcXVlc3QsXG5cdFx0XHR1cGxvYWRQcm9ncmVzczogZnVuY3Rpb24oZXZlbnQsIHBvc2l0aW9uLCB0b3RhbCwgcGVyY2VudENvbXBsZXRlKSB7XG5cdFx0XHRcdGlmICh3aW5kb3cuRm9ybURhdGEgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdCQoJyNwaW4tdXBsb2FkLXByb2dyZXNzJykuc2hvdygpO1xuXHRcdFx0XHRcdCQoJyNwaW4tdXBsb2FkLXByb2dyZXNzIC5wcm9ncmVzcy1iYXItdGV4dCcpLnRleHQocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHRcdFx0XHQkKCcjcGluLXVwbG9hZC1wcm9ncmVzcyAucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRzdWNjZXNzOiBzaG93UmVzcG9uc2UsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmxcblx0XHR9OyBcblx0XHQkKCcjcGluX3VwbG9hZF9mb3JtJykuYWpheEZvcm0ob3B0aW9ucyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNob3dSZXF1ZXN0KGZvcm1EYXRhLCBqcUZvcm0sIG9wdGlvbnMpIHtcblx0XHQkKCcjcGluLXVwbG9hZC1mcm9tLXdlYi13cmFwcGVyLCAjYnJvd3Nlci1hZGRvbiwgI2Jvb2ttYXJrbGV0LCAjcGluaXRidXR0b24nKS5zbGlkZVVwKCk7XG5cdFx0aWYgKHdpbmRvdy5Gb3JtRGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQkKCcjcGluLXVwbG9hZC1mcm9tLWNvbXB1dGVyLXdyYXBwZXIgLmFqYXgtbG9hZGVyLWFkZC1waW4nKS5zaG93KCk7XG5cdFx0fVxuXG5cdFx0dmFyIGV4dCA9ICQoJyNwaW5fdXBsb2FkX2ZpbGUnKS52YWwoKS5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYoJC5pbkFycmF5KGV4dCwgWydnaWYnLCdwbmcnLCdqcGcnLCdqcGVnJ10pID09IC0xKSB7XG5cdFx0XHQkKCcjcGluLXVwbG9hZC1mcm9tLWNvbXB1dGVyLXdyYXBwZXIgLmFqYXgtbG9hZGVyLWFkZC1waW4sICNwaW4tdXBsb2FkLXByb2dyZXNzJykuaGlkZSgpO1xuXHRcdFx0JCgnLmVycm9yLW1zZycpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PHN0cm9uZz4nICsgb2JqX2lwaW4uX19pbnZhbGlkaW1hZ2VmaWxlICArICc8L3N0cm9uZz48L2Rpdj4nKS5mYWRlSW4oKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNob3dSZXNwb25zZShyZXNwb25zZVRleHQsIHN0YXR1c1RleHQsIHhociwgJGZvcm0pIHtcblx0XHRpZiAocmVzcG9uc2VUZXh0ID09ICdlcnJvcicpIHtcblx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluLCAjcGluLXVwbG9hZC1wcm9ncmVzcycpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2cnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW52YWxpZGltYWdlZmlsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0fSBlbHNlIGlmIChyZXNwb25zZVRleHQgPT0gJ2Vycm9yc2l6ZScpIHtcblx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluLCAjcGluLXVwbG9hZC1wcm9ncmVzcycpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2cnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW1hZ2V0b29zbWFsbCAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBkYXRhID0gJC5wYXJzZUpTT04ocmVzcG9uc2VUZXh0KTtcblx0XHRcdCQoJyN0aHVtYm5haWwnKS5hdHRyKCdzcmMnLCBkYXRhLnRodW1ibmFpbCk7XG5cdFx0XHQkKCcjYXR0YWNobWVudC1pZCcpLnZhbChkYXRhLmlkKTtcblx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluLCAuZXJyb3ItbXNnLCAjcGluLXVwbG9hZC1wcm9ncmVzcycpLmhpZGUoKTtcblx0XHRcdCQoJyNwaW4tdXBsb2FkLWZyb20tY29tcHV0ZXItd3JhcHBlcicpLnNsaWRlVXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwaW4tdXBsb2FkLXBvc3RkYXRhLXdyYXBwZXInKS5zbGlkZURvd24oKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR0bWNlX2ZvY3VzKCdwaW4tdGl0bGUnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAodG1jZV9nZXRDb250ZW50KCdwaW4tdGl0bGUnKSAhPSAnJyYmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKCQoJyNwaW4tdGl0bGVfaWZyJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaW4tdGl0bGVfaWZyJykuY29udGVudFdpbmRvdy5kb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0bWNlX2dldENvbnRlbnQoJ3Bpbi10aXRsZScpICE9ICcnJiYgKCQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQnKS52YWwoKSAhPSAnLTEnIHx8ICQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoKSkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdC8vYWRkIHBpbiBmcm9tIHdlYlxuXHRpZiAoJCgnI3Bpbl91cGxvYWRfd2ViX2Zvcm0nKS5sZW5ndGgpIHtcblx0XHR2YXIgb3B0aW9uc193ZWIgPSB7XG5cdFx0XHRiZWZvcmVTdWJtaXQ6IHNob3dSZXF1ZXN0X3dlYixcblx0XHRcdHN1Y2Nlc3M6IHNob3dSZXNwb25zZV93ZWIsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmxcblx0XHR9O1xuXHRcdCQoJyNwaW5fdXBsb2FkX3dlYl9mb3JtJykuYWpheEZvcm0ob3B0aW9uc193ZWIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzaG93UmVxdWVzdF93ZWIoZm9ybURhdGEsIGpxRm9ybSwgb3B0aW9ucykge1xuXHRcdCQoJyNmZXRjaCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0JCgnI3Bpbi11cGxvYWQtZnJvbS1jb21wdXRlci13cmFwcGVyLCAjYnJvd3Nlci1hZGRvbiwgI2Jvb2ttYXJrbGV0LCAjcGluaXRidXR0b24nKS5zbGlkZVVwKCk7XG5cdFx0JCgnI3Bob3RvX2RhdGFfc291cmNlJykudmFsKCQoJyNwaW5fdXBsb2FkX3dlYicpLnZhbCgpKTtcblx0XHQkKCcjcGluLXVwbG9hZC1mcm9tLXdlYi13cmFwcGVyIC5hamF4LWxvYWRlci1hZGQtcGluJykuc2hvdygpO1xuXHRcdCQoJy5lcnJvci1tc2cnKS5oaWRlKCk7XG5cdFx0XG5cdFx0dmFyIGlucHV0X3VybCA9ICQoJyNwaW5fdXBsb2FkX3dlYicpLnZhbCgpO1xuXG5cdFx0aWYgKGlucHV0X3VybCA9PSAnJykge1xuXHRcdFx0JCgnLmFqYXgtbG9hZGVyLWFkZC1waW4nKS5oaWRlKCk7XG5cdFx0XHQkKCcuZXJyb3ItbXNnJykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX3BsZWFzZWVudGVydXJsICArICc8L3N0cm9uZz48L2Rpdj4nKS5mYWRlSW4oKTtcblx0XHRcdCQoJyNmZXRjaCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2UoKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9hcHBlbmQgaHR0cDovLyBpZiBtaXNzaW5nXG5cdFx0aWYgKGlucHV0X3VybC5pbmRleE9mKCdodHRwOi8vJykgPT0gLTEgJiYgaW5wdXRfdXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgPT0gLTEpIHtcblx0XHRcdGlucHV0X3VybCA9ICdodHRwOi8vJyArIGlucHV0X3VybDtcblx0XHR9XG5cdFx0XG5cdFx0Ly9zdHJpcCBodHRwcyBmb3IgeW91dHViZSAmIHZpbWVvXG5cdFx0aWYgKGlucHV0X3VybC5pbmRleE9mKCd5b3V0dWJlLmNvbS93YXRjaCcpICE9IC0xIHx8IGlucHV0X3VybC5tYXRjaCgvdmltZW8uY29tXFwvKFxcZCspKCR8XFwvKS8pKSB7XG5cdFx0XHRpbnB1dF91cmwgPSBpbnB1dF91cmwucmVwbGFjZSgnaHR0cHM6Ly8nLCAnaHR0cDovLycpO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgZXh0ID0gaW5wdXRfdXJsLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTtcblx0XHRpZigkLmluQXJyYXkoZXh0LCBbJ2dpZicsJ3BuZycsJ2pwZycsJ2pwZWcnXSkgPT0gLTEpIHtcblx0XHRcdGlmIChpbnB1dF91cmwuaW5kZXhPZigneW91dHUuYmUvJykgIT0gLTEpIHtcblx0XHRcdFx0aW5wdXRfdXJsID0gaW5wdXRfdXJsLnJlcGxhY2UoL3lvdXR1LmJlXFwvLywgJ3d3dy55b3V0dWJlLmNvbS93YXRjaD92PScpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkLmdldChvYmpfaXBpbi5zdHlsZXNoZWV0X2RpcmVjdG9yeV91cmkgKyAnL2lwaW5fZmV0Y2gucGhwP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0X3VybC5yZXBsYWNlKCdodHRwJywnJykpICsgJyZub25jZT0nICsgb2JqX2lwaW4ubm9uY2UsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRpZiAoZGF0YS5zdWJzdHIoMCwgNSkgPT0gJ2Vycm9yJykge1xuXHRcdFx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQoJyNmZXRjaCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0JCgnLmVycm9yLW1zZycpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PHN0cm9uZz4nICsgZGF0YS5zdWJzdHIoNSkgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQoJyNmZXRjaCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0JCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJylcblx0XHRcdFx0XHQuYXBwZW5kKFwiXFxcblx0XHRcdFx0XHQ8ZGl2IGlkPSdpcGluZnJhbWUnPlxcXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPSdpcGluZnJhbWViZyc+PHA+XCIgKyBvYmpfaXBpbi5fX2xvYWRpbmcgKyBcIjwvcD48L2Rpdj5cXFxuXHRcdFx0XHRcdFx0PGRpdiBpZD0naXBpbmhlYWRlcic+PHAgaWQ9J2lwaW5jbG9zZSc+WDwvcD48cCBpZD0naXBpbmxvZ28nPlwiICsgb2JqX2lwaW4uYmxvZ25hbWUgKyBcIjwvcD48L2Rpdj5cXFxuXHRcdFx0XHRcdFx0PGRpdiBpZD0naXBpbmltYWdlcyc+PC9kaXY+XFxcblx0XHRcdFx0XHRcdDxzdHlsZSB0eXBlPSd0ZXh0L2Nzcyc+XFxcblx0XHRcdFx0XHRcdFx0I2lwaW5mcmFtZSB7Y29sb3I6ICMzMzM7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluZnJhbWViZyB7YmFja2dyb3VuZDogI2YyZjJmMjsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IGxlZnQ6IDA7IHotaW5kZXg6IDIxNDc0ODM2NDY7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluZnJhbWViZyBwIHtiYWNrZ3JvdW5kOiAjOTk5OyBib3JkZXItcmFkaXVzOiA4cHg7IGNvbG9yOiB3aGl0ZTsgZm9udDogbm9ybWFsIG5vcm1hbCBib2xkIDE2cHhcXC8yMnB4IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IG1hcmdpbjogLTJlbSBhdXRvIDAgLTkuNWVtOyBwYWRkaW5nOiAxMnB4OyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNTAlOyBsZWZ0OiA1MCU7IHRleHQtYWxpZ246IGNlbnRlcjsgd2lkdGg6IDE1ZW07fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluZnJhbWUgI2lwaW5oZWFkZXIge2JhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U3ZTdlNzsgY29sb3I6IHdoaXRlOyBoZWlnaHQ6IDUwcHg7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZzogMDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgd2lkdGg6IDEwMCU7IHotaW5kZXg6IDIxNDc0ODM2NDc7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluZnJhbWUgI2lwaW5oZWFkZXIgI2lwaW5sb2dvIHtjb2xvcjogYmxhY2s7IGZvbnQ6IG5vcm1hbCBub3JtYWwgYm9sZCAyMHB4XFwvMjBweCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDA7IHBhZGRpbmc6IDEycHggMTVweCAxM3B4IDIwcHg7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluZnJhbWUgI2lwaW5oZWFkZXIgI2lwaW5jbG9zZSB7YmFja2dyb3VuZDogI2YzMzsgY29sb3I6IHdoaXRlOyBjdXJzb3I6IHBvaW50ZXI7IGZsb2F0OiByaWdodDsgZm9udDogbm9ybWFsIG5vcm1hbCBib2xkIDE2cHhcXC8xNnB4IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiA1MHB4OyBtYXJnaW46IDA7IHBhZGRpbmc6IDAgMjBweDt9XFxcblx0XHRcdFx0XHRcdFx0I2lwaW5pbWFnZXMge3Bvc2l0aW9uOiBmaXhlZDsgdG9wOiA2MHB4OyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiA5NCU7IG92ZXJmbG93LXg6IGF1dG87IG92ZXJmbG93LXk6IHNjcm9sbDsgdGV4dC1hbGlnbjogY2VudGVyOyB6LWluZGV4OiAyMTQ3NDgzNjQ3O31cXFxuXHRcdFx0XHRcdFx0XHQjaXBpbmltYWdlcyAuaXBpbmltZ3dyYXBwZXIge2JhY2tncm91bmQ6ICNmY2ZjZmM7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGN1cnNvcjogcG9pbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBoZWlnaHQ6IDIwMHB4OyBtYXJnaW46IDE1cHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDIwMHB4O31cXFxuXHRcdFx0XHRcdFx0XHQjaXBpbmltYWdlcyAuaXBpbmJ1dHRvbiB7YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOyBib3JkZXItcmFkaXVzOiA4cHg7IGNvbG9yOiB3aGl0ZTsgZm9udDogbm9ybWFsIG5vcm1hbCBib2xkIDM2cHgvMzZweCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOyBwYWRkaW5nOiA4cHggMTZweDsgZGlzcGxheTogbm9uZTsgbWFyZ2luLWxlZnQ6IC0yNHB4OyBtYXJnaW4tdG9wOiAtMzZweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDo1MCU7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluaW1hZ2VzIC5pcGluZGltZW5zaW9uIHtiYWNrZ3JvdW5kOiB3aGl0ZTsgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTJweC8xMnB4IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IHBhZGRpbmc6IDNweCAwOyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAwOyBib3R0b206IDA7IGxlZnQ6IDA7fVxcXG5cdFx0XHRcdFx0XHRcdCNpcGluaW1hZ2VzIGltZyB7d2lkdGg6IDEwMCU7IGhlaWdodDogYXV0bzt9XFxcblx0XHRcdFx0XHRcdDwvc3R5bGU+XFxcblx0XHRcdFx0XHQ8L2Rpdj5cIik7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JCgnI2lwaW5mcmFtZWJnJykuZmFkZUluKDIwMCk7XG5cblx0XHRcdFx0XHRmdW5jdGlvbiBkaXNwbGF5X3RodW1ibmFpbHMoaW1nYXJyLCB2aWRlb2ZsYWcpIHtcblx0XHRcdFx0XHRcdGlmICghaW1nYXJyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHQkKCcjaXBpbmZyYW1lYmcnKS5odG1sKCc8cD4nICsgb2JqX2lwaW4uX19zb3JyeXVuYmFsZXRvZmluZGFueXBpbm5hYmxlaXRlbXMgKyAnPC9wPicpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKCQoZGF0YSkuZmlsdGVyKCdpcGludGl0bGUnKS50ZXh0KCkpIHtcblx0XHRcdFx0XHRcdFx0XHRwYWdlX3RpdGxlID0gZW5jb2RlVVJJQ29tcG9uZW50KCQoZGF0YSkuZmlsdGVyKCdpcGludGl0bGUnKS50ZXh0KCkudHJpbSgpKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRwYWdlX3RpdGxlID0gJyc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHZhciBpbWdzdHIgPSAnJztcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpbWdhcnIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAodmlkZW9mbGFnID09ICcwJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW1nc3RyICs9ICc8ZGl2IGNsYXNzPVwiaXBpbmltZ3dyYXBwZXJcIiBkYXRhLWhyZWY9XCInICsgb2JqX2lwaW4uaG9tZV91cmwgKyAnL2l0bS1zZXR0aW5ncy8/bT1ibSZpbWdzcmM9JyArIGVuY29kZVVSSUNvbXBvbmVudChpbWdhcnJbaV1bMF0ucmVwbGFjZSgnaHR0cCcsJycpKSArICcmc291cmNlPScgKyBlbmNvZGVVUklDb21wb25lbnQoaW5wdXRfdXJsLnJlcGxhY2UoJ2h0dHAnLCcnKSkgKyAnJnRpdGxlPScgKyBwYWdlX3RpdGxlICsgJyZ2aWRlbz0nICsgdmlkZW9mbGFnICsgJ1wiPjxkaXYgY2xhc3M9XCJpcGluYnV0dG9uXCI+KzwvZGl2PjxpbWcgc3JjPVwiJyArIGltZ2FycltpXVswXSArICdcIiAvPjwvZGl2Pic7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGltZ3N0ciArPSAnPGRpdiBjbGFzcz1cImlwaW5pbWd3cmFwcGVyXCIgZGF0YS1ocmVmPVwiJyArIG9ial9pcGluLmhvbWVfdXJsICsgJy9pdG0tc2V0dGluZ3MvP209Ym0maW1nc3JjPScgKyBlbmNvZGVVUklDb21wb25lbnQoaW1nYXJyW2ldWzBdLnJlcGxhY2UoJ2h0dHAnLCcnKSkgKyAnJnNvdXJjZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0X3VybC5yZXBsYWNlKCdodHRwJywnJykpICsgJyZ0aXRsZT0nICsgcGFnZV90aXRsZSArICcmdmlkZW89JyArIHZpZGVvZmxhZyArICdcIj48ZGl2IGNsYXNzPVwiaXBpbmJ1dHRvblwiPis8L2Rpdj48ZGl2IGNsYXNzPVwiaXBpbmRpbWVuc2lvblwiPicgKyBvYmpfaXBpbi5fX1ZpZGVvICsgJzwvZGl2PjxpbWcgc3JjPVwiJyArIGltZ2FycltpXVswXSArICdcIiAvPjwvZGl2Pic7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0JCgnI2lwaW5pbWFnZXMnKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpLSQoJyNpcGluaGVhZGVyJykuaGVpZ2h0KCktMjApLmh0bWwoaW1nc3RyICsgXCI8ZGl2IHN0eWxlPSdoZWlnaHQ6NDBweDtjbGVhcjpib3RoOyc+PGJyIC8+PC9kaXY+XCIpXG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZiAoKG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ0Nocm9tZS8nKSAhPSAtMSB8fCBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdTYWZhcmkvJykpICYmIHZpZGVvZmxhZyAhPSAnMScpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaXBpbmltYWdlcyAuaXBpbmltZ3dyYXBwZXInKS5jc3MoJ2Zsb2F0JywnbGVmdCcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZiAodmlkZW9mbGFnID09ICcwJykgeyBcblx0XHRcdFx0XHRcdFx0XHQkKCcjaXBpbmltYWdlcycpLmhpZGUoKS5pbWFnZXNMb2FkZWQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgaW1hZ2VzX2hpZGRlbl9jb3VudCA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdCQoJyNpcGluaW1hZ2VzIGltZycpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBpbWd3aWR0aCA9IHRoaXMubmF0dXJhbFdpZHRoO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWltZ3dpZHRoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW1nd2lkdGggPSBqUXVlcnkodGhpcykud2lkdGgoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGltZ2hlaWdodCA9IHRoaXMubmF0dXJhbEhlaWdodDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFpbWdoZWlnaHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbWdoZWlnaHQgPSBqUXVlcnkodGhpcykuaGVpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpbWd3aWR0aCA8IDEyNSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCQodGhpcykucGFyZW50KCkuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGltYWdlc19oaWRkZW5fY291bnQrKztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmJlZm9yZSgnPGRpdiBjbGFzcz1cImlwaW5kaW1lbnNpb25cIj4nICsgcGFyc2VJbnQoaW1nd2lkdGgsMTApICsgJyB4ICcgKyBwYXJzZUludChpbWdoZWlnaHQsMTApICsgJzwvZGl2PicpO1x0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaW1hZ2VzX2hpZGRlbl9jb3VudCA9PSBpbWdhcnIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCQoJyNpcGluZnJhbWViZycpLmh0bWwoJzxwPicgKyBvYmpfaXBpbi5fX3NvcnJ5dW5iYWxldG9maW5kYW55cGlubmFibGVpdGVtcyArICc8L3A+Jyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjaXBpbmZyYW1lYmcgcCcpLmZhZGVPdXQoMjAwKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0JCgnI2lwaW5pbWFnZXMnKS5zaG93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2lwaW5mcmFtZWJnIHAnKS5mYWRlT3V0KDIwMCk7XHRcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHZhciBpbWdhcnIgPSBbXTtcblx0XHRcdFx0XHR2YXIgdmlkZW9mbGFnID0gJzAnO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChpbnB1dF91cmwuaW5kZXhPZigneW91dHViZS5jb20vd2F0Y2gnKSAhPSAtMSkge1xuXHRcdFx0XHRcdFx0dmlkZW9faWQgPSBpbnB1dF91cmwubWF0Y2goJ1tcXFxcPyZddj0oW14mI10qKScpO1xuXHRcdFx0XHRcdFx0aW1nc3JjID0gJ2h0dHA6Ly9pbWcueW91dHViZS5jb20vdmkvJyArIHZpZGVvX2lkWzFdICsgJy8wLmpwZyc7XG5cdFx0XHRcdFx0XHRpbWdhcnIudW5zaGlmdChbaW1nc3JjLDQ4MCwzNjBdKTtcblx0XHRcdFx0XHRcdHZpZGVvZmxhZyA9ICcxJztcblx0XHRcdFx0XHRcdGRpc3BsYXlfdGh1bWJuYWlscyhpbWdhcnIsIHZpZGVvZmxhZyk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbnB1dF91cmwubWF0Y2goL3ZpbWVvLmNvbVxcLyhcXGQrKSgkfFxcLykvKSkge1xuXHRcdFx0XHRcdFx0dmlkZW9faWQgPSBpbnB1dF91cmwuc3BsaXQoJy8nKVszXTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0JC5nZXRKU09OKCdodHRwOi8vd3d3LnZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vJyArIHZpZGVvX2lkICsgJy5qc29uP2NhbGxiYWNrPT8nLCB7Zm9ybWF0OiBcImpzb25cIn0sIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0aW1nc3JjID0gZGF0YVswXS50aHVtYm5haWxfbGFyZ2U7XG5cdFx0XHRcdFx0XHRcdGltZ2Fyci51bnNoaWZ0KFtpbWdzcmMsNjQwLDM2MF0pO1xuXHRcdFx0XHRcdFx0XHR2aWRlb2ZsYWcgPSAnMSc7XG5cdFx0XHRcdFx0XHRcdGRpc3BsYXlfdGh1bWJuYWlscyhpbWdhcnIsIHZpZGVvZmxhZyk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCgnaW1nJywgZGF0YSkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGltZ3NyYyA9ICQodGhpcykucHJvcCgnc3JjJyk7XG5cdFx0XHRcdFx0XHRcdGltZ2Fyci5wdXNoKFtpbWdzcmMsMCwwXSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0ZGlzcGxheV90aHVtYm5haWxzKGltZ2FyciwgdmlkZW9mbGFnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JCgnI2lwaW5oZWFkZXInKS5vbignY2xpY2snLCAnI2lwaW5jbG9zZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuXHRcdFx0XHRcdFx0JCgnI2lwaW5mcmFtZScpLmZhZGVPdXQoMjAwLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0JCgnI3Bpbl91cGxvYWRfd2ViJykuZm9jdXMoKS5zZWxlY3QoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQoJyNpcGluaW1hZ2VzJykub24oJ2NsaWNrJywgJy5pcGluaW1nd3JhcHBlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0d2luZG93Lm9wZW4oJCh0aGlzKS5kYXRhKCdocmVmJyksIFwiaXBpbndpbmRvd1wiLCBcIndpZHRoPTQwMCxoZWlnaHQ9NzYwLGxlZnQ9MCx0b3A9MCxyZXNpemFibGU9MSxzY3JvbGxiYXJzPTFcIik7XG5cdFx0XHRcdFx0XHQkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG5cdFx0XHRcdFx0XHQkKCcjaXBpbmZyYW1lJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHQkKCcjcGluX3VwbG9hZF93ZWInKS5mb2N1cygpLnNlbGVjdCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCQoJyNpcGluaW1hZ2VzJykub24oJ21vdXNlb3ZlcicsICcuaXBpbmltZ3dyYXBwZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCQodGhpcykuZmluZCgnLmlwaW5idXR0b24nKS5zaG93KCk7XG5cdFx0XHRcdFx0fSkub24oJ21vdXNlb3V0JywgJy5pcGluaW1nd3JhcHBlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuaXBpbmJ1dHRvbicpLmhpZGUoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0XHRpZiAoZS5rZXlDb2RlID09IDI3KSB7XG5cdFx0XHRcdFx0XHQkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG5cdFx0XHRcdFx0XHQkKCcjaXBpbmZyYW1lJykuZmFkZU91dCgyMDAsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHQkKCcjcGluX3VwbG9hZF93ZWInKS5mb2N1cygpLnNlbGVjdCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNob3dSZXNwb25zZV93ZWIocmVzcG9uc2VUZXh0LCBzdGF0dXNUZXh0LCB4aHIsICRmb3JtKSB7XG5cdFx0aWYgKHJlc3BvbnNlVGV4dCA9PSAnZXJyb3InKSB7XG5cdFx0XHQkKCcuYWpheC1sb2FkZXItYWRkLXBpbicpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2cnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW52YWxpZGltYWdlZmlsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHQkKCcjZmV0Y2gnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSBpZiAocmVzcG9uc2VUZXh0ID09ICdlcnJvcnNpemUnKSB7XG5cdFx0XHQkKCcuYWpheC1sb2FkZXItYWRkLXBpbicpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2cnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW1hZ2V0b29zbWFsbCAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHQkKCcjZmV0Y2gnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSBpZiAocmVzcG9uc2VUZXh0LmluZGV4T2YoJ0Vycm9yIEZldGNoaW5nIEltYWdlJykgIT0gLTEpIHtcblx0XHRcdCQoJyNwaW4tdXBsb2FkLWZyb20td2ViLXdyYXBwZXIgLmFqYXgtbG9hZGVyLWFkZC1waW4nKS5oaWRlKCk7XG5cdFx0XHQkKCcuZXJyb3ItbXNnJykuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyByZXNwb25zZVRleHQgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0JCgnI3Bpbl91cGxvYWRfd2ViJykuZm9jdXMoKTtcblx0XHRcdCQoJyNmZXRjaCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBkYXRhID0gJC5wYXJzZUpTT04ocmVzcG9uc2VUZXh0KTtcblx0XHRcdCQoJyN0aHVtYm5haWwnKS5hdHRyKCdzcmMnLCBkYXRhLnRodW1ibmFpbCk7XG5cdFx0XHQkKCcjYXR0YWNobWVudC1pZCcpLnZhbChkYXRhLmlkKTtcblx0XHRcdCQoJy5hamF4LWxvYWRlci1hZGQtcGluLCAuZXJyb3ItbXNnJykuaGlkZSgpO1xuXHRcdFx0JCgnI3Bpbi11cGxvYWQtZnJvbS13ZWItd3JhcHBlcicpLnNsaWRlVXAoZnVuY3Rpb24oKSB7IFxuXHRcdFx0XHQkKCcjcGluLXVwbG9hZC1wb3N0ZGF0YS13cmFwcGVyJykuc2xpZGVEb3duKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdC8vYWRkIG5ldyBib2FyZCB0b2dnbGVcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNwaW4tcG9zdGRhdGEtZm9ybSAjcGluLXBvc3RkYXRhLWFkZC1uZXctYm9hcmQnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJCh0aGlzKS50ZXh0KCkgPT0gb2JqX2lwaW4uX19jYW5jZWwpIHtcblx0XHRcdGlmKCQoJyNub2JvYXJkJykubGVuZ3RoKSB7XG5cdFx0XHRcdCQoJyNwaW5pdCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0XHR9XG5cdFx0XHQkKHRoaXMpLnRleHQob2JqX2lwaW4uX19hZGRuZXdib2FyZCk7XG5cdFx0XHQkKCcudXNlcmNwLXBpbnMgI2JvYXJkLWFkZC1uZXcnKS52YWwoJycpLmhpZGUoKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQtYWRkLW5ldy1jYXRlZ29yeScpLnZhbCgnLTEnKS5oaWRlKCk7XG5cdFx0XHQkKCcudXNlcmNwLXBpbnMgI2JvYXJkJykuc2hvdygpLmZvY3VzKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQodGhpcykudGV4dChvYmpfaXBpbi5fX2NhbmNlbCk7XG5cdFx0XHQkKCcudXNlcmNwLXBpbnMgI2JvYXJkLWFkZC1uZXcnKS5zaG93KCkuZm9jdXMoKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQtYWRkLW5ldy1jYXRlZ29yeScpLnNob3coKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQnKS5oaWRlKCk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdFxuXHQvL2Rpc2FibGUgc3VibWl0IGJ1dHRvbiBpZiBlbXB0eSB0ZXh0YXJlYSAoZnJvbSB3ZWIgYW5kIGNvbXB1dGVyKVxuXHQkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykuZm9jdXMoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmtleXVwKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0Ly9kaXNhYmxlIHN1Ym1pdCBidXR0b24gaWYgZW1wdHkgdGV4dGFyZWEgKGJvb2ttYXJrbGV0IG1vZGUpXG5cdGlmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykuaXMoJzpmb2N1cycpKSB7XG5cdFx0aWYgKCQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0JCgnI3Bpbml0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmtleXVwKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpICYmICgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkJykudmFsKCkgIT0gJy0xJyB8fCAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkpKSkge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcdFxuXHQkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkLWFkZC1uZXcnKS5mb2N1cyhmdW5jdGlvbigpIHtcblx0XHR2YXIgY29udGVudCA9ICcnO1xuXHRcdGlmICgkKCcjcGluLXRpdGxlX2lmcicpLmxlbmd0aCkge1xuXHRcdFx0Y29udGVudCA9IHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRlbnQgPSAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKTtcblx0XHR9XG5cdFx0XG5cdFx0JCh0aGlzKS5rZXl1cChmdW5jdGlvbigpIHtcblx0XHRcdGlmICgkKCcjcGluLXRpdGxlX2lmcicpLmxlbmd0aCkge1xuXHRcdFx0XHRjb250ZW50ID0gdG1jZV9nZXRDb250ZW50KCdwaW4tdGl0bGUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnRlbnQgPSAkLnRyaW0oJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKGNvbnRlbnQgJiYgKCQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQnKS52YWwoKSAhPSAnLTEnIHx8ICQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoKSkpKSB7XG5cdFx0XHRcdCQoJyNwaW5pdCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0XG5cdC8vYXV0b2NvbXBsZXRlIHRhZ3Ncblx0aWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mICQuc3VnZ2VzdCkge1xuXHRcdCQoJ2lucHV0I3RhZ3MnKS5zdWdnZXN0KG9ial9pcGluLmFqYXh1cmwgKyAnP2FjdGlvbj1hamF4LXRhZy1zZWFyY2gmdGF4PXBvc3RfdGFnJywge21pbmNoYXJzOiAzLCBtdWx0aXBsZTogdHJ1ZX0pO1xuXHR9XG5cdFxuXHQvL2luc2VydCBuZXcgcGluXG5cdCQoJyNwaW4tcG9zdGRhdGEtZm9ybScpLnN1Ym1pdChmdW5jdGlvbigpIHtcblx0XHR2YXIgcG9zdGRhdGFmb3JtID0gJCh0aGlzKTtcblx0XHR2YXIgZXJyb3Jtc2cgPSAkKCcuZXJyb3ItbXNnJyk7XG5cdFx0dmFyIGFqYXhsb2FkZXIgPSAkKCcuYWpheC1sb2FkZXItYWRkLXBpbicpO1x0XG5cdFx0XG5cdFx0Ly9lbXB0eSB0aXRsZVxuXHRcdGlmICghJC50cmltKCQoJyNwaW4tcG9zdGRhdGEtZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSkpIHtcblx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0ZXJyb3Jtc2cuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX1BsZWFzZWVudGVydGl0bGUgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0XHQvL2VtcHR5IGJvYXJkXG5cdFx0aWYgKCQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQnKS52YWwoKSA9PSAnLTEnICYmICQudHJpbSgkKCcjcGluLXBvc3RkYXRhLWZvcm0gI2JvYXJkLWFkZC1uZXcnKS52YWwoKSkgPT0gJycpIHtcblx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0ZXJyb3Jtc2cuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX1BsZWFzZWNyZWF0ZWFuZXdib2FyZCAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBwb3N0ZGF0YV9waG90b19zb3VyY2U7XG5cdFx0XG5cdFx0aWYgKCQoJyNwaG90b19kYXRhX3NvdXJjZScpLnZhbCgpKSB7XG5cdFx0XHRwb3N0ZGF0YV9waG90b19zb3VyY2UgPSAkKCcjcGhvdG9fZGF0YV9zb3VyY2UnKS52YWwoKTtcblx0XHR9XG5cdFx0XG5cdFx0dmFyIHByaWNlID0gJyc7XG5cdFx0aWYgKCQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjcHJpY2UnKS5sZW5ndGgpXG5cdFx0XHRwcmljZSA9ICQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjcHJpY2UnKS52YWwoKS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKTtcblx0XHRcdFxuXHRcdHZhciBjb2xvclRoaWVmID0gbmV3IENvbG9yVGhpZWYoKTtcblx0XHR2YXIgcG9zdGRhdGFfYmdjb2xvciA9IGNvbG9yVGhpZWYuZ2V0Q29sb3IoJCgnI3RodW1ibmFpbCcpWzBdKS5qb2luKCcsJyk7XG5cblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdGFjdGlvbjogJ2lwaW4tcG9zdGRhdGEnLFxuXHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlLFxuXHRcdFx0cG9zdGRhdGFfdGl0bGU6IHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJyksXG5cdFx0XHRwb3N0ZGF0YV9jb250ZW50OiB0bWNlX2dldENvbnRlbnQoJ3Bpbi1jb250ZW50JyksXG5cdFx0XHRwb3N0ZGF0YV9hdHRhY2htZW50X2lkOiAkKCcjYXR0YWNobWVudC1pZCcpLnZhbCgpLFxuXHRcdFx0cG9zdGRhdGFfYm9hcmQ6ICQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQnKS52YWwoKSxcblx0XHRcdHBvc3RkYXRhX2JvYXJkX2FkZF9uZXc6ICQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpLFxuXHRcdFx0cG9zdGRhdGFfYm9hcmRfYWRkX25ld19jYXRlZ29yeTogJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3LWNhdGVnb3J5JykudmFsKCksXG5cdFx0XHRwb3N0ZGF0YV90YWdzOiAkKCcjcGluLXBvc3RkYXRhLWZvcm0gI3RhZ3MnKS52YWwoKSxcblx0XHRcdHBvc3RkYXRhX3ByaWNlOiBwcmljZSxcblx0XHRcdHBvc3RkYXRhX3ByZW9yZGVyOiAkKCcjcGluLXBvc3RkYXRhLWZvcm0gI3ByZW9yZGVyJykuaXMoJzpjaGVja2VkJyksIC8vZWRpdGVkOiBwcmVvcmRlclxuXHRcdFx0cG9zdGRhdGFfcGhvdG9fc291cmNlOiBwb3N0ZGF0YV9waG90b19zb3VyY2UsXG5cdFx0XHRwb3N0ZGF0YV9iZ2NvbG9yOiBwb3N0ZGF0YV9iZ2NvbG9yXG5cdFx0fTtcblxuXHRcdHBvc3RkYXRhZm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRhamF4bG9hZGVyLnNob3coKTtcblx0XHRlcnJvcm1zZy5oaWRlKCk7XG5cdFx0XG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0XHRlcnJvcm1zZy5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fZXJyb3JwbGVhc2V0cnlhZ2FpbiAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRcdHBvc3RkYXRhZm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdH0sXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0XHRlcnJvcm1zZy5oaWRlKCk7XG5cdFx0XHRcdCQoJyNwaW4tcG9zdGRhdGEtZm9ybScpLmhpZGUoKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBib2FyZF9uYW1lO1xuXHRcdFx0XHRpZiAoJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZC1hZGQtbmV3JykudmFsKCkgPT0gJycpIHtcblx0XHRcdFx0XHRib2FyZF9uYW1lID0gJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtICNib2FyZCBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ym9hcmRfbmFtZSA9ICQoJyNwaW4tcG9zdGRhdGEtZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdHZhciBwaW5fc3RhdHVzID0nPGJyIC8+Jztcblx0XHRcdFx0aWYgKGRhdGEuaW5kZXhPZignLz9wPScpICE9IC0xKSB7XG5cdFx0XHRcdFx0cGluX3N0YXR1cyA9ICc8c21hbGwgc3R5bGU9XCJkaXNwbGF5OmJsb2NrO2NsZWFyOmJvdGhcIj48c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXdhcm5pbmdcIj4nICsgb2JqX2lwaW4uX195b3VycGluaXNwZW5kaW5ncmV2aWV3ICsgJzwvc3Bhbj48L3NtYWxsPic7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ209Ym0nKSAhPSAtMSkgLy92aWEgYm9va21hcmtsZXRcblx0XHRcdFx0XHQkKCcucG9zdGRhdGEtYm94LXBob3RvJykuYWZ0ZXIoJzxoMyBpZD1cInJlcGlubmVkbXNnXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPicgKyBvYmpfaXBpbi5fX3Bpbm5lZHRvICsgJyAnICsgYm9hcmRfbmFtZSArIHBpbl9zdGF0dXMgKyAnPHA+PC9wPjxhIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCIgaHJlZj1cImphdmFzY3JpcHQ6d2luZG93Lm9wZW4oXFwnJyArIGRhdGEgKyAnXFwnKTt3aW5kb3cuY2xvc2UoKTtcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX3NlZXRoaXNwaW4gKyAnPC9zdHJvbmc+PC9hPiA8YSBocmVmPVwiamF2YXNjcmlwdDp3aW5kb3cuY2xvc2UoKVwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PHN0cm9uZz4nICsgb2JqX2lwaW4uX19jbG9zZSArICc8L3N0cm9uZz48L2E+PC9oMz48aDUgY2xhc3M9XCJyZXBpbm5lZG1zZy1zaGFyZSB0ZXh0LWNlbnRlclwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fc2hhcmVpdHdpdGh5b3VyZnJpZW5kcyArICc8L3N0cm9uZz48L2g1PjxwIGNsYXNzPVwicmVwaW5uZWRtc2ctc2hhcmUgdGV4dC1jZW50ZXJcIj48YSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD91PScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSkgKyAnXFwnLCBcXCdmYWNlYm9vay1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTYyNixoZWlnaHQ9NTAwXFwnKTsgcmV0dXJuIGZhbHNlO1wiPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2sgZmEtZndcIj48L2k+PC9hPiA8YSBjbGFzcz1cImJ0biBidG4taW5mbyBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vdHdpdHRlci5jb20vc2hhcmU/dXJsPScgKyBkYXRhICsgJyZhbXA7dGV4dD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCQoJyNwaW4tcG9zdGRhdGEtZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSkgKyAnXFwnLCBcXCd0d2l0dGVyLXNoYXJlLWRpYWxvZ1xcJywgXFwnd2lkdGg9NjI2LGhlaWdodD01MDBcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyIGZhLWZ3XCI+PC9pPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlP3VybD0nICsgZGF0YSArICdcXCcsIFxcJ2dwbHVzLXNoYXJlLWRpYWxvZ1xcJywgXFwnd2lkdGg9NjI2LGhlaWdodD01MDBcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGkgY2xhc3M9XCJmYSBmYS1nb29nbGUtcGx1cyBmYS1md1wiPjwvaT48L2E+IDxhIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIGJ0bi1zbVwiIGhyZWY9XCJcIiBvbmNsaWNrPVwid2luZG93Lm9wZW4oXFwnaHR0cDovL3d3dy5yZWRkaXQuY29tL3N1Ym1pdD91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhKSArICcmYW1wO3RpdGxlPScgKyBlbmNvZGVVUklDb21wb25lbnQoJCgnI3JlcGluZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSkgKyAnXFwnLCBcXCdyZWRkaXQtc2hhcmUtZGlhbG9nXFwnLCBcXCd3aWR0aD04ODAsaGVpZ2h0PTUwMCxzY3JvbGxiYXJzPTFcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGkgY2xhc3M9XCJmYSBmYS1yZWRkaXQgZmEtZndcIj48L2k+PC9hPiA8YSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHA6Ly92a29udGFrdGUucnUvc2hhcmUucGhwP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpICsgJ1xcJywgXFwndmstc2hhcmUtZGlhbG9nXFwnLCBcXCd3aWR0aD02MjYsaGVpZ2h0PTUwMFxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLXZrIGZhLWZ3XCI+PC9pPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCIgaHJlZj1cIlwiIG9uY2xpY2s9XCJ3aW5kb3cub3BlbihcXCdodHRwOi8vd3d3Lm9kbm9rbGFzc25pa2kucnUvZGs/c3QuY21kPWFkZFNoYXJlJnN0Ll9zdXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSkgKyAnXFwnLCBcXCdvay1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTYyNixoZWlnaHQ9NTAwXFwnKTsgcmV0dXJuIGZhbHNlO1wiPjxpbWcgc3JjPVwiJyArIG9ial9pcGluLnN0eWxlc2hlZXRfZGlyZWN0b3J5X3VyaSArICcvaW1nL29kbm9rbGFzc25pa2kucG5nJyArJ1wiIC8+PC9hPjwvcD4nKTsgLy9lZGl0ZWQ6IGFkZCB2ay9va1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQkKCcucG9zdGRhdGEtYm94LXBob3RvJykuYWZ0ZXIoJzxoMyBpZD1cInJlcGlubmVkbXNnXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPicgKyBvYmpfaXBpbi5fX3Bpbm5lZHRvICsgJyAnICsgYm9hcmRfbmFtZSArIHBpbl9zdGF0dXMgKyAnPHA+PC9wPjxhIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCIgaHJlZj1cIicgKyBkYXRhICsgJ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fc2VldGhpc3BpbiArICc8L3N0cm9uZz48L2E+IDxhIGhyZWY9XCJcIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fYWRkYW5vdGhlcnBpbiArICc8L3N0cm9uZz48L2E+PC9oMz48aDUgY2xhc3M9XCJyZXBpbm5lZG1zZy1zaGFyZSB0ZXh0LWNlbnRlclwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fc2hhcmVpdHdpdGh5b3VyZnJpZW5kcyArICc8L3N0cm9uZz48L2g1PjxwIGNsYXNzPVwicmVwaW5uZWRtc2ctc2hhcmUgdGV4dC1jZW50ZXJcIj48YSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD91PScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSkgKyAnXFwnLCBcXCdmYWNlYm9vay1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTYyNixoZWlnaHQ9NTAwXFwnKTsgcmV0dXJuIGZhbHNlO1wiPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2sgZmEtZndcIj48L2k+PC9hPiA8YSBjbGFzcz1cImJ0biBidG4taW5mbyBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vdHdpdHRlci5jb20vc2hhcmU/dXJsPScgKyBkYXRhICsgJyZhbXA7dGV4dD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCQoJyNwaW4tcG9zdGRhdGEtZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS52YWwoKSkgKyAnXFwnLCBcXCd0d2l0dGVyLXNoYXJlLWRpYWxvZ1xcJywgXFwnd2lkdGg9NjI2LGhlaWdodD01MDBcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyIGZhLWZ3XCI+PC9pPjwvYT4gPGEgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlP3VybD0nICsgZGF0YSArICdcXCcsIFxcJ2dwbHVzLXNoYXJlLWRpYWxvZ1xcJywgXFwnd2lkdGg9NjI2LGhlaWdodD01MDBcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGkgY2xhc3M9XCJmYSBmYS1nb29nbGUtcGx1cyBmYS1md1wiPjwvaT48L2E+IDxhIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIGJ0bi1zbVwiIGhyZWY9XCJcIiBvbmNsaWNrPVwid2luZG93Lm9wZW4oXFwnaHR0cDovL3d3dy5yZWRkaXQuY29tL3N1Ym1pdD91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhKSArICcmYW1wO3RpdGxlPScgKyBlbmNvZGVVUklDb21wb25lbnQoJCgnI3Bpbi1wb3N0ZGF0YS1mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKSArICdcXCcsIFxcJ3JlZGRpdC1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTg4MCxoZWlnaHQ9NTAwLHNjcm9sbGJhcnM9MVxcJyk7IHJldHVybiBmYWxzZTtcIj48aSBjbGFzcz1cImZhIGZhLXJlZGRpdCBmYS1md1wiPjwvaT48L2E+IDxhIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbVwiIGhyZWY9XCJcIiBvbmNsaWNrPVwid2luZG93Lm9wZW4oXFwnaHR0cDovL3Zrb250YWt0ZS5ydS9zaGFyZS5waHA/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSkgKyAnXFwnLCBcXCd2ay1zaGFyZS1kaWFsb2dcXCcsIFxcJ3dpZHRoPTYyNixoZWlnaHQ9NTAwXFwnKTsgcmV0dXJuIGZhbHNlO1wiPjxpIGNsYXNzPVwiZmEgZmEtdmsgZmEtZndcIj48L2k+PC9hPiA8YSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc21cIiBocmVmPVwiXCIgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJ2h0dHA6Ly93d3cub2Rub2tsYXNzbmlraS5ydS9kaz9zdC5jbWQ9YWRkU2hhcmUmc3QuX3N1cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhKSArICdcXCcsIFxcJ29rLXNoYXJlLWRpYWxvZ1xcJywgXFwnd2lkdGg9NjI2LGhlaWdodD01MDBcXCcpOyByZXR1cm4gZmFsc2U7XCI+PGltZyBzcmM9XCInICsgb2JqX2lwaW4uc3R5bGVzaGVldF9kaXJlY3RvcnlfdXJpICsgJy9pbWcvb2Rub2tsYXNzbmlraS5wbmcnICsnXCIgLz48L2E+PC9wPicpOyAvL2VkaXRlZDogYWRkIHZrL29rXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0Ly9lZGl0IHBpblxuXHQvL2FkZCBuZXcgYm9hcmQgdG9nZ2xlXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcGluLWVkaXQtZm9ybSAjcGluLXBvc3RkYXRhLWFkZC1uZXctYm9hcmQnLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoJCh0aGlzKS50ZXh0KCkgPT0gb2JqX2lwaW4uX19jYW5jZWwpIHtcblx0XHRcdCQodGhpcykudGV4dChvYmpfaXBpbi5fX2FkZG5ld2JvYXJkKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQtYWRkLW5ldycpLnZhbCgnJykuaGlkZSgpO1xuXHRcdFx0JCgnLnVzZXJjcC1waW5zICNib2FyZC1hZGQtbmV3LWNhdGVnb3J5JykudmFsKCctMScpLmhpZGUoKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQnKS5zaG93KCkuZm9jdXMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCh0aGlzKS50ZXh0KG9ial9pcGluLl9fY2FuY2VsKTtcblx0XHRcdCQoJy51c2VyY3AtcGlucyAjYm9hcmQtYWRkLW5ldycpLnNob3coKS5mb2N1cygpO1xuXHRcdFx0JCgnLnVzZXJjcC1waW5zICNib2FyZC1hZGQtbmV3LWNhdGVnb3J5Jykuc2hvdygpO1xuXHRcdFx0JCgnLnVzZXJjcC1waW5zICNib2FyZCcpLmhpZGUoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdC8vZGlzYWJsZSBzdWJtaXQgYnV0dG9uIGlmIGVtcHR5IHRleHRhcmVhXG5cdGlmICgkKCcjcGluLWVkaXQtZm9ybSB0ZXh0YXJlYSNwaW4tdGl0bGUnKS5pcyhcIjpmb2N1c1wiKSkge1xuXHRcdCQodGhpcykua2V5dXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoJC50cmltKCQoJyNwaW4tZWRpdC1mb3JtIHRleHRhcmVhI3Bpbi10aXRsZScpLnZhbCgpKSkge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI3Bpbml0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcblx0JCgnI3Bpbi1lZGl0LWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykuZm9jdXMoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5rZXl1cChmdW5jdGlvbigpIHtcblx0XHRcdGlmICgkLnRyaW0oJCgnI3Bpbi1lZGl0LWZvcm0gdGV4dGFyZWEjcGluLXRpdGxlJykudmFsKCkpKSB7XG5cdFx0XHRcdCQoJyNwaW5pdCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjcGluaXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHQkKCcjcGluLWVkaXQtZm9ybScpLnN1Ym1pdChmdW5jdGlvbigpIHtcblx0XHR2YXIgZWRpdGZvcm0gPSAkKHRoaXMpO1xuXHRcdHZhciBlcnJvcm1zZyA9ICQoJy5lcnJvci1tc2cnKTtcblx0XHR2YXIgYWpheGxvYWRlciA9ICQoJy5hamF4LWxvYWRlci1hZGQtcGluJyk7XG5cdFx0XG5cdFx0dmFyIHByaWNlID0gJyc7XG5cdFx0aWYgKCQoJyNwaW4tZWRpdC1mb3JtICNwcmljZScpLmxlbmd0aClcblx0XHRcdHByaWNlID0gJCgnI3Bpbi1lZGl0LWZvcm0gI3ByaWNlJykudmFsKCkucmVwbGFjZSgvW14wLTkuXS9nLCAnJyk7XG5cdFx0XG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRhY3Rpb246ICdpcGluLXBpbi1lZGl0Jyxcblx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdHBvc3RkYXRhX3BpZDogJCgnI3Bpbi1lZGl0LWZvcm0gI3BpZCcpLnZhbCgpLFxuXHRcdFx0cG9zdGRhdGFfdGl0bGU6IHRtY2VfZ2V0Q29udGVudCgncGluLXRpdGxlJyksXG5cdFx0XHRwb3N0ZGF0YV9jb250ZW50OiB0bWNlX2dldENvbnRlbnQoJ3Bpbi1jb250ZW50JyksXG5cdFx0XHRwb3N0ZGF0YV9ib2FyZDogJCgnI3Bpbi1lZGl0LWZvcm0gI2JvYXJkJykudmFsKCksXG5cdFx0XHRwb3N0ZGF0YV9ib2FyZF9hZGRfbmV3OiAkKCcjcGluLWVkaXQtZm9ybSAjYm9hcmQtYWRkLW5ldycpLnZhbCgpLFxuXHRcdFx0cG9zdGRhdGFfYm9hcmRfYWRkX25ld19jYXRlZ29yeTogJCgnI3Bpbi1lZGl0LWZvcm0gI2JvYXJkLWFkZC1uZXctY2F0ZWdvcnknKS52YWwoKSxcblx0XHRcdHBvc3RkYXRhX3RhZ3M6ICQoJyNwaW4tZWRpdC1mb3JtICN0YWdzJykudmFsKCksXG5cdFx0XHRwb3N0ZGF0YV9wcmljZTogcHJpY2UsXG5cdFx0XHRwb3N0ZGF0YV9wcmVvcmRlcjogJCgnI3Bpbi1lZGl0LWZvcm0gI3ByZW9yZGVyJykuaXMoJzpjaGVja2VkJyksIC8vZWRpdGVkOiBwcmVvcmRlclxuXHRcdFx0cG9zdGRhdGFfc291cmNlOiAkKCcjcGluLWVkaXQtZm9ybSAjc291cmNlJykudmFsKClcblx0XHR9O1xuXG5cdFx0ZWRpdGZvcm0uZmluZCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0YWpheGxvYWRlci5zaG93KCk7XG5cdFx0ZXJyb3Jtc2cuaGlkZSgpO1xuXHRcdFxuXHRcdCQuYWpheCh7XG5cdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmwsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRhamF4bG9hZGVyLmhpZGUoKTtcblx0XHRcdFx0ZXJyb3Jtc2cuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX2Vycm9ycGxlYXNldHJ5YWdhaW4gICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdFx0XHRlZGl0Zm9ybS5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdH0sXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cblx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gZGF0YTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1x0XG5cdFxuXHQvL2RlbGV0ZSBwaW4gY29uZmlybWF0aW9uXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuaXBpbi1kZWxldGUtcGluJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnI2RlbGV0ZS1waW4tbW9kYWwnKS5tb2RhbCgpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdFxuXHQvL2RlbGV0ZSBwaW5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNpcGluLWRlbGV0ZS1waW4tY29uZmlybWVkJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFqYXhsb2FkZXIgPSAkKCcuYWpheC1sb2FkZXItZGVsZXRlLXBpbicpO1xuXHRcdHZhciBkZWxldGVfYnRuID0gJCh0aGlzKTtcblx0XHR2YXJcdHBpbl9pZCA9IGRlbGV0ZV9idG4uZGF0YSgncGluX2lkJyk7XG5cdFx0dmFyXHRwaW5fYXV0aG9yID0gZGVsZXRlX2J0bi5kYXRhKCdwaW5fYXV0aG9yJyk7XG5cblx0XHRkZWxldGVfYnRuLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykucHJldigpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0YWpheGxvYWRlci5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG5cblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdGFjdGlvbjogJ2lwaW4tZGVsZXRlLXBpbicsXG5cdFx0XHRub25jZTogb2JqX2lwaW4ubm9uY2UsXG5cdFx0XHRwaW5faWQ6IHBpbl9pZCxcblx0XHRcdHBpbl9hdXRob3I6IHBpbl9hdXRob3Jcblx0XHR9O1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9IGRhdGE7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xuXHRcblx0Ly9yZXBsYWNlIGltYWdlIGluIGVkaXQgZm9ybVxuXHQkKCcjaXBpbl9yZXBsYWNlX2ltYWdlJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5lcnJvci1tc2ctcmVwbGFjZS1pbWFnZScpLmhpZGUoKTtcblx0XHQkKCcjaXBpbi1yZXBsYWNlLWltYWdlLWZvcm0nKS5zdWJtaXQoKTtcblx0fSk7XG5cdFxuXHRpZiAoJCgnI2lwaW4tcmVwbGFjZS1pbWFnZS1mb3JtJykubGVuZ3RoKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRiZWZvcmVTdWJtaXQ6IHNob3dSZXF1ZXN0X3JlcGxhY2VfaW1hZ2UsXG5cdFx0XHRzdWNjZXNzOiBzaG93UmVzcG9uc2VfcmVwbGFjZV9pbWFnZSxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybFxuXHRcdH07XG5cdFx0JCgnI2lwaW4tcmVwbGFjZS1pbWFnZS1mb3JtJykuYWpheEZvcm0ob3B0aW9ucyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzaG93UmVxdWVzdF9yZXBsYWNlX2ltYWdlKGZvcm1EYXRhLCBqcUZvcm0sIG9wdGlvbnMpIHtcblx0XHQkKCcjaXBpbi1yZXBsYWNlLWltYWdlLWZvcm0gLmFqYXgtbG9hZGVyLXJlcGxhY2UtaW1hZ2UnKS5zaG93KCk7XG5cblx0XHR2YXIgZXh0ID0gJCgnI2lwaW5fcmVwbGFjZV9pbWFnZScpLnZhbCgpLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTtcblx0XHRpZigkLmluQXJyYXkoZXh0LCBbJ2dpZicsJ3BuZycsJ2pwZycsJ2pwZWcnXSkgPT0gLTEpIHtcblx0XHRcdCQoJyNpcGluLXJlcGxhY2UtaW1hZ2UtZm9ybSAuYWpheC1sb2FkZXItcmVwbGFjZS1pbWFnZScpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2ctcmVwbGFjZS1pbWFnZScpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydFwiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW52YWxpZGltYWdlZmlsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gc2hvd1Jlc3BvbnNlX3JlcGxhY2VfaW1hZ2UocmVzcG9uc2VUZXh0LCBzdGF0dXNUZXh0LCB4aHIsICRmb3JtKSB7XG5cdFx0aWYgKHJlc3BvbnNlVGV4dCA9PSAnZXJyb3InKSB7XG5cdFx0XHQkKCcjaXBpbi1yZXBsYWNlLWltYWdlLWZvcm0gLmFqYXgtbG9hZGVyLXJlcGxhY2UtaW1hZ2UnKS5oaWRlKCk7XG5cdFx0XHQkKCcuZXJyb3ItbXNnLXJlcGxhY2UtaW1hZ2UnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnRcIj48c3Ryb25nPicgKyBvYmpfaXBpbi5fX2ludmFsaWRpbWFnZWZpbGUgICsgJzwvc3Ryb25nPjwvZGl2PicpLmZhZGVJbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjdGh1bWJuYWlsJykuYXR0cignc3JjJywgcmVzcG9uc2VUZXh0KTtcblx0XHRcdCQoJyNpcGluLXJlcGxhY2UtaW1hZ2UtZm9ybSAuYWpheC1sb2FkZXItcmVwbGFjZS1pbWFnZScpLmhpZGUoKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vZGVsZXRlIGFjY291bnQgY29uZmlybWF0aW9uXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjaXBpbi1kZWxldGUtYWNjb3VudCcsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNkZWxldGUtYWNjb3VudC1tb2RhbCcpLm1vZGFsKCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdC8vZGVsZXRlIGFjY291bnRcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNpcGluLWRlbGV0ZS1hY2NvdW50LWNvbmZpcm1lZCcsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhamF4bG9hZGVyID0gJCgnLmFqYXgtbG9hZGVyLWRlbGV0ZS1hY2NvdW50Jyk7XG5cdFx0dmFyIGRlbGV0ZV9idG4gPSAkKHRoaXMpO1xuXHRcdHZhclx0dXNlcl9pZCA9IGRlbGV0ZV9idG4uZGF0YSgndXNlcl9pZCcpO1xuXG5cdFx0ZGVsZXRlX2J0bi5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpLnByZXYoKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdGFqYXhsb2FkZXIuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuXG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRhY3Rpb246ICdpcGluLWRlbGV0ZS1hY2NvdW50Jyxcblx0XHRcdG5vbmNlOiBvYmpfaXBpbi5ub25jZSxcblx0XHRcdHVzZXJfaWQ6IHVzZXJfaWRcblx0XHR9O1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9IGRhdGE7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1x0XG5cdFxuXHQvL2xvZ2luIGZvcm0gY2hlY2tcblx0JChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjbG9naW5mb3JtJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLmVycm9yLW1zZy1pbmNvcnJlY3QnKS5oaWRlKCk7XG5cdFx0aWYgKCQoJyNsb2cnKS52YWwoKSA9PSAnJyB8fCAkKCcjcHdkJykudmFsKCkgPT0gJycpIHtcblx0XHRcdCQoJy5lcnJvci1tc2ctYmxhbmsnKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9fcGxlYXNlZW50ZXJib3RodXNlcm5hbWVhbmRwYXNzd29yZCAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9KTtcblx0XG5cdC8vYWpheCB1cGxvYWQgYXZhdGFyXG5cdCQoJyNpcGluX3VzZXJfYXZhdGFyJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5lcnJvci1tc2ctYXZhdGFyJykuaGlkZSgpO1xuXHRcdCQoJyNhdmF0YXJmb3JtJykuc3VibWl0KCk7XG5cdH0pO1xuXHRcblx0aWYgKCQoJyNhdmF0YXJmb3JtJykubGVuZ3RoKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRiZWZvcmVTdWJtaXQ6IHNob3dSZXF1ZXN0X2F2YXRhcixcblx0XHRcdHN1Y2Nlc3M6IHNob3dSZXNwb25zZV9hdmF0YXIsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmxcblx0XHR9O1xuXHRcdCQoJyNhdmF0YXJmb3JtJykuYWpheEZvcm0ob3B0aW9ucyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzaG93UmVxdWVzdF9hdmF0YXIoZm9ybURhdGEsIGpxRm9ybSwgb3B0aW9ucykge1xuXHRcdCQoJyNhdmF0YXJmb3JtIC5hamF4LWxvYWRlci1hdmF0YXInKS5zaG93KCk7XG5cblx0XHR2YXIgZXh0ID0gJCgnI2lwaW5fdXNlcl9hdmF0YXInKS52YWwoKS5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYoJC5pbkFycmF5KGV4dCwgWydnaWYnLCdwbmcnLCdqcGcnLCdqcGVnJ10pID09IC0xKSB7XG5cdFx0XHQkKCcjYXZhdGFyZm9ybSAuYWpheC1sb2FkZXItYXZhdGFyJykuaGlkZSgpO1xuXHRcdFx0JCgnLmVycm9yLW1zZy1hdmF0YXInKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW52YWxpZGltYWdlZmlsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gc2hvd1Jlc3BvbnNlX2F2YXRhcihyZXNwb25zZVRleHQsIHN0YXR1c1RleHQsIHhociwgJGZvcm0pIHtcblx0XHRpZiAocmVzcG9uc2VUZXh0ID09ICdlcnJvcicpIHtcblx0XHRcdCQoJyNhdmF0YXJmb3JtIC5hamF4LWxvYWRlci1hdmF0YXInKS5oaWRlKCk7XG5cdFx0XHQkKCcuZXJyb3ItbXNnLWF2YXRhcicpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PHN0cm9uZz4nICsgb2JqX2lwaW4uX19pbnZhbGlkaW1hZ2VmaWxlICArICc8L3N0cm9uZz48L2Rpdj4nKS5mYWRlSW4oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGRhdGEgPSAkLnBhcnNlSlNPTihyZXNwb25zZVRleHQpO1xuXHRcdFx0JCgnI2F2YXRhci13cmFwcGVyJykuZmFkZU91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI2F2YXRhci13cmFwcGVyIC5pbWctcG9sYXJvaWQnKS5hdHRyKCdzcmMnLCBkYXRhLnRodW1ibmFpbCk7XG5cdFx0XHRcdCQoJyNhdmF0YXItZGVsZXRlJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHRcdFx0JCgnI2F2YXRhcmZvcm0gLmFqYXgtbG9hZGVyLWF2YXRhcicpLmhpZGUoKTtcblx0XHRcdFx0JCgnI2NvdmVyZm9ybScpLmNzcygndG9wJywgJCgnI2F2YXRhcmZvcm0nKS5vZmZzZXQoKS50b3ArJCgnI2F2YXRhcmZvcm0nKS5oZWlnaHQoKSs1NCk7XG5cdFx0XHRcdCQoJyNhdmF0YXItYW5jaG9yJykuY3NzKCdtYXJnaW4tYm90dG9tJywgJCgnI2F2YXRhcmZvcm0nKS5oZWlnaHQoKSskKCcjY292ZXJmb3JtJykuaGVpZ2h0KCkrMTUzKTtcblx0XHRcdFx0JCgnI2F2YXRhci13cmFwcGVyJykuc2xpZGVEb3duKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvL2RlbGV0ZSBhdmF0YXJcblx0JCgnI2F2YXRhci1kZWxldGUnKS5vbignbW91c2V1cCcsIGZ1bmN0aW9uKCkgeyBcblx0XHR2YXIgYWpheGxvYWRlciA9ICQoJy5hamF4LWxvYWRlci1hdmF0YXInKTtcblx0XHR2YXIgZGVsZXRlX2J0biA9ICQodGhpcyk7XG5cdFx0dmFyIGlkID0gZGVsZXRlX2J0bi5kYXRhKCdpZCcpO1xuXHRcdGRlbGV0ZV9idG4uYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRhamF4bG9hZGVyLnNob3coKTtcblx0XG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRhY3Rpb246ICdpcGluLWRlbGV0ZS1hdmF0YXInLFxuXHRcdFx0bm9uY2U6IG9ial9pcGluLm5vbmNlLFxuXHRcdFx0aWQ6IGlkXG5cdFx0fTtcblxuXHRcdCQuYWpheCh7XG5cdFx0XHR0eXBlOiAncG9zdCcsXG5cdFx0XHR1cmw6IG9ial9pcGluLmFqYXh1cmwsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGFqYXhsb2FkZXIuaGlkZSgpO1xuXHRcdFx0XHQkKCcjYXZhdGFyLXdyYXBwZXInKS5mYWRlT3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoJyNjb3ZlcmZvcm0nKS5jc3MoJ3RvcCcsICQoJyNhdmF0YXJmb3JtJykub2Zmc2V0KCkudG9wKyQoJyNhdmF0YXJmb3JtJykuaGVpZ2h0KCktNjkpO1xuXHRcdFx0XHRcdCQoJyNhdmF0YXItYW5jaG9yJykuY3NzKCdtYXJnaW4tYm90dG9tJywgJCgnI2F2YXRhcmZvcm0nKS5oZWlnaHQoKSskKCcjY292ZXJmb3JtJykuaGVpZ2h0KCkrODApO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRcblx0Ly9hamF4IHVwbG9hZCBjb3ZlclxuXHQkKCcjaXBpbl91c2VyX2NvdmVyJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5lcnJvci1tc2ctY292ZXInKS5oaWRlKCk7XG5cdFx0JCgnI2NvdmVyZm9ybScpLnN1Ym1pdCgpO1xuXHR9KTtcblx0XG5cdGlmICgkKCcjY292ZXJmb3JtJykubGVuZ3RoKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRiZWZvcmVTdWJtaXQ6IHNob3dSZXF1ZXN0X2NvdmVyLFxuXHRcdFx0c3VjY2Vzczogc2hvd1Jlc3BvbnNlX2NvdmVyLFxuXHRcdFx0dXJsOiBvYmpfaXBpbi5hamF4dXJsXG5cdFx0fTtcblx0XHQkKCcjY292ZXJmb3JtJykuYWpheEZvcm0ob3B0aW9ucyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzaG93UmVxdWVzdF9jb3Zlcihmb3JtRGF0YSwganFGb3JtLCBvcHRpb25zKSB7XG5cdFx0JCgnI2NvdmVyZm9ybSAuYWpheC1sb2FkZXItY292ZXInKS5zaG93KCk7XG5cblx0XHR2YXIgZXh0ID0gJCgnI2lwaW5fdXNlcl9jb3ZlcicpLnZhbCgpLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTtcblx0XHRpZigkLmluQXJyYXkoZXh0LCBbJ2dpZicsJ3BuZycsJ2pwZycsJ2pwZWcnXSkgPT0gLTEpIHtcblx0XHRcdCQoJyNjb3ZlcmZvcm0gLmFqYXgtbG9hZGVyLWNvdmVyJykuaGlkZSgpO1xuXHRcdFx0JCgnLmVycm9yLW1zZy1jb3ZlcicpLmh0bWwoJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PHN0cm9uZz4nICsgb2JqX2lwaW4uX19pbnZhbGlkaW1hZ2VmaWxlICArICc8L3N0cm9uZz48L2Rpdj4nKS5mYWRlSW4oKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBzaG93UmVzcG9uc2VfY292ZXIocmVzcG9uc2VUZXh0LCBzdGF0dXNUZXh0LCB4aHIsICRmb3JtKSB7XG5cdFx0aWYgKHJlc3BvbnNlVGV4dCA9PSAnZXJyb3InKSB7XG5cdFx0XHQkKCcjY292ZXJmb3JtIC5hamF4LWxvYWRlci1jb3ZlcicpLmhpZGUoKTtcblx0XHRcdCQoJy5lcnJvci1tc2ctY292ZXInKS5odG1sKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPjxzdHJvbmc+JyArIG9ial9pcGluLl9faW52YWxpZGltYWdlZmlsZSAgKyAnPC9zdHJvbmc+PC9kaXY+JykuZmFkZUluKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBkYXRhID0gJC5wYXJzZUpTT04ocmVzcG9uc2VUZXh0KTtcblx0XHRcdCQoJyNjb3Zlci13cmFwcGVyJykuZmFkZU91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI2NvdmVyLXdyYXBwZXIgLmltZy1wb2xhcm9pZCcpLmF0dHIoJ3NyYycsIGRhdGEudGh1bWJuYWlsKTtcblx0XHRcdFx0JCgnI2NvdmVyLWRlbGV0ZScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdCQoJyNjb3ZlcmZvcm0gLmFqYXgtbG9hZGVyLWNvdmVyJykuaGlkZSgpO1xuXHRcdFx0XHQkKCcjYXZhdGFyLWFuY2hvcicpLmNzcygnbWFyZ2luLWJvdHRvbScsICQoJyNhdmF0YXJmb3JtJykuaGVpZ2h0KCkrJCgnI2NvdmVyZm9ybScpLmhlaWdodCgpKzE1Myk7XG5cdFx0XHRcdCQoJyNjb3Zlci13cmFwcGVyJykuc2xpZGVEb3duKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvL2RlbGV0ZSBjb3ZlclxuXHQkKCcjY292ZXItZGVsZXRlJykub24oJ21vdXNldXAnLCBmdW5jdGlvbigpIHsgXG5cdFx0dmFyIGFqYXhsb2FkZXIgPSAkKCcuYWpheC1sb2FkZXItY292ZXInKTtcblx0XHR2YXIgZGVsZXRlX2J0biA9ICQodGhpcyk7XG5cdFx0dmFyIGlkID0gZGVsZXRlX2J0bi5kYXRhKCdpZCcpO1xuXHRcdGRlbGV0ZV9idG4uYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRhamF4bG9hZGVyLnNob3coKTtcblx0XG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRhY3Rpb246ICdpcGluLWRlbGV0ZS1jb3ZlcicsXG5cdFx0XHRub25jZTogb2JqX2lwaW4ubm9uY2UsXG5cdFx0XHRpZDogaWRcblx0XHR9O1xuXG5cdFx0JC5hamF4KHtcblx0XHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRcdHVybDogb2JqX2lwaW4uYWpheHVybCxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0YWpheGxvYWRlci5oaWRlKCk7XG5cdFx0XHRcdCQoJyNjb3Zlci13cmFwcGVyJykuZmFkZU91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCcjYXZhdGFyLWFuY2hvcicpLmNzcygnbWFyZ2luLWJvdHRvbScsICQoJyNhdmF0YXJmb3JtJykuaGVpZ2h0KCkrJCgnI2NvdmVyZm9ybScpLmhlaWdodCgpKzMwKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0XG5cdC8va2l2OiBhbmltYXRlZCBnaWYgbW91c2VvdmVyXG5cdC8vc2xvdyB0byBsb2FkIGlmIGFuaW1hdGVkIGdpZiBmaWxlc2l6ZSBpcyBsYXJnZVxuXHQvKiAkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJy5mZWF0dXJlZC10aHVtYi1naWYtY2xhc3MnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJlbG9hZCA9IG5ldyBJbWFnZSgpO1xuXHRcdHByZWxvYWQuc3JjID0gJCh0aGlzKS5kYXRhKCdhbmltYXRlZC1naWYtc3JjLWZ1bGwnKTtcblx0XHQkKHRoaXMpLmF0dHIoJ3NyYycsIHByZWxvYWQuc3JjKVxuXHRcdFx0LnByZXYoJy5mZWF0dXJlZC10aHVtYi1naWYnKS5oaWRlKCk7XG5cdH0pO1xuXHRcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3V0JywgJy5mZWF0dXJlZC10aHVtYi1naWYtY2xhc3MnLCBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLmF0dHIoJ3NyYycsICQodGhpcykuZGF0YSgnYW5pbWF0ZWQtZ2lmLXNyYy1tZWRpdW0nKSlcblx0XHRcdC5wcmV2KCcuZmVhdHVyZWQtdGh1bWItZ2lmJykuc2hvdygpO1xuXHR9KTtcblx0Ki9cblx0XG5cdGZ1bmN0aW9uIHRvcEFsZXJ0TXNnKG1lc3NhZ2UpIHtcblx0ICAgIGlmICgkKCcjdG9wLWFsZXJ0LW1zZycpLmxlbmd0aCkge1xuXHRcdFx0JCgnI3RvcC1hbGVydC1tc2cnKS5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0JChcIjxkaXYgLz5cIiwgeyBcblx0XHRcdFx0aWQ6ICd0b3AtYWxlcnQtbXNnJyxcblx0XHRcdFx0aHRtbDogbWVzc2FnZSArICc8ZGl2IGlkPVwidG9wLWFsZXJ0LW1zZy1jbG9zZVwiPiZ0aW1lczs8L2Rpdj4nXG5cdFx0XHR9KVxuXHRcdFx0LmhpZGUoKVxuXHRcdFx0LnByZXBlbmRUbyhcImJvZHlcIilcblx0XHRcdC5zbGlkZURvd24oJ2Zhc3QnKVxuXHRcdFx0LmRlbGF5KDUwMDApXG5cdFx0XHQuc2xpZGVVcChmdW5jdGlvbigpIHsgXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7IFxuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0b3AtYWxlcnQtbXNnLWNsb3NlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCcjdG9wLWFsZXJ0LW1zZycpLnJlbW92ZSgpO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBsb2dpblBvcHVwKCkge1xuXHRcdGlmICgkKCcuY2hlY2stNDgwcHgnKS5jc3MoJ2Zsb2F0JykgPT0gJ2xlZnQnKSB7XG5cdFx0XHR0b3BBbGVydE1zZygnPGEgaHJlZj1cIicgKyBvYmpfaXBpbi5sb2dpbl91cmwgKyAnXCI+JyArIG9ial9pcGluLl9fUGxlYXNlbG9naW5vcnJlZ2lzdGVyaGVyZSArICc8L2E+Jyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICgkKCcjbG9naW5ib3gtd3JhcHBlciAucG9wb3ZlcicpLmxlbmd0aCkge1xuXHRcdFx0XHQkKCcjbG9naW5ib3gnKS5wb3BvdmVyKCdoaWRlJyk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdCQoJyN2aWRlby1lbWJlZCcpLnJlbW92ZSgpO1xuXHRcdFx0JCgnLmJyYW5kJykuZm9jdXMoKS5ibHVyKCk7XG5cblx0XHRcdGlmICgkKCcjcG9zdC1saWdodGJveCcpLmNzcygnZGlzcGxheScpID09ICdibG9jaycpIHtcblx0XHRcdFx0aWYgKCFpZTliZWxvdykge1xuXHRcdFx0XHRcdHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkKCcjcG9zdC1saWdodGJveCcpLm1vZGFsKCdoaWRlJyk7XG5cdFx0XHQkKCcjcG9wdXAtb3ZlcmxheScpLnNob3coKTtcblx0XHRcdCQoJyNwb3B1cC1sb2dpbi1ib3gnKS5tb2RhbCgpO1xuXHRcdH1cdFxuXHR9XG5cdFxuXHQvL2ZhY2Vib29rIGxpa2Ugd2l0aCBjb21tZW50XG5cdCQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgJy5mYi1saWtlJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcblx0fSk7XG5cdFxuXHQkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcuZmItbGlrZScsIGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblx0fSk7XG59KTsiXSwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==